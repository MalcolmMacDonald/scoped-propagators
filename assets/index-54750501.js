var yj=Object.defineProperty;var _j=(e,t,r)=>t in e?yj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var g=(e,t,r)=>(_j(e,typeof t!="symbol"?t+"":t,r),r);function wj(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const n=Object.getOwnPropertyDescriptor(a,s);n&&Object.defineProperty(e,s,n.get?n:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F7={exports:{}},Bh={},C7={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.element"),vj=Symbol.for("react.portal"),xj=Symbol.for("react.fragment"),Sj=Symbol.for("react.strict_mode"),kj=Symbol.for("react.profiler"),Fj=Symbol.for("react.provider"),Cj=Symbol.for("react.context"),Pj=Symbol.for("react.forward_ref"),Ij=Symbol.for("react.suspense"),Aj=Symbol.for("react.memo"),jj=Symbol.for("react.lazy"),L4=Symbol.iterator;function Ej(e){return e===null||typeof e!="object"?null:(e=L4&&e[L4]||e["@@iterator"],typeof e=="function"?e:null)}var P7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I7=Object.assign,A7={};function xl(e,t,r){this.props=e,this.context=t,this.refs=A7,this.updater=r||P7}xl.prototype.isReactComponent={};xl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j7(){}j7.prototype=xl.prototype;function dy(e,t,r){this.props=e,this.context=t,this.refs=A7,this.updater=r||P7}var uy=dy.prototype=new j7;uy.constructor=dy;I7(uy,xl.prototype);uy.isPureReactComponent=!0;var R4=Array.isArray,E7=Object.prototype.hasOwnProperty,py={current:null},D7={key:!0,ref:!0,__self:!0,__source:!0};function T7(e,t,r){var a,s={},n=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(n=""+t.key),t)E7.call(t,a)&&!D7.hasOwnProperty(a)&&(s[a]=t[a]);var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(a in i=e.defaultProps,i)s[a]===void 0&&(s[a]=i[a]);return{$$typeof:Id,type:e,key:n,ref:o,props:s,_owner:py.current}}function Dj(e,t){return{$$typeof:Id,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Id}function Tj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var O4=/\/+/g;function Yg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tj(""+e.key):t.toString(36)}function bp(e,t,r,a,s){var n=typeof e;(n==="undefined"||n==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(n){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Id:case vj:o=!0}}if(o)return o=e,s=s(o),e=a===""?"."+Yg(o,0):a,R4(s)?(r="",e!=null&&(r=e.replace(O4,"$&/")+"/"),bp(s,t,r,"",function(c){return c})):s!=null&&(fy(s)&&(s=Dj(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(O4,"$&/")+"/")+e)),t.push(s)),1;if(o=0,a=a===""?".":a+":",R4(e))for(var i=0;i<e.length;i++){n=e[i];var l=a+Yg(n,i);o+=bp(n,t,r,l,s)}else if(l=Ej(e),typeof l=="function")for(e=l.call(e),i=0;!(n=e.next()).done;)n=n.value,l=a+Yg(n,i++),o+=bp(n,t,r,l,s);else if(n==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hu(e,t,r){if(e==null)return e;var a=[],s=0;return bp(e,a,"","",function(n){return t.call(r,n,s++)}),a}function Mj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var hr={current:null},yp={transition:null},Bj={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:yp,ReactCurrentOwner:py};function M7(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:hu,forEach:function(e,t,r){hu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return hu(e,function(){t++}),t},toArray:function(e){return hu(e,function(t){return t})||[]},only:function(e){if(!fy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=xl;be.Fragment=xj;be.Profiler=kj;be.PureComponent=dy;be.StrictMode=Sj;be.Suspense=Ij;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bj;be.act=M7;be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=I7({},e.props),s=e.key,n=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(n=t.ref,o=py.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(l in t)E7.call(t,l)&&!D7.hasOwnProperty(l)&&(a[l]=t[l]===void 0&&i!==void 0?i[l]:t[l])}var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){i=Array(l);for(var c=0;c<l;c++)i[c]=arguments[c+2];a.children=i}return{$$typeof:Id,type:e.type,key:s,ref:n,props:a,_owner:o}};be.createContext=function(e){return e={$$typeof:Cj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fj,_context:e},e.Consumer=e};be.createElement=T7;be.createFactory=function(e){var t=T7.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:Pj,render:e}};be.isValidElement=fy;be.lazy=function(e){return{$$typeof:jj,_payload:{_status:-1,_result:e},_init:Mj}};be.memo=function(e,t){return{$$typeof:Aj,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=yp.transition;yp.transition={};try{e()}finally{yp.transition=t}};be.unstable_act=M7;be.useCallback=function(e,t){return hr.current.useCallback(e,t)};be.useContext=function(e){return hr.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return hr.current.useDeferredValue(e)};be.useEffect=function(e,t){return hr.current.useEffect(e,t)};be.useId=function(){return hr.current.useId()};be.useImperativeHandle=function(e,t,r){return hr.current.useImperativeHandle(e,t,r)};be.useInsertionEffect=function(e,t){return hr.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return hr.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return hr.current.useMemo(e,t)};be.useReducer=function(e,t,r){return hr.current.useReducer(e,t,r)};be.useRef=function(e){return hr.current.useRef(e)};be.useState=function(e){return hr.current.useState(e)};be.useSyncExternalStore=function(e,t,r){return hr.current.useSyncExternalStore(e,t,r)};be.useTransition=function(){return hr.current.useTransition()};be.version="18.3.1";C7.exports=be;var S=C7.exports;const _e=Yn(S),B7=wj({__proto__:null,default:_e},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lj=S,Rj=Symbol.for("react.element"),Oj=Symbol.for("react.fragment"),zj=Object.prototype.hasOwnProperty,Nj=Lj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qj={key:!0,ref:!0,__self:!0,__source:!0};function L7(e,t,r){var a,s={},n=null,o=null;r!==void 0&&(n=""+r),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)zj.call(t,a)&&!qj.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:Rj,type:e,key:n,ref:o,props:s,_owner:Nj.current}}Bh.Fragment=Oj;Bh.jsx=L7;Bh.jsxs=L7;F7.exports=Bh;var u=F7.exports,i1={},R7={exports:{}},oa={},O7={exports:{}},z7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,$){var U=O.length;O.push($);e:for(;0<U;){var X=U-1>>>1,ne=O[X];if(0<s(ne,$))O[X]=$,O[U]=ne,U=X;else break e}}function r(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var $=O[0],U=O.pop();if(U!==$){O[0]=U;e:for(var X=0,ne=O.length,Ae=ne>>>1;X<Ae;){var je=2*(X+1)-1,ie=O[je],qe=je+1,De=O[qe];if(0>s(ie,U))qe<ne&&0>s(De,ie)?(O[X]=De,O[qe]=U,X=qe):(O[X]=ie,O[je]=U,X=je);else if(qe<ne&&0>s(De,U))O[X]=De,O[qe]=U,X=qe;else break e}}return $}function s(O,$){var U=O.sortIndex-$.sortIndex;return U!==0?U:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;e.unstable_now=function(){return n.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var l=[],c=[],d=1,p=null,f=3,h=!1,y=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var $=r(c);$!==null;){if($.callback===null)a(c);else if($.startTime<=O)a(c),$.sortIndex=$.expirationTime,t(l,$);else break;$=r(c)}}function C(O){if(m=!1,x(O),!y)if(r(l)!==null)y=!0,G(k);else{var $=r(c);$!==null&&W(C,$.startTime-O)}}function k(O,$){y=!1,m&&(m=!1,b(I),I=-1),h=!0;var U=f;try{for(x($),p=r(l);p!==null&&(!(p.expirationTime>$)||O&&!D());){var X=p.callback;if(typeof X=="function"){p.callback=null,f=p.priorityLevel;var ne=X(p.expirationTime<=$);$=e.unstable_now(),typeof ne=="function"?p.callback=ne:p===r(l)&&a(l),x($)}else a(l);p=r(l)}if(p!==null)var Ae=!0;else{var je=r(c);je!==null&&W(C,je.startTime-$),Ae=!1}return Ae}finally{p=null,f=U,h=!1}}var F=!1,P=null,I=-1,j=5,A=-1;function D(){return!(e.unstable_now()-A<j)}function z(){if(P!==null){var O=e.unstable_now();A=O;var $=!0;try{$=P(!0,O)}finally{$?T():(F=!1,P=null)}}else F=!1}var T;if(typeof _=="function")T=function(){_(z)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=z,T=function(){L.postMessage(null)}}else T=function(){w(z,0)};function G(O){P=O,F||(F=!0,T())}function W(O,$){I=w(function(){O(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){y||h||(y=!0,G(k))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(O){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var U=f;f=$;try{return O()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=f;f=O;try{return $()}finally{f=U}},e.unstable_scheduleCallback=function(O,$,U){var X=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,O){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=U+ne,O={id:d++,callback:$,priorityLevel:O,startTime:U,expirationTime:ne,sortIndex:-1},U>X?(O.sortIndex=U,t(c,O),r(l)===null&&O===r(c)&&(m?(b(I),I=-1):m=!0,W(C,U-X))):(O.sortIndex=ne,t(l,O),y||h||(y=!0,G(k))),O},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(O){var $=f;return function(){var U=f;f=$;try{return O.apply(this,arguments)}finally{f=U}}}})(z7);O7.exports=z7;var $j=O7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uj=S,aa=$j;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N7=new Set,Gc={};function Vo(e,t){sl(e,t),sl(e+"Capture",t)}function sl(e,t){for(Gc[e]=t,e=0;e<t.length;e++)N7.add(t[e])}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l1=Object.prototype.hasOwnProperty,Wj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z4={},N4={};function Hj(e){return l1.call(N4,e)?!0:l1.call(z4,e)?!1:Wj.test(e)?N4[e]=!0:(z4[e]=!0,!1)}function Gj(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kj(e,t,r,a){if(t===null||typeof t>"u"||Gj(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gr(e,t,r,a,s,n,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ut[e]=new gr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ut[t]=new gr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ut[e]=new gr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ut[e]=new gr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ut[e]=new gr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ut[e]=new gr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ut[e]=new gr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ut[e]=new gr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ut[e]=new gr(e,5,!1,e.toLowerCase(),null,!1,!1)});var hy=/[\-:]([a-z])/g;function gy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hy,gy);Ut[t]=new gr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hy,gy);Ut[t]=new gr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hy,gy);Ut[t]=new gr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ut[e]=new gr(e,1,!1,e.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ut[e]=new gr(e,1,!1,e.toLowerCase(),null,!0,!0)});function my(e,t,r,a){var s=Ut.hasOwnProperty(t)?Ut[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kj(t,r,s,a)&&(r=null),a||s===null?Hj(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Qs=Uj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gu=Symbol.for("react.element"),vi=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),by=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),q7=Symbol.for("react.provider"),$7=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),u1=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),U7=Symbol.for("react.offscreen"),q4=Symbol.iterator;function Wl(e){return e===null||typeof e!="object"?null:(e=q4&&e[q4]||e["@@iterator"],typeof e=="function"?e:null)}var ut=Object.assign,Xg;function hc(e){if(Xg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Xg=t&&t[1]||""}return`
`+Xg+e}var Zg=!1;function Jg(e,t){if(!e||Zg)return"";Zg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),n=a.stack.split(`
`),o=s.length-1,i=n.length-1;1<=o&&0<=i&&s[o]!==n[i];)i--;for(;1<=o&&0<=i;o--,i--)if(s[o]!==n[i]){if(o!==1||i!==1)do if(o--,i--,0>i||s[o]!==n[i]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=i);break}}}finally{Zg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hc(e):""}function Vj(e){switch(e.tag){case 5:return hc(e.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return e=Jg(e.type,!1),e;case 11:return e=Jg(e.type.render,!1),e;case 1:return e=Jg(e.type,!0),e;default:return""}}function p1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xi:return"Fragment";case vi:return"Portal";case c1:return"Profiler";case by:return"StrictMode";case d1:return"Suspense";case u1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $7:return(e.displayName||"Context")+".Consumer";case q7:return(e._context.displayName||"Context")+".Provider";case yy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _y:return t=e.displayName||null,t!==null?t:p1(e.type)||"Memo";case yn:t=e._payload,e=e._init;try{return p1(e(t))}catch{}}return null}function Yj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return p1(t);case 8:return t===by?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W7(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xj(e){var t=W7(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,n=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){a=""+o,n.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mu(e){e._valueTracker||(e._valueTracker=Xj(e))}function H7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=W7(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function vf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function f1(e,t){var r=t.checked;return ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function $4(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Nn(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function G7(e,t){t=t.checked,t!=null&&my(e,"checked",t,!1)}function h1(e,t){G7(e,t);var r=Nn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?g1(e,t.type,r):t.hasOwnProperty("defaultValue")&&g1(e,t.type,Nn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function U4(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function g1(e,t,r){(t!=="number"||vf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gc=Array.isArray;function Ui(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Nn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function m1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function W4(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(gc(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Nn(r)}}function K7(e,t){var r=Nn(t.value),a=Nn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function H4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V7(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V7(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bu,Y7=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bu=bu||document.createElement("div"),bu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zj=["Webkit","ms","Moz","O"];Object.keys(jc).forEach(function(e){Zj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jc[t]=jc[e]})});function X7(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jc.hasOwnProperty(e)&&jc[e]?(""+t).trim():t+"px"}function Z7(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=X7(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var Jj=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function y1(e,t){if(t){if(Jj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function _1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w1=null;function wy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var v1=null,Wi=null,Hi=null;function G4(e){if(e=Ed(e)){if(typeof v1!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Nh(t),v1(e.stateNode,e.type,t))}}function J7(e){Wi?Hi?Hi.push(e):Hi=[e]:Wi=e}function Q7(){if(Wi){var e=Wi,t=Hi;if(Hi=Wi=null,G4(e),t)for(e=0;e<t.length;e++)G4(t[e])}}function ew(e,t){return e(t)}function tw(){}var Qg=!1;function rw(e,t,r){if(Qg)return e(t,r);Qg=!0;try{return ew(e,t,r)}finally{Qg=!1,(Wi!==null||Hi!==null)&&(tw(),Q7())}}function Vc(e,t){var r=e.stateNode;if(r===null)return null;var a=Nh(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var x1=!1;if(Ws)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){x1=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{x1=!1}function Qj(e,t,r,a,s,n,o,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Ec=!1,xf=null,Sf=!1,S1=null,eE={onError:function(e){Ec=!0,xf=e}};function tE(e,t,r,a,s,n,o,i,l){Ec=!1,xf=null,Qj.apply(eE,arguments)}function rE(e,t,r,a,s,n,o,i,l){if(tE.apply(this,arguments),Ec){if(Ec){var c=xf;Ec=!1,xf=null}else throw Error(Y(198));Sf||(Sf=!0,S1=c)}}function Yo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function aw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function K4(e){if(Yo(e)!==e)throw Error(Y(188))}function aE(e){var t=e.alternate;if(!t){if(t=Yo(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var n=s.alternate;if(n===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===n.child){for(n=s.child;n;){if(n===r)return K4(s),e;if(n===a)return K4(s),t;n=n.sibling}throw Error(Y(188))}if(r.return!==a.return)r=s,a=n;else{for(var o=!1,i=s.child;i;){if(i===r){o=!0,r=s,a=n;break}if(i===a){o=!0,a=s,r=n;break}i=i.sibling}if(!o){for(i=n.child;i;){if(i===r){o=!0,r=n,a=s;break}if(i===a){o=!0,a=n,r=s;break}i=i.sibling}if(!o)throw Error(Y(189))}}if(r.alternate!==a)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function sw(e){return e=aE(e),e!==null?nw(e):null}function nw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nw(e);if(t!==null)return t;e=e.sibling}return null}var ow=aa.unstable_scheduleCallback,V4=aa.unstable_cancelCallback,sE=aa.unstable_shouldYield,nE=aa.unstable_requestPaint,wt=aa.unstable_now,oE=aa.unstable_getCurrentPriorityLevel,vy=aa.unstable_ImmediatePriority,iw=aa.unstable_UserBlockingPriority,kf=aa.unstable_NormalPriority,iE=aa.unstable_LowPriority,lw=aa.unstable_IdlePriority,Lh=null,is=null;function lE(e){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Lh,e,void 0,(e.current.flags&128)===128)}catch{}}var Ra=Math.clz32?Math.clz32:uE,cE=Math.log,dE=Math.LN2;function uE(e){return e>>>=0,e===0?32:31-(cE(e)/dE|0)|0}var yu=64,_u=4194304;function mc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ff(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,n=e.pingedLanes,o=r&268435455;if(o!==0){var i=o&~s;i!==0?a=mc(i):(n&=o,n!==0&&(a=mc(n)))}else o=r&~s,o!==0?a=mc(o):n!==0&&(a=mc(n));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,n=t&-t,s>=n||s===16&&(n&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Ra(t),s=1<<r,a|=e[r],t&=~s;return a}function pE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fE(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,n=e.pendingLanes;0<n;){var o=31-Ra(n),i=1<<o,l=s[o];l===-1?(!(i&r)||i&a)&&(s[o]=pE(i,t)):l<=t&&(e.expiredLanes|=i),n&=~i}}function k1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cw(){var e=yu;return yu<<=1,!(yu&4194240)&&(yu=64),e}function em(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ad(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ra(t),e[t]=r}function hE(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ra(r),n=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~n}}function xy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Ra(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var Re=0;function dw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uw,Sy,pw,fw,hw,F1=!1,wu=[],An=null,jn=null,En=null,Yc=new Map,Xc=new Map,wn=[],gE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y4(e,t){switch(e){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Yc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(t.pointerId)}}function Gl(e,t,r,a,s,n){return e===null||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:n,targetContainers:[s]},t!==null&&(t=Ed(t),t!==null&&Sy(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function mE(e,t,r,a,s){switch(t){case"focusin":return An=Gl(An,e,t,r,a,s),!0;case"dragenter":return jn=Gl(jn,e,t,r,a,s),!0;case"mouseover":return En=Gl(En,e,t,r,a,s),!0;case"pointerover":var n=s.pointerId;return Yc.set(n,Gl(Yc.get(n)||null,e,t,r,a,s)),!0;case"gotpointercapture":return n=s.pointerId,Xc.set(n,Gl(Xc.get(n)||null,e,t,r,a,s)),!0}return!1}function gw(e){var t=wo(e.target);if(t!==null){var r=Yo(t);if(r!==null){if(t=r.tag,t===13){if(t=aw(r),t!==null){e.blockedOn=t,hw(e.priority,function(){pw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _p(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=C1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);w1=a,r.target.dispatchEvent(a),w1=null}else return t=Ed(r),t!==null&&Sy(t),e.blockedOn=r,!1;t.shift()}return!0}function X4(e,t,r){_p(e)&&r.delete(t)}function bE(){F1=!1,An!==null&&_p(An)&&(An=null),jn!==null&&_p(jn)&&(jn=null),En!==null&&_p(En)&&(En=null),Yc.forEach(X4),Xc.forEach(X4)}function Kl(e,t){e.blockedOn===t&&(e.blockedOn=null,F1||(F1=!0,aa.unstable_scheduleCallback(aa.unstable_NormalPriority,bE)))}function Zc(e){function t(s){return Kl(s,e)}if(0<wu.length){Kl(wu[0],e);for(var r=1;r<wu.length;r++){var a=wu[r];a.blockedOn===e&&(a.blockedOn=null)}}for(An!==null&&Kl(An,e),jn!==null&&Kl(jn,e),En!==null&&Kl(En,e),Yc.forEach(t),Xc.forEach(t),r=0;r<wn.length;r++)a=wn[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<wn.length&&(r=wn[0],r.blockedOn===null);)gw(r),r.blockedOn===null&&wn.shift()}var Gi=Qs.ReactCurrentBatchConfig,Cf=!0;function yE(e,t,r,a){var s=Re,n=Gi.transition;Gi.transition=null;try{Re=1,ky(e,t,r,a)}finally{Re=s,Gi.transition=n}}function _E(e,t,r,a){var s=Re,n=Gi.transition;Gi.transition=null;try{Re=4,ky(e,t,r,a)}finally{Re=s,Gi.transition=n}}function ky(e,t,r,a){if(Cf){var s=C1(e,t,r,a);if(s===null)dm(e,t,a,Pf,r),Y4(e,a);else if(mE(s,e,t,r,a))a.stopPropagation();else if(Y4(e,a),t&4&&-1<gE.indexOf(e)){for(;s!==null;){var n=Ed(s);if(n!==null&&uw(n),n=C1(e,t,r,a),n===null&&dm(e,t,a,Pf,r),n===s)break;s=n}s!==null&&a.stopPropagation()}else dm(e,t,a,null,r)}}var Pf=null;function C1(e,t,r,a){if(Pf=null,e=wy(a),e=wo(e),e!==null)if(t=Yo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=aw(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pf=e,null}function mw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oE()){case vy:return 1;case iw:return 4;case kf:case iE:return 16;case lw:return 536870912;default:return 16}default:return 16}}var Sn=null,Fy=null,wp=null;function bw(){if(wp)return wp;var e,t=Fy,r=t.length,a,s="value"in Sn?Sn.value:Sn.textContent,n=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(a=1;a<=o&&t[r-a]===s[n-a];a++);return wp=s.slice(e,1<a?1-a:void 0)}function vp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vu(){return!0}function Z4(){return!1}function ia(e){function t(r,a,s,n,o){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=n,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(n):n[i]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?vu:Z4,this.isPropagationStopped=Z4,this}return ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),t}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cy=ia(Sl),jd=ut({},Sl,{view:0,detail:0}),wE=ia(jd),tm,rm,Vl,Rh=ut({},jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Py,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vl&&(Vl&&e.type==="mousemove"?(tm=e.screenX-Vl.screenX,rm=e.screenY-Vl.screenY):rm=tm=0,Vl=e),tm)},movementY:function(e){return"movementY"in e?e.movementY:rm}}),J4=ia(Rh),vE=ut({},Rh,{dataTransfer:0}),xE=ia(vE),SE=ut({},jd,{relatedTarget:0}),am=ia(SE),kE=ut({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),FE=ia(kE),CE=ut({},Sl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PE=ia(CE),IE=ut({},Sl,{data:0}),Q4=ia(IE),AE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EE[e])?!!t[e]:!1}function Py(){return DE}var TE=ut({},jd,{key:function(e){if(e.key){var t=AE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Py,charCode:function(e){return e.type==="keypress"?vp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ME=ia(TE),BE=ut({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e8=ia(BE),LE=ut({},jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Py}),RE=ia(LE),OE=ut({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),zE=ia(OE),NE=ut({},Rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qE=ia(NE),$E=[9,13,27,32],Iy=Ws&&"CompositionEvent"in window,Dc=null;Ws&&"documentMode"in document&&(Dc=document.documentMode);var UE=Ws&&"TextEvent"in window&&!Dc,yw=Ws&&(!Iy||Dc&&8<Dc&&11>=Dc),t8=String.fromCharCode(32),r8=!1;function _w(e,t){switch(e){case"keyup":return $E.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ww(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Si=!1;function WE(e,t){switch(e){case"compositionend":return ww(t);case"keypress":return t.which!==32?null:(r8=!0,t8);case"textInput":return e=t.data,e===t8&&r8?null:e;default:return null}}function HE(e,t){if(Si)return e==="compositionend"||!Iy&&_w(e,t)?(e=bw(),wp=Fy=Sn=null,Si=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yw&&t.locale!=="ko"?null:t.data;default:return null}}var GE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!GE[e.type]:t==="textarea"}function vw(e,t,r,a){J7(a),t=If(t,"onChange"),0<t.length&&(r=new Cy("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Tc=null,Jc=null;function KE(e){Dw(e,0)}function Oh(e){var t=Ci(e);if(H7(t))return e}function VE(e,t){if(e==="change")return t}var xw=!1;if(Ws){var sm;if(Ws){var nm="oninput"in document;if(!nm){var s8=document.createElement("div");s8.setAttribute("oninput","return;"),nm=typeof s8.oninput=="function"}sm=nm}else sm=!1;xw=sm&&(!document.documentMode||9<document.documentMode)}function n8(){Tc&&(Tc.detachEvent("onpropertychange",Sw),Jc=Tc=null)}function Sw(e){if(e.propertyName==="value"&&Oh(Jc)){var t=[];vw(t,Jc,e,wy(e)),rw(KE,t)}}function YE(e,t,r){e==="focusin"?(n8(),Tc=t,Jc=r,Tc.attachEvent("onpropertychange",Sw)):e==="focusout"&&n8()}function XE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oh(Jc)}function ZE(e,t){if(e==="click")return Oh(t)}function JE(e,t){if(e==="input"||e==="change")return Oh(t)}function QE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qa=typeof Object.is=="function"?Object.is:QE;function Qc(e,t){if(qa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!l1.call(t,s)||!qa(e[s],t[s]))return!1}return!0}function o8(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i8(e,t){var r=o8(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=o8(r)}}function kw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fw(){for(var e=window,t=vf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vf(e.document)}return t}function Ay(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eD(e){var t=Fw(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kw(r.ownerDocument.documentElement,r)){if(a!==null&&Ay(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,n=Math.min(a.start,s);a=a.end===void 0?n:Math.min(a.end,s),!e.extend&&n>a&&(s=a,a=n,n=s),s=i8(r,n);var o=i8(r,a);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),n>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tD=Ws&&"documentMode"in document&&11>=document.documentMode,ki=null,P1=null,Mc=null,I1=!1;function l8(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;I1||ki==null||ki!==vf(a)||(a=ki,"selectionStart"in a&&Ay(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Mc&&Qc(Mc,a)||(Mc=a,a=If(P1,"onSelect"),0<a.length&&(t=new Cy("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ki)))}function xu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fi={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},om={},Cw={};Ws&&(Cw=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function zh(e){if(om[e])return om[e];if(!Fi[e])return e;var t=Fi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Cw)return om[e]=t[r];return e}var Pw=zh("animationend"),Iw=zh("animationiteration"),Aw=zh("animationstart"),jw=zh("transitionend"),Ew=new Map,c8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,t){Ew.set(e,t),Vo(t,[e])}for(var im=0;im<c8.length;im++){var lm=c8[im],rD=lm.toLowerCase(),aD=lm[0].toUpperCase()+lm.slice(1);Xn(rD,"on"+aD)}Xn(Pw,"onAnimationEnd");Xn(Iw,"onAnimationIteration");Xn(Aw,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(jw,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sD=new Set("cancel close invalid load scroll toggle".split(" ").concat(bc));function d8(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,rE(a,t,void 0,e),e.currentTarget=null}function Dw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var n=void 0;if(t)for(var o=a.length-1;0<=o;o--){var i=a[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==n&&s.isPropagationStopped())break e;d8(s,i,c),n=l}else for(o=0;o<a.length;o++){if(i=a[o],l=i.instance,c=i.currentTarget,i=i.listener,l!==n&&s.isPropagationStopped())break e;d8(s,i,c),n=l}}}if(Sf)throw e=S1,Sf=!1,S1=null,e}function Ye(e,t){var r=t[T1];r===void 0&&(r=t[T1]=new Set);var a=e+"__bubble";r.has(a)||(Tw(t,e,2,!1),r.add(a))}function cm(e,t,r){var a=0;t&&(a|=4),Tw(r,e,a,t)}var Su="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Su]){e[Su]=!0,N7.forEach(function(r){r!=="selectionchange"&&(sD.has(r)||cm(r,!1,e),cm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Su]||(t[Su]=!0,cm("selectionchange",!1,t))}}function Tw(e,t,r,a){switch(mw(t)){case 1:var s=yE;break;case 4:s=_E;break;default:s=ky}r=s.bind(null,t,r,e),s=void 0,!x1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function dm(e,t,r,a,s){var n=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var i=a.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(o===4)for(o=a.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;i!==null;){if(o=wo(i),o===null)return;if(l=o.tag,l===5||l===6){a=n=o;continue e}i=i.parentNode}}a=a.return}rw(function(){var c=n,d=wy(r),p=[];e:{var f=Ew.get(e);if(f!==void 0){var h=Cy,y=e;switch(e){case"keypress":if(vp(r)===0)break e;case"keydown":case"keyup":h=ME;break;case"focusin":y="focus",h=am;break;case"focusout":y="blur",h=am;break;case"beforeblur":case"afterblur":h=am;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=J4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=xE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=RE;break;case Pw:case Iw:case Aw:h=FE;break;case jw:h=zE;break;case"scroll":h=wE;break;case"wheel":h=qE;break;case"copy":case"cut":case"paste":h=PE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=e8}var m=(t&4)!==0,w=!m&&e==="scroll",b=m?f!==null?f+"Capture":null:f;m=[];for(var _=c,x;_!==null;){x=_;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,b!==null&&(C=Vc(_,b),C!=null&&m.push(td(_,C,x)))),w)break;_=_.return}0<m.length&&(f=new h(f,y,null,r,d),p.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&r!==w1&&(y=r.relatedTarget||r.fromElement)&&(wo(y)||y[Hs]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(y=r.relatedTarget||r.toElement,h=c,y=y?wo(y):null,y!==null&&(w=Yo(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=c),h!==y)){if(m=J4,C="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(m=e8,C="onPointerLeave",b="onPointerEnter",_="pointer"),w=h==null?f:Ci(h),x=y==null?f:Ci(y),f=new m(C,_+"leave",h,r,d),f.target=w,f.relatedTarget=x,C=null,wo(d)===c&&(m=new m(b,_+"enter",y,r,d),m.target=x,m.relatedTarget=w,C=m),w=C,h&&y)t:{for(m=h,b=y,_=0,x=m;x;x=ri(x))_++;for(x=0,C=b;C;C=ri(C))x++;for(;0<_-x;)m=ri(m),_--;for(;0<x-_;)b=ri(b),x--;for(;_--;){if(m===b||b!==null&&m===b.alternate)break t;m=ri(m),b=ri(b)}m=null}else m=null;h!==null&&u8(p,f,h,m,!1),y!==null&&w!==null&&u8(p,w,y,m,!0)}}e:{if(f=c?Ci(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=VE;else if(a8(f))if(xw)k=JE;else{k=XE;var F=YE}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=ZE);if(k&&(k=k(e,c))){vw(p,k,r,d);break e}F&&F(e,f,c),e==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&g1(f,"number",f.value)}switch(F=c?Ci(c):window,e){case"focusin":(a8(F)||F.contentEditable==="true")&&(ki=F,P1=c,Mc=null);break;case"focusout":Mc=P1=ki=null;break;case"mousedown":I1=!0;break;case"contextmenu":case"mouseup":case"dragend":I1=!1,l8(p,r,d);break;case"selectionchange":if(tD)break;case"keydown":case"keyup":l8(p,r,d)}var P;if(Iy)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Si?_w(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(yw&&r.locale!=="ko"&&(Si||I!=="onCompositionStart"?I==="onCompositionEnd"&&Si&&(P=bw()):(Sn=d,Fy="value"in Sn?Sn.value:Sn.textContent,Si=!0)),F=If(c,I),0<F.length&&(I=new Q4(I,e,null,r,d),p.push({event:I,listeners:F}),P?I.data=P:(P=ww(r),P!==null&&(I.data=P)))),(P=UE?WE(e,r):HE(e,r))&&(c=If(c,"onBeforeInput"),0<c.length&&(d=new Q4("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:c}),d.data=P))}Dw(p,t)})}function td(e,t,r){return{instance:e,listener:t,currentTarget:r}}function If(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,n=s.stateNode;s.tag===5&&n!==null&&(s=n,n=Vc(e,r),n!=null&&a.unshift(td(e,n,s)),n=Vc(e,t),n!=null&&a.push(td(e,n,s))),e=e.return}return a}function ri(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function u8(e,t,r,a,s){for(var n=t._reactName,o=[];r!==null&&r!==a;){var i=r,l=i.alternate,c=i.stateNode;if(l!==null&&l===a)break;i.tag===5&&c!==null&&(i=c,s?(l=Vc(r,n),l!=null&&o.unshift(td(r,l,i))):s||(l=Vc(r,n),l!=null&&o.push(td(r,l,i)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var nD=/\r\n?/g,oD=/\u0000|\uFFFD/g;function p8(e){return(typeof e=="string"?e:""+e).replace(nD,`
`).replace(oD,"")}function ku(e,t,r){if(t=p8(t),p8(e)!==t&&r)throw Error(Y(425))}function Af(){}var A1=null,j1=null;function E1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D1=typeof setTimeout=="function"?setTimeout:void 0,iD=typeof clearTimeout=="function"?clearTimeout:void 0,f8=typeof Promise=="function"?Promise:void 0,lD=typeof queueMicrotask=="function"?queueMicrotask:typeof f8<"u"?function(e){return f8.resolve(null).then(e).catch(cD)}:D1;function cD(e){setTimeout(function(){throw e})}function um(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),Zc(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);Zc(t)}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function h8(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var kl=Math.random().toString(36).slice(2),rs="__reactFiber$"+kl,rd="__reactProps$"+kl,Hs="__reactContainer$"+kl,T1="__reactEvents$"+kl,dD="__reactListeners$"+kl,uD="__reactHandles$"+kl;function wo(e){var t=e[rs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Hs]||r[rs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=h8(e);e!==null;){if(r=e[rs])return r;e=h8(e)}return t}e=r,r=e.parentNode}return null}function Ed(e){return e=e[rs]||e[Hs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Nh(e){return e[rd]||null}var M1=[],Pi=-1;function Zn(e){return{current:e}}function Ze(e){0>Pi||(e.current=M1[Pi],M1[Pi]=null,Pi--)}function He(e,t){Pi++,M1[Pi]=e.current,e.current=t}var qn={},sr=Zn(qn),Tr=Zn(!1),Eo=qn;function nl(e,t){var r=e.type.contextTypes;if(!r)return qn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},n;for(n in r)s[n]=t[n];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mr(e){return e=e.childContextTypes,e!=null}function jf(){Ze(Tr),Ze(sr)}function g8(e,t,r){if(sr.current!==qn)throw Error(Y(168));He(sr,t),He(Tr,r)}function Mw(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(Y(108,Yj(e)||"Unknown",s));return ut({},r,a)}function Ef(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qn,Eo=sr.current,He(sr,e),He(Tr,Tr.current),!0}function m8(e,t,r){var a=e.stateNode;if(!a)throw Error(Y(169));r?(e=Mw(e,t,Eo),a.__reactInternalMemoizedMergedChildContext=e,Ze(Tr),Ze(sr),He(sr,e)):Ze(Tr),He(Tr,r)}var Ts=null,qh=!1,pm=!1;function Bw(e){Ts===null?Ts=[e]:Ts.push(e)}function pD(e){qh=!0,Bw(e)}function Jn(){if(!pm&&Ts!==null){pm=!0;var e=0,t=Re;try{var r=Ts;for(Re=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Ts=null,qh=!1}catch(s){throw Ts!==null&&(Ts=Ts.slice(e+1)),ow(vy,Jn),s}finally{Re=t,pm=!1}}return null}var Ii=[],Ai=0,Df=null,Tf=0,ga=[],ma=0,Do=null,Bs=1,Ls="";function bo(e,t){Ii[Ai++]=Tf,Ii[Ai++]=Df,Df=e,Tf=t}function Lw(e,t,r){ga[ma++]=Bs,ga[ma++]=Ls,ga[ma++]=Do,Do=e;var a=Bs;e=Ls;var s=32-Ra(a)-1;a&=~(1<<s),r+=1;var n=32-Ra(t)+s;if(30<n){var o=s-s%5;n=(a&(1<<o)-1).toString(32),a>>=o,s-=o,Bs=1<<32-Ra(t)+s|r<<s|a,Ls=n+e}else Bs=1<<n|r<<s|a,Ls=e}function jy(e){e.return!==null&&(bo(e,1),Lw(e,1,0))}function Ey(e){for(;e===Df;)Df=Ii[--Ai],Ii[Ai]=null,Tf=Ii[--Ai],Ii[Ai]=null;for(;e===Do;)Do=ga[--ma],ga[ma]=null,Ls=ga[--ma],ga[ma]=null,Bs=ga[--ma],ga[ma]=null}var Qr=null,Jr=null,tt=!1,Ma=null;function Rw(e,t){var r=ya(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function b8(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,Jr=Dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,Jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Do!==null?{id:Bs,overflow:Ls}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ya(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qr=e,Jr=null,!0):!1;default:return!1}}function B1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function L1(e){if(tt){var t=Jr;if(t){var r=t;if(!b8(e,t)){if(B1(e))throw Error(Y(418));t=Dn(r.nextSibling);var a=Qr;t&&b8(e,t)?Rw(a,r):(e.flags=e.flags&-4097|2,tt=!1,Qr=e)}}else{if(B1(e))throw Error(Y(418));e.flags=e.flags&-4097|2,tt=!1,Qr=e}}}function y8(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Fu(e){if(e!==Qr)return!1;if(!tt)return y8(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!E1(e.type,e.memoizedProps)),t&&(t=Jr)){if(B1(e))throw Ow(),Error(Y(418));for(;t;)Rw(e,t),t=Dn(t.nextSibling)}if(y8(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Jr=Dn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Jr=null}}else Jr=Qr?Dn(e.stateNode.nextSibling):null;return!0}function Ow(){for(var e=Jr;e;)e=Dn(e.nextSibling)}function ol(){Jr=Qr=null,tt=!1}function Dy(e){Ma===null?Ma=[e]:Ma.push(e)}var fD=Qs.ReactCurrentBatchConfig;function Yl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var a=r.stateNode}if(!a)throw Error(Y(147,e));var s=a,n=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===n?t.ref:(t=function(o){var i=s.refs;o===null?delete i[n]:i[n]=o},t._stringRef=n,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function Cu(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _8(e){var t=e._init;return t(e._payload)}function zw(e){function t(b,_){if(e){var x=b.deletions;x===null?(b.deletions=[_],b.flags|=16):x.push(_)}}function r(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function a(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=Ln(b,_),b.index=0,b.sibling=null,b}function n(b,_,x){return b.index=x,e?(x=b.alternate,x!==null?(x=x.index,x<_?(b.flags|=2,_):x):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function i(b,_,x,C){return _===null||_.tag!==6?(_=_m(x,b.mode,C),_.return=b,_):(_=s(_,x),_.return=b,_)}function l(b,_,x,C){var k=x.type;return k===xi?d(b,_,x.props.children,C,x.key):_!==null&&(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===yn&&_8(k)===_.type)?(C=s(_,x.props),C.ref=Yl(b,_,x),C.return=b,C):(C=Ip(x.type,x.key,x.props,null,b.mode,C),C.ref=Yl(b,_,x),C.return=b,C)}function c(b,_,x,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=wm(x,b.mode,C),_.return=b,_):(_=s(_,x.children||[]),_.return=b,_)}function d(b,_,x,C,k){return _===null||_.tag!==7?(_=Io(x,b.mode,C,k),_.return=b,_):(_=s(_,x),_.return=b,_)}function p(b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_m(""+_,b.mode,x),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gu:return x=Ip(_.type,_.key,_.props,null,b.mode,x),x.ref=Yl(b,null,_),x.return=b,x;case vi:return _=wm(_,b.mode,x),_.return=b,_;case yn:var C=_._init;return p(b,C(_._payload),x)}if(gc(_)||Wl(_))return _=Io(_,b.mode,x,null),_.return=b,_;Cu(b,_)}return null}function f(b,_,x,C){var k=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:i(b,_,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gu:return x.key===k?l(b,_,x,C):null;case vi:return x.key===k?c(b,_,x,C):null;case yn:return k=x._init,f(b,_,k(x._payload),C)}if(gc(x)||Wl(x))return k!==null?null:d(b,_,x,C,null);Cu(b,x)}return null}function h(b,_,x,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(x)||null,i(_,b,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case gu:return b=b.get(C.key===null?x:C.key)||null,l(_,b,C,k);case vi:return b=b.get(C.key===null?x:C.key)||null,c(_,b,C,k);case yn:var F=C._init;return h(b,_,x,F(C._payload),k)}if(gc(C)||Wl(C))return b=b.get(x)||null,d(_,b,C,k,null);Cu(_,C)}return null}function y(b,_,x,C){for(var k=null,F=null,P=_,I=_=0,j=null;P!==null&&I<x.length;I++){P.index>I?(j=P,P=null):j=P.sibling;var A=f(b,P,x[I],C);if(A===null){P===null&&(P=j);break}e&&P&&A.alternate===null&&t(b,P),_=n(A,_,I),F===null?k=A:F.sibling=A,F=A,P=j}if(I===x.length)return r(b,P),tt&&bo(b,I),k;if(P===null){for(;I<x.length;I++)P=p(b,x[I],C),P!==null&&(_=n(P,_,I),F===null?k=P:F.sibling=P,F=P);return tt&&bo(b,I),k}for(P=a(b,P);I<x.length;I++)j=h(P,b,I,x[I],C),j!==null&&(e&&j.alternate!==null&&P.delete(j.key===null?I:j.key),_=n(j,_,I),F===null?k=j:F.sibling=j,F=j);return e&&P.forEach(function(D){return t(b,D)}),tt&&bo(b,I),k}function m(b,_,x,C){var k=Wl(x);if(typeof k!="function")throw Error(Y(150));if(x=k.call(x),x==null)throw Error(Y(151));for(var F=k=null,P=_,I=_=0,j=null,A=x.next();P!==null&&!A.done;I++,A=x.next()){P.index>I?(j=P,P=null):j=P.sibling;var D=f(b,P,A.value,C);if(D===null){P===null&&(P=j);break}e&&P&&D.alternate===null&&t(b,P),_=n(D,_,I),F===null?k=D:F.sibling=D,F=D,P=j}if(A.done)return r(b,P),tt&&bo(b,I),k;if(P===null){for(;!A.done;I++,A=x.next())A=p(b,A.value,C),A!==null&&(_=n(A,_,I),F===null?k=A:F.sibling=A,F=A);return tt&&bo(b,I),k}for(P=a(b,P);!A.done;I++,A=x.next())A=h(P,b,I,A.value,C),A!==null&&(e&&A.alternate!==null&&P.delete(A.key===null?I:A.key),_=n(A,_,I),F===null?k=A:F.sibling=A,F=A);return e&&P.forEach(function(z){return t(b,z)}),tt&&bo(b,I),k}function w(b,_,x,C){if(typeof x=="object"&&x!==null&&x.type===xi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case gu:e:{for(var k=x.key,F=_;F!==null;){if(F.key===k){if(k=x.type,k===xi){if(F.tag===7){r(b,F.sibling),_=s(F,x.props.children),_.return=b,b=_;break e}}else if(F.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===yn&&_8(k)===F.type){r(b,F.sibling),_=s(F,x.props),_.ref=Yl(b,F,x),_.return=b,b=_;break e}r(b,F);break}else t(b,F);F=F.sibling}x.type===xi?(_=Io(x.props.children,b.mode,C,x.key),_.return=b,b=_):(C=Ip(x.type,x.key,x.props,null,b.mode,C),C.ref=Yl(b,_,x),C.return=b,b=C)}return o(b);case vi:e:{for(F=x.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){r(b,_.sibling),_=s(_,x.children||[]),_.return=b,b=_;break e}else{r(b,_);break}else t(b,_);_=_.sibling}_=wm(x,b.mode,C),_.return=b,b=_}return o(b);case yn:return F=x._init,w(b,_,F(x._payload),C)}if(gc(x))return y(b,_,x,C);if(Wl(x))return m(b,_,x,C);Cu(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(r(b,_.sibling),_=s(_,x),_.return=b,b=_):(r(b,_),_=_m(x,b.mode,C),_.return=b,b=_),o(b)):r(b,_)}return w}var il=zw(!0),Nw=zw(!1),Mf=Zn(null),Bf=null,ji=null,Ty=null;function My(){Ty=ji=Bf=null}function By(e){var t=Mf.current;Ze(Mf),e._currentValue=t}function R1(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Ki(e,t){Bf=e,Ty=ji=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ar=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(Ty!==e)if(e={context:e,memoizedValue:t,next:null},ji===null){if(Bf===null)throw Error(Y(308));ji=e,Bf.dependencies={lanes:0,firstContext:e}}else ji=ji.next=e;return t}var vo=null;function Ly(e){vo===null?vo=[e]:vo.push(e)}function qw(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,Ly(t)):(r.next=s.next,s.next=r),t.interleaved=r,Gs(e,a)}function Gs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var _n=!1;function Ry(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $w(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tn(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Fe&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Gs(e,r)}return s=a.interleaved,s===null?(t.next=t,Ly(a)):(t.next=s.next,s.next=t),a.interleaved=t,Gs(e,r)}function xp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,xy(e,r)}}function w8(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,n=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};n===null?s=n=o:n=n.next=o,r=r.next}while(r!==null);n===null?s=n=t:n=n.next=t}else s=n=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Lf(e,t,r,a){var s=e.updateQueue;_n=!1;var n=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var l=i,c=l.next;l.next=null,o===null?n=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,i=d.lastBaseUpdate,i!==o&&(i===null?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(n!==null){var p=s.baseState;o=0,d=c=l=null,i=n;do{var f=i.lane,h=i.eventTime;if((a&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,m=i;switch(f=t,h=r,m.tag){case 1:if(y=m.payload,typeof y=="function"){p=y.call(h,p,f);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,f=typeof y=="function"?y.call(h,p,f):y,f==null)break e;p=ut({},p,f);break e;case 2:_n=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[i]:f.push(i))}else h={eventTime:h,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,o|=f;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;f=i,i=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else n===null&&(s.shared.lanes=0);Mo|=o,e.lanes=o,e.memoizedState=p}}function v8(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(Y(191,s));s.call(a)}}}var Dd={},ls=Zn(Dd),ad=Zn(Dd),sd=Zn(Dd);function xo(e){if(e===Dd)throw Error(Y(174));return e}function Oy(e,t){switch(He(sd,t),He(ad,e),He(ls,Dd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:b1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=b1(t,e)}Ze(ls),He(ls,t)}function ll(){Ze(ls),Ze(ad),Ze(sd)}function Uw(e){xo(sd.current);var t=xo(ls.current),r=b1(t,e.type);t!==r&&(He(ad,e),He(ls,r))}function zy(e){ad.current===e&&(Ze(ls),Ze(ad))}var it=Zn(0);function Rf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fm=[];function Ny(){for(var e=0;e<fm.length;e++)fm[e]._workInProgressVersionPrimary=null;fm.length=0}var Sp=Qs.ReactCurrentDispatcher,hm=Qs.ReactCurrentBatchConfig,To=0,dt=null,kt=null,It=null,Of=!1,Bc=!1,nd=0,hD=0;function Kt(){throw Error(Y(321))}function qy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qa(e[r],t[r]))return!1;return!0}function $y(e,t,r,a,s,n){if(To=n,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sp.current=e===null||e.memoizedState===null?yD:_D,e=r(a,s),Bc){n=0;do{if(Bc=!1,nd=0,25<=n)throw Error(Y(301));n+=1,It=kt=null,t.updateQueue=null,Sp.current=wD,e=r(a,s)}while(Bc)}if(Sp.current=zf,t=kt!==null&&kt.next!==null,To=0,It=kt=dt=null,Of=!1,t)throw Error(Y(300));return e}function Uy(){var e=nd!==0;return nd=0,e}function Qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?dt.memoizedState=It=e:It=It.next=e,It}function Sa(){if(kt===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var t=It===null?dt.memoizedState:It.next;if(t!==null)It=t,kt=e;else{if(e===null)throw Error(Y(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},It===null?dt.memoizedState=It=e:It=It.next=e}return It}function od(e,t){return typeof t=="function"?t(e):t}function gm(e){var t=Sa(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var a=kt,s=a.baseQueue,n=r.pending;if(n!==null){if(s!==null){var o=s.next;s.next=n.next,n.next=o}a.baseQueue=s=n,r.pending=null}if(s!==null){n=s.next,a=a.baseState;var i=o=null,l=null,c=n;do{var d=c.lane;if((To&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(i=l=p,o=a):l=l.next=p,dt.lanes|=d,Mo|=d}c=c.next}while(c!==null&&c!==n);l===null?o=a:l.next=i,qa(a,t.memoizedState)||(Ar=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=l,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do n=s.lane,dt.lanes|=n,Mo|=n,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function mm(e){var t=Sa(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,n=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do n=e(n,o.action),o=o.next;while(o!==s);qa(n,t.memoizedState)||(Ar=!0),t.memoizedState=n,t.baseQueue===null&&(t.baseState=n),r.lastRenderedState=n}return[n,a]}function Ww(){}function Hw(e,t){var r=dt,a=Sa(),s=t(),n=!qa(a.memoizedState,s);if(n&&(a.memoizedState=s,Ar=!0),a=a.queue,Wy(Vw.bind(null,r,a,e),[e]),a.getSnapshot!==t||n||It!==null&&It.memoizedState.tag&1){if(r.flags|=2048,id(9,Kw.bind(null,r,a,s,t),void 0,null),jt===null)throw Error(Y(349));To&30||Gw(r,t,s)}return s}function Gw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Kw(e,t,r,a){t.value=r,t.getSnapshot=a,Yw(t)&&Xw(e)}function Vw(e,t,r){return r(function(){Yw(t)&&Xw(e)})}function Yw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qa(e,r)}catch{return!0}}function Xw(e){var t=Gs(e,1);t!==null&&Oa(t,e,1,-1)}function x8(e){var t=Qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:e},t.queue=e,e=e.dispatch=bD.bind(null,dt,e),[t.memoizedState,e]}function id(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Zw(){return Sa().memoizedState}function kp(e,t,r,a){var s=Qa();dt.flags|=e,s.memoizedState=id(1|t,r,void 0,a===void 0?null:a)}function $h(e,t,r,a){var s=Sa();a=a===void 0?null:a;var n=void 0;if(kt!==null){var o=kt.memoizedState;if(n=o.destroy,a!==null&&qy(a,o.deps)){s.memoizedState=id(t,r,n,a);return}}dt.flags|=e,s.memoizedState=id(1|t,r,n,a)}function S8(e,t){return kp(8390656,8,e,t)}function Wy(e,t){return $h(2048,8,e,t)}function Jw(e,t){return $h(4,2,e,t)}function Qw(e,t){return $h(4,4,e,t)}function e5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function t5(e,t,r){return r=r!=null?r.concat([e]):null,$h(4,4,e5.bind(null,t,e),r)}function Hy(){}function r5(e,t){var r=Sa();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&qy(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function a5(e,t){var r=Sa();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&qy(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function s5(e,t,r){return To&21?(qa(r,t)||(r=cw(),dt.lanes|=r,Mo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ar=!0),e.memoizedState=r)}function gD(e,t){var r=Re;Re=r!==0&&4>r?r:4,e(!0);var a=hm.transition;hm.transition={};try{e(!1),t()}finally{Re=r,hm.transition=a}}function n5(){return Sa().memoizedState}function mD(e,t,r){var a=Bn(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},o5(e))i5(t,r);else if(r=qw(e,t,r,a),r!==null){var s=pr();Oa(r,e,a,s),l5(r,t,a)}}function bD(e,t,r){var a=Bn(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(o5(e))i5(t,s);else{var n=e.alternate;if(e.lanes===0&&(n===null||n.lanes===0)&&(n=t.lastRenderedReducer,n!==null))try{var o=t.lastRenderedState,i=n(o,r);if(s.hasEagerState=!0,s.eagerState=i,qa(i,o)){var l=t.interleaved;l===null?(s.next=s,Ly(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=qw(e,t,s,a),r!==null&&(s=pr(),Oa(r,e,a,s),l5(r,t,a))}}function o5(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function i5(e,t){Bc=Of=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function l5(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,xy(e,r)}}var zf={readContext:xa,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},yD={readContext:xa,useCallback:function(e,t){return Qa().memoizedState=[e,t===void 0?null:t],e},useContext:xa,useEffect:S8,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,kp(4194308,4,e5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return kp(4194308,4,e,t)},useInsertionEffect:function(e,t){return kp(4,2,e,t)},useMemo:function(e,t){var r=Qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Qa();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=mD.bind(null,dt,e),[a.memoizedState,e]},useRef:function(e){var t=Qa();return e={current:e},t.memoizedState=e},useState:x8,useDebugValue:Hy,useDeferredValue:function(e){return Qa().memoizedState=e},useTransition:function(){var e=x8(!1),t=e[0];return e=gD.bind(null,e[1]),Qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=dt,s=Qa();if(tt){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),jt===null)throw Error(Y(349));To&30||Gw(a,t,r)}s.memoizedState=r;var n={value:r,getSnapshot:t};return s.queue=n,S8(Vw.bind(null,a,n,e),[e]),a.flags|=2048,id(9,Kw.bind(null,a,n,r,t),void 0,null),r},useId:function(){var e=Qa(),t=jt.identifierPrefix;if(tt){var r=Ls,a=Bs;r=(a&~(1<<32-Ra(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=nd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=hD++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_D={readContext:xa,useCallback:r5,useContext:xa,useEffect:Wy,useImperativeHandle:t5,useInsertionEffect:Jw,useLayoutEffect:Qw,useMemo:a5,useReducer:gm,useRef:Zw,useState:function(){return gm(od)},useDebugValue:Hy,useDeferredValue:function(e){var t=Sa();return s5(t,kt.memoizedState,e)},useTransition:function(){var e=gm(od)[0],t=Sa().memoizedState;return[e,t]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:n5,unstable_isNewReconciler:!1},wD={readContext:xa,useCallback:r5,useContext:xa,useEffect:Wy,useImperativeHandle:t5,useInsertionEffect:Jw,useLayoutEffect:Qw,useMemo:a5,useReducer:mm,useRef:Zw,useState:function(){return mm(od)},useDebugValue:Hy,useDeferredValue:function(e){var t=Sa();return kt===null?t.memoizedState=e:s5(t,kt.memoizedState,e)},useTransition:function(){var e=mm(od)[0],t=Sa().memoizedState;return[e,t]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:n5,unstable_isNewReconciler:!1};function ja(e,t){if(e&&e.defaultProps){t=ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function O1(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Uh={isMounted:function(e){return(e=e._reactInternals)?Yo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=pr(),s=Bn(e),n=Os(a,s);n.payload=t,r!=null&&(n.callback=r),t=Tn(e,n,s),t!==null&&(Oa(t,e,s,a),xp(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=pr(),s=Bn(e),n=Os(a,s);n.tag=1,n.payload=t,r!=null&&(n.callback=r),t=Tn(e,n,s),t!==null&&(Oa(t,e,s,a),xp(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pr(),a=Bn(e),s=Os(r,a);s.tag=2,t!=null&&(s.callback=t),t=Tn(e,s,a),t!==null&&(Oa(t,e,a,r),xp(t,e,a))}};function k8(e,t,r,a,s,n,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,n,o):t.prototype&&t.prototype.isPureReactComponent?!Qc(r,a)||!Qc(s,n):!0}function c5(e,t,r){var a=!1,s=qn,n=t.contextType;return typeof n=="object"&&n!==null?n=xa(n):(s=Mr(t)?Eo:sr.current,a=t.contextTypes,n=(a=a!=null)?nl(e,s):qn),t=new t(r,n),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uh,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=n),t}function F8(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Uh.enqueueReplaceState(t,t.state,null)}function z1(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ry(e);var n=t.contextType;typeof n=="object"&&n!==null?s.context=xa(n):(n=Mr(t)?Eo:sr.current,s.context=nl(e,n)),s.state=e.memoizedState,n=t.getDerivedStateFromProps,typeof n=="function"&&(O1(e,t,n,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Uh.enqueueReplaceState(s,s.state,null),Lf(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cl(e,t){try{var r="",a=t;do r+=Vj(a),a=a.return;while(a);var s=r}catch(n){s=`
Error generating stack: `+n.message+`
`+n.stack}return{value:e,source:t,stack:s,digest:null}}function bm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function N1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vD=typeof WeakMap=="function"?WeakMap:Map;function d5(e,t,r){r=Os(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){qf||(qf=!0,X1=a),N1(e,t)},r}function u5(e,t,r){r=Os(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){N1(e,t)}}var n=e.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(r.callback=function(){N1(e,t),typeof a!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function C8(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new vD;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=BD.bind(null,e,t,r),t.then(e,e))}function P8(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I8(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Os(-1,1),t.tag=2,Tn(r,t,1))),r.lanes|=1),e)}var xD=Qs.ReactCurrentOwner,Ar=!1;function dr(e,t,r,a){t.child=e===null?Nw(t,null,r,a):il(t,e.child,r,a)}function A8(e,t,r,a,s){r=r.render;var n=t.ref;return Ki(t,s),a=$y(e,t,r,a,n,s),r=Uy(),e!==null&&!Ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ks(e,t,s)):(tt&&r&&jy(t),t.flags|=1,dr(e,t,a,s),t.child)}function j8(e,t,r,a,s){if(e===null){var n=r.type;return typeof n=="function"&&!Qy(n)&&n.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=n,p5(e,t,n,a,s)):(e=Ip(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(n=e.child,!(e.lanes&s)){var o=n.memoizedProps;if(r=r.compare,r=r!==null?r:Qc,r(o,a)&&e.ref===t.ref)return Ks(e,t,s)}return t.flags|=1,e=Ln(n,a),e.ref=t.ref,e.return=t,t.child=e}function p5(e,t,r,a,s){if(e!==null){var n=e.memoizedProps;if(Qc(n,a)&&e.ref===t.ref)if(Ar=!1,t.pendingProps=a=n,(e.lanes&s)!==0)e.flags&131072&&(Ar=!0);else return t.lanes=e.lanes,Ks(e,t,s)}return q1(e,t,r,a,s)}function f5(e,t,r){var a=t.pendingProps,s=a.children,n=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Di,Gr),Gr|=r;else{if(!(r&1073741824))return e=n!==null?n.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Di,Gr),Gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=n!==null?n.baseLanes:r,He(Di,Gr),Gr|=a}else n!==null?(a=n.baseLanes|r,t.memoizedState=null):a=r,He(Di,Gr),Gr|=a;return dr(e,t,s,r),t.child}function h5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function q1(e,t,r,a,s){var n=Mr(r)?Eo:sr.current;return n=nl(t,n),Ki(t,s),r=$y(e,t,r,a,n,s),a=Uy(),e!==null&&!Ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ks(e,t,s)):(tt&&a&&jy(t),t.flags|=1,dr(e,t,r,s),t.child)}function E8(e,t,r,a,s){if(Mr(r)){var n=!0;Ef(t)}else n=!1;if(Ki(t,s),t.stateNode===null)Fp(e,t),c5(t,r,a),z1(t,r,a,s),a=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=xa(c):(c=Mr(r)?Eo:sr.current,c=nl(t,c));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==a||l!==c)&&F8(t,o,a,c),_n=!1;var f=t.memoizedState;o.state=f,Lf(t,a,o,s),l=t.memoizedState,i!==a||f!==l||Tr.current||_n?(typeof d=="function"&&(O1(t,r,d,a),l=t.memoizedState),(i=_n||k8(t,r,i,a,f,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),o.props=a,o.state=l,o.context=c,a=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,$w(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ja(t.type,i),o.props=c,p=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=xa(l):(l=Mr(r)?Eo:sr.current,l=nl(t,l));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==p||f!==l)&&F8(t,o,a,l),_n=!1,f=t.memoizedState,o.state=f,Lf(t,a,o,s);var y=t.memoizedState;i!==p||f!==y||Tr.current||_n?(typeof h=="function"&&(O1(t,r,h,a),y=t.memoizedState),(c=_n||k8(t,r,c,a,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=y),o.props=a,o.state=y,o.context=l,a=c):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return $1(e,t,r,a,n,s)}function $1(e,t,r,a,s,n){h5(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return s&&m8(t,r,!1),Ks(e,t,n);a=t.stateNode,xD.current=t;var i=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=il(t,e.child,null,n),t.child=il(t,null,i,n)):dr(e,t,i,n),t.memoizedState=a.state,s&&m8(t,r,!0),t.child}function g5(e){var t=e.stateNode;t.pendingContext?g8(e,t.pendingContext,t.pendingContext!==t.context):t.context&&g8(e,t.context,!1),Oy(e,t.containerInfo)}function D8(e,t,r,a,s){return ol(),Dy(s),t.flags|=256,dr(e,t,r,a),t.child}var U1={dehydrated:null,treeContext:null,retryLane:0};function W1(e){return{baseLanes:e,cachePool:null,transitions:null}}function m5(e,t,r){var a=t.pendingProps,s=it.current,n=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(n=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),He(it,s&1),e===null)return L1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,n?(a=t.mode,n=t.child,o={mode:"hidden",children:o},!(a&1)&&n!==null?(n.childLanes=0,n.pendingProps=o):n=Gh(o,a,0,null),e=Io(e,a,r,null),n.return=t,e.return=t,n.sibling=e,t.child=n,t.child.memoizedState=W1(r),t.memoizedState=U1,e):Gy(t,o));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return SD(e,t,o,a,i,s,r);if(n){n=a.fallback,o=t.mode,s=e.child,i=s.sibling;var l={mode:"hidden",children:a.children};return!(o&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=l,t.deletions=null):(a=Ln(s,l),a.subtreeFlags=s.subtreeFlags&14680064),i!==null?n=Ln(i,n):(n=Io(n,o,r,null),n.flags|=2),n.return=t,a.return=t,a.sibling=n,t.child=a,a=n,n=t.child,o=e.child.memoizedState,o=o===null?W1(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},n.memoizedState=o,n.childLanes=e.childLanes&~r,t.memoizedState=U1,a}return n=e.child,e=n.sibling,a=Ln(n,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Gy(e,t){return t=Gh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pu(e,t,r,a){return a!==null&&Dy(a),il(t,e.child,null,r),e=Gy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function SD(e,t,r,a,s,n,o){if(r)return t.flags&256?(t.flags&=-257,a=bm(Error(Y(422))),Pu(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(n=a.fallback,s=t.mode,a=Gh({mode:"visible",children:a.children},s,0,null),n=Io(n,s,o,null),n.flags|=2,a.return=t,n.return=t,a.sibling=n,t.child=a,t.mode&1&&il(t,e.child,null,o),t.child.memoizedState=W1(o),t.memoizedState=U1,n);if(!(t.mode&1))return Pu(e,t,o,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var i=a.dgst;return a=i,n=Error(Y(419)),a=bm(n,a,void 0),Pu(e,t,o,a)}if(i=(o&e.childLanes)!==0,Ar||i){if(a=jt,a!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|o)?0:s,s!==0&&s!==n.retryLane&&(n.retryLane=s,Gs(e,s),Oa(a,e,s,-1))}return Jy(),a=bm(Error(Y(421))),Pu(e,t,o,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=LD.bind(null,e),s._reactRetry=t,null):(e=n.treeContext,Jr=Dn(s.nextSibling),Qr=t,tt=!0,Ma=null,e!==null&&(ga[ma++]=Bs,ga[ma++]=Ls,ga[ma++]=Do,Bs=e.id,Ls=e.overflow,Do=t),t=Gy(t,a.children),t.flags|=4096,t)}function T8(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),R1(e.return,t,r)}function ym(e,t,r,a,s){var n=e.memoizedState;n===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=a,n.tail=r,n.tailMode=s)}function b5(e,t,r){var a=t.pendingProps,s=a.revealOrder,n=a.tail;if(dr(e,t,a.children,r),a=it.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&T8(e,r,t);else if(e.tag===19)T8(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(He(it,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Rf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ym(t,!1,s,r,n);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Rf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ym(t,!0,r,null,n);break;case"together":ym(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=Ln(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ln(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kD(e,t,r){switch(t.tag){case 3:g5(t),ol();break;case 5:Uw(t);break;case 1:Mr(t.type)&&Ef(t);break;case 4:Oy(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;He(Mf,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(He(it,it.current&1),t.flags|=128,null):r&t.child.childLanes?m5(e,t,r):(He(it,it.current&1),e=Ks(e,t,r),e!==null?e.sibling:null);He(it,it.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return b5(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(it,it.current),a)break;return null;case 22:case 23:return t.lanes=0,f5(e,t,r)}return Ks(e,t,r)}var y5,H1,_5,w5;y5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};H1=function(){};_5=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,xo(ls.current);var n=null;switch(r){case"input":s=f1(e,s),a=f1(e,a),n=[];break;case"select":s=ut({},s,{value:void 0}),a=ut({},a,{value:void 0}),n=[];break;case"textarea":s=m1(e,s),a=m1(e,a),n=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Af)}y1(r,a);var o;r=null;for(c in s)if(!a.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var i=s[c];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gc.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in a){var l=a[c];if(i=s!=null?s[c]:void 0,a.hasOwnProperty(c)&&l!==i&&(l!=null||i!=null))if(c==="style")if(i){for(o in i)!i.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&i[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(n||(n=[]),n.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,i=i?i.__html:void 0,l!=null&&i!==l&&(n=n||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(n=n||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ye("scroll",e),n||i===l||(n=[])):(n=n||[]).push(c,l))}r&&(n=n||[]).push("style",r);var c=n;(t.updateQueue=c)&&(t.flags|=4)}};w5=function(e,t,r,a){r!==a&&(t.flags|=4)};function Xl(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function FD(e,t,r){var a=t.pendingProps;switch(Ey(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(t),null;case 1:return Mr(t.type)&&jf(),Vt(t),null;case 3:return a=t.stateNode,ll(),Ze(Tr),Ze(sr),Ny(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Fu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ma!==null&&(Q1(Ma),Ma=null))),H1(e,t),Vt(t),null;case 5:zy(t);var s=xo(sd.current);if(r=t.type,e!==null&&t.stateNode!=null)_5(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Y(166));return Vt(t),null}if(e=xo(ls.current),Fu(t)){a=t.stateNode,r=t.type;var n=t.memoizedProps;switch(a[rs]=t,a[rd]=n,e=(t.mode&1)!==0,r){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(s=0;s<bc.length;s++)Ye(bc[s],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":$4(a,n),Ye("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!n.multiple},Ye("invalid",a);break;case"textarea":W4(a,n),Ye("invalid",a)}y1(r,n),s=null;for(var o in n)if(n.hasOwnProperty(o)){var i=n[o];o==="children"?typeof i=="string"?a.textContent!==i&&(n.suppressHydrationWarning!==!0&&ku(a.textContent,i,e),s=["children",i]):typeof i=="number"&&a.textContent!==""+i&&(n.suppressHydrationWarning!==!0&&ku(a.textContent,i,e),s=["children",""+i]):Gc.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ye("scroll",a)}switch(r){case"input":mu(a),U4(a,n,!0);break;case"textarea":mu(a),H4(a);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(a.onclick=Af)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V7(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(r,{is:a.is}):(e=o.createElement(r),r==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,r),e[rs]=t,e[rd]=a,y5(e,t,!1,!1),t.stateNode=e;e:{switch(o=_1(r,a),r){case"dialog":Ye("cancel",e),Ye("close",e),s=a;break;case"iframe":case"object":case"embed":Ye("load",e),s=a;break;case"video":case"audio":for(s=0;s<bc.length;s++)Ye(bc[s],e);s=a;break;case"source":Ye("error",e),s=a;break;case"img":case"image":case"link":Ye("error",e),Ye("load",e),s=a;break;case"details":Ye("toggle",e),s=a;break;case"input":$4(e,a),s=f1(e,a),Ye("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=ut({},a,{value:void 0}),Ye("invalid",e);break;case"textarea":W4(e,a),s=m1(e,a),Ye("invalid",e);break;default:s=a}y1(r,s),i=s;for(n in i)if(i.hasOwnProperty(n)){var l=i[n];n==="style"?Z7(e,l):n==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Y7(e,l)):n==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Kc(e,l):typeof l=="number"&&Kc(e,""+l):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(Gc.hasOwnProperty(n)?l!=null&&n==="onScroll"&&Ye("scroll",e):l!=null&&my(e,n,l,o))}switch(r){case"input":mu(e),U4(e,a,!1);break;case"textarea":mu(e),H4(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Nn(a.value));break;case"select":e.multiple=!!a.multiple,n=a.value,n!=null?Ui(e,!!a.multiple,n,!1):a.defaultValue!=null&&Ui(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Af)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vt(t),null;case 6:if(e&&t.stateNode!=null)w5(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Y(166));if(r=xo(sd.current),xo(ls.current),Fu(t)){if(a=t.stateNode,r=t.memoizedProps,a[rs]=t,(n=a.nodeValue!==r)&&(e=Qr,e!==null))switch(e.tag){case 3:ku(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ku(a.nodeValue,r,(e.mode&1)!==0)}n&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[rs]=t,t.stateNode=a}return Vt(t),null;case 13:if(Ze(it),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&Jr!==null&&t.mode&1&&!(t.flags&128))Ow(),ol(),t.flags|=98560,n=!1;else if(n=Fu(t),a!==null&&a.dehydrated!==null){if(e===null){if(!n)throw Error(Y(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Y(317));n[rs]=t}else ol(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vt(t),n=!1}else Ma!==null&&(Q1(Ma),Ma=null),n=!0;if(!n)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?Ft===0&&(Ft=3):Jy())),t.updateQueue!==null&&(t.flags|=4),Vt(t),null);case 4:return ll(),H1(e,t),e===null&&ed(t.stateNode.containerInfo),Vt(t),null;case 10:return By(t.type._context),Vt(t),null;case 17:return Mr(t.type)&&jf(),Vt(t),null;case 19:if(Ze(it),n=t.memoizedState,n===null)return Vt(t),null;if(a=(t.flags&128)!==0,o=n.rendering,o===null)if(a)Xl(n,!1);else{if(Ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Rf(e),o!==null){for(t.flags|=128,Xl(n,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)n=r,e=a,n.flags&=14680066,o=n.alternate,o===null?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,e=o.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(it,it.current&1|2),t.child}e=e.sibling}n.tail!==null&&wt()>dl&&(t.flags|=128,a=!0,Xl(n,!1),t.lanes=4194304)}else{if(!a)if(e=Rf(o),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Xl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!tt)return Vt(t),null}else 2*wt()-n.renderingStartTime>dl&&r!==1073741824&&(t.flags|=128,a=!0,Xl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(r=n.last,r!==null?r.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=wt(),t.sibling=null,r=it.current,He(it,a?r&1|2:r&1),t):(Vt(t),null);case 22:case 23:return Zy(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Gr&1073741824&&(Vt(t),t.subtreeFlags&6&&(t.flags|=8192)):Vt(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function CD(e,t){switch(Ey(t),t.tag){case 1:return Mr(t.type)&&jf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ll(),Ze(Tr),Ze(sr),Ny(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zy(t),null;case 13:if(Ze(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));ol()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ze(it),null;case 4:return ll(),null;case 10:return By(t.type._context),null;case 22:case 23:return Zy(),null;case 24:return null;default:return null}}var Iu=!1,Jt=!1,PD=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Ei(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){gt(e,t,a)}else r.current=null}function G1(e,t,r){try{r()}catch(a){gt(e,t,a)}}var M8=!1;function ID(e,t){if(A1=Cf,e=Fw(),Ay(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,n=a.focusNode;a=a.focusOffset;try{r.nodeType,n.nodeType}catch{r=null;break e}var o=0,i=-1,l=-1,c=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==r||s!==0&&p.nodeType!==3||(i=o+s),p!==n||a!==0&&p.nodeType!==3||(l=o+a),p.nodeType===3&&(o+=p.nodeValue.length),(h=p.firstChild)!==null;)f=p,p=h;for(;;){if(p===e)break t;if(f===r&&++c===s&&(i=o),f===n&&++d===a&&(l=o),(h=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=h}r=i===-1||l===-1?null:{start:i,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(j1={focusedElem:e,selectionRange:r},Cf=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,w=y.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:ja(t.type,m),w);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(C){gt(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return y=M8,M8=!1,y}function Lc(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var n=s.destroy;s.destroy=void 0,n!==void 0&&G1(t,r,n)}s=s.next}while(s!==a)}}function Wh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function K1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function v5(e){var t=e.alternate;t!==null&&(e.alternate=null,v5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[rd],delete t[T1],delete t[dD],delete t[uD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function x5(e){return e.tag===5||e.tag===3||e.tag===4}function B8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||x5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function V1(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Af));else if(a!==4&&(e=e.child,e!==null))for(V1(e,t,r),e=e.sibling;e!==null;)V1(e,t,r),e=e.sibling}function Y1(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Y1(e,t,r),e=e.sibling;e!==null;)Y1(e,t,r),e=e.sibling}var Mt=null,Ea=!1;function pn(e,t,r){for(r=r.child;r!==null;)S5(e,t,r),r=r.sibling}function S5(e,t,r){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Lh,r)}catch{}switch(r.tag){case 5:Jt||Ei(r,t);case 6:var a=Mt,s=Ea;Mt=null,pn(e,t,r),Mt=a,Ea=s,Mt!==null&&(Ea?(e=Mt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Mt.removeChild(r.stateNode));break;case 18:Mt!==null&&(Ea?(e=Mt,r=r.stateNode,e.nodeType===8?um(e.parentNode,r):e.nodeType===1&&um(e,r),Zc(e)):um(Mt,r.stateNode));break;case 4:a=Mt,s=Ea,Mt=r.stateNode.containerInfo,Ea=!0,pn(e,t,r),Mt=a,Ea=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var n=s,o=n.destroy;n=n.tag,o!==void 0&&(n&2||n&4)&&G1(r,t,o),s=s.next}while(s!==a)}pn(e,t,r);break;case 1:if(!Jt&&(Ei(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(i){gt(r,t,i)}pn(e,t,r);break;case 21:pn(e,t,r);break;case 22:r.mode&1?(Jt=(a=Jt)||r.memoizedState!==null,pn(e,t,r),Jt=a):pn(e,t,r);break;default:pn(e,t,r)}}function L8(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new PD),t.forEach(function(a){var s=RD.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function Aa(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var n=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:Mt=i.stateNode,Ea=!1;break e;case 3:Mt=i.stateNode.containerInfo,Ea=!0;break e;case 4:Mt=i.stateNode.containerInfo,Ea=!0;break e}i=i.return}if(Mt===null)throw Error(Y(160));S5(n,o,s),Mt=null,Ea=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){gt(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)k5(t,e),t=t.sibling}function k5(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Aa(t,e),Za(e),a&4){try{Lc(3,e,e.return),Wh(3,e)}catch(m){gt(e,e.return,m)}try{Lc(5,e,e.return)}catch(m){gt(e,e.return,m)}}break;case 1:Aa(t,e),Za(e),a&512&&r!==null&&Ei(r,r.return);break;case 5:if(Aa(t,e),Za(e),a&512&&r!==null&&Ei(r,r.return),e.flags&32){var s=e.stateNode;try{Kc(s,"")}catch(m){gt(e,e.return,m)}}if(a&4&&(s=e.stateNode,s!=null)){var n=e.memoizedProps,o=r!==null?r.memoizedProps:n,i=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{i==="input"&&n.type==="radio"&&n.name!=null&&G7(s,n),_1(i,o);var c=_1(i,n);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?Z7(s,p):d==="dangerouslySetInnerHTML"?Y7(s,p):d==="children"?Kc(s,p):my(s,d,p,c)}switch(i){case"input":h1(s,n);break;case"textarea":K7(s,n);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!n.multiple;var h=n.value;h!=null?Ui(s,!!n.multiple,h,!1):f!==!!n.multiple&&(n.defaultValue!=null?Ui(s,!!n.multiple,n.defaultValue,!0):Ui(s,!!n.multiple,n.multiple?[]:"",!1))}s[rd]=n}catch(m){gt(e,e.return,m)}}break;case 6:if(Aa(t,e),Za(e),a&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,n=e.memoizedProps;try{s.nodeValue=n}catch(m){gt(e,e.return,m)}}break;case 3:if(Aa(t,e),Za(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Zc(t.containerInfo)}catch(m){gt(e,e.return,m)}break;case 4:Aa(t,e),Za(e);break;case 13:Aa(t,e),Za(e),s=e.child,s.flags&8192&&(n=s.memoizedState!==null,s.stateNode.isHidden=n,!n||s.alternate!==null&&s.alternate.memoizedState!==null||(Yy=wt())),a&4&&L8(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Jt=(c=Jt)||d,Aa(t,e),Jt=c):Aa(t,e),Za(e),a&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(ee=e,d=e.child;d!==null;){for(p=ee=d;ee!==null;){switch(f=ee,h=f.child,f.tag){case 0:case 11:case 14:case 15:Lc(4,f,f.return);break;case 1:Ei(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){a=f,r=f.return;try{t=a,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){gt(a,r,m)}}break;case 5:Ei(f,f.return);break;case 22:if(f.memoizedState!==null){O8(p);continue}}h!==null?(h.return=f,ee=h):O8(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(n=s.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(i=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,i.style.display=X7("display",o))}catch(m){gt(e,e.return,m)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(m){gt(e,e.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Aa(t,e),Za(e),a&4&&L8(e);break;case 21:break;default:Aa(t,e),Za(e)}}function Za(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(x5(r)){var a=r;break e}r=r.return}throw Error(Y(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(Kc(s,""),a.flags&=-33);var n=B8(e);Y1(e,n,s);break;case 3:case 4:var o=a.stateNode.containerInfo,i=B8(e);V1(e,i,o);break;default:throw Error(Y(161))}}catch(l){gt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AD(e,t,r){ee=e,F5(e)}function F5(e,t,r){for(var a=(e.mode&1)!==0;ee!==null;){var s=ee,n=s.child;if(s.tag===22&&a){var o=s.memoizedState!==null||Iu;if(!o){var i=s.alternate,l=i!==null&&i.memoizedState!==null||Jt;i=Iu;var c=Jt;if(Iu=o,(Jt=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?z8(s):l!==null?(l.return=o,ee=l):z8(s);for(;n!==null;)ee=n,F5(n),n=n.sibling;ee=s,Iu=i,Jt=c}R8(e)}else s.subtreeFlags&8772&&n!==null?(n.return=s,ee=n):R8(e)}}function R8(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jt||Wh(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Jt)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ja(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;n!==null&&v8(t,n,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}v8(t,o,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Zc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Jt||t.flags&512&&K1(t)}catch(f){gt(t,t.return,f)}}if(t===e){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function O8(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function z8(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Wh(4,t)}catch(l){gt(t,r,l)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(l){gt(t,s,l)}}var n=t.return;try{K1(t)}catch(l){gt(t,n,l)}break;case 5:var o=t.return;try{K1(t)}catch(l){gt(t,o,l)}}}catch(l){gt(t,t.return,l)}if(t===e){ee=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ee=i;break}ee=t.return}}var jD=Math.ceil,Nf=Qs.ReactCurrentDispatcher,Ky=Qs.ReactCurrentOwner,wa=Qs.ReactCurrentBatchConfig,Fe=0,jt=null,St=null,Nt=0,Gr=0,Di=Zn(0),Ft=0,ld=null,Mo=0,Hh=0,Vy=0,Rc=null,Cr=null,Yy=0,dl=1/0,Es=null,qf=!1,X1=null,Mn=null,Au=!1,kn=null,$f=0,Oc=0,Z1=null,Cp=-1,Pp=0;function pr(){return Fe&6?wt():Cp!==-1?Cp:Cp=wt()}function Bn(e){return e.mode&1?Fe&2&&Nt!==0?Nt&-Nt:fD.transition!==null?(Pp===0&&(Pp=cw()),Pp):(e=Re,e!==0||(e=window.event,e=e===void 0?16:mw(e.type)),e):1}function Oa(e,t,r,a){if(50<Oc)throw Oc=0,Z1=null,Error(Y(185));Ad(e,r,a),(!(Fe&2)||e!==jt)&&(e===jt&&(!(Fe&2)&&(Hh|=r),Ft===4&&vn(e,Nt)),Br(e,a),r===1&&Fe===0&&!(t.mode&1)&&(dl=wt()+500,qh&&Jn()))}function Br(e,t){var r=e.callbackNode;fE(e,t);var a=Ff(e,e===jt?Nt:0);if(a===0)r!==null&&V4(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&V4(r),t===1)e.tag===0?pD(N8.bind(null,e)):Bw(N8.bind(null,e)),lD(function(){!(Fe&6)&&Jn()}),r=null;else{switch(dw(a)){case 1:r=vy;break;case 4:r=iw;break;case 16:r=kf;break;case 536870912:r=lw;break;default:r=kf}r=T5(r,C5.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function C5(e,t){if(Cp=-1,Pp=0,Fe&6)throw Error(Y(327));var r=e.callbackNode;if(Vi()&&e.callbackNode!==r)return null;var a=Ff(e,e===jt?Nt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Uf(e,a);else{t=a;var s=Fe;Fe|=2;var n=I5();(jt!==e||Nt!==t)&&(Es=null,dl=wt()+500,Po(e,t));do try{TD();break}catch(i){P5(e,i)}while(1);My(),Nf.current=n,Fe=s,St!==null?t=0:(jt=null,Nt=0,t=Ft)}if(t!==0){if(t===2&&(s=k1(e),s!==0&&(a=s,t=J1(e,s))),t===1)throw r=ld,Po(e,0),vn(e,a),Br(e,wt()),r;if(t===6)vn(e,a);else{if(s=e.current.alternate,!(a&30)&&!ED(s)&&(t=Uf(e,a),t===2&&(n=k1(e),n!==0&&(a=n,t=J1(e,n))),t===1))throw r=ld,Po(e,0),vn(e,a),Br(e,wt()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(Y(345));case 2:yo(e,Cr,Es);break;case 3:if(vn(e,a),(a&130023424)===a&&(t=Yy+500-wt(),10<t)){if(Ff(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){pr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=D1(yo.bind(null,e,Cr,Es),t);break}yo(e,Cr,Es);break;case 4:if(vn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var o=31-Ra(a);n=1<<o,o=t[o],o>s&&(s=o),a&=~n}if(a=s,a=wt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*jD(a/1960))-a,10<a){e.timeoutHandle=D1(yo.bind(null,e,Cr,Es),a);break}yo(e,Cr,Es);break;case 5:yo(e,Cr,Es);break;default:throw Error(Y(329))}}}return Br(e,wt()),e.callbackNode===r?C5.bind(null,e):null}function J1(e,t){var r=Rc;return e.current.memoizedState.isDehydrated&&(Po(e,t).flags|=256),e=Uf(e,t),e!==2&&(t=Cr,Cr=r,t!==null&&Q1(t)),e}function Q1(e){Cr===null?Cr=e:Cr.push.apply(Cr,e)}function ED(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],n=s.getSnapshot;s=s.value;try{if(!qa(n(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~Vy,t&=~Hh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ra(t),a=1<<r;e[r]=-1,t&=~a}}function N8(e){if(Fe&6)throw Error(Y(327));Vi();var t=Ff(e,0);if(!(t&1))return Br(e,wt()),null;var r=Uf(e,t);if(e.tag!==0&&r===2){var a=k1(e);a!==0&&(t=a,r=J1(e,a))}if(r===1)throw r=ld,Po(e,0),vn(e,t),Br(e,wt()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yo(e,Cr,Es),Br(e,wt()),null}function Xy(e,t){var r=Fe;Fe|=1;try{return e(t)}finally{Fe=r,Fe===0&&(dl=wt()+500,qh&&Jn())}}function Bo(e){kn!==null&&kn.tag===0&&!(Fe&6)&&Vi();var t=Fe;Fe|=1;var r=wa.transition,a=Re;try{if(wa.transition=null,Re=1,e)return e()}finally{Re=a,wa.transition=r,Fe=t,!(Fe&6)&&Jn()}}function Zy(){Gr=Di.current,Ze(Di)}function Po(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,iD(r)),St!==null)for(r=St.return;r!==null;){var a=r;switch(Ey(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&jf();break;case 3:ll(),Ze(Tr),Ze(sr),Ny();break;case 5:zy(a);break;case 4:ll();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:By(a.type._context);break;case 22:case 23:Zy()}r=r.return}if(jt=e,St=e=Ln(e.current,null),Nt=Gr=t,Ft=0,ld=null,Vy=Hh=Mo=0,Cr=Rc=null,vo!==null){for(t=0;t<vo.length;t++)if(r=vo[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,n=r.pending;if(n!==null){var o=n.next;n.next=s,a.next=o}r.pending=a}vo=null}return e}function P5(e,t){do{var r=St;try{if(My(),Sp.current=zf,Of){for(var a=dt.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}Of=!1}if(To=0,It=kt=dt=null,Bc=!1,nd=0,Ky.current=null,r===null||r.return===null){Ft=1,ld=t,St=null;break}e:{var n=e,o=r.return,i=r,l=t;if(t=Nt,i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=i,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=P8(o);if(h!==null){h.flags&=-257,I8(h,o,i,n,t),h.mode&1&&C8(n,c,t),t=h,l=c;var y=t.updateQueue;if(y===null){var m=new Set;m.add(l),t.updateQueue=m}else y.add(l);break e}else{if(!(t&1)){C8(n,c,t),Jy();break e}l=Error(Y(426))}}else if(tt&&i.mode&1){var w=P8(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),I8(w,o,i,n,t),Dy(cl(l,i));break e}}n=l=cl(l,i),Ft!==4&&(Ft=2),Rc===null?Rc=[n]:Rc.push(n),n=o;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t;var b=d5(n,l,t);w8(n,b);break e;case 1:i=l;var _=n.type,x=n.stateNode;if(!(n.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Mn===null||!Mn.has(x)))){n.flags|=65536,t&=-t,n.lanes|=t;var C=u5(n,i,t);w8(n,C);break e}}n=n.return}while(n!==null)}j5(r)}catch(k){t=k,St===r&&r!==null&&(St=r=r.return);continue}break}while(1)}function I5(){var e=Nf.current;return Nf.current=zf,e===null?zf:e}function Jy(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),jt===null||!(Mo&268435455)&&!(Hh&268435455)||vn(jt,Nt)}function Uf(e,t){var r=Fe;Fe|=2;var a=I5();(jt!==e||Nt!==t)&&(Es=null,Po(e,t));do try{DD();break}catch(s){P5(e,s)}while(1);if(My(),Fe=r,Nf.current=a,St!==null)throw Error(Y(261));return jt=null,Nt=0,Ft}function DD(){for(;St!==null;)A5(St)}function TD(){for(;St!==null&&!sE();)A5(St)}function A5(e){var t=D5(e.alternate,e,Gr);e.memoizedProps=e.pendingProps,t===null?j5(e):St=t,Ky.current=null}function j5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=CD(r,t),r!==null){r.flags&=32767,St=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ft=6,St=null;return}}else if(r=FD(r,t,Gr),r!==null){St=r;return}if(t=t.sibling,t!==null){St=t;return}St=t=e}while(t!==null);Ft===0&&(Ft=5)}function yo(e,t,r){var a=Re,s=wa.transition;try{wa.transition=null,Re=1,MD(e,t,r,a)}finally{wa.transition=s,Re=a}return null}function MD(e,t,r,a){do Vi();while(kn!==null);if(Fe&6)throw Error(Y(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var n=r.lanes|r.childLanes;if(hE(e,n),e===jt&&(St=jt=null,Nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Au||(Au=!0,T5(kf,function(){return Vi(),null})),n=(r.flags&15990)!==0,r.subtreeFlags&15990||n){n=wa.transition,wa.transition=null;var o=Re;Re=1;var i=Fe;Fe|=4,Ky.current=null,ID(e,r),k5(r,e),eD(j1),Cf=!!A1,j1=A1=null,e.current=r,AD(r),nE(),Fe=i,Re=o,wa.transition=n}else e.current=r;if(Au&&(Au=!1,kn=e,$f=s),n=e.pendingLanes,n===0&&(Mn=null),lE(r.stateNode),Br(e,wt()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(qf)throw qf=!1,e=X1,X1=null,e;return $f&1&&e.tag!==0&&Vi(),n=e.pendingLanes,n&1?e===Z1?Oc++:(Oc=0,Z1=e):Oc=0,Jn(),null}function Vi(){if(kn!==null){var e=dw($f),t=wa.transition,r=Re;try{if(wa.transition=null,Re=16>e?16:e,kn===null)var a=!1;else{if(e=kn,kn=null,$f=0,Fe&6)throw Error(Y(331));var s=Fe;for(Fe|=4,ee=e.current;ee!==null;){var n=ee,o=n.child;if(ee.flags&16){var i=n.deletions;if(i!==null){for(var l=0;l<i.length;l++){var c=i[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Lc(8,d,n)}var p=d.child;if(p!==null)p.return=d,ee=p;else for(;ee!==null;){d=ee;var f=d.sibling,h=d.return;if(v5(d),d===c){ee=null;break}if(f!==null){f.return=h,ee=f;break}ee=h}}}var y=n.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ee=n}}if(n.subtreeFlags&2064&&o!==null)o.return=n,ee=o;else e:for(;ee!==null;){if(n=ee,n.flags&2048)switch(n.tag){case 0:case 11:case 15:Lc(9,n,n.return)}var b=n.sibling;if(b!==null){b.return=n.return,ee=b;break e}ee=n.return}}var _=e.current;for(ee=_;ee!==null;){o=ee;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ee=x;else e:for(o=_;ee!==null;){if(i=ee,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Wh(9,i)}}catch(k){gt(i,i.return,k)}if(i===o){ee=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,ee=C;break e}ee=i.return}}if(Fe=s,Jn(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Lh,e)}catch{}a=!0}return a}finally{Re=r,wa.transition=t}}return!1}function q8(e,t,r){t=cl(r,t),t=d5(e,t,1),e=Tn(e,t,1),t=pr(),e!==null&&(Ad(e,1,t),Br(e,t))}function gt(e,t,r){if(e.tag===3)q8(e,e,r);else for(;t!==null;){if(t.tag===3){q8(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Mn===null||!Mn.has(a))){e=cl(r,e),e=u5(t,e,1),t=Tn(t,e,1),e=pr(),t!==null&&(Ad(t,1,e),Br(t,e));break}}t=t.return}}function BD(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=pr(),e.pingedLanes|=e.suspendedLanes&r,jt===e&&(Nt&r)===r&&(Ft===4||Ft===3&&(Nt&130023424)===Nt&&500>wt()-Yy?Po(e,0):Vy|=r),Br(e,t)}function E5(e,t){t===0&&(e.mode&1?(t=_u,_u<<=1,!(_u&130023424)&&(_u=4194304)):t=1);var r=pr();e=Gs(e,t),e!==null&&(Ad(e,t,r),Br(e,r))}function LD(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),E5(e,r)}function RD(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Y(314))}a!==null&&a.delete(t),E5(e,r)}var D5;D5=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tr.current)Ar=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ar=!1,kD(e,t,r);Ar=!!(e.flags&131072)}else Ar=!1,tt&&t.flags&1048576&&Lw(t,Tf,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Fp(e,t),e=t.pendingProps;var s=nl(t,sr.current);Ki(t,r),s=$y(null,t,a,e,s,r);var n=Uy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(a)?(n=!0,Ef(t)):n=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ry(t),s.updater=Uh,t.stateNode=s,s._reactInternals=t,z1(t,a,e,r),t=$1(null,t,a,!0,n,r)):(t.tag=0,tt&&n&&jy(t),dr(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Fp(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=zD(a),e=ja(a,e),s){case 0:t=q1(null,t,a,e,r);break e;case 1:t=E8(null,t,a,e,r);break e;case 11:t=A8(null,t,a,e,r);break e;case 14:t=j8(null,t,a,ja(a.type,e),r);break e}throw Error(Y(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:ja(a,s),q1(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:ja(a,s),E8(e,t,a,s,r);case 3:e:{if(g5(t),e===null)throw Error(Y(387));a=t.pendingProps,n=t.memoizedState,s=n.element,$w(e,t),Lf(t,a,null,r);var o=t.memoizedState;if(a=o.element,n.isDehydrated)if(n={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=n,t.memoizedState=n,t.flags&256){s=cl(Error(Y(423)),t),t=D8(e,t,a,r,s);break e}else if(a!==s){s=cl(Error(Y(424)),t),t=D8(e,t,a,r,s);break e}else for(Jr=Dn(t.stateNode.containerInfo.firstChild),Qr=t,tt=!0,Ma=null,r=Nw(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ol(),a===s){t=Ks(e,t,r);break e}dr(e,t,a,r)}t=t.child}return t;case 5:return Uw(t),e===null&&L1(t),a=t.type,s=t.pendingProps,n=e!==null?e.memoizedProps:null,o=s.children,E1(a,s)?o=null:n!==null&&E1(a,n)&&(t.flags|=32),h5(e,t),dr(e,t,o,r),t.child;case 6:return e===null&&L1(t),null;case 13:return m5(e,t,r);case 4:return Oy(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=il(t,null,a,r):dr(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:ja(a,s),A8(e,t,a,s,r);case 7:return dr(e,t,t.pendingProps,r),t.child;case 8:return dr(e,t,t.pendingProps.children,r),t.child;case 12:return dr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,n=t.memoizedProps,o=s.value,He(Mf,a._currentValue),a._currentValue=o,n!==null)if(qa(n.value,o)){if(n.children===s.children&&!Tr.current){t=Ks(e,t,r);break e}}else for(n=t.child,n!==null&&(n.return=t);n!==null;){var i=n.dependencies;if(i!==null){o=n.child;for(var l=i.firstContext;l!==null;){if(l.context===a){if(n.tag===1){l=Os(-1,r&-r),l.tag=2;var c=n.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}n.lanes|=r,l=n.alternate,l!==null&&(l.lanes|=r),R1(n.return,r,t),i.lanes|=r;break}l=l.next}}else if(n.tag===10)o=n.type===t.type?null:n.child;else if(n.tag===18){if(o=n.return,o===null)throw Error(Y(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),R1(o,r,t),o=n.sibling}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===t){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}dr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Ki(t,r),s=xa(s),a=a(s),t.flags|=1,dr(e,t,a,r),t.child;case 14:return a=t.type,s=ja(a,t.pendingProps),s=ja(a.type,s),j8(e,t,a,s,r);case 15:return p5(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:ja(a,s),Fp(e,t),t.tag=1,Mr(a)?(e=!0,Ef(t)):e=!1,Ki(t,r),c5(t,a,s),z1(t,a,s,r),$1(null,t,a,!0,e,r);case 19:return b5(e,t,r);case 22:return f5(e,t,r)}throw Error(Y(156,t.tag))};function T5(e,t){return ow(e,t)}function OD(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(e,t,r,a){return new OD(e,t,r,a)}function Qy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zD(e){if(typeof e=="function")return Qy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yy)return 11;if(e===_y)return 14}return 2}function Ln(e,t){var r=e.alternate;return r===null?(r=ya(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ip(e,t,r,a,s,n){var o=2;if(a=e,typeof e=="function")Qy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xi:return Io(r.children,s,n,t);case by:o=8,s|=8;break;case c1:return e=ya(12,r,t,s|2),e.elementType=c1,e.lanes=n,e;case d1:return e=ya(13,r,t,s),e.elementType=d1,e.lanes=n,e;case u1:return e=ya(19,r,t,s),e.elementType=u1,e.lanes=n,e;case U7:return Gh(r,s,n,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q7:o=10;break e;case $7:o=9;break e;case yy:o=11;break e;case _y:o=14;break e;case yn:o=16,a=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=ya(o,r,t,s),t.elementType=e,t.type=a,t.lanes=n,t}function Io(e,t,r,a){return e=ya(7,e,a,t),e.lanes=r,e}function Gh(e,t,r,a){return e=ya(22,e,a,t),e.elementType=U7,e.lanes=r,e.stateNode={isHidden:!1},e}function _m(e,t,r){return e=ya(6,e,null,t),e.lanes=r,e}function wm(e,t,r){return t=ya(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ND(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=em(0),this.expirationTimes=em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=em(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function e_(e,t,r,a,s,n,o,i,l){return e=new ND(e,t,r,i,l),t===1?(t=1,n===!0&&(t|=8)):t=0,n=ya(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ry(n),e}function qD(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vi,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function M5(e){if(!e)return qn;e=e._reactInternals;e:{if(Yo(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(Mr(r))return Mw(e,r,t)}return t}function B5(e,t,r,a,s,n,o,i,l){return e=e_(r,a,!0,e,s,n,o,i,l),e.context=M5(null),r=e.current,a=pr(),s=Bn(r),n=Os(a,s),n.callback=t??null,Tn(r,n,s),e.current.lanes=s,Ad(e,s,a),Br(e,a),e}function Kh(e,t,r,a){var s=t.current,n=pr(),o=Bn(s);return r=M5(r),t.context===null?t.context=r:t.pendingContext=r,t=Os(n,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Tn(s,t,o),e!==null&&(Oa(e,s,o,n),xp(e,s,o)),o}function Wf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $8(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function t_(e,t){$8(e,t),(e=e.alternate)&&$8(e,t)}function $D(){return null}var L5=typeof reportError=="function"?reportError:function(e){console.error(e)};function r_(e){this._internalRoot=e}Vh.prototype.render=r_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Kh(e,t,null,null)};Vh.prototype.unmount=r_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bo(function(){Kh(null,e,null,null)}),t[Hs]=null}};function Vh(e){this._internalRoot=e}Vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=fw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wn.length&&t!==0&&t<wn[r].priority;r++);wn.splice(r,0,e),r===0&&gw(e)}};function a_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function U8(){}function UD(e,t,r,a,s){if(s){if(typeof a=="function"){var n=a;a=function(){var c=Wf(o);n.call(c)}}var o=B5(t,a,e,0,null,!1,!1,"",U8);return e._reactRootContainer=o,e[Hs]=o.current,ed(e.nodeType===8?e.parentNode:e),Bo(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var i=a;a=function(){var c=Wf(l);i.call(c)}}var l=e_(e,0,!1,null,null,!1,!1,"",U8);return e._reactRootContainer=l,e[Hs]=l.current,ed(e.nodeType===8?e.parentNode:e),Bo(function(){Kh(t,l,r,a)}),l}function Xh(e,t,r,a,s){var n=r._reactRootContainer;if(n){var o=n;if(typeof s=="function"){var i=s;s=function(){var l=Wf(o);i.call(l)}}Kh(t,o,e,s)}else o=UD(r,t,e,s,a);return Wf(o)}uw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mc(t.pendingLanes);r!==0&&(xy(t,r|1),Br(t,wt()),!(Fe&6)&&(dl=wt()+500,Jn()))}break;case 13:Bo(function(){var a=Gs(e,1);if(a!==null){var s=pr();Oa(a,e,1,s)}}),t_(e,1)}};Sy=function(e){if(e.tag===13){var t=Gs(e,134217728);if(t!==null){var r=pr();Oa(t,e,134217728,r)}t_(e,134217728)}};pw=function(e){if(e.tag===13){var t=Bn(e),r=Gs(e,t);if(r!==null){var a=pr();Oa(r,e,t,a)}t_(e,t)}};fw=function(){return Re};hw=function(e,t){var r=Re;try{return Re=e,t()}finally{Re=r}};v1=function(e,t,r){switch(t){case"input":if(h1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=Nh(a);if(!s)throw Error(Y(90));H7(a),h1(a,s)}}}break;case"textarea":K7(e,r);break;case"select":t=r.value,t!=null&&Ui(e,!!r.multiple,t,!1)}};ew=Xy;tw=Bo;var WD={usingClientEntryPoint:!1,Events:[Ed,Ci,Nh,J7,Q7,Xy]},Zl={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HD={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sw(e),e===null?null:e.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||$D,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Lh=ju.inject(HD),is=ju}catch{}}oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WD;oa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a_(t))throw Error(Y(200));return qD(e,t,null,r)};oa.createRoot=function(e,t){if(!a_(e))throw Error(Y(299));var r=!1,a="",s=L5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=e_(e,1,!1,null,null,r,!1,a,s),e[Hs]=t.current,ed(e.nodeType===8?e.parentNode:e),new r_(t)};oa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=sw(t),e=e===null?null:e.stateNode,e};oa.flushSync=function(e){return Bo(e)};oa.hydrate=function(e,t,r){if(!Yh(t))throw Error(Y(200));return Xh(null,e,t,!0,r)};oa.hydrateRoot=function(e,t,r){if(!a_(e))throw Error(Y(405));var a=r!=null&&r.hydratedSources||null,s=!1,n="",o=L5;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=B5(t,null,e,1,r??null,s,!1,n,o),e[Hs]=t.current,ed(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Vh(t)};oa.render=function(e,t,r){if(!Yh(t))throw Error(Y(200));return Xh(null,e,t,!1,r)};oa.unmountComponentAtNode=function(e){if(!Yh(e))throw Error(Y(40));return e._reactRootContainer?(Bo(function(){Xh(null,null,e,!1,function(){e._reactRootContainer=null,e[Hs]=null})}),!0):!1};oa.unstable_batchedUpdates=Xy;oa.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Yh(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Xh(e,t,r,!1,a)};oa.version="18.3.1-next-f1338f8080-20240426";function R5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R5)}catch(e){console.error(e)}}R5(),R7.exports=oa;var Fl=R7.exports;const GD=Yn(Fl);var O5,W8=Fl;O5=i1.createRoot=W8.createRoot,i1.hydrateRoot=W8.hydrateRoot;var Jl=function(e){return e&&e.Math===Math&&e},mr=Jl(typeof globalThis=="object"&&globalThis)||Jl(typeof window=="object"&&window)||Jl(typeof self=="object"&&self)||Jl(typeof er=="object"&&er)||Jl(typeof er=="object"&&er)||function(){return this}()||Function("return this")(),s_={},br=function(e){try{return!!e()}catch{return!0}},KD=br,Qn=!KD(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),VD=br,Zh=!VD(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),YD=Zh,Eu=Function.prototype.call,en=YD?Eu.bind(Eu):function(){return Eu.apply(Eu,arguments)},z5={},N5={}.propertyIsEnumerable,q5=Object.getOwnPropertyDescriptor,XD=q5&&!N5.call({1:2},1);z5.f=XD?function(t){var r=q5(this,t);return!!r&&r.enumerable}:N5;var $5=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},U5=Zh,W5=Function.prototype,eb=W5.call,ZD=U5&&W5.bind.bind(eb,eb),Et=U5?ZD:function(e){return function(){return eb.apply(e,arguments)}},H5=Et,JD=H5({}.toString),QD=H5("".slice),Cl=function(e){return QD(JD(e),8,-1)},eT=Et,tT=br,rT=Cl,vm=Object,aT=eT("".split),sT=tT(function(){return!vm("z").propertyIsEnumerable(0)})?function(e){return rT(e)==="String"?aT(e,""):vm(e)}:vm,G5=function(e){return e==null},nT=G5,oT=TypeError,Pl=function(e){if(nT(e))throw new oT("Can't call method on "+e);return e},iT=sT,lT=Pl,Jh=function(e){return iT(lT(e))},xm=typeof document=="object"&&document.all,yr=typeof xm>"u"&&xm!==void 0?function(e){return typeof e=="function"||e===xm}:function(e){return typeof e=="function"},cT=yr,tn=function(e){return typeof e=="object"?e!==null:cT(e)},Sm=mr,dT=yr,uT=function(e){return dT(e)?e:void 0},Qh=function(e,t){return arguments.length<2?uT(Sm[e]):Sm[e]&&Sm[e][t]},pT=Et,K5=pT({}.isPrototypeOf),fT=mr,H8=fT.navigator,G8=H8&&H8.userAgent,hT=G8?String(G8):"",V5=mr,km=hT,K8=V5.process,V8=V5.Deno,Y8=K8&&K8.versions||V8&&V8.version,X8=Y8&&Y8.v8,Ba,Hf;X8&&(Ba=X8.split("."),Hf=Ba[0]>0&&Ba[0]<4?1:+(Ba[0]+Ba[1]));!Hf&&km&&(Ba=km.match(/Edge\/(\d+)/),(!Ba||Ba[1]>=74)&&(Ba=km.match(/Chrome\/(\d+)/),Ba&&(Hf=+Ba[1])));var gT=Hf,Z8=gT,mT=br,bT=mr,yT=bT.String,Y5=!!Object.getOwnPropertySymbols&&!mT(function(){var e=Symbol("symbol detection");return!yT(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Z8&&Z8<41}),_T=Y5,X5=_T&&!Symbol.sham&&typeof Symbol.iterator=="symbol",wT=Qh,vT=yr,xT=K5,ST=X5,kT=Object,Z5=ST?function(e){return typeof e=="symbol"}:function(e){var t=wT("Symbol");return vT(t)&&xT(t.prototype,kT(e))},FT=String,CT=function(e){try{return FT(e)}catch{return"Object"}},PT=yr,IT=CT,AT=TypeError,n_=function(e){if(PT(e))return e;throw new AT(IT(e)+" is not a function")},jT=n_,ET=G5,o_=function(e,t){var r=e[t];return ET(r)?void 0:jT(r)},Fm=en,Cm=yr,Pm=tn,DT=TypeError,TT=function(e,t){var r,a;if(t==="string"&&Cm(r=e.toString)&&!Pm(a=Fm(r,e))||Cm(r=e.valueOf)&&!Pm(a=Fm(r,e))||t!=="string"&&Cm(r=e.toString)&&!Pm(a=Fm(r,e)))return a;throw new DT("Can't convert object to primitive value")},J5={exports:{}},J8=mr,MT=Object.defineProperty,i_=function(e,t){try{MT(J8,e,{value:t,configurable:!0,writable:!0})}catch{J8[e]=t}return t},BT=mr,LT=i_,Q8="__core-js_shared__",e3=J5.exports=BT[Q8]||LT(Q8,{});(e3.versions||(e3.versions=[])).push({version:"3.42.0",mode:"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"});var l_=J5.exports,t3=l_,c_=function(e,t){return t3[e]||(t3[e]=t||{})},RT=Pl,OT=Object,Td=function(e){return OT(RT(e))},zT=Et,NT=Td,qT=zT({}.hasOwnProperty),eo=Object.hasOwn||function(t,r){return qT(NT(t),r)},$T=Et,UT=0,WT=Math.random(),HT=$T(1 .toString),Q5=function(e){return"Symbol("+(e===void 0?"":e)+")_"+HT(++UT+WT,36)},GT=mr,KT=c_,r3=eo,VT=Q5,YT=Y5,XT=X5,Ti=GT.Symbol,Im=KT("wks"),ZT=XT?Ti.for||Ti:Ti&&Ti.withoutSetter||VT,rn=function(e){return r3(Im,e)||(Im[e]=YT&&r3(Ti,e)?Ti[e]:ZT("Symbol."+e)),Im[e]},JT=en,a3=tn,s3=Z5,QT=o_,eM=TT,tM=rn,rM=TypeError,aM=tM("toPrimitive"),sM=function(e,t){if(!a3(e)||s3(e))return e;var r=QT(e,aM),a;if(r){if(t===void 0&&(t="default"),a=JT(r,e,t),!a3(a)||s3(a))return a;throw new rM("Can't convert object to primitive value")}return t===void 0&&(t="number"),eM(e,t)},nM=sM,oM=Z5,ev=function(e){var t=nM(e,"string");return oM(t)?t:t+""},iM=mr,n3=tn,tb=iM.document,lM=n3(tb)&&n3(tb.createElement),tv=function(e){return lM?tb.createElement(e):{}},cM=Qn,dM=br,uM=tv,rv=!cM&&!dM(function(){return Object.defineProperty(uM("div"),"a",{get:function(){return 7}}).a!==7}),pM=Qn,fM=en,hM=z5,gM=$5,mM=Jh,bM=ev,yM=eo,_M=rv,o3=Object.getOwnPropertyDescriptor;s_.f=pM?o3:function(t,r){if(t=mM(t),r=bM(r),_M)try{return o3(t,r)}catch{}if(yM(t,r))return gM(!fM(hM.f,t,r),t[r])};var Il={},wM=Qn,vM=br,av=wM&&vM(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),xM=tn,SM=String,kM=TypeError,Xo=function(e){if(xM(e))return e;throw new kM(SM(e)+" is not an object")},FM=Qn,CM=rv,PM=av,Du=Xo,i3=ev,IM=TypeError,Am=Object.defineProperty,AM=Object.getOwnPropertyDescriptor,jm="enumerable",Em="configurable",Dm="writable";Il.f=FM?PM?function(t,r,a){if(Du(t),r=i3(r),Du(a),typeof t=="function"&&r==="prototype"&&"value"in a&&Dm in a&&!a[Dm]){var s=AM(t,r);s&&s[Dm]&&(t[r]=a.value,a={configurable:Em in a?a[Em]:s[Em],enumerable:jm in a?a[jm]:s[jm],writable:!1})}return Am(t,r,a)}:Am:function(t,r,a){if(Du(t),r=i3(r),Du(a),CM)try{return Am(t,r,a)}catch{}if("get"in a||"set"in a)throw new IM("Accessors not supported");return"value"in a&&(t[r]=a.value),t};var jM=Qn,EM=Il,DM=$5,d_=jM?function(e,t,r){return EM.f(e,t,DM(1,r))}:function(e,t,r){return e[t]=r,e},sv={exports:{}},rb=Qn,TM=eo,nv=Function.prototype,MM=rb&&Object.getOwnPropertyDescriptor,u_=TM(nv,"name"),BM=u_&&(function(){}).name==="something",LM=u_&&(!rb||rb&&MM(nv,"name").configurable),RM={EXISTS:u_,PROPER:BM,CONFIGURABLE:LM},OM=Et,zM=yr,ab=l_,NM=OM(Function.toString);zM(ab.inspectSource)||(ab.inspectSource=function(e){return NM(e)});var ov=ab.inspectSource,qM=mr,$M=yr,l3=qM.WeakMap,UM=$M(l3)&&/native code/.test(String(l3)),WM=c_,HM=Q5,c3=WM("keys"),iv=function(e){return c3[e]||(c3[e]=HM(e))},p_={},GM=UM,lv=mr,KM=tn,VM=d_,Tm=eo,Mm=l_,YM=iv,XM=p_,d3="Object already initialized",sb=lv.TypeError,ZM=lv.WeakMap,Gf,cd,Kf,JM=function(e){return Kf(e)?cd(e):Gf(e,{})},QM=function(e){return function(t){var r;if(!KM(t)||(r=cd(t)).type!==e)throw new sb("Incompatible receiver, "+e+" required");return r}};if(GM||Mm.state){var Ja=Mm.state||(Mm.state=new ZM);Ja.get=Ja.get,Ja.has=Ja.has,Ja.set=Ja.set,Gf=function(e,t){if(Ja.has(e))throw new sb(d3);return t.facade=e,Ja.set(e,t),t},cd=function(e){return Ja.get(e)||{}},Kf=function(e){return Ja.has(e)}}else{var ai=YM("state");XM[ai]=!0,Gf=function(e,t){if(Tm(e,ai))throw new sb(d3);return t.facade=e,VM(e,ai,t),t},cd=function(e){return Tm(e,ai)?e[ai]:{}},Kf=function(e){return Tm(e,ai)}}var cv={set:Gf,get:cd,has:Kf,enforce:JM,getterFor:QM},f_=Et,eB=br,tB=yr,Tu=eo,nb=Qn,rB=RM.CONFIGURABLE,aB=ov,dv=cv,sB=dv.enforce,nB=dv.get,u3=String,Ap=Object.defineProperty,oB=f_("".slice),iB=f_("".replace),lB=f_([].join),cB=nb&&!eB(function(){return Ap(function(){},"length",{value:8}).length!==8}),dB=String(String).split("String"),uB=sv.exports=function(e,t,r){oB(u3(t),0,7)==="Symbol("&&(t="["+iB(u3(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Tu(e,"name")||rB&&e.name!==t)&&(nb?Ap(e,"name",{value:t,configurable:!0}):e.name=t),cB&&r&&Tu(r,"arity")&&e.length!==r.arity&&Ap(e,"length",{value:r.arity});try{r&&Tu(r,"constructor")&&r.constructor?nb&&Ap(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var a=sB(e);return Tu(a,"source")||(a.source=lB(dB,typeof t=="string"?t:"")),e};Function.prototype.toString=uB(function(){return tB(this)&&nB(this).source||aB(this)},"toString");var pB=sv.exports,fB=yr,hB=Il,gB=pB,mB=i_,uv=function(e,t,r,a){a||(a={});var s=a.enumerable,n=a.name!==void 0?a.name:t;if(fB(r)&&gB(r,n,a),a.global)s?e[t]=r:mB(t,r);else{try{a.unsafe?e[t]&&(s=!0):delete e[t]}catch{}s?e[t]=r:hB.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e},pv={},bB=Math.ceil,yB=Math.floor,_B=Math.trunc||function(t){var r=+t;return(r>0?yB:bB)(r)},wB=_B,Zo=function(e){var t=+e;return t!==t||t===0?0:wB(t)},vB=Zo,xB=Math.max,SB=Math.min,kB=function(e,t){var r=vB(e);return r<0?xB(r+t,0):SB(r,t)},FB=Zo,CB=Math.min,fv=function(e){var t=FB(e);return t>0?CB(t,9007199254740991):0},PB=fv,Md=function(e){return PB(e.length)},IB=Jh,AB=kB,jB=Md,p3=function(e){return function(t,r,a){var s=IB(t),n=jB(s);if(n===0)return!e&&-1;var o=AB(a,n),i;if(e&&r!==r){for(;n>o;)if(i=s[o++],i!==i)return!0}else for(;n>o;o++)if((e||o in s)&&s[o]===r)return e||o||0;return!e&&-1}},EB={includes:p3(!0),indexOf:p3(!1)},DB=Et,Bm=eo,TB=Jh,MB=EB.indexOf,BB=p_,f3=DB([].push),hv=function(e,t){var r=TB(e),a=0,s=[],n;for(n in r)!Bm(BB,n)&&Bm(r,n)&&f3(s,n);for(;t.length>a;)Bm(r,n=t[a++])&&(~MB(s,n)||f3(s,n));return s},h_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],LB=hv,RB=h_,OB=RB.concat("length","prototype");pv.f=Object.getOwnPropertyNames||function(t){return LB(t,OB)};var gv={};gv.f=Object.getOwnPropertySymbols;var zB=Qh,NB=Et,qB=pv,$B=gv,UB=Xo,WB=NB([].concat),HB=zB("Reflect","ownKeys")||function(t){var r=qB.f(UB(t)),a=$B.f;return a?WB(r,a(t)):r},h3=eo,GB=HB,KB=s_,VB=Il,YB=function(e,t,r){for(var a=GB(t),s=VB.f,n=KB.f,o=0;o<a.length;o++){var i=a[o];!h3(e,i)&&!(r&&h3(r,i))&&s(e,i,n(t,i))}},XB=br,ZB=yr,JB=/#|\.prototype\./,Bd=function(e,t){var r=eL[QB(e)];return r===rL?!0:r===tL?!1:ZB(t)?XB(t):!!t},QB=Bd.normalize=function(e){return String(e).replace(JB,".").toLowerCase()},eL=Bd.data={},tL=Bd.NATIVE="N",rL=Bd.POLYFILL="P",aL=Bd,Mu=mr,sL=s_.f,nL=d_,oL=uv,iL=i_,lL=YB,cL=aL,Al=function(e,t){var r=e.target,a=e.global,s=e.stat,n,o,i,l,c,d;if(a?o=Mu:s?o=Mu[r]||iL(r,{}):o=Mu[r]&&Mu[r].prototype,o)for(i in t){if(c=t[i],e.dontCallGetSet?(d=sL(o,i),l=d&&d.value):l=o[i],n=cL(a?i:r+(s?".":"#")+i,e.forced),!n&&l!==void 0){if(typeof c==typeof l)continue;lL(c,l)}(e.sham||l&&l.sham)&&nL(c,"sham",!0),oL(o,i,c,e)}},mv={},dL=hv,uL=h_,pL=Object.keys||function(t){return dL(t,uL)},fL=Qn,hL=av,gL=Il,mL=Xo,bL=Jh,yL=pL;mv.f=fL&&!hL?Object.defineProperties:function(t,r){mL(t);for(var a=bL(r),s=yL(r),n=s.length,o=0,i;n>o;)gL.f(t,i=s[o++],a[i]);return t};var _L=Qh,wL=_L("document","documentElement"),vL=Xo,xL=mv,g3=h_,SL=p_,kL=wL,FL=tv,CL=iv,m3=">",b3="<",ob="prototype",ib="script",bv=CL("IE_PROTO"),Lm=function(){},yv=function(e){return b3+ib+m3+e+b3+"/"+ib+m3},y3=function(e){e.write(yv("")),e.close();var t=e.parentWindow.Object;return e=null,t},PL=function(){var e=FL("iframe"),t="java"+ib+":",r;return e.style.display="none",kL.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(yv("document.F=Object")),r.close(),r.F},Bu,jp=function(){try{Bu=new ActiveXObject("htmlfile")}catch{}jp=typeof document<"u"?document.domain&&Bu?y3(Bu):PL():y3(Bu);for(var e=g3.length;e--;)delete jp[ob][g3[e]];return jp()};SL[bv]=!0;var _v=Object.create||function(t,r){var a;return t!==null?(Lm[ob]=vL(t),a=new Lm,Lm[ob]=null,a[bv]=t):a=jp(),r===void 0?a:xL.f(a,r)},IL=rn,AL=_v,jL=Il.f,lb=IL("unscopables"),cb=Array.prototype;cb[lb]===void 0&&jL(cb,lb,{configurable:!0,value:AL(null)});var g_=function(e){cb[lb][e]=!0},EL=Al,DL=Td,TL=Md,ML=Zo,BL=g_;EL({target:"Array",proto:!0},{at:function(t){var r=DL(this),a=TL(r),s=ML(t),n=s>=0?s:a+s;return n<0||n>=a?void 0:r[n]}});BL("at");var LL=mr,RL=Et,Ld=function(e,t){return RL(LL[e].prototype[t])},OL=Ld;OL("Array","at");var zL=Cl,wv=Array.isArray||function(t){return zL(t)==="Array"},NL=TypeError,qL=9007199254740991,$L=function(e){if(e>qL)throw NL("Maximum allowed index exceeded");return e},UL=Cl,WL=Et,HL=function(e){if(UL(e)==="Function")return WL(e)},_3=HL,GL=n_,KL=Zh,VL=_3(_3.bind),YL=function(e,t){return GL(e),t===void 0?e:KL?VL(e,t):function(){return e.apply(t,arguments)}},XL=wv,ZL=Md,JL=$L,QL=YL,vv=function(e,t,r,a,s,n,o,i){for(var l=s,c=0,d=o?QL(o,i):!1,p,f;c<a;)c in r&&(p=d?d(r[c],c,t):r[c],n>0&&XL(p)?(f=ZL(p),l=vv(e,t,p,f,l,n-1)-1):(JL(l+1),e[l]=p),l++),c++;return l},xv=vv,eR=rn,tR=eR("toStringTag"),Sv={};Sv[tR]="z";var rR=String(Sv)==="[object z]",aR=rR,sR=yr,Ep=Cl,nR=rn,oR=nR("toStringTag"),iR=Object,lR=Ep(function(){return arguments}())==="Arguments",cR=function(e,t){try{return e[t]}catch{}},kv=aR?Ep:function(e){var t,r,a;return e===void 0?"Undefined":e===null?"Null":typeof(r=cR(t=iR(e),oR))=="string"?r:lR?Ep(t):(a=Ep(t))==="Object"&&sR(t.callee)?"Arguments":a},dR=Et,uR=br,Fv=yr,pR=kv,fR=Qh,hR=ov,Cv=function(){},Pv=fR("Reflect","construct"),m_=/^\s*(?:class|function)\b/,gR=dR(m_.exec),mR=!m_.test(Cv),Ql=function(t){if(!Fv(t))return!1;try{return Pv(Cv,[],t),!0}catch{return!1}},Iv=function(t){if(!Fv(t))return!1;switch(pR(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mR||!!gR(m_,hR(t))}catch{return!0}};Iv.sham=!0;var bR=!Pv||uR(function(){var e;return Ql(Ql.call)||!Ql(Object)||!Ql(function(){e=!0})||e})?Iv:Ql,w3=wv,yR=bR,_R=tn,wR=rn,vR=wR("species"),v3=Array,xR=function(e){var t;return w3(e)&&(t=e.constructor,yR(t)&&(t===v3||w3(t.prototype))?t=void 0:_R(t)&&(t=t[vR],t===null&&(t=void 0))),t===void 0?v3:t},SR=xR,Av=function(e,t){return new(SR(e))(t===0?0:t)},kR=Al,FR=xv,CR=n_,PR=Td,IR=Md,AR=Av;kR({target:"Array",proto:!0},{flatMap:function(t){var r=PR(this),a=IR(r),s;return CR(t),s=AR(r,0),s.length=FR(s,r,r,a,0,1,t,arguments.length>1?arguments[1]:void 0),s}});var jR=g_;jR("flatMap");var ER=Ld;ER("Array","flatMap");var DR=Al,TR=xv,MR=Td,BR=Md,LR=Zo,RR=Av;DR({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=MR(this),a=BR(r),s=RR(r,0);return s.length=TR(s,r,r,a,0,t===void 0?1:LR(t)),s}});var OR=g_;OR("flat");var zR=Ld;zR("Array","flat");var NR=kv,qR=String,Rd=function(e){if(NR(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return qR(e)},$R=Al,UR=Et,WR=Pl,HR=Zo,GR=Rd,KR=br,VR=UR("".charAt),YR=KR(function(){return"𠮷".at(-2)!=="\uD842"});$R({target:"String",proto:!0,forced:YR},{at:function(t){var r=GR(WR(this)),a=r.length,s=HR(t),n=s>=0?s:a+s;return n<0||n>=a?void 0:VR(r,n)}});var XR=Ld;XR("String","at");var ZR=Xo,jv=function(){var e=ZR(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},b_=br,JR=mr,y_=JR.RegExp,__=b_(function(){var e=y_("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),QR=__||b_(function(){return!y_("a","y").sticky}),eO=__||b_(function(){var e=y_("^r","gy");return e.lastIndex=2,e.exec("str")!==null}),tO={BROKEN_CARET:eO,MISSED_STICKY:QR,UNSUPPORTED_Y:__},rO=br,aO=mr,sO=aO.RegExp,nO=rO(function(){var e=sO(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")}),oO=br,iO=mr,lO=iO.RegExp,cO=oO(function(){var e=lO("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),Mi=en,eg=Et,dO=Rd,uO=jv,pO=tO,fO=c_,hO=_v,gO=cv.get,mO=nO,bO=cO,yO=fO("native-string-replace",String.prototype.replace),Vf=RegExp.prototype.exec,db=Vf,_O=eg("".charAt),wO=eg("".indexOf),vO=eg("".replace),Rm=eg("".slice),ub=function(){var e=/a/,t=/b*/g;return Mi(Vf,e,"a"),Mi(Vf,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),Ev=pO.BROKEN_CARET,pb=/()??/.exec("")[1]!==void 0,xO=ub||pb||Ev||mO||bO;xO&&(db=function(t){var r=this,a=gO(r),s=dO(t),n=a.raw,o,i,l,c,d,p,f;if(n)return n.lastIndex=r.lastIndex,o=Mi(db,n,s),r.lastIndex=n.lastIndex,o;var h=a.groups,y=Ev&&r.sticky,m=Mi(uO,r),w=r.source,b=0,_=s;if(y&&(m=vO(m,"y",""),wO(m,"g")===-1&&(m+="g"),_=Rm(s,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&_O(s,r.lastIndex-1)!==`
`)&&(w="(?: "+w+")",_=" "+_,b++),i=new RegExp("^(?:"+w+")",m)),pb&&(i=new RegExp("^"+w+"$(?!\\s)",m)),ub&&(l=r.lastIndex),c=Mi(Vf,y?i:r,_),y?c?(c.input=Rm(c.input,b),c[0]=Rm(c[0],b),c.index=r.lastIndex,r.lastIndex+=c[0].length):r.lastIndex=0:ub&&c&&(r.lastIndex=r.global?c.index+c[0].length:l),pb&&c&&c.length>1&&Mi(yO,c[0],i,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(c[d]=void 0)}),c&&h)for(c.groups=p=hO(null),d=0;d<h.length;d++)f=h[d],p[f[0]]=c[f[1]];return c});var w_=db,SO=Al,x3=w_;SO({target:"RegExp",proto:!0,forced:/./.exec!==x3},{exec:x3});var kO=Zh,Dv=Function.prototype,S3=Dv.apply,k3=Dv.call,FO=typeof Reflect=="object"&&Reflect.apply||(kO?k3.bind(S3):function(){return k3.apply(S3,arguments)}),F3=en,C3=uv,CO=w_,P3=br,Tv=rn,PO=d_,IO=Tv("species"),Om=RegExp.prototype,AO=function(e,t,r,a){var s=Tv(e),n=!P3(function(){var c={};return c[s]=function(){return 7},""[e](c)!==7}),o=n&&!P3(function(){var c=!1,d=/a/;return e==="split"&&(d={},d.constructor={},d.constructor[IO]=function(){return d},d.flags="",d[s]=/./[s]),d.exec=function(){return c=!0,null},d[s](""),!c});if(!n||!o||r){var i=/./[s],l=t(s,""[e],function(c,d,p,f,h){var y=d.exec;return y===CO||y===Om.exec?n&&!h?{done:!0,value:F3(i,d,p,f)}:{done:!0,value:F3(c,p,d,f)}:{done:!1}});C3(String.prototype,e,l[0]),C3(Om,s,l[1])}a&&PO(Om[s],"sham",!0)},v_=Et,jO=Zo,EO=Rd,DO=Pl,TO=v_("".charAt),I3=v_("".charCodeAt),MO=v_("".slice),A3=function(e){return function(t,r){var a=EO(DO(t)),s=jO(r),n=a.length,o,i;return s<0||s>=n?e?"":void 0:(o=I3(a,s),o<55296||o>56319||s+1===n||(i=I3(a,s+1))<56320||i>57343?e?TO(a,s):o:e?MO(a,s,s+2):(o-55296<<10)+(i-56320)+65536)}},BO={codeAt:A3(!1),charAt:A3(!0)},LO=BO.charAt,RO=function(e,t,r){return t+(r?LO(e,t).length:1)},x_=Et,OO=Td,zO=Math.floor,zm=x_("".charAt),NO=x_("".replace),Nm=x_("".slice),qO=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,$O=/\$([$&'`]|\d{1,2})/g,Mv=function(e,t,r,a,s,n){var o=r+e.length,i=a.length,l=$O;return s!==void 0&&(s=OO(s),l=qO),NO(n,l,function(c,d){var p;switch(zm(d,0)){case"$":return"$";case"&":return e;case"`":return Nm(t,0,r);case"'":return Nm(t,o);case"<":p=s[Nm(d,1,-1)];break;default:var f=+d;if(f===0)return c;if(f>i){var h=zO(f/10);return h===0?c:h<=i?a[h-1]===void 0?zm(d,1):a[h-1]+zm(d,1):c}p=a[f-1]}return p===void 0?"":p})},j3=en,UO=Xo,WO=yr,HO=Cl,GO=w_,KO=TypeError,VO=function(e,t){var r=e.exec;if(WO(r)){var a=j3(r,e,t);return a!==null&&UO(a),a}if(HO(e)==="RegExp")return j3(GO,e,t);throw new KO("RegExp#exec called on incompatible receiver")},YO=FO,E3=en,tg=Et,XO=AO,ZO=br,JO=Xo,QO=yr,ez=tn,tz=Zo,rz=fv,si=Rd,az=Pl,sz=RO,nz=o_,oz=Mv,iz=VO,lz=rn,fb=lz("replace"),cz=Math.max,dz=Math.min,uz=tg([].concat),qm=tg([].push),D3=tg("".indexOf),T3=tg("".slice),pz=function(e){return e===void 0?e:String(e)},fz=function(){return"a".replace(/./,"$0")==="$0"}(),M3=function(){return/./[fb]?/./[fb]("a","$0")==="":!1}(),hz=!ZO(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});XO("replace",function(e,t,r){var a=M3?"$":"$0";return[function(n,o){var i=az(this),l=ez(n)?nz(n,fb):void 0;return l?E3(l,n,i,o):E3(t,si(i),n,o)},function(s,n){var o=JO(this),i=si(s);if(typeof n=="string"&&D3(n,a)===-1&&D3(n,"$<")===-1){var l=r(t,o,i,n);if(l.done)return l.value}var c=QO(n);c||(n=si(n));var d=o.global,p;d&&(p=o.unicode,o.lastIndex=0);for(var f=[],h;h=iz(o,i),!(h===null||(qm(f,h),!d));){var y=si(h[0]);y===""&&(o.lastIndex=sz(i,rz(o.lastIndex),p))}for(var m="",w=0,b=0;b<f.length;b++){h=f[b];for(var _=si(h[0]),x=cz(dz(tz(h.index),i.length),0),C=[],k,F=1;F<h.length;F++)qm(C,pz(h[F]));var P=h.groups;if(c){var I=uz([_],C,x,i);P!==void 0&&qm(I,P),k=si(YO(n,void 0,I))}else k=oz(_,i,x,C,P,n);x>=w&&(m+=T3(i,w,x)+k,w=x+_.length)}return m+T3(i,w)}]},!hz||!fz||M3);var gz=tn,mz=Cl,bz=rn,yz=bz("match"),_z=function(e){var t;return gz(e)&&((t=e[yz])!==void 0?!!t:mz(e)==="RegExp")},wz=en,vz=eo,xz=K5,Sz=jv,B3=RegExp.prototype,kz=function(e){var t=e.flags;return t===void 0&&!("flags"in B3)&&!vz(e,"flags")&&xz(B3,e)?wz(Sz,e):t},Fz=Al,Cz=en,S_=Et,L3=Pl,Pz=yr,Iz=tn,Az=_z,ec=Rd,jz=o_,Ez=kz,Dz=Mv,Tz=rn,Mz=Tz("replace"),Bz=TypeError,$m=S_("".indexOf);S_("".replace);var R3=S_("".slice),Lz=Math.max;Fz({target:"String",proto:!0},{replaceAll:function(t,r){var a=L3(this),s,n,o,i,l,c,d,p,f,h,y=0,m="";if(Iz(t)){if(s=Az(t),s&&(n=ec(L3(Ez(t))),!~$m(n,"g")))throw new Bz("`.replaceAll` does not allow non-global regexes");if(o=jz(t,Mz),o)return Cz(o,t,a,r)}for(i=ec(a),l=ec(t),c=Pz(r),c||(r=ec(r)),d=l.length,p=Lz(1,d),f=$m(i,l);f!==-1;)h=c?ec(r(l,f,i)):Dz(l,i,f,[],void 0,r),m+=R3(i,y,f)+h,y=f+d,f=f+p>i.length?-1:$m(i,l,f+p);return y<i.length&&(m+=R3(i,y)),m}});var Rz=Ld;Rz("String","replaceAll");class Dp{constructor(t){g(this,"nextValue");g(this,"diff");this.previousValue=t}get(){var a,s,n,o;const t=((s=(a=this.diff)==null?void 0:a.removed)==null?void 0:s.size)??0,r=((o=(n=this.diff)==null?void 0:n.added)==null?void 0:o.size)??0;if(!(t===0&&r===0))return{value:this.nextValue,diff:this.diff}}_add(t,r){var a,s;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.add(t),this.diff??(this.diff={}),r?(a=this.diff.removed)==null||a.delete(t):((s=this.diff).added??(s.added=new Set),this.diff.added.add(t))}add(t){var s,n,o;const r=this.previousValue.has(t);if(r)return((n=(s=this.diff)==null?void 0:s.removed)==null?void 0:n.has(t))?this._add(t,r):void 0;(o=this.nextValue)!=null&&o.has(t)||this._add(t,r)}_remove(t,r){var a,s;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(t),this.diff??(this.diff={}),r?((a=this.diff).removed??(a.removed=new Set),this.diff.removed.add(t)):(s=this.diff.added)==null||s.delete(t)}remove(t){var s,n,o,i;const r=this.previousValue.has(t);if(!r)return((n=(s=this.diff)==null?void 0:s.added)==null?void 0:n.has(t))?this._remove(t,r):void 0;(i=(o=this.diff)==null?void 0:o.removed)!=null&&i.has(t)||this._remove(t,r)}}const yc={Good:"#40C057",Mid:"#FFC078",Poor:"#E03131"},Oz=yc.Good;class Bv{constructor(){g(this,"startTime",0);g(this,"name","");g(this,"frames",0);g(this,"started",!1);g(this,"frame",null);g(this,"recordFrame",()=>{this.frames++,this.started&&(this.frame=requestAnimationFrame(this.recordFrame))})}start(t){this.name=t,this.frames=0,this.started=!0,this.frame!==null&&cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(this.recordFrame),this.startTime=performance.now()}stop(){this.started=!1,this.frame!==null&&cancelAnimationFrame(this.frame);const t=(performance.now()-this.startTime)/1e3,r=t===0?0:Math.floor(this.frames/t),a=r>55?yc.Good:r>30?yc.Mid:yc.Poor,s=a===yc.Mid?"black":"white",n=this.name[0].toUpperCase()+this.name.slice(1);console.debug(`%cPerf%c ${n} %c${r}%c fps`,`color: white; background: ${Oz};padding: 2px;border-radius: 3px;`,"font-weight: normal",`font-weight: bold; padding: 2px; background: ${a};color: ${s};`,"font-weight: normal")}isStarted(){return this.started}}function k_(e,t){const r=[];e:for(const a of e){for(const s of r)if(t?t(a,s):a===s)continue e;r.push(a)}return r}function ge(e){return e.filter(t=>t!=null)}function Lt(e){return e[e.length-1]}function zz(e,t){let r,a=1/0;for(const s of e){const n=t(s);n<a&&(r=s,a=n)}return r}function Nz(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}class $n{constructor(){g(this,"items",new WeakMap)}get(t,r){return this.items.has(t)||this.items.set(t,r(t)),this.items.get(t)}}function qz(e,t){let r,a;return function(...s){return r||(r=!0,setTimeout(()=>r=!1,t),a=e(...s)),a}}function Lv(e){const t=(...r)=>{try{return e(...r)}catch(a){throw a instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(a,t),a}};return t}const Yf=()=>{},Rn={ok(e){return{ok:!0,value:e}},err(e){return{ok:!1,error:e}}};function tr(e,t){const r=t&&e&&typeof e=="object"&&t in e?e[t]:e;throw new Error(`Unknown switch case ${r}`)}const at=Lv((e,t)=>{if(!e)throw new Error(t||"Assertion Error")}),Vr=Lv((e,t)=>{if(e==null)throw new Error(t??"value must be defined");return e});function Rv(e,t){let r;const a=(...s)=>(r||(r={},r.promise=new Promise((n,o)=>{r.resolve=n,r.reject=o})),clearTimeout(r.timeout),r.latestArgs=s,r.timeout=setTimeout(()=>{const n=r;r=void 0;try{n.resolve(e(...n.latestArgs))}catch(o){n.reject(o)}},t),r.promise);return a.cancel=()=>{r&&clearTimeout(r.timeout)},a}const O3=new WeakMap;function F_(e,t){if(typeof e!="object"||e===null)return;let r=O3.get(e);r||(r={tags:{},extras:{}},O3.set(e,r)),t.tags&&(r.tags={...r.tags,...t.tags}),t.extras&&(r.extras={...r.extras,...t.extras})}class Yi{static async dataUrlToArrayBuffer(t){return fetch(t,{referrerPolicy:"strict-origin-when-cross-origin"}).then(function(r){return r.arrayBuffer()})}static async blobToDataUrl(t){return await new Promise((r,a)=>{if(t){const s=new FileReader;s.onload=()=>r(s.result),s.onerror=n=>a(n),s.onabort=n=>a(n),s.readAsDataURL(t)}})}static async blobToText(t){return await new Promise((r,a)=>{if(t){const s=new FileReader;s.onload=()=>r(s.result),s.onerror=n=>a(n),s.onabort=n=>a(n),s.readAsText(t)}})}}function hb(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t+""}function $z(e){const t=new DataView(e);let r=0;for(let a=0;a<t.byteLength;a++)r=(r<<5)-r+t.getUint8(a),r|=0;return r+""}/*!
 * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license
 * Copyright (c) Philip van Heemstra
 */function Uz(e){const t=new Uint8Array(e);if(!t||!(typeof Buffer<"u"&&Buffer.isBuffer(t)||t instanceof Uint8Array)||t.length<16||!(t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10))return!1;function a(n,o,i,l,c=1024){if(!o)return-1;o=new RegExp(o,"g");const d=o.source.length,p=new TextDecoder,f=n.length;if(typeof l>"u"&&(l=f),i>=f||l<=0||i>=l)return-1;n=n.subarray(i,l);let h=-1,y=0,m=0,w="";e:for(;y<n.length;){const b=y+c,_=n.subarray(y,b),x=p.decode(_,{stream:!0}),C=w+x;let k,F=-1;for(;(k=o.exec(C))!==null;){F=k.index-w.length,h=m+F;break e}y=b,m+=x.length;const P=F>-1?F+d:x.length-d;w=x.slice(P)}return h>=0&&(h+=i>=0?i:f+i),h}const s=a(t,"IDAT",12);return s>=12?a(t,"acTL",8,s)>=8:!1}const Wz=e=>new Uint8Array(e)[3]===44;/*!
 * MIT License
 * Modified code originally from <https://github.com/qzb/is-animated>
 * Copyright (c) 2016 Józef Sokołowski <j.k.sokolowski@gmail.com>
 */function z3(e,t){let r=0;for(;e[t+r];)r+=e[t+r]+1;return r+1}function Hz(e){return new TextDecoder("ascii").decode(e.slice(0,3))==="GIF"}function Gz(e){const t=new Uint8Array(e);let r,a,s=0,n=0;if(!Hz(e))return!1;for(r=t[10]&128,a=t[10]&7,s+=6,s+=7,s+=r?3*Math.pow(2,a+1):0;n<2&&s<t.length;)switch(t[s]){case 44:n+=1,r=t[s+9]&128,a=t[s+9]&7,s+=10,s+=r?3*Math.pow(2,a+1):0,s+=z3(t,s+1)+1;break;case 33:s+=2,s+=z3(t,s);break;case 59:s=t.length;break;default:s=t.length;break}return n>1}let gb=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(gb=new Int32Array(gb));/*!
 * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE
 * Copyright: 2014 Alex Gorbatchev
 * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts
 */const Kz=(e,t)=>{let r=t===0?0:~~t^-1;for(let a=0;a<e.length;a++)r=gb[(r^e[a])&255]^r>>>8;return r^-1},N3=4,q3=4;class as{static isPng(t,r){return t.getUint8(r+0)===137&&t.getUint8(r+1)===80&&t.getUint8(r+2)===78&&t.getUint8(r+3)===71&&t.getUint8(r+4)===13&&t.getUint8(r+5)===10&&t.getUint8(r+6)===26&&t.getUint8(r+7)===10}static getChunkType(t,r){return[String.fromCharCode(t.getUint8(r)),String.fromCharCode(t.getUint8(r+1)),String.fromCharCode(t.getUint8(r+2)),String.fromCharCode(t.getUint8(r+3))].join("")}static readChunks(t,r=0){const a={};if(!as.isPng(t,r))throw new Error("Not a PNG");for(r+=8;r<=t.buffer.byteLength;){const s=r,n=t.getInt32(r);r+=4;const o=as.getChunkType(t,r);if(o==="IDAT"&&a[o]){r+=n+N3+q3;continue}if(o==="IEND")break;a[o]={start:s,dataOffset:r+4,size:n},r+=n+N3+q3}return a}static parsePhys(t,r){return{ppux:t.getUint32(r),ppuy:t.getUint32(r+4),unit:t.getUint8(r+4)}}static findChunk(t,r){return as.readChunks(t)[r]}static setPhysChunk(t,r=1,a){let s=46,n=0;const o=as.findChunk(t,"pHYs");o&&(s=o.start,n=o.size);const i=as.findChunk(t,"IDAT");i&&(s=i.start,n=0);const l=new ArrayBuffer(21),c=new DataView(l);c.setUint32(0,9),c.setUint8(4,"p".charCodeAt(0)),c.setUint8(5,"H".charCodeAt(0)),c.setUint8(6,"Y".charCodeAt(0)),c.setUint8(7,"s".charCodeAt(0));const d=2835.5;c.setInt32(8,d*r),c.setInt32(12,d*r),c.setInt8(16,1);const p=new Uint8Array(l.slice(4,17));c.setInt32(17,Kz(p));const f=t.buffer.slice(0,s),h=t.buffer.slice(s+n);return new Blob([f,l,h],a)}}/*!
 * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license
 * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 */function Vz(e){return!e||e.length<12?!1:e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80}function Yz(e){const t=new Uint8Array(e);return!Vz(t)||!t||t.length<21?!1:(t[20]>>1&1)===1}const Xz=Object.freeze(["image/svg+xml"]),Ov=Object.freeze(["image/jpeg","image/png","image/webp"]),zv=Object.freeze(["image/gif","image/apng","image/avif"]),C_=Object.freeze([...Ov,...Xz,...zv]),Nv=Object.freeze(["video/mp4","video/webm","video/quicktime"]),Zz=[...C_,...Nv].join(",");class Xr{static loadVideo(t){return new Promise((r,a)=>{const s=document.createElement("video");s.onloadeddata=()=>r(s),s.onerror=n=>{console.error(n),a(new Error("Could not load video"))},s.crossOrigin="anonymous",s.src=t})}static loadImage(t){return new Promise((r,a)=>{const s=new Image;s.onload=()=>r(s),s.onerror=n=>{console.error(n),a(new Error("Could not load image"))},s.crossOrigin="anonymous",s.referrerPolicy="strict-origin-when-cross-origin",s.src=t})}static async getVideoSize(t){return Xr.usingObjectURL(t,async r=>{const a=await Xr.loadVideo(r);return{w:a.videoWidth,h:a.videoHeight}})}static async getImageSize(t){const r=await Xr.usingObjectURL(t,Xr.loadImage);try{if(t.type==="image/png"){const a=new DataView(await t.arrayBuffer());if(as.isPng(a,0)){const s=as.findChunk(a,"pHYs");if(s){const n=as.parsePhys(a,s.dataOffset);if(n.unit===0&&n.ppux===n.ppuy){const o=Math.max(n.ppux/2834.5,1);return{w:Math.round(r.naturalWidth/o),h:Math.round(r.naturalHeight/o)}}}}}}catch(a){return console.error(a),{w:r.naturalWidth,h:r.naturalHeight}}return{w:r.naturalWidth,h:r.naturalHeight}}static async isAnimated(t){return t.type==="image/gif"?Gz(await t.arrayBuffer()):t.type==="image/avif"?Wz(await t.arrayBuffer()):t.type==="image/webp"?Yz(await t.arrayBuffer()):t.type==="image/apng"?Uz(await t.arrayBuffer()):!1}static isAnimatedImageType(t){return zv.includes(t||"")}static isStaticImageType(t){return Ov.includes(t||"")}static isImageType(t){return C_.includes(t)}static async usingObjectURL(t,r){const a=URL.createObjectURL(t);try{return await r(a)}finally{URL.revokeObjectURL(a)}}}function Lu(e,t,r){return e+(t-e)*r}function Ha(e=""){let t=0,r=0,a=0,s=0;function n(){const o=t^t<<11;return t=r,r=a,a=s,s^=(s>>>19^o^o>>>8)>>>0,s/4294967296*2}for(let o=0;o<e.length+64;o++)t^=e.charCodeAt(o)|0,n();return n}function Xf(e,t,r,a=!1){const[s,n]=t,[o,i]=r,l=o+(e-s)/(n-s)*(i-o);return a?o<i?Math.max(Math.min(l,i),o):Math.max(Math.min(l,o),i):l}function cs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jr(e,t){if(cs(e,t))return e[t]}function $3(e){return Object.keys(e)}function ht(e){return Object.values(e)}function Lr(e){return Object.entries(e)}function qv(e){return Object.fromEntries(e)}function zc(e,t){const r={};let a=!1;for(const[s,n]of Lr(e))t(s,n)?r[s]=n:a=!0;return a?r:e}function Od(e,t){const r={};for(const[a,s]of Lr(e)){const n=t(a,s);r[a]=n}return r}function $v(e,t){if(e===t)return!0;const r=new Set(Object.keys(e)),a=new Set(Object.keys(t));if(r.size!==a.size)return!1;for(const s of r)if(!a.has(s)||!Object.is(e[s],t[s]))return!1;return!0}const Zr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Uv="a0",Wv="A00000000000000000000000000";function Hv(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function Gv(e){if(e.length!==Hv(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function U3(e){if(e===void 0)throw Error("n is undefined")}function W3(e){Gv(e);const[t,...r]=e.split("");let a=!0;for(let s=r.length-1;a&&s>=0;s--){const n=Zr.indexOf(r[s])+1;n===Zr.length?r[s]="0":(r[s]=Zr.charAt(n),a=!1)}if(a){if(t==="Z")return"a0";if(t==="z")return;const s=String.fromCharCode(t.charCodeAt(0)+1);return s>"a"?r.push("0"):r.pop(),s+r.join("")}else return t+r.join("")}function Jz(e){Gv(e);const[t,...r]=e.split("");let a=!0;for(let s=r.length-1;a&&s>=0;s--){const n=Zr.indexOf(r[s])-1;n===-1?r[s]=Zr.slice(-1):(r[s]=Zr.charAt(n),a=!1)}if(a){if(t==="a")return"Z"+Zr.slice(-1);if(t==="A")return;const s=String.fromCharCode(t.charCodeAt(0)-1);return s<"Z"?r.push(Zr.slice(-1)):r.pop(),s+r.join("")}else return t+r.join("")}function Bi(e,t){if(t!==void 0&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)==="0"||t&&t.slice(-1)==="0")throw new Error("trailing zero");if(t){let s=0;for(;(e.charAt(s)||"0")===t.charAt(s);)s++;if(s>0)return t.slice(0,s)+Bi(e.slice(s),t.slice(s))}const r=e?Zr.indexOf(e.charAt(0)):0,a=t!==void 0?Zr.indexOf(t.charAt(0)):Zr.length;if(a-r>1){const s=Math.round(.5*(r+a));return Zr.charAt(s)}else return t&&t.length>1?t.slice(0,1):Zr.charAt(r)+Bi(e.slice(1),void 0)}function _c(e){const t=Hv(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function mb(e){if(e===Wv)throw new Error("invalid index: "+e);const t=_c(e);if(e.slice(t.length).slice(-1)==="0")throw new Error("invalid index: "+e)}function ni(e,t){if(e!==void 0&&mb(e),t!==void 0&&mb(t),e!==void 0&&t!==void 0&&e>=t)throw new Error(e+" >= "+t);if(e===void 0&&t===void 0)return Uv;if(e===void 0){if(t===void 0)throw Error("b is undefined");const i=_c(t),l=t.slice(i.length);if(i===Wv)return i+Bi("",l);if(i<t)return i;const c=Jz(i);return U3(c),c}if(t===void 0){const i=_c(e),l=e.slice(i.length),c=W3(i);return c===void 0?i+Bi(l,void 0):c}const r=_c(e),a=e.slice(r.length),s=_c(t),n=t.slice(s.length);if(r===s)return r+Bi(a,n);const o=W3(r);return U3(o),o<t?o:r+Bi(a,void 0)}function Un(e,t,r){if(r===0)return[];if(r===1)return[ni(e,t)];if(t===void 0){let n=ni(e,t);const o=[n];for(let i=0;i<r-1;i++)n=ni(n,t),o.push(n);return o}if(e===void 0){let n=ni(e,t);const o=[n];for(let i=0;i<r-1;i++)n=ni(e,n),o.push(n);return o.reverse(),o}const a=Math.floor(r/2),s=ni(e,t);return[...Un(e,s,a),s,...Un(s,t,r-a-1)]}const Qz=Uv;function eN(e){mb(e)}function ul(e,t,r){return Un(e,t,r)}function Um(e,t){return Un(e,void 0,t)}function dd(e,t){return Un(e,t,1)[0]}function Ms(e){return Un(e,void 0,1)[0]}function tN(e){return Un(void 0,e,1)[0]}function ud(e,t="a1"){return[t,...Un(t,void 0,e)]}function Qt(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function rN(e,t){return e.id>t.id?1:-1}function P_(e){try{return localStorage.getItem(e)}catch{return null}}function I_(e,t){try{localStorage.setItem(e,t)}catch{}}function aN(){try{localStorage.clear()}catch{}}function Kv(e){try{return sessionStorage.getItem(e)}catch{return null}}function A_(e,t){try{sessionStorage.setItem(e,t)}catch{}}function Vv(e){try{sessionStorage.removeItem(e)}catch{}}function sN(){try{sessionStorage.clear()}catch{}}const nN=()=>typeof process<"u"&&!1,Li=[],oN=60,Tp=Math.ceil(1e3/oN);let tc,Wm=0,bb=0;const iN=()=>{const e=Li.splice(0,Li.length);for(const t of e)t()};function Yv(){if(tc)return;const e=Date.now(),t=e-bb;if(Wm+t<Tp){tc=requestAnimationFrame(()=>{tc=void 0,Yv()});return}tc=requestAnimationFrame(()=>{tc=void 0,bb=e,Wm=Math.min(Wm+t-Tp,Tp*10),iN()})}let H3=!1;function Xv(e){return nN()?(e(),()=>{}):(Li.includes(e)||(Li.push(e),H3||(H3=!0,bb=Date.now()-Tp-1),Yv()),()=>{const t=Li.indexOf(e);t>-1&&Li.splice(t,1)})}class lN{constructor(){g(this,"timeouts",[]);g(this,"intervals",[]);g(this,"rafs",[])}setTimeout(t,r,...a){const s=window.setTimeout(t,r,a);return this.timeouts.push(s),s}setInterval(t,r,...a){const s=window.setInterval(t,r,a);return this.intervals.push(s),s}requestAnimationFrame(t){const r=window.requestAnimationFrame(t);return this.rafs.push(r),r}dispose(){this.timeouts.forEach(t=>clearTimeout(t)),this.intervals.forEach(t=>clearInterval(t)),this.rafs.forEach(t=>cancelAnimationFrame(t)),this.timeouts.length=0,this.intervals.length=0,this.rafs.length=0}}function cN(e){return e!==null}function dN(){return typeof globalThis<"u"&&globalThis.structuredClone?[globalThis.structuredClone,!0]:typeof global<"u"&&global.structuredClone?[global.structuredClone,!0]:typeof window<"u"&&window.structuredClone?[window.structuredClone,!0]:[e=>e&&JSON.parse(JSON.stringify(e)),!1]}const Zv=dN(),mt=Zv[0];Zv[1];const uN=Object.getPrototypeOf(mt({}));let zd=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");class rg{constructor(t,r){g(this,"createDefaultProperties");g(this,"validator");g(this,"ephemeralKeys");g(this,"ephemeralKeySet");g(this,"scope");g(this,"isInstance",t=>(t==null?void 0:t.typeName)===this.typeName);this.typeName=t,this.createDefaultProperties=r.createDefaultProperties,this.validator=r.validator??{validate:s=>s},this.scope=r.scope??"document",this.ephemeralKeys=r.ephemeralKeys;const a=new Set;if(r.ephemeralKeys)for(const[s,n]of Lr(r.ephemeralKeys))n&&a.add(s);this.ephemeralKeySet=a}create(t){const r={...this.createDefaultProperties(),id:this.createId()};for(const[a,s]of Object.entries(t))s!==void 0&&(r[a]=s);return r.typeName=this.typeName,r}clone(t){return{...mt(t),id:this.createId()}}createId(t){return this.typeName+":"+(t??zd())}createCustomId(t){return this.typeName+":"+t}parseId(t){if(!this.isId(t))throw new Error(`ID "${t}" is not a valid ID for type "${this.typeName}"`);return t.slice(this.typeName.length+1)}isId(t){if(!t)return!1;for(let r=0;r<this.typeName.length;r++)if(t[r]!==this.typeName[r])return!1;return t[this.typeName.length]===":"}withDefaultProperties(t){return new rg(this.typeName,{createDefaultProperties:t,validator:this.validator,scope:this.scope,ephemeralKeys:this.ephemeralKeys})}validate(t,r){return r&&this.validator.validateUsingKnownGoodVersion?this.validator.validateUsingKnownGoodVersion(r,t):this.validator.validate(t)}}function _s(e,t){return new rg(e,{createDefaultProperties:()=>({}),validator:t.validator,scope:t.scope,ephemeralKeys:t.ephemeralKeys})}function Zf(){return{added:{},updated:{},removed:{}}}function yb(e){const t={added:e.removed,removed:e.added,updated:{}};for(const[r,a]of Object.values(e.updated))t.updated[r.id]=[a,r];return t}function Jv(e){return Object.keys(e.added).length===0&&Object.keys(e.updated).length===0&&Object.keys(e.removed).length===0}function j_(e){const t={added:{},removed:{},updated:{}};return Nc(t,e),t}function Nc(e,t){for(const r of t){for(const[a,s]of Lr(r.added))if(e.removed[a]){const n=e.removed[a];delete e.removed[a],n!==s&&(e.updated[a]=[n,s])}else e.added[a]=s;for(const[a,[s,n]]of Lr(r.updated)){if(e.added[a]){e.added[a]=n,delete e.updated[a],delete e.removed[a];continue}if(e.updated[a]){e.updated[a]=[e.updated[a][0],n],delete e.removed[a];continue}e.updated[a]=r.updated[a],delete e.removed[a]}for(const[a,s]of Lr(r.removed))e.added[a]?delete e.added[a]:e.updated[a]?(e.removed[a]=e.updated[a][0],delete e.updated[a]):e.removed[a]=s}}function Qv(e){return e&&typeof e=="object"&&"parents"in e}function ex(e){for(let t=0,r=e.parents.length;t<r;t++)if(e.parents[t].__unsafe__getWithoutCapture(!0),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}const Jf=(e,t)=>{if(e.children.remove(t)&&e.children.isEmpty&&Qv(e))for(let r=0,a=e.parents.length;r<a;r++)Jf(e.parents[r],e)},E_=(e,t)=>{if(e.children.add(t)&&Qv(e))for(let r=0,a=e.parents.length;r<a;r++)E_(e.parents[r],e)};function tx(e,t){return e===t||Object.is(e,t)||!!(e&&t&&typeof e.equals=="function"&&e.equals(t))}function to(e,t){const r=Symbol.for(`com.tldraw.state/${e}`),a=globalThis;return a[r]??(a[r]=t()),a[r]}const zs=to("empty_array",()=>Object.freeze([])),G3=8;class Qf{constructor(){g(this,"arraySize",0);g(this,"array",Array(G3));g(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(t){if(this.array)return this.array.indexOf(t)!==-1?!1:this.arraySize<G3?(this.array[this.arraySize]=t,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(t),!0);if(this.set)return this.set.has(t)?!1:(this.set.add(t),!0);throw new Error("no set or array")}remove(t){if(this.array){const r=this.array.indexOf(t);return r===-1?!1:(this.array[r]=void 0,this.arraySize--,r!==this.arraySize&&(this.array[r]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(t)?(this.set.delete(t),!0):!1;throw new Error("no set or array")}visit(t){if(this.array){for(let r=0;r<this.arraySize;r++){const a=this.array[r];typeof a<"u"&&t(a)}return}if(this.set){this.set.forEach(t);return}throw new Error("no set or array")}has(t){return this.array?this.array.indexOf(t)!==-1:this.set.has(t)}clear(){this.set?this.set.clear():(this.arraySize=0,this.array=[])}size(){return this.set?this.set.size:this.arraySize}}const Rr=Symbol.for("com.tldraw.state/RESET_VALUE");class rx{constructor(t){g(this,"index",0);g(this,"buffer");this.capacity=t,this.buffer=new Array(t)}pushEntry(t,r,a){if(a!==void 0){if(a===Rr){this.clear();return}this.buffer[this.index]=[t,r,a],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(t){const{index:r,capacity:a,buffer:s}=this;for(let n=0;n<a;n++){const o=(r-1+a-n)%a,i=s[o];if(!i)return Rr;const[l,c]=i;if(n===0&&t>=c)return[];if(l<=t&&t<c){const d=n+1,p=new Array(d);for(let f=0;f<d;f++)p[f]=s[(o+f)%a][2];return p}}return Rr}}class pN{constructor(t,r){g(this,"offset",0);g(this,"maybeRemoved");this.below=t,this.child=r}}const Qe=to("capture",()=>({stack:null}));function Hm(e){const t=Qe.stack;Qe.stack=null;try{return e()}finally{Qe.stack=t}}function ax(e){Qe.stack=new pN(Qe.stack,e),e.parentSet.clear()}function sx(){const e=Qe.stack;if(Qe.stack=e.below,e.offset<e.child.parents.length){for(let t=e.offset;t<e.child.parents.length;t++){const r=e.child.parents[t];e.child.parentSet.has(r)||Jf(r,e.child)}e.child.parents.length=e.offset,e.child.parentEpochs.length=e.offset}if(e.maybeRemoved)for(let t=0;t<e.maybeRemoved.length;t++){const r=e.maybeRemoved[t];e.child.parentSet.has(r)||Jf(r,e.child)}}function eh(e){if(Qe.stack){if(Qe.stack.child.parentSet.has(e))return;if(Qe.stack.child.parentSet.add(e),Qe.stack.child.isActivelyListening&&E_(e,Qe.stack.child),Qe.stack.offset<Qe.stack.child.parents.length){const r=Qe.stack.child.parents[Qe.stack.offset];r!==e&&(Qe.stack.maybeRemoved?Qe.stack.maybeRemoved.push(r):Qe.stack.maybeRemoved=[r])}Qe.stack.child.parents[Qe.stack.offset]=e,Qe.stack.child.parentEpochs[Qe.stack.offset]=e.lastChangedEpoch,Qe.stack.offset++}}const Fn=-1;class fN{constructor(t,r,a){g(this,"_isActivelyListening",!1);g(this,"lastTraversedEpoch",Fn);g(this,"lastReactedEpoch",Fn);g(this,"_scheduleCount",0);g(this,"parentSet",new Qf);g(this,"parentEpochs",[]);g(this,"parents",[]);g(this,"_scheduleEffect");g(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=t,this.runEffect=r,this._scheduleEffect=a==null?void 0:a.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==Fr()){if(this.parents.length&&!ex(this)){this.lastReactedEpoch=Fr();return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let t=0,r=this.parents.length;t<r;t++)E_(this.parents[t],this)}detach(){this._isActivelyListening=!1;for(let t=0,r=this.parents.length;t<r;t++)Jf(this.parents[t],this)}execute(){try{ax(this);const t=Fr(),r=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=t,r}finally{sx()}}}const jl=to("EffectScheduler",()=>fN);function Jo(e,t,r){const a=new jl(e,t,r);return a.attach(),a.scheduleEffect(),()=>{a.detach()}}function hN(e,t,r){const a=new jl(e,t,r);return{scheduler:a,start:s=>{const n=(s==null?void 0:s.force)??!1;a.attach(),n?a.scheduleEffect():a.maybeScheduleEffect()},stop:()=>{a.detach()}}}class gN{constructor(t){g(this,"initialAtomValues",new Map);this.parent=t}get isRoot(){return this.parent===null}commit(){this.isRoot?nx(this.initialAtomValues.keys()):this.initialAtomValues.forEach((t,r)=>{this.parent.initialAtomValues.has(r)||this.parent.initialAtomValues.set(r,t)})}abort(){ze.globalEpoch++,this.initialAtomValues.forEach((t,r)=>{var a;r.set(t),(a=r.historyBuffer)==null||a.clear()}),this.commit()}}const ze=to("transactions",()=>({globalEpoch:Fn+1,globalIsReacting:!1,currentTransaction:null,cleanupReactors:null,reactionEpoch:Fn+1}));function mN(){return ze.reactionEpoch}function Fr(){return ze.globalEpoch}function bN(){return ze.globalIsReacting}function D_(e,t){t.lastTraversedEpoch!==ze.globalEpoch&&(t.lastTraversedEpoch=ze.globalEpoch,t instanceof jl?e.add(t):t.children.visit(r=>D_(e,r)))}function nx(e){var t;if(ze.globalIsReacting)throw new Error("cannot change atoms during reaction cycle");try{ze.globalIsReacting=!0,ze.reactionEpoch=ze.globalEpoch;const r=new Set;for(const s of e)s.children.visit(n=>D_(r,n));for(const s of r)s.maybeScheduleEffect();let a=0;for(;(t=ze.cleanupReactors)!=null&&t.size;){if(a++>1e3)throw new Error("Reaction update depth limit exceeded");const s=ze.cleanupReactors;ze.cleanupReactors=null;for(const n of s)n.maybeScheduleEffect()}}finally{ze.cleanupReactors=null,ze.globalIsReacting=!1}}function yN(e,t){if(ze.globalIsReacting){const r=ze.cleanupReactors??(ze.cleanupReactors=new Set);e.children.visit(a=>D_(r,a))}else ze.currentTransaction?ze.currentTransaction.initialAtomValues.has(e)||ze.currentTransaction.initialAtomValues.set(e,t):nx([e])}function _N(){ze.globalEpoch++}function wN(e){const t=new gN(ze.currentTransaction);ze.currentTransaction=t;try{let r,a=!1;try{r=e(()=>a=!0)}catch(s){throw t.abort(),s}return a?t.abort():t.commit(),r}finally{ze.currentTransaction=ze.currentTransaction.parent}}function Ao(e){return ze.currentTransaction?e():wN(e)}class vN{constructor(t,r,a){g(this,"isEqual");g(this,"computeDiff");g(this,"lastChangedEpoch",Fr());g(this,"children",new Qf);g(this,"historyBuffer");this.name=t,this.current=r,this.isEqual=(a==null?void 0:a.isEqual)??null,a&&(a.historyLength&&(this.historyBuffer=new rx(a.historyLength)),this.computeDiff=a.computeDiff)}__unsafe__getWithoutCapture(t){return this.current}get(){return eh(this),this.current}set(t,r){var s,n;if(((s=this.isEqual)==null?void 0:s.call(this,this.current,t))??tx(this.current,t))return this.current;_N(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,Fr(),r??((n=this.computeDiff)==null?void 0:n.call(this,this.current,t,this.lastChangedEpoch,Fr()))??Rr),this.lastChangedEpoch=Fr();const a=this.current;return this.current=t,yN(this,a),t}update(t){return this.set(t(this.current))}getDiffSince(t){var r;return eh(this),t>=this.lastChangedEpoch?zs:((r=this.historyBuffer)==null?void 0:r.getChangesSince(t))??Rr}}const xN=to("Atom",()=>vN);function rr(e,t,r){return new xN(e,t,r)}let K3=!1;function SN(){K3||(K3=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`))}const wc=Symbol.for("com.tldraw.state/UNINITIALIZED"),ds=e=>e===wc,_b=to("WithDiff",()=>class{constructor(t,r){this.value=t,this.diff=r}});function vc(e,t){return new _b(e,t)}class kN{constructor(t,r,a){g(this,"lastChangedEpoch",Fn);g(this,"lastTraversedEpoch",Fn);g(this,"lastCheckedEpoch",Fn);g(this,"parentSet",new Qf);g(this,"parents",[]);g(this,"parentEpochs",[]);g(this,"children",new Qf);g(this,"historyBuffer");g(this,"state",wc);g(this,"error",null);g(this,"computeDiff");g(this,"isEqual");this.name=t,this.derive=r,a!=null&&a.historyLength&&(this.historyBuffer=new rx(a.historyLength)),this.computeDiff=a==null?void 0:a.computeDiff,this.isEqual=(a==null?void 0:a.isEqual)??tx}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(t){var s;const r=this.lastChangedEpoch===Fn,a=Fr();if(!r&&(this.lastCheckedEpoch===a||this.isActivelyListening&&bN()&&this.lastTraversedEpoch<mN()||!ex(this)))if(this.lastCheckedEpoch=a,this.error){if(t)return this.state;throw this.error.thrownValue}else return this.state;try{ax(this);const n=this.derive(this.state,this.lastCheckedEpoch),o=n instanceof _b?n.value:n,i=this.state===wc;if(i||!this.isEqual(o,this.state)){if(this.historyBuffer&&!i){const l=n instanceof _b?n.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,Fr(),l??((s=this.computeDiff)==null?void 0:s.call(this,this.state,o,this.lastCheckedEpoch,Fr()))??Rr)}this.lastChangedEpoch=Fr(),this.state=o}return this.error=null,this.lastCheckedEpoch=Fr(),this.state}catch(n){if(this.state!==wc&&(this.state=wc,this.lastChangedEpoch=Fr()),this.lastCheckedEpoch=Fr(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:n},!t)throw n;return this.state}finally{sx()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{eh(this)}}getDiffSince(t){var r;return this.__unsafe__getWithoutCapture(!0),eh(this),t>=this.lastChangedEpoch?zs:((r=this.historyBuffer)==null?void 0:r.getChangesSince(t))??Rr}}const T_=to("Computed",()=>kN);function FN(e={},t,r,a){const s=a.value,n=Symbol.for("__@tldraw/state__computed__"+r);return a.value=function(){let o=this[n];return o||(o=new T_(r,s.bind(this),e),Object.defineProperty(this,n,{enumerable:!1,configurable:!1,writable:!1,value:o})),o.get()},a.value[PN]=!0,a}function V3(e={},t,r,a){return a.get?(SN(),CN(e,t,r,a)):FN(e,t,r,a)}function CN(e={},t,r,a){const s=a.get,n=Symbol.for("__@tldraw/state__computed__"+r);return a.get=function(){let o=this[n];return o||(o=new T_(r,s.bind(this),e),Object.defineProperty(this,n,{enumerable:!1,configurable:!1,writable:!1,value:o})),o.get()},a}const PN="@@__isComputedMethod__@@";function K(){if(arguments.length===1){const e=arguments[0];return(t,r,a)=>V3(e,t,r,a)}else return typeof arguments[0]=="string"?new T_(arguments[0],arguments[1],arguments[2]):V3(void 0,arguments[0],arguments[1],arguments[2])}const ox=1,IN=to("apiVersion",()=>ox);if(IN!==ox)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");function ag(e,t){const r=_e.useRef(t);r.current=t;const[a,s,n]=_e.useMemo(()=>{let o=null;const i=d=>(o=d,()=>{o=null}),l=new jl(`useStateTracking(${e})`,()=>{var d;return(d=r.current)==null?void 0:d.call(r)},{scheduleEffect(){o==null||o()}});return[l,i,()=>l.scheduleCount]},[e]);return _e.useSyncExternalStore(s,n,n),_e.useEffect(()=>(a.attach(),a.maybeScheduleEffect(),()=>{a.detach()}),[a]),a.execute()}const Y3={apply(e,t,r){return ag(e.displayName??e.name??"tracked(???)",()=>e.apply(t,r))}},AN=Symbol.for("react.memo"),jN=Symbol.for("react.forward_ref");function la(e){let t=null;const r=e.$$typeof;return r===AN&&(e=e.type,t=e.compare),r===jN?S.memo(S.forwardRef(new Proxy(e.render,Y3))):S.memo(new Proxy(e,Y3),t)}function EN(){const e=arguments[0],t=arguments[1],r=arguments.length===3?void 0:arguments[2],a=arguments.length===3?arguments[2]:arguments[3];return S.useMemo(()=>K(`useComputed(${e})`,t,r),a)}function On(e,t,r=zs){S.useEffect(()=>{const a=new jl(e,t);return a.attach(),a.execute(),()=>{a.detach()}},r)}function H(){const e=arguments,t=e.length===3?e[2]:[e[0]],r=e.length===3?e[0]:`useValue(${e[0].name})`,a=S.useRef(!0);a.current=!0;const s=S.useMemo(()=>e.length===1?e[0]:K(r,()=>{if(a.current)return e[1]();try{return e[1]()}catch{return{}}}),t);try{const{subscribe:n,getSnapshot:o}=S.useMemo(()=>({subscribe:i=>Jo(`useValue(${r})`,()=>{s.get(),i()}),getSnapshot:()=>s.get()}),[s]);return S.useSyncExternalStore(n,o,o)}finally{a.current=!1}}var th={exports:{}};th.exports;(function(e,t){var r=200,a="__lodash_hash_undefined__",s=1,n=2,o=9007199254740991,i="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",f="[object Error]",h="[object Function]",y="[object GeneratorFunction]",m="[object Map]",w="[object Number]",b="[object Null]",_="[object Object]",x="[object Promise]",C="[object Proxy]",k="[object RegExp]",F="[object Set]",P="[object String]",I="[object Symbol]",j="[object Undefined]",A="[object WeakMap]",D="[object ArrayBuffer]",z="[object DataView]",T="[object Float32Array]",M="[object Float64Array]",L="[object Int8Array]",G="[object Int16Array]",W="[object Int32Array]",O="[object Uint8Array]",$="[object Uint8ClampedArray]",U="[object Uint16Array]",X="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,Ae=/^\[object .+?Constructor\]$/,je=/^(?:0|[1-9]\d*)$/,ie={};ie[T]=ie[M]=ie[L]=ie[G]=ie[W]=ie[O]=ie[$]=ie[U]=ie[X]=!0,ie[i]=ie[l]=ie[D]=ie[d]=ie[z]=ie[p]=ie[f]=ie[h]=ie[m]=ie[w]=ie[_]=ie[k]=ie[F]=ie[P]=ie[A]=!1;var qe=typeof er=="object"&&er&&er.Object===Object&&er,De=typeof self=="object"&&self&&self.Object===Object&&self,Je=qe||De||Function("return this")(),Ee=t&&!t.nodeType&&t,nt=Ee&&!0&&e&&!e.nodeType&&e,Oe=nt&&nt.exports===Ee,$r=Oe&&qe.process,Dt=function(){try{return $r&&$r.binding&&$r.binding("util")}catch{}}(),vr=Dt&&Dt.isTypedArray;function yt(E,B){for(var V=-1,Q=E==null?0:E.length,Ke=0,fe=[];++V<Q;){var pt=E[V];B(pt,V,E)&&(fe[Ke++]=pt)}return fe}function Ht(E,B){for(var V=-1,Q=B.length,Ke=E.length;++V<Q;)E[Ke+V]=B[V];return E}function Cs(E,B){for(var V=-1,Q=E==null?0:E.length;++V<Q;)if(B(E[V],V,E))return!0;return!1}function zl(E,B){for(var V=-1,Q=Array(E);++V<E;)Q[V]=B(V);return Q}function ln(E){return function(B){return E(B)}}function fA(E,B){return E.has(B)}function hA(E,B){return E==null?void 0:E[B]}function gA(E){var B=-1,V=Array(E.size);return E.forEach(function(Q,Ke){V[++B]=[Ke,Q]}),V}function mA(E,B){return function(V){return E(B(V))}}function bA(E){var B=-1,V=Array(E.size);return E.forEach(function(Q){V[++B]=Q}),V}var yA=Array.prototype,_A=Function.prototype,ou=Object.prototype,$g=Je["__core-js_shared__"],y4=_A.toString,Xa=ou.hasOwnProperty,_4=function(){var E=/[^.]+$/.exec($g&&$g.keys&&$g.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),w4=ou.toString,wA=RegExp("^"+y4.call(Xa).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v4=Oe?Je.Buffer:void 0,iu=Je.Symbol,x4=Je.Uint8Array,S4=ou.propertyIsEnumerable,vA=yA.splice,co=iu?iu.toStringTag:void 0,k4=Object.getOwnPropertySymbols,xA=v4?v4.isBuffer:void 0,SA=mA(Object.keys,Object),Ug=ti(Je,"DataView"),Nl=ti(Je,"Map"),Wg=ti(Je,"Promise"),Hg=ti(Je,"Set"),Gg=ti(Je,"WeakMap"),ql=ti(Object,"create"),kA=fo(Ug),FA=fo(Nl),CA=fo(Wg),PA=fo(Hg),IA=fo(Gg),F4=iu?iu.prototype:void 0,Kg=F4?F4.valueOf:void 0;function uo(E){var B=-1,V=E==null?0:E.length;for(this.clear();++B<V;){var Q=E[B];this.set(Q[0],Q[1])}}function AA(){this.__data__=ql?ql(null):{},this.size=0}function jA(E){var B=this.has(E)&&delete this.__data__[E];return this.size-=B?1:0,B}function EA(E){var B=this.__data__;if(ql){var V=B[E];return V===a?void 0:V}return Xa.call(B,E)?B[E]:void 0}function DA(E){var B=this.__data__;return ql?B[E]!==void 0:Xa.call(B,E)}function TA(E,B){var V=this.__data__;return this.size+=this.has(E)?0:1,V[E]=ql&&B===void 0?a:B,this}uo.prototype.clear=AA,uo.prototype.delete=jA,uo.prototype.get=EA,uo.prototype.has=DA,uo.prototype.set=TA;function Ps(E){var B=-1,V=E==null?0:E.length;for(this.clear();++B<V;){var Q=E[B];this.set(Q[0],Q[1])}}function MA(){this.__data__=[],this.size=0}function BA(E){var B=this.__data__,V=cu(B,E);if(V<0)return!1;var Q=B.length-1;return V==Q?B.pop():vA.call(B,V,1),--this.size,!0}function LA(E){var B=this.__data__,V=cu(B,E);return V<0?void 0:B[V][1]}function RA(E){return cu(this.__data__,E)>-1}function OA(E,B){var V=this.__data__,Q=cu(V,E);return Q<0?(++this.size,V.push([E,B])):V[Q][1]=B,this}Ps.prototype.clear=MA,Ps.prototype.delete=BA,Ps.prototype.get=LA,Ps.prototype.has=RA,Ps.prototype.set=OA;function po(E){var B=-1,V=E==null?0:E.length;for(this.clear();++B<V;){var Q=E[B];this.set(Q[0],Q[1])}}function zA(){this.size=0,this.__data__={hash:new uo,map:new(Nl||Ps),string:new uo}}function NA(E){var B=du(this,E).delete(E);return this.size-=B?1:0,B}function qA(E){return du(this,E).get(E)}function $A(E){return du(this,E).has(E)}function UA(E,B){var V=du(this,E),Q=V.size;return V.set(E,B),this.size+=V.size==Q?0:1,this}po.prototype.clear=zA,po.prototype.delete=NA,po.prototype.get=qA,po.prototype.has=$A,po.prototype.set=UA;function lu(E){var B=-1,V=E==null?0:E.length;for(this.__data__=new po;++B<V;)this.add(E[B])}function WA(E){return this.__data__.set(E,a),this}function HA(E){return this.__data__.has(E)}lu.prototype.add=lu.prototype.push=WA,lu.prototype.has=HA;function cn(E){var B=this.__data__=new Ps(E);this.size=B.size}function GA(){this.__data__=new Ps,this.size=0}function KA(E){var B=this.__data__,V=B.delete(E);return this.size=B.size,V}function VA(E){return this.__data__.get(E)}function YA(E){return this.__data__.has(E)}function XA(E,B){var V=this.__data__;if(V instanceof Ps){var Q=V.__data__;if(!Nl||Q.length<r-1)return Q.push([E,B]),this.size=++V.size,this;V=this.__data__=new po(Q)}return V.set(E,B),this.size=V.size,this}cn.prototype.clear=GA,cn.prototype.delete=KA,cn.prototype.get=VA,cn.prototype.has=YA,cn.prototype.set=XA;function ZA(E,B){var V=uu(E),Q=!V&&pj(E),Ke=!V&&!Q&&Vg(E),fe=!V&&!Q&&!Ke&&M4(E),pt=V||Q||Ke||fe,Ct=pt?zl(E.length,String):[],Tt=Ct.length;for(var ot in E)(B||Xa.call(E,ot))&&!(pt&&(ot=="length"||Ke&&(ot=="offset"||ot=="parent")||fe&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||ij(ot,Tt)))&&Ct.push(ot);return Ct}function cu(E,B){for(var V=E.length;V--;)if(j4(E[V][0],B))return V;return-1}function JA(E,B,V){var Q=B(E);return uu(E)?Q:Ht(Q,V(E))}function $l(E){return E==null?E===void 0?j:b:co&&co in Object(E)?nj(E):uj(E)}function C4(E){return Ul(E)&&$l(E)==i}function P4(E,B,V,Q,Ke){return E===B?!0:E==null||B==null||!Ul(E)&&!Ul(B)?E!==E&&B!==B:QA(E,B,V,Q,P4,Ke)}function QA(E,B,V,Q,Ke,fe){var pt=uu(E),Ct=uu(B),Tt=pt?l:dn(E),ot=Ct?l:dn(B);Tt=Tt==i?_:Tt,ot=ot==i?_:ot;var Ur=Tt==_,Ia=ot==_,Gt=Tt==ot;if(Gt&&Vg(E)){if(!Vg(B))return!1;pt=!0,Ur=!1}if(Gt&&!Ur)return fe||(fe=new cn),pt||M4(E)?I4(E,B,V,Q,Ke,fe):aj(E,B,Tt,V,Q,Ke,fe);if(!(V&s)){var da=Ur&&Xa.call(E,"__wrapped__"),ua=Ia&&Xa.call(B,"__wrapped__");if(da||ua){var un=da?E.value():E,Is=ua?B.value():B;return fe||(fe=new cn),Ke(un,Is,V,Q,fe)}}return Gt?(fe||(fe=new cn),sj(E,B,V,Q,Ke,fe)):!1}function ej(E){if(!T4(E)||cj(E))return!1;var B=E4(E)?wA:Ae;return B.test(fo(E))}function tj(E){return Ul(E)&&D4(E.length)&&!!ie[$l(E)]}function rj(E){if(!dj(E))return SA(E);var B=[];for(var V in Object(E))Xa.call(E,V)&&V!="constructor"&&B.push(V);return B}function I4(E,B,V,Q,Ke,fe){var pt=V&s,Ct=E.length,Tt=B.length;if(Ct!=Tt&&!(pt&&Tt>Ct))return!1;var ot=fe.get(E);if(ot&&fe.get(B))return ot==B;var Ur=-1,Ia=!0,Gt=V&n?new lu:void 0;for(fe.set(E,B),fe.set(B,E);++Ur<Ct;){var da=E[Ur],ua=B[Ur];if(Q)var un=pt?Q(ua,da,Ur,B,E,fe):Q(da,ua,Ur,E,B,fe);if(un!==void 0){if(un)continue;Ia=!1;break}if(Gt){if(!Cs(B,function(Is,ho){if(!fA(Gt,ho)&&(da===Is||Ke(da,Is,V,Q,fe)))return Gt.push(ho)})){Ia=!1;break}}else if(!(da===ua||Ke(da,ua,V,Q,fe))){Ia=!1;break}}return fe.delete(E),fe.delete(B),Ia}function aj(E,B,V,Q,Ke,fe,pt){switch(V){case z:if(E.byteLength!=B.byteLength||E.byteOffset!=B.byteOffset)return!1;E=E.buffer,B=B.buffer;case D:return!(E.byteLength!=B.byteLength||!fe(new x4(E),new x4(B)));case d:case p:case w:return j4(+E,+B);case f:return E.name==B.name&&E.message==B.message;case k:case P:return E==B+"";case m:var Ct=gA;case F:var Tt=Q&s;if(Ct||(Ct=bA),E.size!=B.size&&!Tt)return!1;var ot=pt.get(E);if(ot)return ot==B;Q|=n,pt.set(E,B);var Ur=I4(Ct(E),Ct(B),Q,Ke,fe,pt);return pt.delete(E),Ur;case I:if(Kg)return Kg.call(E)==Kg.call(B)}return!1}function sj(E,B,V,Q,Ke,fe){var pt=V&s,Ct=A4(E),Tt=Ct.length,ot=A4(B),Ur=ot.length;if(Tt!=Ur&&!pt)return!1;for(var Ia=Tt;Ia--;){var Gt=Ct[Ia];if(!(pt?Gt in B:Xa.call(B,Gt)))return!1}var da=fe.get(E);if(da&&fe.get(B))return da==B;var ua=!0;fe.set(E,B),fe.set(B,E);for(var un=pt;++Ia<Tt;){Gt=Ct[Ia];var Is=E[Gt],ho=B[Gt];if(Q)var B4=pt?Q(ho,Is,Gt,B,E,fe):Q(Is,ho,Gt,E,B,fe);if(!(B4===void 0?Is===ho||Ke(Is,ho,V,Q,fe):B4)){ua=!1;break}un||(un=Gt=="constructor")}if(ua&&!un){var pu=E.constructor,fu=B.constructor;pu!=fu&&"constructor"in E&&"constructor"in B&&!(typeof pu=="function"&&pu instanceof pu&&typeof fu=="function"&&fu instanceof fu)&&(ua=!1)}return fe.delete(E),fe.delete(B),ua}function A4(E){return JA(E,gj,oj)}function du(E,B){var V=E.__data__;return lj(B)?V[typeof B=="string"?"string":"hash"]:V.map}function ti(E,B){var V=hA(E,B);return ej(V)?V:void 0}function nj(E){var B=Xa.call(E,co),V=E[co];try{E[co]=void 0;var Q=!0}catch{}var Ke=w4.call(E);return Q&&(B?E[co]=V:delete E[co]),Ke}var oj=k4?function(E){return E==null?[]:(E=Object(E),yt(k4(E),function(B){return S4.call(E,B)}))}:mj,dn=$l;(Ug&&dn(new Ug(new ArrayBuffer(1)))!=z||Nl&&dn(new Nl)!=m||Wg&&dn(Wg.resolve())!=x||Hg&&dn(new Hg)!=F||Gg&&dn(new Gg)!=A)&&(dn=function(E){var B=$l(E),V=B==_?E.constructor:void 0,Q=V?fo(V):"";if(Q)switch(Q){case kA:return z;case FA:return m;case CA:return x;case PA:return F;case IA:return A}return B});function ij(E,B){return B=B??o,!!B&&(typeof E=="number"||je.test(E))&&E>-1&&E%1==0&&E<B}function lj(E){var B=typeof E;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?E!=="__proto__":E===null}function cj(E){return!!_4&&_4 in E}function dj(E){var B=E&&E.constructor,V=typeof B=="function"&&B.prototype||ou;return E===V}function uj(E){return w4.call(E)}function fo(E){if(E!=null){try{return y4.call(E)}catch{}try{return E+""}catch{}}return""}function j4(E,B){return E===B||E!==E&&B!==B}var pj=C4(function(){return arguments}())?C4:function(E){return Ul(E)&&Xa.call(E,"callee")&&!S4.call(E,"callee")},uu=Array.isArray;function fj(E){return E!=null&&D4(E.length)&&!E4(E)}var Vg=xA||bj;function hj(E,B){return P4(E,B)}function E4(E){if(!T4(E))return!1;var B=$l(E);return B==h||B==y||B==c||B==C}function D4(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=o}function T4(E){var B=typeof E;return E!=null&&(B=="object"||B=="function")}function Ul(E){return E!=null&&typeof E=="object"}var M4=vr?ln(vr):tj;function gj(E){return fj(E)?ZA(E):rj(E)}function mj(){return[]}function bj(){return!1}e.exports=hj})(th,th.exports);var DN=th.exports;const TN=Yn(DN);function MN(e){if(e.length===0)return new Set;const t=e[0],r=e.slice(1),a=new Set;for(const s of t)r.every(n=>n.has(s))&&a.add(s);return a}function BN(e,t){const r={};for(const a of t)e.has(a)||(r.added??(r.added=new Set),r.added.add(a));for(const a of e)t.has(a)||(r.removed??(r.removed=new Set),r.removed.add(a));return r.added||r.removed?r:void 0}function X3(e,t){for(const[r,a]of Object.entries(e)){const s=a,n=t[r];if("eq"in s&&n!==s.eq||"neq"in s&&n===s.neq||"gt"in s&&(typeof n!="number"||n<=s.gt))return!1}return!0}function Z3(e,t,r){const a=Object.fromEntries(Object.keys(r).map(s=>[s,new Set]));for(const[s,n]of Object.entries(r))if("eq"in n){const i=e.index(t,s).get().get(n.eq);if(i)for(const l of i)a[s].add(l)}else if("neq"in n){const o=e.index(t,s);for(const[i,l]of o.get())if(i!==n.neq)for(const c of l)a[s].add(c)}else if("gt"in n){const o=e.index(t,s);for(const[i,l]of o.get())if(i>n.gt)for(const c of l)a[s].add(c)}return MN(Object.values(a))}class LN{constructor(t,r){g(this,"indexCache",new Map);g(this,"historyCache",new Map);this.atoms=t,this.history=r}filterHistory(t){if(this.historyCache.has(t))return this.historyCache.get(t);const r=K("filterHistory:"+t,(a,s)=>{if(ds(a))return this.history.get();const n=this.history.getDiffSince(s);if(n===Rr)return this.history.get();const o={added:{},removed:{},updated:{}};let i=0,l=0,c=0;for(const d of n){for(const p of ht(d.added))if(p.typeName===t)if(o.removed[p.id]){const f=o.removed[p.id];delete o.removed[p.id],l--,f!==p&&(o.updated[p.id]=[f,p],c++)}else o.added[p.id]=p,i++;for(const[p,f]of ht(d.updated))f.typeName===t&&(o.added[f.id]?o.added[f.id]=f:o.updated[f.id]?o.updated[f.id]=[o.updated[f.id][0],f]:(o.updated[f.id]=[p,f],c++));for(const p of ht(d.removed))p.typeName===t&&(o.added[p.id]?(delete o.added[p.id],i--):o.updated[p.id]?(o.removed[p.id]=o.updated[p.id][0],delete o.updated[p.id],c--,l++):(o.removed[p.id]=p,l++))}return i||l||c?vc(this.history.get(),o):a},{historyLength:100});return this.historyCache.set(t,r),r}index(t,r){const a=t+":"+r;if(this.indexCache.has(a))return this.indexCache.get(a);const s=this.__uncached_createIndex(t,r);return this.indexCache.set(a,s),s}__uncached_createIndex(t,r){const a=this.filterHistory(t),s=()=>{a.get();const n=new Map;for(const o of ht(this.atoms.get())){const i=o.get();if(i.typeName===t){const l=i[r];n.has(l)||n.set(l,new Set),n.get(l).add(i.id)}}return n};return K("index:"+t+":"+r,(n,o)=>{if(ds(n))return s();const i=a.getDiffSince(o);if(i===Rr)return s();const l=new Map,c=(h,y)=>{let m=l.get(h);m||(m=new Dp(n.get(h)??new Set)),m.add(y),l.set(h,m)},d=(h,y)=>{let m=l.get(h);m||(m=new Dp(n.get(h)??new Set)),m.remove(y),l.set(h,m)};for(const h of i){for(const y of ht(h.added))if(y.typeName===t){const m=y[r];c(m,y.id)}for(const[y,m]of ht(h.updated))if(m.typeName===t){const w=y[r],b=m[r];w!==b&&(d(w,m.id),c(b,m.id))}for(const y of ht(h.removed))if(y.typeName===t){const m=y[r];d(m,y.id)}}let p,f;for(const[h,y]of l){const m=y.get();m&&(p||(p=new Map(n)),f||(f=new Map),m.value.size===0?p.delete(h):p.set(h,m.value),f.set(h,m.diff))}return p&&f?vc(p,f):n},{historyLength:100})}record(t,r=()=>({}),a="record:"+t+(r?":"+r.toString():"")){const s=this.ids(t,r,a);return K(a,()=>{var n;for(const o of s.get())return(n=this.atoms.get()[o])==null?void 0:n.get()})}records(t,r=()=>({}),a="records:"+t+(r?":"+r.toString():"")){const s=this.ids(t,r,"ids:"+a);return K(a,()=>[...s.get()].map(n=>{const o=this.atoms.get()[n];if(!o)throw new Error("no atom found for record id: "+n);return o.get()}))}ids(t,r=()=>({}),a="ids:"+t+(r?":"+r.toString():"")){const s=this.filterHistory(t),n=()=>{s.get();const l=r();return Object.keys(l).length===0?new Set(ht(this.atoms.get()).flatMap(c=>{const d=c.get();return d.typeName===t?d.id:[]})):Z3(this,t,l)},o=l=>{const c=n(),d=BN(l,c);return d?vc(c,d):l},i=K("ids_query:"+a,r,{isEqual:TN});return K("query:"+a,(l,c)=>{const d=i.get();if(ds(l))return n();if(c<i.lastChangedEpoch)return o(l);const p=s.getDiffSince(c);if(p===Rr)return o(l);const f=new Dp(l);for(const y of p){for(const m of ht(y.added))m.typeName===t&&X3(d,m)&&f.add(m.id);for(const[m,w]of ht(y.updated))w.typeName===t&&(X3(d,w)?f.add(w.id):f.remove(w.id));for(const m of ht(y.removed))m.typeName===t&&f.remove(m.id)}const h=f.get();return h?vc(h.value,h.diff):l},{historyLength:50})}exec(t,r){const a=Z3(this,t,r);if(a.size===0)return zs;const s=this.atoms.get();return[...a].map(n=>s[n].get())}}class RN{constructor(t){g(this,"_beforeCreateHandlers",{});g(this,"_afterCreateHandlers",{});g(this,"_beforeChangeHandlers",{});g(this,"_afterChangeHandlers",{});g(this,"_beforeDeleteHandlers",{});g(this,"_afterDeleteHandlers",{});g(this,"_operationCompleteHandlers",[]);g(this,"_isEnabled",!0);this.store=t}isEnabled(){return this._isEnabled}setIsEnabled(t){this._isEnabled=t}handleBeforeCreate(t,r){if(!this._isEnabled)return t;const a=this._beforeCreateHandlers[t.typeName];if(a){let s=t;for(const n of a)s=n(s,r);return s}return t}handleAfterCreate(t,r){if(!this._isEnabled)return;const a=this._afterCreateHandlers[t.typeName];if(a)for(const s of a)s(t,r)}handleBeforeChange(t,r,a){if(!this._isEnabled)return r;const s=this._beforeChangeHandlers[r.typeName];if(s){let n=r;for(const o of s)n=o(t,n,a);return n}return r}handleAfterChange(t,r,a){if(!this._isEnabled)return;const s=this._afterChangeHandlers[r.typeName];if(s)for(const n of s)n(t,r,a)}handleBeforeDelete(t,r){if(!this._isEnabled)return!0;const a=this._beforeDeleteHandlers[t.typeName];if(a){for(const s of a)if(s(t,r)===!1)return!1}return!0}handleAfterDelete(t,r){if(!this._isEnabled)return;const a=this._afterDeleteHandlers[t.typeName];if(a)for(const s of a)s(t,r)}handleOperationComplete(t){if(this._isEnabled)for(const r of this._operationCompleteHandlers)r(t)}register(t){const r=[];for(const[a,s]of Object.entries(t))s!=null&&s.beforeCreate&&r.push(this.registerBeforeCreateHandler(a,s.beforeCreate)),s!=null&&s.afterCreate&&r.push(this.registerAfterCreateHandler(a,s.afterCreate)),s!=null&&s.beforeChange&&r.push(this.registerBeforeChangeHandler(a,s.beforeChange)),s!=null&&s.afterChange&&r.push(this.registerAfterChangeHandler(a,s.afterChange)),s!=null&&s.beforeDelete&&r.push(this.registerBeforeDeleteHandler(a,s.beforeDelete)),s!=null&&s.afterDelete&&r.push(this.registerAfterDeleteHandler(a,s.afterDelete));return()=>{for(const a of r)a()}}registerBeforeCreateHandler(t,r){return this._beforeCreateHandlers[t]||(this._beforeCreateHandlers[t]=[]),this._beforeCreateHandlers[t].push(r),()=>go(this._beforeCreateHandlers[t],r)}registerAfterCreateHandler(t,r){return this._afterCreateHandlers[t]||(this._afterCreateHandlers[t]=[]),this._afterCreateHandlers[t].push(r),()=>go(this._afterCreateHandlers[t],r)}registerBeforeChangeHandler(t,r){return this._beforeChangeHandlers[t]||(this._beforeChangeHandlers[t]=[]),this._beforeChangeHandlers[t].push(r),()=>go(this._beforeChangeHandlers[t],r)}registerAfterChangeHandler(t,r){return this._afterChangeHandlers[t]||(this._afterChangeHandlers[t]=[]),this._afterChangeHandlers[t].push(r),()=>go(this._afterChangeHandlers[t],r)}registerBeforeDeleteHandler(t,r){return this._beforeDeleteHandlers[t]||(this._beforeDeleteHandlers[t]=[]),this._beforeDeleteHandlers[t].push(r),()=>go(this._beforeDeleteHandlers[t],r)}registerAfterDeleteHandler(t,r){return this._afterDeleteHandlers[t]||(this._afterDeleteHandlers[t]=[]),this._afterDeleteHandlers[t].push(r),()=>go(this._afterDeleteHandlers[t],r)}registerOperationCompleteHandler(t){return this._operationCompleteHandlers.push(t),()=>go(this._operationCompleteHandlers,t)}}function go(e,t){const r=e.indexOf(t);r>=0&&e.splice(r,1)}class M_{constructor(t){g(this,"id");g(this,"atoms",rr("store_atoms",{}));g(this,"history",rr("history",0,{historyLength:1e3}));g(this,"query",new LN(this.atoms,this.history));g(this,"listeners",new Set);g(this,"historyAccumulator",new zN);g(this,"historyReactor");g(this,"schema");g(this,"props");g(this,"scopedTypes");g(this,"sideEffects",new RN(this));g(this,"put",(t,r)=>{this.atomic(()=>{const a={},s={},n=this.atoms.__unsafe__getWithoutCapture();let o=null,i,l=!1;const c=this.isMergingRemoteChanges?"remote":"user";for(let d=0,p=t.length;d<p;d++){i=t[d];const f=(o??n)[i.id];if(f){const h=f.__unsafe__getWithoutCapture();if(i=this.sideEffects.handleBeforeChange(h,i,c),this.schema.validateRecord(this,i,r??"updateRecord",h)===h)continue;f.set(i),l=!0;const m=f.__unsafe__getWithoutCapture();a[i.id]=[h,m],this.addDiffForAfterEvent(h,m)}else i=this.sideEffects.handleBeforeCreate(i,c),l=!0,i=this.schema.validateRecord(this,i,r??"createRecord",null),s[i.id]=i,this.addDiffForAfterEvent(null,i),o||(o={...n}),o[i.id]=rr("atom:"+i.id,i)}o&&this.atoms.set(o),l&&this.updateHistory({added:s,updated:a,removed:{}})})});g(this,"remove",t=>{this.atomic(()=>{const r=new Set,a=this.isMergingRemoteChanges?"remote":"user";if(this.sideEffects.isEnabled())for(const n of t){const o=this.atoms.__unsafe__getWithoutCapture()[n];o&&this.sideEffects.handleBeforeDelete(o.get(),a)===!1&&r.add(n)}let s;this.atoms.update(n=>{let o;for(const i of t){if(r.has(i)||!(i in n))continue;o||(o={...n}),s||(s={}),delete o[i];const l=n[i].get();s[i]=l,this.addDiffForAfterEvent(l,null)}return o??n}),s&&this.updateHistory({added:{},updated:{},removed:s})})});g(this,"get",t=>{var r;return(r=this.atoms.get()[t])==null?void 0:r.get()});g(this,"unsafeGetWithoutCapture",t=>{var r;return(r=this.atoms.get()[t])==null?void 0:r.__unsafe__getWithoutCapture()});g(this,"serialize",(t="document")=>{const r={};for(const[a,s]of Lr(this.atoms.get())){const n=s.get();(t==="all"||this.scopedTypes[t].has(n.typeName))&&(r[a]=n)}return r});g(this,"allRecords",()=>ht(this.atoms.get()).map(t=>t.get()));g(this,"clear",()=>{this.remove($3(this.atoms.get()))});g(this,"update",(t,r)=>{const a=this.atoms.get()[t];if(!a){console.error(`Record ${t} not found. This is probably an error`);return}this.put([r(a.__unsafe__getWithoutCapture())])});g(this,"has",t=>!!this.atoms.get()[t]);g(this,"listen",(t,r)=>{this._flushHistory();const a={onHistory:t,filters:{source:(r==null?void 0:r.source)??"all",scope:(r==null?void 0:r.scope)??"all"}};return this.listeners.add(a),this.historyReactor.scheduler.isActivelyListening||this.historyReactor.start(),()=>{this.listeners.delete(a),this.listeners.size===0&&this.historyReactor.stop()}});g(this,"isMergingRemoteChanges",!1);g(this,"mergeRemoteChanges",t=>{if(this.isMergingRemoteChanges)return t();if(this._isInAtomicOp)throw new Error("Cannot merge remote changes while in atomic operation");try{this.isMergingRemoteChanges=!0,Ao(t)}finally{this.isMergingRemoteChanges=!1}});g(this,"createComputedCache",(t,r,a)=>{const s=new $n;return{get:n=>{const o=this.atoms.get()[n];if(o)return s.get(o,()=>{const i=a?K(o.name+":equals",()=>o.get(),{isEqual:a}):o;return K(t+":"+n,()=>r(i.get()))}).get()}}});g(this,"createSelectedComputedCache",(t,r,a)=>{const s=new $n;return{get:n=>{const o=this.atoms.get()[n];if(o)return s.get(o,()=>{const i=K(t+":"+n+":selector",()=>r(o.get()));return K(t+":"+n,()=>a(i.get()))}).get()}}});g(this,"_integrityChecker");g(this,"_isPossiblyCorrupted",!1);g(this,"pendingAfterEvents",null);g(this,"_isInAtomicOp",!1);const{initialData:r,schema:a,id:s}=t;this.id=s??zd(),this.schema=a,this.props=t.props,r&&this.atoms.set(qv(Lr(r).map(([n,o])=>[n,rr("atom:"+n,this.schema.validateRecord(this,o,"initialize",null))]))),this.historyReactor=hN("Store.historyReactor",()=>{this.history.get(),this._flushHistory()},{scheduleEffect:n=>Xv(n)}),this.scopedTypes={document:new Set(ht(this.schema.types).filter(n=>n.scope==="document").map(n=>n.typeName)),session:new Set(ht(this.schema.types).filter(n=>n.scope==="session").map(n=>n.typeName)),presence:new Set(ht(this.schema.types).filter(n=>n.scope==="presence").map(n=>n.typeName))}}_flushHistory(){if(this.historyAccumulator.hasChanges()){const t=this.historyAccumulator.flush();for(const{changes:r,source:a}of t){let s=null,n=null,o=null;for(const{onHistory:i,filters:l}of this.listeners)if(!(l.source!=="all"&&l.source!==a))if(l.scope!=="all")if(l.scope==="document"){if(n??(n=this.filterChangesByScope(r,"document")),!n)continue;i({changes:n,source:a})}else if(l.scope==="session"){if(s??(s=this.filterChangesByScope(r,"session")),!s)continue;i({changes:s,source:a})}else{if(o??(o=this.filterChangesByScope(r,"presence")),!o)continue;i({changes:o,source:a})}else i({changes:r,source:a})}}}filterChangesByScope(t,r){const a={added:zc(t.added,(s,n)=>this.scopedTypes[r].has(n.typeName)),updated:zc(t.updated,(s,n)=>this.scopedTypes[r].has(n[1].typeName)),removed:zc(t.removed,(s,n)=>this.scopedTypes[r].has(n.typeName))};return Object.keys(a.added).length===0&&Object.keys(a.updated).length===0&&Object.keys(a.removed).length===0?null:a}updateHistory(t){this.historyAccumulator.add({changes:t,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,t)}validate(t){this.allRecords().forEach(r=>this.schema.validateRecord(this,r,t,null))}getStoreSnapshot(t="document"){return{store:this.serialize(t),schema:this.schema.serialize()}}getSnapshot(t="document"){return console.warn("[tldraw] `Store.getSnapshot` is deprecated and will be removed in a future release. Use `getSnapshot` from the `tldraw` package instead."),this.getStoreSnapshot(t)}migrateSnapshot(t){const r=this.schema.migrateStoreSnapshot(t);if(r.type==="error")throw new Error(`Failed to migrate snapshot: ${r.reason}`);return{store:r.value,schema:this.schema.serialize()}}loadStoreSnapshot(t){const r=this.schema.migrateStoreSnapshot(t);if(r.type==="error")throw new Error(`Failed to migrate snapshot: ${r.reason}`);const a=this.sideEffects.isEnabled();try{this.sideEffects.setIsEnabled(!1),this.atomic(()=>{this.clear(),this.put(Object.values(r.value)),this.ensureStoreIsUsable()})}finally{this.sideEffects.setIsEnabled(a)}}loadSnapshot(t){console.warn("[tldraw] `Store.loadSnapshot` is deprecated and will be removed in a future release. Use `loadSnapshot` from the 'tldraw' package instead."),this.loadStoreSnapshot(t)}extractingChanges(t){const r=[],a=this.historyAccumulator.addInterceptor(s=>r.push(s.changes));try{return Ao(t),j_(r)}finally{a()}}applyDiff(t,{runCallbacks:r=!0,ignoreEphemeralKeys:a=!1}={}){this.atomic(()=>{const s=ht(t.added);for(const[o,i]of ht(t.updated)){const l=this.schema.getType(i.typeName);if(a&&l.ephemeralKeySet.size){const c=this.get(i.id);if(!c){s.push(i);continue}let d=null;for(const[p,f]of Object.entries(i))l.ephemeralKeySet.has(p)||Object.is(f,jr(c,p))||(d||(d={...c}),d[p]=f);d&&s.push(d)}else s.push(i)}const n=$3(t.removed);s.length&&this.put(s),n.length&&this.remove(n)},r)}ensureStoreIsUsable(){this.atomic(()=>{var t;this._integrityChecker??(this._integrityChecker=this.schema.createIntegrityChecker(this)),(t=this._integrityChecker)==null||t.call(this)})}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}addDiffForAfterEvent(t,r){if(at(this.pendingAfterEvents,"must be in event operation"),t===r||(t&&r&&at(t.id===r.id),!t&&!r))return;const a=(t||r).id,s=this.pendingAfterEvents.get(a);s?s.after=r:this.pendingAfterEvents.set(a,{before:t,after:r})}flushAtomicCallbacks(){let t=0;const r=this.isMergingRemoteChanges?"remote":"user";for(;this.pendingAfterEvents;){const a=this.pendingAfterEvents;if(this.pendingAfterEvents=null,!!this.sideEffects.isEnabled()){if(t++,t>100)throw new Error("Maximum store update depth exceeded, bailing out");for(const{before:s,after:n}of a.values())s&&n?this.sideEffects.handleAfterChange(s,n,r):s&&!n?this.sideEffects.handleAfterDelete(s,r):!s&&n&&this.sideEffects.handleAfterCreate(n,r);this.pendingAfterEvents||this.sideEffects.handleOperationComplete(r)}}}atomic(t,r=!0){return Ao(()=>{if(this._isInAtomicOp)return this.pendingAfterEvents||(this.pendingAfterEvents=new Map),t();this.pendingAfterEvents=new Map;const a=this.sideEffects.isEnabled();this.sideEffects.setIsEnabled(r??a),this._isInAtomicOp=!0;try{const s=t();return this.flushAtomicCallbacks(),s}finally{this.pendingAfterEvents=null,this.sideEffects.setIsEnabled(a),this._isInAtomicOp=!1}})}addHistoryInterceptor(t){return this.historyAccumulator.addInterceptor(r=>t(r,this.isMergingRemoteChanges?"remote":"user"))}}function ON(e){if(e.length===0)return[];const t=[];let r=[e[0]],a;for(let s=1,n=e.length;s<n;s++)a=e[s],r[0].source!==a.source&&(t.push(r),r=[]),r.push(a);return t.push(r),t.map(s=>({source:s[0].source,changes:j_(s.map(n=>n.changes))}))}class zN{constructor(){g(this,"_history",[]);g(this,"_interceptors",new Set)}addInterceptor(t){return this._interceptors.add(t),()=>{this._interceptors.delete(t)}}add(t){this._history.push(t);for(const r of this._interceptors)r(t)}flush(){const t=ON(this._history);return this._history=[],t}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function NN(e,t,r){const a=new $n;return{get(s,n){return a.get(s,()=>(s instanceof M_?s:s.store).createComputedCache(e,l=>t(s,l),r)).get(n)}}}function qN(e){const t=[];for(let r=e.length-1;r>=0;r--){const a=e[r];if("id"in a)t.unshift(a);else{const s=a.dependsOn,n=t[0];n&&(t[0]={...n,dependsOn:s.concat(n.dependsOn??[])})}}return t}function Xi({sequence:e,sequenceId:t,retroactive:r=!0}){const a={sequenceId:t,retroactive:r,sequence:qN(e)};return ix(a),a}function Nr(e,t){return Object.fromEntries(Lr(t).map(([r,a])=>[r,`${e}/${a}`]))}function ca(e){const t=e.sequenceId;return Xi({sequenceId:t,retroactive:e.retroactive??!0,sequence:e.sequence.map(r=>"id"in r?{...r,scope:"record",filter:a=>{var s,n;return a.typeName===e.recordType&&(((s=r.filter)==null?void 0:s.call(r,a))??!0)&&(((n=e.filter)==null?void 0:n.call(e,a))??!0)}}:r)})}function $N(e){const t=new Map(e.map(n=>[n.id,n])),r=new Set,a=[];function s(n){at(!r.has(n.id),`Circular dependency in migrations: ${n.id}`),r.add(n.id);const{version:o,sequenceId:i}=rh(n.id),l=t.get(`${i}/${o-1}`);if(l&&s(l),n.dependsOn)for(const c of n.dependsOn){const d=t.get(c);d&&s(d)}t.delete(n.id),a.push(n)}for(const n of t.values())s(n);return a}function rh(e){const[t,r]=e.split("/");return{sequenceId:t,version:parseInt(r)}}function J3(e,t){t&&at(e.startsWith(t+"/"),`Every migration in sequence '${t}' must have an id starting with '${t}/'. Got invalid id: '${e}'`),at(e.match(/^(.*?)\/(0|[1-9]\d*)$/),`Invalid migration id: '${e}'`)}function ix(e){if(at(!e.sequenceId.includes("/"),`sequenceId cannot contain a '/', got ${e.sequenceId}`),at(e.sequenceId.length,"sequenceId must be a non-empty string"),e.sequence.length===0)return;J3(e.sequence[0].id,e.sequenceId);let t=rh(e.sequence[0].id).version;at(t===1,`Expected the first migrationId to be '${e.sequenceId}/1' but got '${e.sequence[0].id}'`);for(let r=1;r<e.sequence.length;r++){const a=e.sequence[r].id;J3(a,e.sequenceId);const s=rh(a).version;at(s===t+1,`Migration id numbers must increase in increments of 1, expected ${e.sequenceId}/${t+1} but got '${e.sequence[r].id}'`),t=s}}var mn=(e=>(e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e))(mn||{});function UN(e){if(e.schemaVersion>2||e.schemaVersion<1)return Rn.err("Bad schema version");if(e.schemaVersion===2)return Rn.ok(e);const t={schemaVersion:2,sequences:{}};for(const[r,a]of Object.entries(e.recordVersions))if(t.sequences[`com.tldraw.${r}`]=a.version,"subTypeKey"in a)for(const[s,n]of Object.entries(a.subTypeVersions))t.sequences[`com.tldraw.${r}.${s}`]=n;return Rn.ok(t)}class B_{constructor(t,r){g(this,"migrations",{});g(this,"sortedMigrations");var s;this.types=t,this.options=r;for(const n of r.migrations??[])at(!this.migrations[n.sequenceId],`Duplicate migration sequenceId ${n.sequenceId}`),ix(n),this.migrations[n.sequenceId]=n;const a=Object.values(this.migrations).flatMap(n=>n.sequence);this.sortedMigrations=$N(a);for(const n of this.sortedMigrations)if((s=n.dependsOn)!=null&&s.length)for(const o of n.dependsOn){const i=a.find(l=>l.id===o);at(i,`Migration '${n.id}' depends on missing migration '${o}'`)}}static create(t,r){return new B_(t,r??{})}validateRecord(t,r,a,s){try{const n=jr(this.types,r.typeName);if(!n)throw new Error(`Missing definition for record type ${r.typeName}`);return n.validate(r,s??void 0)}catch(n){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:t,record:r,phase:a,recordBefore:s,error:n});throw n}}getMigrationsSince(t){const r=UN(t);if(!r.ok)return r;const a=r.value,s=new Set(Object.keys(a.sequences).filter(o=>this.migrations[o]));for(const o in this.migrations)a.sequences[o]===void 0&&this.migrations[o].retroactive&&s.add(o);if(s.size===0)return Rn.ok([]);const n=new Set;for(const o of s){const i=a.sequences[o];if(typeof i!="number"&&this.migrations[o].retroactive||i===0){for(const d of this.migrations[o].sequence)n.add(d.id);continue}const l=`${o}/${i}`,c=this.migrations[o].sequence.findIndex(d=>d.id===l);if(c===-1)return Rn.err("Incompatible schema?");for(const d of this.migrations[o].sequence.slice(c+1))n.add(d.id)}return Rn.ok(this.sortedMigrations.filter(({id:o})=>n.has(o)))}migratePersistedRecord(t,r,a="up"){const s=this.getMigrationsSince(r);if(!s.ok)return console.error("Error migrating record",s.error),{type:"error",reason:mn.MigrationError};let n=s.value;if(n.length===0)return{type:"success",value:t};if(n.some(o=>o.scope==="store"))return{type:"error",reason:a==="down"?mn.TargetVersionTooOld:mn.TargetVersionTooNew};if(a==="down"){if(!n.every(o=>o.down))return{type:"error",reason:mn.TargetVersionTooOld};n=n.slice().reverse()}t=mt(t);try{for(const o of n){if(o.scope==="store")throw new Error;if(!(o.filter?o.filter(t):!0))continue;const l=o[a](t);l&&(t=mt(l))}}catch(o){return console.error("Error migrating record",o),{type:"error",reason:mn.MigrationError}}return{type:"success",value:t}}migrateStoreSnapshot(t){let{store:r}=t;const a=this.getMigrationsSince(t.schema);if(!a.ok)return console.error("Error migrating store",a.error),{type:"error",reason:mn.MigrationError};const s=a.value;if(s.length===0)return{type:"success",value:r};r=mt(r);try{for(const n of s)if(n.scope==="record")for(const[o,i]of Object.entries(r)){if(!(n.filter?n.filter(i):!0))continue;const c=n.up(i);c&&(r[o]=mt(c))}else if(n.scope==="store"){const o=n.up(r);o&&(r=mt(o))}else tr(n)}catch(n){return console.error("Error migrating store",n),{type:"error",reason:mn.MigrationError}}return{type:"success",value:r}}createIntegrityChecker(t){var r,a;return((a=(r=this.options).createIntegrityChecker)==null?void 0:a.call(r,t))??void 0}serialize(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:t,sequence:r})=>[t,r.length?rh(r.at(-1).id).version:0]))}}serializeEarliestVersion(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:t})=>[t,0]))}}getType(t){const r=jr(this.types,t);return at(r,"record type does not exists"),r}}function WN(e){if(!e.length)return null;let t="";for(const r of e)typeof r=="number"?t+=`.${r}`:r.startsWith("(")?t.endsWith(")")?t=`${t.slice(0,-1)}, ${r.slice(1)}`:t+=r:t+=`.${r}`;return t=t.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,""),t.startsWith(".")?t.slice(1):t}class xe extends Error{constructor(r,a=[]){const s=WN(a),n=r.split(`
`).map((o,i)=>i===0?o:`  ${o}`).join(`
`);super(a?`At ${s}: ${n}`:n);g(this,"name","ValidationError");this.rawMessage=r,this.path=a}}function Or(e,t){try{return t()}catch(r){throw r instanceof xe?new xe(r.rawMessage,[e,...r.path]):new xe(r.toString(),[e])}}function Wn(e){if(e===null)return"null";if(Array.isArray(e))return"an array";const t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${t}`;case"object":return`an ${t}`;case"undefined":return"undefined";default:tr(t)}}class _r{constructor(t,r){this.validationFn=t,this.validateUsingKnownGoodVersionFn=r}validate(t){return this.validationFn(t)}validateUsingKnownGoodVersion(t,r){return Object.is(t,r)?t:this.validateUsingKnownGoodVersionFn?this.validateUsingKnownGoodVersionFn(t,r):this.validate(r)}isValid(t){try{return this.validate(t),!0}catch{return!1}}nullable(){return XN(this)}optional(){return cx(this)}refine(t){return new _r(r=>t(this.validate(r)),(r,a)=>{const s=this.validateUsingKnownGoodVersion(r,a);return Object.is(r,s)?r:t(s)})}check(t,r){return typeof t=="string"?this.refine(a=>(Or(`(check ${t})`,()=>r(a)),a)):this.refine(a=>(t(a),a))}}class HN extends _r{constructor(t){super(r=>{const a=Q3.validate(r);for(let s=0;s<a.length;s++)Or(s,()=>t.validate(a[s]));return a},(r,a)=>{if(!t.validateUsingKnownGoodVersion)return this.validate(a);const s=Q3.validate(a);let n=r.length!==s.length;for(let o=0;o<s.length;o++){const i=s[o];if(o>=r.length){n=!0,Or(o,()=>t.validate(i));continue}if(Object.is(r[o],i))continue;const l=Or(o,()=>t.validateUsingKnownGoodVersion(r[o],i));Object.is(l,r[o])||(n=!0)}return n?a:r}),this.itemValidator=t}nonEmpty(){return this.check(t=>{if(t.length===0)throw new xe("Expected a non-empty array")})}lengthGreaterThan1(){return this.check(t=>{if(t.length<=1)throw new xe("Expected an array with length greater than 1")})}}class ah extends _r{constructor(t,r=!1){super(a=>{if(typeof a!="object"||a===null)throw new xe(`Expected object, got ${Wn(a)}`);for(const[s,n]of Object.entries(t))Or(s,()=>{n.validate(jr(a,s))});if(!r){for(const s of Object.keys(a))if(!cs(t,s))throw new xe("Unexpected property",[s])}return a},(a,s)=>{if(typeof s!="object"||s===null)throw new xe(`Expected object, got ${Wn(s)}`);let n=!1;for(const[o,i]of Object.entries(t)){const l=jr(a,o),c=jr(s,o);if(Object.is(l,c))continue;const d=Or(o,()=>{const p=i;return p.validateUsingKnownGoodVersion?p.validateUsingKnownGoodVersion(l,c):p.validate(c)});Object.is(d,l)||(n=!0)}if(!r){for(const o of Object.keys(s))if(!cs(t,o))throw new xe("Unexpected property",[o])}for(const o of Object.keys(a))if(!cs(s,o)){n=!0;break}return n?s:a}),this.config=t,this.shouldAllowUnknownProperties=r}allowUnknownProperties(){return new ah(this.config,!0)}extend(t){return new ah({...this.config,...t})}}class sg extends _r{constructor(t,r,a,s){super(n=>{this.expectObject(n);const{matchingSchema:o,variant:i}=this.getMatchingSchemaAndVariant(n);return o===void 0?this.unknownValueValidation(n,i):Or(`(${t} = ${i})`,()=>o.validate(n))},(n,o)=>{this.expectObject(o),this.expectObject(n);const{matchingSchema:i,variant:l}=this.getMatchingSchemaAndVariant(o);return i===void 0?this.unknownValueValidation(o,l):jr(n,t)!==jr(o,t)?Or(`(${t} = ${l})`,()=>i.validate(o)):Or(`(${t} = ${l})`,()=>i.validateUsingKnownGoodVersion?i.validateUsingKnownGoodVersion(n,o):i.validate(o))}),this.key=t,this.config=r,this.unknownValueValidation=a,this.useNumberKeys=s}expectObject(t){if(typeof t!="object"||t===null)throw new xe(`Expected an object, got ${Wn(t)}`,[])}getMatchingSchemaAndVariant(t){const r=jr(t,this.key);if(!this.useNumberKeys&&typeof r!="string")throw new xe(`Expected a string for key "${this.key}", got ${Wn(r)}`);if(this.useNumberKeys&&!Number.isFinite(Number(r)))throw new xe(`Expected a number for key "${this.key}", got "${r}"`);return{matchingSchema:cs(this.config,r)?this.config[r]:void 0,variant:r}}validateUnknownVariants(t){return new sg(this.key,this.config,t,this.useNumberKeys)}}class GN extends _r{constructor(t,r){super(a=>{if(typeof a!="object"||a===null)throw new xe(`Expected object, got ${Wn(a)}`);for(const[s,n]of Object.entries(a))Or(s,()=>{t.validate(s),r.validate(n)});return a},(a,s)=>{if(typeof s!="object"||s===null)throw new xe(`Expected object, got ${Wn(s)}`);let n=!1;for(const[o,i]of Object.entries(s)){if(!cs(a,o)){n=!0,Or(o,()=>{t.validate(o),r.validate(i)});continue}const l=jr(a,o),c=i;if(Object.is(l,c))continue;const d=Or(o,()=>r.validateUsingKnownGoodVersion?r.validateUsingKnownGoodVersion(l,c):r.validate(c));Object.is(d,l)||(n=!0)}for(const o of Object.keys(a))if(!cs(s,o)){n=!0;break}return n?s:a}),this.keyValidator=t,this.valueValidator=r}}function L_(e){return new _r(t=>{if(typeof t!==e)throw new xe(`Expected ${e}, got ${Wn(t)}`);return t})}const KN=new _r(e=>e),pe=L_("string"),ue=L_("number").check(e=>{if(Number.isNaN(e))throw new xe("Expected a number, got NaN");if(!Number.isFinite(e))throw new xe(`Expected a finite number, got ${e}`)}),sh=ue.check(e=>{if(e<0)throw new xe(`Expected a positive number, got ${e}`)}),zr=ue.check(e=>{if(e<=0)throw new xe(`Expected a non-zero positive number, got ${e}`)}),lx=ue.check(e=>{if(!Number.isInteger(e))throw new xe(`Expected an integer, got ${e}`)}),Mp=lx.check(e=>{if(e<0)throw new xe(`Expected a positive integer, got ${e}`)}),VN=lx.check(e=>{if(e<=0)throw new xe(`Expected a non-zero positive integer, got ${e}`)}),ye=L_("boolean");function nr(e){return new _r(t=>{if(t!==e)throw new xe(`Expected ${e}, got ${JSON.stringify(t)}`);return e})}const Q3=new _r(e=>{if(!Array.isArray(e))throw new xe(`Expected an array, got ${Wn(e)}`);return e});function Rt(e){return new HN(e)}function me(e){return new ah(e)}function wb(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null||Object.getPrototypeOf(e)===uN)}function vb(e){return e===null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"?!0:Array.isArray(e)?e.every(vb):wb(e)?Object.values(e).every(vb):!1}const Ot=new _r(e=>{if(vb(e))return e;throw new xe(`Expected json serializable value, got ${typeof e}`)},(e,t)=>{if(Array.isArray(e)&&Array.isArray(t)){let r=e.length!==t.length;for(let a=0;a<t.length;a++){if(a>=e.length){r=!0,Ot.validate(t[a]);continue}const s=e[a],n=t[a];if(Object.is(s,n))continue;const o=Ot.validateUsingKnownGoodVersion(s,n);Object.is(o,s)||(r=!0)}return r?t:e}else if(wb(e)&&wb(t)){let r=!1;for(const a of Object.keys(t)){if(!cs(e,a)){r=!0,Ot.validate(t[a]);continue}const s=e[a],n=t[a];if(Object.is(s,n))continue;const o=Ot.validateUsingKnownGoodVersion(s,n);Object.is(o,s)||(r=!0)}for(const a of Object.keys(e))if(!cs(t,a)){r=!0;break}return r?t:e}else return Ot.validate(t)});function nh(e,t){return new GN(e,t)}function R_(e,t){return new sg(e,t,(r,a)=>{throw new xe(`Expected one of ${Object.keys(t).map(s=>JSON.stringify(s)).join(" or ")}, got ${JSON.stringify(a)}`,[e])},!1)}function YN(e,t){return new sg(e,t,(r,a)=>{throw new xe(`Expected one of ${Object.keys(t).map(s=>JSON.stringify(s)).join(" or ")}, got ${JSON.stringify(a)}`,[e])},!0)}function ws(e,t){return new _r(r=>Or(e,()=>t.validate(r)),(r,a)=>Or(e,()=>t.validateUsingKnownGoodVersion?t.validateUsingKnownGoodVersion(r,a):t.validate(a)))}function ng(e){return new _r(t=>{if(!e.has(t)){const r=Array.from(e,a=>JSON.stringify(a)).join(" or ");throw new xe(`Expected ${r}, got ${t}`)}return t})}function cx(e){return new _r(t=>{if(t!==void 0)return e.validate(t)},(t,r)=>{if(!(t===void 0&&r===void 0)&&r!==void 0)return e.validateUsingKnownGoodVersion&&t!==void 0?e.validateUsingKnownGoodVersion(t,r):e.validate(r)})}function XN(e){return new _r(t=>t===null?null:e.validate(t),(t,r)=>r===null?null:e.validateUsingKnownGoodVersion&&t!==null?e.validateUsingKnownGoodVersion(t,r):e.validate(r))}function O_(...e){return ng(new Set(e))}function dx(e){try{return new URL(e)}catch{if(e.startsWith("/")||e.startsWith("./"))try{return new URL(e,"http://example.com")}catch{throw new xe(`Expected a valid url, got ${JSON.stringify(e)}`)}throw new xe(`Expected a valid url, got ${JSON.stringify(e)}`)}}const ZN=new Set(["http:","https:","mailto:"]),sa=pe.check(e=>{if(e==="")return;const t=dx(e);if(!ZN.has(t.protocol.toLowerCase()))throw new xe(`Expected a valid url, got ${JSON.stringify(e)} (invalid protocol)`)}),JN=new Set(["http:","https:","data:"]),Lo=pe.check(e=>{if(e==="")return;const t=dx(e);if(!JN.has(t.protocol.toLowerCase()))throw new xe(`Expected a valid url, got ${JSON.stringify(e)} (invalid protocol)`)}),z_=pe.refine(e=>{try{return eN(e),e}catch{throw new xe(`Expected an index key, got ${JSON.stringify(e)}`)}});function ea(e){return pe.refine(t=>{if(!t.startsWith(`${e}:`))throw new Error(`${e} ID must start with "${e}:"`);return t})}const og=ea("asset");function N_(e,t){return me({id:og,typeName:nr("asset"),type:nr(e),props:t,meta:Ot})}const Ro=me({x:ue,y:ue,z:ue.optional()}),qc=me({x:ue,y:ue,w:ue,h:ue}),ux=ue.check(e=>{if(e<0||e>1)throw new xe("Opacity must be between 0 and 1")}),QN=pe.refine(e=>{if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e}),ha=ea("shape");function eq(e,t,r){return me({id:ha,typeName:nr("shape"),x:ue,y:ue,rotation:ue,index:z_,parentId:QN,type:nr(e),isLocked:ye,opacity:ux,props:t?me(t):Ot,meta:r?me(r):Ot})}const tq=ea("binding");function rq(e,t,r){return me({id:tq,typeName:nr("binding"),type:nr(e),fromId:ha,toId:ha,props:t?me(t):Ot,meta:r?me(r):Ot})}Nr("com.tldraw.binding",{});ca({sequenceId:"com.tldraw.binding",recordType:"binding",sequence:[]});function jo(e){return`binding:${e??zd()}`}function aq(e){return _s("binding",{scope:"document",validator:ws("binding",R_("type",Od(e,(t,{props:r,meta:a})=>rq(t,r,a))))}).withDefaultProperties(()=>({meta:{}}))}class Wt{constructor(t,r,a){this.id=t,this.defaultValue=r,this.type=a}static define(t,r){const{defaultValue:a,type:s=KN}=r;return new Wt(t,a,s)}static defineEnum(t,r){const{defaultValue:a,values:s}=r;return new sq(t,a,s)}validate(t){return this.type.validate(t)}validateUsingKnownGoodVersion(t,r){return this.type.validateUsingKnownGoodVersion?this.type.validateUsingKnownGoodVersion(t,r):this.validate(r)}}class sq extends Wt{constructor(t,r,a){super(t,r,O_(...a)),this.values=a}}const Ru=Nr("com.tldraw.shape",{AddIsLocked:1,HoistOpacity:2,AddMeta:3,AddWhite:4}),nq=ca({sequenceId:"com.tldraw.shape",recordType:"shape",sequence:[{id:Ru.AddIsLocked,up:e=>{e.isLocked=!1},down:e=>{delete e.isLocked}},{id:Ru.HoistOpacity,up:e=>{e.opacity=Number(e.props.opacity??"1"),delete e.props.opacity},down:e=>{const t=e.opacity;delete e.opacity,e.props.opacity=t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"}},{id:Ru.AddMeta,up:e=>{e.meta={}}},{id:Ru.AddWhite,up:e=>{},down:e=>{e.props.color==="white"&&(e.props.color="black")}}]});function Cn(e){return e?e.typeName==="shape":!1}function Kr(e){return e?e.startsWith("shape:"):!1}function Ne(e){return`shape:${e??zd()}`}function px(e){const t=new Map;for(const[r,a]of Object.entries(e))if(a instanceof Wt){if(t.has(a))throw new Error(`Duplicate style prop ${a.id}. Each style prop can only be used once within a shape.`);t.set(a,r)}return t}function vs(e,t){return Od(t,(r,a)=>`com.tldraw.shape.${e}/${a}`)}function oq(e){return _s("shape",{scope:"document",validator:ws("shape",R_("type",Od(e,(t,{props:r,meta:a})=>eq(t,r,a))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))}function e6(e,t){const r=[];for(const[a,{migrations:s}]of Object.entries(t)){const n=`com.tldraw.${e}.${a}`;s?"sequenceId"in s?(at(n===s.sequenceId,`sequenceId mismatch for ${a} ${rg} migrations. Expected '${n}', got '${s.sequenceId}'`),r.push(s)):"sequence"in s?r.push(Xi({sequenceId:n,retroactive:!1,sequence:s.sequence.map(o=>"id"in o?fx(e,a,o):o)})):r.push(Xi({sequenceId:n,retroactive:!1,sequence:Object.keys(s.migrators).map(o=>Number(o)).sort((o,i)=>o-i).map(o=>({id:`${n}/${o}`,scope:"record",filter:i=>i.typeName===e&&i.type===a,up:i=>{const l=s.migrators[o].up(i);if(l)return l},down:i=>{const l=s.migrators[o].down(i);if(l)return l}}))})):r.push(Xi({sequenceId:n,retroactive:!1,sequence:[]}))}return r}function fx(e,t,r){return{id:r.id,dependsOn:r.dependsOn,scope:"record",filter:a=>a.typeName===e&&a.type===t,up:a=>{const s=r.up(a.props);s&&(a.props=s)},down:typeof r.down=="function"?a=>{const s=r.down(a.props);s&&(a.props=s)}:void 0}}const hx=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red","white"],oh={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",note:{fill:"#FCE19C",text:"#000000"},semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4465e9",note:{fill:"#8AA3FF",text:"#000000"},semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",note:{fill:"#6FC896",text:"#000000"},semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#9fa8b2",note:{fill:"#C0CAD3",text:"#000000"},semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4ba1f1",note:{fill:"#9BC4FD",text:"#000000"},semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#4cb05e",note:{fill:"#98D08A",text:"#000000"},semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#f87777",note:{fill:"#F7A5A1",text:"#000000"},semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e085f4",note:{fill:"#DFB0F9",text:"#000000"},semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#e16919",note:{fill:"#FAA475",text:"#000000"},semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",note:{fill:"#FC8282",text:"#000000"},semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",note:{fill:"#DB91FD",text:"#000000"},semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#f1ac4b",note:{fill:"#FED49A",text:"#000000"},semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},white:{solid:"#FFFFFF",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#FFFFFF",text:"#000000"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 6.5%)",solid:"#010403",black:{solid:"#f2f2f2",note:{fill:"#2c2c2c",text:"#f2f2f2"},semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4f72fc",note:{fill:"#2A3F98",text:"#f2f2f2"},semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#099268",note:{fill:"#014429",text:"#f2f2f2"},semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#9398b0",note:{fill:"#56595F",text:"#f2f2f2"},semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#4dabf7",note:{fill:"#1F5495",text:"#f2f2f2"},semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#40c057",note:{fill:"#21581D",text:"#f2f2f2"},semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#ff8787",note:{fill:"#923632",text:"#f2f2f2"},semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#e599f7",note:{fill:"#762F8E",text:"#f2f2f2"},semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#f76707",note:{fill:"#843906",text:"#f2f2f2"},semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#e03131",note:{fill:"#89231A",text:"#f2f2f2"},semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#ae3ec9",note:{fill:"#681683",text:"#f2f2f2"},semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#ffc034",note:{fill:"#98571B",text:"#f2f2f2"},semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},white:{solid:"#f3f3f3",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#eaeaea",text:"#1d1d1d"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}}};function an(e){return e.isDarkMode?oh.darkMode:oh.lightMode}const na=Wt.defineEnum("tldraw:color",{defaultValue:"black",values:hx}),gx=Wt.defineEnum("tldraw:labelColor",{defaultValue:"black",values:hx}),Oo=Wt.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),pl=Wt.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),gs=Wt.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),mx={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},ms=Wt.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),bx=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],ih=Wt.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:bx}),lh=Wt.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:bx}),yx={labelColor:gx,color:na,fill:pl,dash:Oo,size:ms,arrowheadStart:ih,arrowheadEnd:lh,font:gs,start:Ro,end:Ro,bend:ue,text:pe,labelPosition:ue},xc=vs("arrow",{AddLabelColor:1,AddIsPrecise:2,AddLabelPosition:3,ExtractBindings:4});function Gm(e){return fx("shape","arrow",e)}const _x=Xi({sequenceId:"com.tldraw.shape.arrow",sequence:[Gm({id:xc.AddLabelColor,up:e=>{e.labelColor="black"},down:"retired"}),Gm({id:xc.AddIsPrecise,up:({start:e,end:t})=>{e.type==="binding"&&(e.isPrecise=!(e.normalizedAnchor.x===.5&&e.normalizedAnchor.y===.5)),t.type==="binding"&&(t.isPrecise=!(t.normalizedAnchor.x===.5&&t.normalizedAnchor.y===.5))},down:({start:e,end:t})=>{e.type==="binding"&&(e.isPrecise||(e.normalizedAnchor={x:.5,y:.5}),delete e.isPrecise),t.type==="binding"&&(t.isPrecise||(t.normalizedAnchor={x:.5,y:.5}),delete t.isPrecise)}}),Gm({id:xc.AddLabelPosition,up:e=>{e.labelPosition=.5},down:e=>{delete e.labelPosition}}),{id:xc.ExtractBindings,scope:"store",up:e=>{const t=Object.values(e).filter(r=>r.typeName==="shape"&&r.type==="arrow");for(const r of t){const{start:a,end:s}=r.props;if(a.type==="binding"){const n=jo(),o={typeName:"binding",id:n,type:"arrow",fromId:r.id,toId:a.boundShapeId,meta:{},props:{terminal:"start",normalizedAnchor:a.normalizedAnchor,isExact:a.isExact,isPrecise:a.isPrecise}};e[n]=o,r.props.start={x:0,y:0}}else delete r.props.start.type;if(s.type==="binding"){const n=jo(),o={typeName:"binding",id:n,type:"arrow",fromId:r.id,toId:s.boundShapeId,meta:{},props:{terminal:"end",normalizedAnchor:s.normalizedAnchor,isExact:s.isExact,isPrecise:s.isPrecise}};e[n]=o,r.props.end={x:0,y:0}}else delete r.props.end.type}}}]}),wx={terminal:O_("start","end"),normalizedAnchor:Ro,isExact:ye,isPrecise:ye},vx={sequence:[{dependsOn:[xc.ExtractBindings]}]},iq=ws("camera",me({typeName:nr("camera"),id:ea("camera"),x:ue,y:ue,z:ue,meta:Ot})),lq=Nr("com.tldraw.camera",{AddMeta:1}),cq=ca({sequenceId:"com.tldraw.camera",recordType:"camera",sequence:[{id:lq.AddMeta,up:e=>{e.meta={}}}]}),ns=_s("camera",{validator:iq,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}})),dq=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),xx=ng(dq),uq=me({type:xx,rotation:ue}),pq=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),fq=ng(pq),hq=new Set(["starting","paused","active","stopping"]),Sx=me({id:pe,points:Rt(Ro),size:sh,color:fq,opacity:ue,state:ng(hq),delay:ue,shrink:ue,taper:ye}),pd=ea("page"),gq=ws("page",me({typeName:nr("page"),id:pd,name:pe,index:z_,meta:Ot})),mq=Nr("com.tldraw.page",{AddMeta:1}),bq=ca({sequenceId:"com.tldraw.page",recordType:"page",sequence:[{id:mq.AddMeta,up:e=>{e.meta={}}}]}),Vs=_s("page",{validator:gq,scope:"document"}).withDefaultProperties(()=>({meta:{}}));function Sr(e){return Vs.isId(e)}const yq={id:!1,typeName:!1,currentPageId:!1,opacityForNextShape:!1,stylesForNextShape:!1,followingUserId:!1,highlightedUserIds:!1,brush:!1,cursor:!1,scribbles:!1,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!1,chatMessage:!1,isChatting:!1,isPenMode:!1,isGridMode:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!1,openMenus:!1,isChangingStyle:!1,isReadonly:!0,meta:!1,duplicateProps:!1},kx=e=>e?zc(e,t=>yq[t]):null;ea("instance");function _q(e){const t={};for(const[a,s]of e)t[a]=cx(s);const r=ws("instance",me({typeName:nr("instance"),id:ea("instance"),currentPageId:pd,followingUserId:pe.nullable(),brush:qc.nullable(),opacityForNextShape:ux,stylesForNextShape:me(t),cursor:uq,scribbles:Rt(Sx),isFocusMode:ye,isDebugMode:ye,isToolLocked:ye,exportBackground:ye,screenBounds:qc,insets:Rt(ye),zoomBrush:qc.nullable(),isPenMode:ye,isGridMode:ye,chatMessage:pe,isChatting:ye,highlightedUserIds:Rt(pe),isFocused:ye,devicePixelRatio:ue,isCoarsePointer:ye,isHoveringCanvas:ye.nullable(),openMenus:Rt(pe),isChangingStyle:ye,isReadonly:ye,meta:Ot,duplicateProps:me({shapeIds:Rt(ea("shape")),offset:me({x:ue,y:ue})}).nullable()}));return _s("instance",{validator:r,scope:"session",ephemeralKeys:{currentPageId:!1,meta:!1,followingUserId:!0,opacityForNextShape:!0,stylesForNextShape:!0,brush:!0,cursor:!0,scribbles:!0,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!0,isPenMode:!0,isGridMode:!0,chatMessage:!0,isChatting:!0,highlightedUserIds:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!0,openMenus:!0,isChangingStyle:!0,isReadonly:!0,duplicateProps:!0}}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],isFocused:!1,devicePixelRatio:typeof window>"u"?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null}))}const Ve=Nr("com.tldraw.instance",{AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22,AddInset:23,AddDuplicateProps:24,RemoveCanMoveCamera:25}),wq=ca({sequenceId:"com.tldraw.instance",recordType:"instance",sequence:[{id:Ve.AddTransparentExportBgs,up:e=>({...e,exportBackground:!0})},{id:Ve.RemoveDialog,up:({dialog:e,...t})=>t},{id:Ve.AddToolLockMode,up:e=>({...e,isToolLocked:!1})},{id:Ve.RemoveExtraPropsForNextShape,up:({propsForNextShape:e,...t})=>({...t,propsForNextShape:Object.fromEntries(Object.entries(e).filter(([r])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(r)))})},{id:Ve.AddLabelColor,up:({propsForNextShape:e,...t})=>({...t,propsForNextShape:{...e,labelColor:"black"}})},{id:Ve.AddFollowingUserId,up:e=>({...e,followingUserId:null})},{id:Ve.RemoveAlignJustify,up:e=>{let t=e.propsForNextShape.align;return t==="justify"&&(t="start"),{...e,propsForNextShape:{...e.propsForNextShape,align:t}}}},{id:Ve.AddZoom,up:e=>({...e,zoomBrush:null})},{id:Ve.AddVerticalAlign,up:e=>({...e,propsForNextShape:{...e.propsForNextShape,verticalAlign:"middle"}})},{id:Ve.AddScribbleDelay,up:e=>e.scribble!==null?{...e,scribble:{...e.scribble,delay:0}}:{...e}},{id:Ve.RemoveUserId,up:({userId:e,...t})=>t},{id:Ve.AddIsPenModeAndIsGridMode,up:e=>({...e,isPenMode:!1,isGridMode:!1})},{id:Ve.HoistOpacity,up:({propsForNextShape:{opacity:e,...t},...r})=>({...r,opacityForNextShape:Number(e??"1"),propsForNextShape:t})},{id:Ve.AddChat,up:e=>({...e,chatMessage:"",isChatting:!1})},{id:Ve.AddHighlightedUserIds,up:e=>({...e,highlightedUserIds:[]})},{id:Ve.ReplacePropsForNextShapeWithStylesForNextShape,up:({propsForNextShape:e,...t})=>({...t,stylesForNextShape:{}})},{id:Ve.AddMeta,up:e=>({...e,meta:{}})},{id:Ve.RemoveCursorColor,up:e=>{const{color:t,...r}=e.cursor;return{...e,cursor:r}}},{id:Ve.AddLonelyProperties,up:e=>({...e,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1})},{id:Ve.ReadOnlyReadonly,up:({isReadOnly:e,...t})=>({...t,isReadonly:e})},{id:Ve.AddHoveringCanvas,up:e=>({...e,isHoveringCanvas:null})},{id:Ve.AddScribbles,up:({scribble:e,...t})=>({...t,scribbles:[]})},{id:Ve.AddInset,up:e=>({...e,insets:[!1,!1,!1,!1]}),down:({insets:e,...t})=>({...t})},{id:Ve.AddDuplicateProps,up:e=>({...e,duplicateProps:null}),down:({duplicateProps:e,...t})=>({...t})},{id:Ve.RemoveCanMoveCamera,up:({canMoveCamera:e,...t})=>({...t}),down:e=>({...e,canMoveCamera:!0})}]}),ur="instance:instance",vq=ws("instance_page_state",me({typeName:nr("instance_page_state"),id:ea("instance_page_state"),pageId:pd,selectedShapeIds:Rt(ha),hintingShapeIds:Rt(ha),erasingShapeIds:Rt(ha),hoveredShapeId:ha.nullable(),editingShapeId:ha.nullable(),croppingShapeId:ha.nullable(),focusedGroupId:ha.nullable(),meta:Ot})),rc=Nr("com.tldraw.instance_page_state",{AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5}),xq=ca({sequenceId:"com.tldraw.instance_page_state",recordType:"instance_page_state",sequence:[{id:rc.AddCroppingId,up(e){e.croppingShapeId=null}},{id:rc.RemoveInstanceIdAndCameraId,up(e){delete e.instanceId,delete e.cameraId}},{id:rc.AddMeta,up:e=>{e.meta={}}},{id:rc.RenameProperties,up:e=>{},down:e=>{}},{id:rc.RenamePropertiesAgain,up:e=>{e.selectedShapeIds=e.selectedIds,delete e.selectedIds,e.hintingShapeIds=e.hintingIds,delete e.hintingIds,e.erasingShapeIds=e.erasingIds,delete e.erasingIds,e.hoveredShapeId=e.hoveredId,delete e.hoveredId,e.editingShapeId=e.editingId,delete e.editingId,e.croppingShapeId=e.croppingShapeId??e.croppingId??null,delete e.croppingId,e.focusedGroupId=e.focusLayerId,delete e.focusLayerId},down:e=>{e.selectedIds=e.selectedShapeIds,delete e.selectedShapeIds,e.hintingIds=e.hintingShapeIds,delete e.hintingShapeIds,e.erasingIds=e.erasingShapeIds,delete e.erasingShapeIds,e.hoveredId=e.hoveredShapeId,delete e.hoveredShapeId,e.editingId=e.editingShapeId,delete e.editingShapeId,e.croppingId=e.croppingShapeId,delete e.croppingShapeId,e.focusLayerId=e.focusedGroupId,delete e.focusedGroupId}}]}),La=_s("instance_page_state",{validator:vq,scope:"session",ephemeralKeys:{pageId:!1,selectedShapeIds:!1,editingShapeId:!1,croppingShapeId:!1,meta:!1,hintingShapeIds:!0,erasingShapeIds:!0,hoveredShapeId:!0,focusedGroupId:!0}}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}})),Sq=ws("pointer",me({typeName:nr("pointer"),id:ea("pointer"),x:ue,y:ue,lastActivityTimestamp:ue,meta:Ot})),kq=Nr("com.tldraw.pointer",{AddMeta:1}),Fq=ca({sequenceId:"com.tldraw.pointer",recordType:"pointer",sequence:[{id:kq.AddMeta,up:e=>{e.meta={}}}]}),q_=_s("pointer",{validator:Sq,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),ch=q_.createId("pointer"),Cq=ws("instance_presence",me({typeName:nr("instance_presence"),id:ea("instance_presence"),userId:pe,userName:pe,lastActivityTimestamp:ue,followingUserId:pe.nullable(),cursor:me({x:ue,y:ue,type:xx,rotation:ue}),color:pe,camera:me({x:ue,y:ue,z:ue}),screenBounds:qc,selectedShapeIds:Rt(ea("shape")),currentPageId:ea("page"),brush:qc.nullable(),scribbles:Rt(Sx),chatMessage:pe,meta:Ot})),ac=Nr("com.tldraw.instance_presence",{AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5}),Pq=ca({sequenceId:"com.tldraw.instance_presence",recordType:"instance_presence",sequence:[{id:ac.AddScribbleDelay,up:e=>{e.scribble!==null&&(e.scribble.delay=0)}},{id:ac.RemoveInstanceId,up:e=>{delete e.instanceId}},{id:ac.AddChatMessage,up:e=>{e.chatMessage=""}},{id:ac.AddMeta,up:e=>{e.meta={}}},{id:ac.RenameSelectedShapeIds,up:e=>{}}]}),Iq=_s("instance_presence",{validator:Cq,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}})),Aq=ws("document",me({typeName:nr("document"),id:nr("document:document"),gridSize:ue,name:pe,meta:Ot})),t6=Nr("com.tldraw.document",{AddName:1,AddMeta:2}),jq=ca({sequenceId:"com.tldraw.document",recordType:"document",sequence:[{id:t6.AddName,up:e=>{e.name=""},down:e=>{delete e.name}},{id:t6.AddMeta,up:e=>{e.meta={}}}]}),$_=_s("document",{validator:Aq,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),xb=$_.createId("document");function Eq(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function r6(e){e.typeName==="asset"&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}const Dq=({error:e,phase:t,record:r,recordBefore:a})=>{throw F_(e,{tags:{origin:"store.validateRecord",storePhase:t,isExistingValidationIssue:t==="initialize"},extras:{recordBefore:a?r6(mt(a)):void 0,recordAfter:r6(mt(r))}}),e};function Tq(){return[Vs.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]}function Mq(e){const t=e.query.ids("page"),r=()=>{if(!e.has(xb))return e.put([$_.create({id:xb,name:e.props.defaultName})]),r();if(!e.has(ch))return e.put([q_.create({id:ch})]),r();const a=t.get();if(a.size===0)return e.put(Tq()),r();const s=()=>[...a].map(l=>e.get(l)).sort(Eq)[0].id,n=e.get(ur);if(n){if(!a.has(n.currentPageId))return e.put([{...n,currentPageId:s()}]),r()}else return e.put([e.schema.types.instance.create({id:ur,currentPageId:s(),exportBackground:!0})]),r();const o=new Set,i=new Set;for(const l of a){const c=La.createId(l);e.has(c)||o.add(c);const d=ns.createId(l);e.has(d)||i.add(d)}o.size>0&&e.put([...o].map(l=>La.create({id:l,pageId:La.parseId(l)}))),i.size>0&&e.put([...i].map(l=>ns.create({id:l})))};return r}const Bq=N_("bookmark",me({title:pe,description:pe,image:pe,favicon:pe,src:Lo.nullable()})),a6=Nr("com.tldraw.asset.bookmark",{MakeUrlsValid:1,AddFavicon:2}),Lq=ca({sequenceId:"com.tldraw.asset.bookmark",recordType:"asset",filter:e=>e.type==="bookmark",sequence:[{id:a6.MakeUrlsValid,up:e=>{Lo.isValid(e.props.src)||(e.props.src="")},down:e=>{}},{id:a6.AddFavicon,up:e=>{Lo.isValid(e.props.favicon)||(e.props.favicon="")},down:e=>{delete e.props.favicon}}]}),Rq=N_("image",me({w:ue,h:ue,name:pe,isAnimated:ye,mimeType:pe.nullable(),src:Lo.nullable()})),Km=Nr("com.tldraw.asset.image",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3}),Oq=ca({sequenceId:"com.tldraw.asset.image",recordType:"asset",filter:e=>e.type==="image",sequence:[{id:Km.AddIsAnimated,up:e=>{e.props.isAnimated=!1},down:e=>{delete e.props.isAnimated}},{id:Km.RenameWidthHeight,up:e=>{e.props.w=e.props.width,e.props.h=e.props.height,delete e.props.width,delete e.props.height},down:e=>{e.props.width=e.props.w,e.props.height=e.props.h,delete e.props.w,delete e.props.h}},{id:Km.MakeUrlsValid,up:e=>{Lo.isValid(e.props.src)||(e.props.src="")},down:e=>{}}]}),zq=N_("video",me({w:ue,h:ue,name:pe,isAnimated:ye,mimeType:pe.nullable(),src:Lo.nullable()})),Vm=Nr("com.tldraw.asset.video",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3}),Nq=ca({sequenceId:"com.tldraw.asset.video",recordType:"asset",filter:e=>e.type==="video",sequence:[{id:Vm.AddIsAnimated,up:e=>{e.props.isAnimated=!1},down:e=>{delete e.props.isAnimated}},{id:Vm.RenameWidthHeight,up:e=>{e.props.w=e.props.width,e.props.h=e.props.height,delete e.props.width,delete e.props.height},down:e=>{e.props.width=e.props.w,e.props.height=e.props.h,delete e.props.w,delete e.props.h}},{id:Vm.MakeUrlsValid,up:e=>{Lo.isValid(e.props.src)||(e.props.src="")},down:e=>{}}]}),qq=ws("asset",R_("type",{image:Rq,video:zq,bookmark:Bq})),$q=Nr("com.tldraw.asset",{AddMeta:1}),Uq=ca({sequenceId:"com.tldraw.asset",recordType:"asset",sequence:[{id:$q.AddMeta,up:e=>{e.meta={}}}]}),So=_s("asset",{validator:qq,scope:"document"}).withDefaultProperties(()=>({meta:{}})),Fx={w:zr,h:zr,assetId:og.nullable(),url:sa},s6=vs("bookmark",{NullAssetId:1,MakeUrlsValid:2}),Cx={sequence:[{id:s6.NullAssetId,up:e=>{e.assetId===void 0&&(e.assetId=null)},down:"retired"},{id:s6.MakeUrlsValid,up:e=>{sa.isValid(e.url)||(e.url="")},down:e=>{}}]},Px=me({type:O_("free","straight"),points:Rt(Ro)}),Ix={color:na,fill:pl,dash:Oo,size:ms,segments:Rt(Px),isComplete:ye,isClosed:ye,isPen:ye},Wq=vs("draw",{AddInPen:1}),Ax={sequence:[{id:Wq.AddInPen,up:e=>{const{points:t}=e.segments[0];if(t.length===0){e.isPen=!1;return}let r=!(t[0].z===0||t[0].z===.5);t[1]&&(r=r&&!(t[1].z===0||t[1].z===.5)),e.isPen=r},down:"retired"}]},n6=/(^\/r\/[^/]+\/?$)/,Te=e=>{try{return new URL(e)}catch{return}},Nd=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(n6))return e},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(n6))return e}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${e}`},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/embed\/?$/)){const r=t.searchParams.get("url");if(r)return r}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,overridePermissions:{"allow-presentation":!0},toEmbedUrl:e=>{if(e.includes("/maps/")){const t=e.match(/@(.*),(.*),(.*)z/);let r;if(t){const[,a,s,n]=t;r=`https://${new URL(e).host.replace("www.","")}/maps/embed/v1/view?key=${{}.NEXT_PUBLIC_GC_API_KEY}&center=${a},${s}&zoom=${n}`}else r="";return r}},fromEmbedUrl:e=>{const t=Te(e);if(!t)return;if(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom")){const a=t.searchParams.get("zoom"),[s,n]=t.searchParams.get("center").split(",");return`https://www.google.com/maps/@${s},${n},${a}z`}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=Te(e),r=t&&t.pathname.match(/\/v\/(.+)\/?/);if(r)return`https://www.val.town/embed/${r[1]}`},fromEmbedUrl:e=>{const t=Te(e),r=t&&t.pathname.match(/\/embed\/(.+)\/?/);if(r)return`https://www.val.town/v/${r[1]}`}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=Te(e),r=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(r)return`https://codesandbox.io/embed/${r[1]}`},fromEmbedUrl:e=>{const t=Te(e),r=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(r)return`https://codesandbox.io/s/${r[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:e=>{const t=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,r=e.match(t);if(r){const[a,s,n]=r;return`https://codepen.io/${s}/embed/${n}`}},fromEmbedUrl:e=>{const t=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,r=e.match(t);if(r){const[a,s,n]=r;return`https://codepen.io/${s}/pen/${n}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:e=>{const t=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,r=e.match(t);if(r){const[a,s]=r;return`https://scratch.mit.edu/projects/embed/${s}`}},fromEmbedUrl:e=>{const t=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,r=e.match(t);if(r){const[a,s]=r;return`https://scratch.mit.edu/projects/${s}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0,"allow-popups-to-escape-sandbox":!0},isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=Te(e);if(!t)return;const r=t.hostname.replace(/^www./,"");if(r==="youtu.be")return`https://www.youtube.com/embed/${t.pathname.split("/").filter(Boolean)[0]}`;if((r==="youtube.com"||r==="m.youtube.com")&&t.pathname.match(/^\/watch/))return`https://www.youtube.com/embed/${t.searchParams.get("v")}`},fromEmbedUrl:e=>{const t=Te(e);if(!t)return;if(t.hostname.replace(/^www./,"")==="youtube.com"){const a=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(a)return`https://www.youtube.com/watch?v=${a[1]}`}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:e=>{const t=Te(e),r=t==null?void 0:t.searchParams.get("cid");if(t!=null&&t.pathname.match(/\/calendar\/u\/0/)&&r){t.pathname="/calendar/embed";const a=Array.from(t.searchParams.keys());for(const s of a)t.searchParams.delete(s);return t.searchParams.set("src",r),t.href}},fromEmbedUrl:e=>{const t=Te(e),r=t==null?void 0:t.searchParams.get("src");if(t!=null&&t.pathname.match(/\/calendar\/embed/)&&r){t.pathname="/calendar/u/0";const a=Array.from(t.searchParams.keys());for(const s of a)t.searchParams.delete(s);return t.searchParams.set("cid",r),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:e=>{const t=Te(e);if(t!=null&&t.pathname.match(/^\/presentation/)&&(t!=null&&t.pathname.match(/\/pub\/?$/))){t.pathname=t.pathname.replace(/\/pub$/,"/embed");const r=Array.from(t.searchParams.keys());for(const a of r)t.searchParams.delete(a);return t.href}},fromEmbedUrl:e=>{const t=Te(e);if(t!=null&&t.pathname.match(/^\/presentation/)&&(t!=null&&t.pathname.match(/\/embed\/?$/))){t.pathname=t.pathname.replace(/\/embed$/,"/pub");const r=Array.from(t.searchParams.keys());for(const a of r)t.searchParams.delete(a);return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/))return e.split("/").pop()?e:void 0},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/))return e.split("/").pop()?e:void 0}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${e}?embed=true`},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.hostname==="vimeo.com"&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.hostname==="player.vimeo.com"){const r=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(r)return"https://vimeo.com/"+r[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${t.origin}/embed${t.pathname}?cell=*`;if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){const r=t.pathname.replace(/^\/d/,"");return`${t.origin}/embed${r}?cell=*`}},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${t.origin}${t.pathname.replace("/embed","")}#cell-*`;if(t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${t.origin}${t.pathname.replace("/embed","/d")}#cell-*`}},{type:"desmos",title:"Desmos",hostnames:["desmos.com"],width:700,height:450,doesResize:!0,toEmbedUrl:e=>{const t=Te(e);if(t&&t.hostname==="www.desmos.com"&&t.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&t.search===""&&t.hash==="")return`${e}?embed`},fromEmbedUrl:e=>{const t=Te(e);if(t&&t.hostname==="www.desmos.com"&&t.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&t.search==="?embed"&&t.hash==="")return e.replace("?embed","")}}],Hq={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},jx={w:zr,h:zr,url:pe},Ou=vs("embed",{GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4}),Ex={sequence:[{id:Ou.GenOriginalUrlInEmbed,up:e=>{try{const t=e.url,r=new URL(t).host.replace("www.","");let a;for(const s of Nd)if(s.hostnames.includes(r))try{a=s.fromEmbedUrl(t)}catch(n){console.warn(n)}e.tmpOldUrl=e.url,e.url=a??""}catch{e.url="",e.tmpOldUrl=e.url}},down:"retired"},{id:Ou.RemoveDoesResize,up:e=>{delete e.doesResize},down:"retired"},{id:Ou.RemoveTmpOldUrl,up:e=>{delete e.tmpOldUrl},down:"retired"},{id:Ou.RemovePermissionOverrides,up:e=>{delete e.overridePermissions},down:"retired"}]},Dx={w:zr,h:zr,name:pe},Tx={sequence:[]},dh=Wt.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),uh=Wt.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),us=Wt.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box","heart"]}),Mx={geo:us,labelColor:gx,color:na,fill:pl,dash:Oo,size:ms,font:gs,align:dh,verticalAlign:uh,url:sa,w:zr,h:zr,growY:sh,text:pe},fn=vs("geo",{AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8}),Bx={sequence:[{id:fn.AddUrlProp,up:e=>{e.url=""},down:"retired"},{id:fn.AddLabelColor,up:e=>{e.labelColor="black"},down:"retired"},{id:fn.RemoveJustify,up:e=>{e.align==="justify"&&(e.align="start")},down:"retired"},{id:fn.AddCheckBox,up:e=>{},down:"retired"},{id:fn.AddVerticalAlign,up:e=>{e.verticalAlign="middle"},down:"retired"},{id:fn.MigrateLegacyAlign,up:e=>{let t;switch(e.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy";break}e.align=t},down:"retired"},{id:fn.AddCloud,up:e=>{},down:"retired"},{id:fn.MakeUrlsValid,up:e=>{sa.isValid(e.url)||(e.url="")},down:e=>{}}]},Lx={},Rx={sequence:[]},Ox={color:na,size:ms,segments:Rt(Px),isComplete:ye,isPen:ye},zx={sequence:[]},Gq=me({topLeft:Ro,bottomRight:Ro}),Nx={w:zr,h:zr,playing:ye,url:sa,assetId:og.nullable(),crop:Gq.nullable()},Ym=vs("image",{AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3}),qx={sequence:[{id:Ym.AddUrlProp,up:e=>{e.url=""},down:"retired"},{id:Ym.AddCropProp,up:e=>{e.crop=null},down:e=>{delete e.crop}},{id:Ym.MakeUrlsValid,up:e=>{sa.isValid(e.url)||(e.url="")},down:e=>{}}]},ph=Wt.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),Kq=me({id:pe,index:z_,x:ue,y:ue}),$x={color:na,dash:Oo,size:ms,spline:ph,points:nh(pe,Kq)},zu=vs("line",{AddSnapHandles:1,RemoveExtraHandleProps:2,HandlesToPoints:3,PointIndexIds:4}),Ux={sequence:[{id:zu.AddSnapHandles,up:e=>{for(const t of Object.values(e.handles))t.canSnap=!0},down:"retired"},{id:zu.RemoveExtraHandleProps,up:e=>{e.handles=qv(Object.values(e.handles).map(t=>[t.index,{x:t.x,y:t.y}]))},down:e=>{const t=Object.entries(e.handles).map(([r,a])=>({index:r,...a})).sort(Qt);e.handles=Object.fromEntries(t.map((r,a)=>{const s=a===0?"start":a===t.length-1?"end":`handle:${r.index}`;return[s,{id:s,type:"vertex",canBind:!1,canSnap:!0,index:r.index,x:r.x,y:r.y}]}))}},{id:zu.HandlesToPoints,up:e=>{const t=Object.entries(e.handles).map(([r,{x:a,y:s}])=>({x:a,y:s,index:r})).sort(Qt);e.points=t.map(({x:r,y:a})=>({x:r,y:a})),delete e.handles},down:e=>{const t=ud(e.points.length);e.handles=Object.fromEntries(e.points.map((r,a)=>[t[a],{x:r.x,y:r.y}])),delete e.points}},{id:zu.PointIndexIds,up:e=>{const t=ud(e.points.length);e.points=Object.fromEntries(e.points.map((r,a)=>{const s=t[a];return[s,{id:s,index:s,x:r.x,y:r.y}]}))},down:e=>{const t=Object.values(e.points).sort(Qt);e.points=t.map(({x:r,y:a})=>({x:r,y:a}))}}]},Wx={color:na,size:ms,font:gs,fontSizeAdjustment:sh,align:dh,verticalAlign:uh,growY:sh,url:sa,text:pe},oi=vs("note",{AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5,AddFontSizeAdjustment:6}),Hx={sequence:[{id:oi.AddUrlProp,up:e=>{e.url=""},down:"retired"},{id:oi.RemoveJustify,up:e=>{e.align==="justify"&&(e.align="start")},down:"retired"},{id:oi.MigrateLegacyAlign,up:e=>{switch(e.align){case"start":e.align="start-legacy";return;case"end":e.align="end-legacy";return;default:e.align="middle-legacy";return}},down:"retired"},{id:oi.AddVerticalAlign,up:e=>{e.verticalAlign="middle"},down:"retired"},{id:oi.MakeUrlsValid,up:e=>{sa.isValid(e.url)||(e.url="")},down:e=>{}},{id:oi.AddFontSizeAdjustment,up:e=>{e.fontSizeAdjustment=0},down:e=>{delete e.fontSizeAdjustment}}]},Sb=Wt.defineEnum("tldraw:textAlign",{defaultValue:"start",values:["start","middle","end"]}),Gx={color:na,size:ms,font:gs,textAlign:Sb,w:zr,text:pe,scale:zr,autoSize:ye},o6=vs("text",{RemoveJustify:1,AddTextAlign:2}),Kx={sequence:[{id:o6.RemoveJustify,up:e=>{e.align==="justify"&&(e.align="start")},down:"retired"},{id:o6.AddTextAlign,up:e=>{e.textAlign=e.align,delete e.align},down:e=>{e.align=e.textAlign,delete e.textAlign}}]},Vx={w:zr,h:zr,time:ue,playing:ye,url:sa,assetId:og.nullable()},i6=vs("video",{AddUrlProp:1,MakeUrlsValid:2}),Yx={sequence:[{id:i6.AddUrlProp,up:e=>{e.url=""},down:"retired"},{id:i6.MakeUrlsValid,up:e=>{sa.isValid(e.url)||(e.url="")},down:e=>{}}]},Nu=Nr("com.tldraw.store",{RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4}),Vq=Xi({sequenceId:"com.tldraw.store",retroactive:!1,sequence:[{id:Nu.RemoveCodeAndIconShapeTypes,scope:"store",up:e=>{for(const[t,r]of Lr(e))r.typeName==="shape"&&(r.type==="icon"||r.type==="code")&&delete e[t]}},{id:Nu.AddInstancePresenceType,scope:"store",up(e){}},{id:Nu.RemoveTLUserAndPresenceAndAddPointer,scope:"store",up:e=>{for(const[t,r]of Lr(e))r.typeName.match(/^(user|user_presence)$/)&&delete e[t]}},{id:Nu.RemoveUserDocument,scope:"store",up:e=>{for(const[t,r]of Lr(e))r.typeName.match("user_document")&&delete e[t]}}]}),Yq={arrow:{migrations:_x,props:yx},bookmark:{migrations:Cx,props:Fx},draw:{migrations:Ax,props:Ix},embed:{migrations:Ex,props:jx},frame:{migrations:Tx,props:Dx},geo:{migrations:Bx,props:Mx},group:{migrations:Rx,props:Lx},highlight:{migrations:zx,props:Ox},image:{migrations:qx,props:Nx},line:{migrations:Ux,props:$x},note:{migrations:Hx,props:Wx},text:{migrations:Kx,props:Gx},video:{migrations:Yx,props:Vx}},Xq={arrow:{migrations:vx,props:wx}};function Zq({shapes:e=Yq,bindings:t=Xq,migrations:r}={}){const a=new Map;for(const i of ht(e))for(const l of px(i.props??{}).keys()){if(a.has(l.id)&&a.get(l.id)!==l)throw new Error(`Multiple StyleProp instances with the same id: ${l.id}`);a.set(l.id,l)}const s=oq(e),n=aq(t),o=_q(a);return B_.create({asset:So,binding:n,camera:ns,document:$_,instance:o,instance_page_state:La,page:Vs,instance_presence:Iq,pointer:q_,shape:s},{migrations:[Vq,Uq,cq,jq,wq,xq,bq,Pq,Fq,nq,Lq,Oq,Nq,...e6("shape",e),...e6("binding",t),...r??[]],onValidationFailure:Dq,createIntegrityChecker:Mq})}const fd=[{locale:"id",label:"Bahasa Indonesia"},{locale:"ca",label:"Català"},{locale:"cs",label:"Čeština"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Español"},{locale:"fr",label:"Français"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Português - Brasil"},{locale:"pt-pt",label:"Português - Europeu"},{locale:"ro",label:"Română"},{locale:"ru",label:"Russian"},{locale:"sl",label:"Slovenščina"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Tiếng Việt"},{locale:"tr",label:"Türkçe"},{locale:"uk",label:"Ukrainian"},{locale:"he",label:"עברית"},{locale:"ar",label:"عربي"},{locale:"fa",label:"فارسی"},{locale:"ku",label:"کوردی"},{locale:"ne",label:"नेपाली"},{locale:"hi-in",label:"हिन्दी"},{locale:"te",label:"తెలుగు"},{locale:"th",label:"ภาษาไทย"},{locale:"my",label:"မြန်မာစာ"},{locale:"ko-kr",label:"한국어"},{locale:"ja",label:"日本語"},{locale:"zh-cn",label:"简体中文"},{locale:"zh-tw",label:"繁體中文 (台灣)"}];function Jq(){const e=typeof window<"u"?window.navigator.languages??["en"]:["en"];return Qq(e)}function Qq(e){for(const t of e){const r=e$(t);if(r)return r}return"en"}const l6={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function e$(e){const t=fd.find(s=>s.locale===e.toLowerCase());if(t)return t.locale;const[r,a]=e.split(/[-_]/).map(s=>s.toLowerCase());if(a){const s=fd.find(n=>n.locale===r);if(s)return s.locale}return r in l6?l6[r]:null}var Xx={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n="",o=0;o<arguments.length;o++){var i=arguments[o];i&&(n=s(n,a(i)))}return n}function a(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return r.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var o="";for(var i in n)t.call(n,i)&&n[i]&&(o=s(o,i));return o}function s(n,o){return o?n?n+" "+o:n+o:n}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Xx);var t$=Xx.exports;const le=Yn(t$),r$={error:null};class Zx extends S.Component{constructor(){super(...arguments);g(this,"state",r$)}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){var a,s;(s=(a=this.props).onError)==null||s.call(a,r)}render(){const{error:r}=this.state;if(r!==null){const{fallback:a}=this.props;return u.jsx(a,{error:r})}return this.props.children}}function hd({children:e,fallback:t,...r}){return t===null?u.jsx(u.Fragment,{children:e}):u.jsx(Zx,{fallback:t,...r,children:e})}const ig=_e.createContext(null);function N(){const e=_e.useContext(ig);if(!e)throw new Error("useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components");return e}function a$(){return u.jsx("div",{className:"tl-background"})}function El(e,t,r,a,s,n){S.useLayoutEffect(()=>{const o=e.current;if(!o||t===void 0)return;let i=`translate(${t}px, ${r}px)`;a!==void 0&&(i+=` scale(${a})`),s!==void 0&&(i+=` rotate(${s}rad)`),n&&(i+=` translate(${n.x}px, ${n.y}px)`),o.style.transform=i})}const ar={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e<=0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e>=1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2};class v{constructor(t=0,r=0,a=1){this.x=t,this.y=r,this.z=a}get pressure(){return this.z}set(t=this.x,r=this.y,a=this.z){return this.x=t,this.y=r,this.z=a,this}setTo({x:t=0,y:r=0,z:a=1}){return this.x=t,this.y=r,this.z=a,this}rot(t){if(t===0)return this;const{x:r,y:a}=this,s=Math.sin(t),n=Math.cos(t);return this.x=r*n-a*s,this.y=r*s+a*n,this}rotWith(t,r){if(r===0)return this;const a=this.x-t.x,s=this.y-t.y,n=Math.sin(r),o=Math.cos(r);return this.x=t.x+(a*o-s*n),this.y=t.y+(a*n+s*o),this}clone(){const{x:t,y:r,z:a}=this;return new v(t,r,a)}sub(t){return this.x-=t.x,this.y-=t.y,this}subXY(t,r){return this.x-=t,this.y-=r,this}subScalar(t){return this.x-=t,this.y-=t,this}add(t){return this.x+=t.x,this.y+=t.y,this}addXY(t,r){return this.x+=t,this.y+=r,this}addScalar(t){return this.x+=t,this.y+=t,this}clamp(t,r){return this.x=Math.max(this.x,t),this.y=Math.max(this.y,t),r!==void 0&&(this.x=Math.min(this.x,r),this.y=Math.min(this.y,r)),this}div(t){return this.x/=t,this.y/=t,this}divV(t){return this.x/=t.x,this.y/=t.y,this}mul(t){return this.x*=t,this.y*=t,this}mulV(t){return this.x*=t.x,this.y*=t.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(t,r){const a=v.Tan(t,this);return this.add(a.mul(r))}neg(){return this.x*=-1,this.y*=-1,this}cross(t){return this.x=this.y*t.z-this.z*t.y,this.y=this.z*t.x-this.x*t.z,this}dpr(t){return v.Dpr(this,t)}cpr(t){return v.Cpr(this,t)}len2(){return v.Len2(this)}len(){return v.Len(this)}pry(t){return v.Pry(this,t)}per(){const{x:t,y:r}=this;return this.x=r,this.y=-t,this}uni(){return v.Uni(this)}tan(t){return v.Tan(this,t)}dist(t){return v.Dist(this,t)}distanceToLineSegment(t,r){return v.DistanceToLineSegment(t,r,this)}slope(t){return v.Slope(this,t)}snapToGrid(t){return this.x=Math.round(this.x/t)*t,this.y=Math.round(this.y/t)*t,this}angle(t){return v.Angle(this,t)}toAngle(){return v.ToAngle(this)}lrp(t,r){return this.x=this.x+(t.x-this.x)*r,this.y=this.y+(t.y-this.y)*r,this}equals(t){return v.Equals(this,t)}equalsXY(t,r){return v.EqualsXY(this,t,r)}norm(){const t=this.len();return this.x=t===0?0:this.x/t,this.y=t===0?0:this.y/t,this}toFixed(){return v.ToFixed(this)}toString(){return v.ToString(v.ToFixed(this))}toJson(){return v.ToJson(this)}toArray(){return v.ToArray(this)}static Add(t,r){return new v(t.x+r.x,t.y+r.y)}static AddXY(t,r,a){return new v(t.x+r,t.y+a)}static Sub(t,r){return new v(t.x-r.x,t.y-r.y)}static SubXY(t,r,a){return new v(t.x-r,t.y-a)}static AddScalar(t,r){return new v(t.x+r,t.y+r)}static SubScalar(t,r){return new v(t.x-r,t.y-r)}static Div(t,r){return new v(t.x/r,t.y/r)}static Mul(t,r){return new v(t.x*r,t.y*r)}static DivV(t,r){return new v(t.x/r.x,t.y/r.y)}static MulV(t,r){return new v(t.x*r.x,t.y*r.y)}static Neg(t){return new v(-t.x,-t.y)}static Per(t){return new v(t.y,-t.x)}static Abs(t){return new v(Math.abs(t.x),Math.abs(t.y))}static Dist(t,r){return((t.y-r.y)**2+(t.x-r.x)**2)**.5}static DistMin(t,r,a){return(t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y)<a**2}static Dist2(t,r){return(t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y)}static Dpr(t,r){return t.x*r.x+t.y*r.y}static Cross(t,r){return new v(t.y*r.z-t.z*r.y,t.z*r.x-t.x*r.z)}static Cpr(t,r){return t.x*r.y-r.x*t.y}static Len2(t){return t.x*t.x+t.y*t.y}static Len(t){return(t.x*t.x+t.y*t.y)**.5}static Pry(t,r){return v.Dpr(t,r)/v.Len(r)}static Uni(t){return v.Div(t,v.Len(t))}static Tan(t,r){return v.Uni(v.Sub(t,r))}static Min(t,r){return new v(Math.min(t.x,r.x),Math.min(t.y,r.y))}static Max(t,r){return new v(Math.max(t.x,r.x),Math.max(t.y,r.y))}static From({x:t,y:r,z:a=1}){return new v(t,r,a)}static FromArray(t){return new v(t[0],t[1])}static Rot(t,r=0){const a=Math.sin(r),s=Math.cos(r);return new v(t.x*s-t.y*a,t.x*a+t.y*s)}static RotWith(t,r,a){const s=t.x-r.x,n=t.y-r.y,o=Math.sin(a),i=Math.cos(a);return new v(r.x+(s*i-n*o),r.y+(s*o+n*i))}static NearestPointOnLineThroughPoint(t,r,a){return v.Mul(r,v.Sub(a,t).pry(r)).add(t)}static NearestPointOnLineSegment(t,r,a,s=!0){if(v.Equals(t,a)||v.Equals(r,a))return v.From(a);const n=v.Tan(r,t),o=v.Add(t,v.Mul(n,v.Sub(a,t).pry(n)));if(s){if(o.x<Math.min(t.x,r.x))return v.Cast(t.x<r.x?t:r);if(o.x>Math.max(t.x,r.x))return v.Cast(t.x>r.x?t:r);if(o.y<Math.min(t.y,r.y))return v.Cast(t.y<r.y?t:r);if(o.y>Math.max(t.y,r.y))return v.Cast(t.y>r.y?t:r)}return o}static DistanceToLineThroughPoint(t,r,a){return v.Dist(a,v.NearestPointOnLineThroughPoint(t,r,a))}static DistanceToLineSegment(t,r,a,s=!0){return v.Dist(a,v.NearestPointOnLineSegment(t,r,a,s))}static Snap(t,r=1){return new v(Math.round(t.x/r)*r,Math.round(t.y/r)*r)}static Cast(t){return t instanceof v?t:v.From(t)}static Slope(t,r){return t.x===r.y?NaN:(t.y-r.y)/(t.x-r.x)}static IsNaN(t){return isNaN(t.x)||isNaN(t.y)}static Angle(t,r){return Math.atan2(r.y-t.y,r.x-t.x)}static Lrp(t,r,a){return v.Sub(r,t).mul(a).add(t)}static Med(t,r){return new v((t.x+r.x)/2,(t.y+r.y)/2)}static Equals(t,r){return Math.abs(t.x-r.x)<1e-4&&Math.abs(t.y-r.y)<1e-4}static EqualsXY(t,r,a){return t.x===r&&t.y===a}static Clockwise(t,r,a){return(a.x-t.x)*(r.y-t.y)-(r.x-t.x)*(a.y-t.y)<0}static Rescale(t,r){const a=v.Len(t);return new v(r*t.x/a,r*t.y/a)}static ScaleWithOrigin(t,r,a){return v.Sub(t,a).mul(r).add(a)}static ToFixed(t){return new v(fl(t.x),fl(t.y))}static ToInt(t){return new v(parseInt(t.x.toFixed(0)),parseInt(t.y.toFixed(0)),parseInt((t.z??0).toFixed(0)))}static ToCss(t){return`${t.x},${t.y}`}static Nudge(t,r,a){return v.Add(t,v.Tan(r,t).mul(a))}static ToString(t){return`${t.x}, ${t.y}`}static ToAngle(t){let r=Math.atan2(t.y,t.x);return r<0&&(r+=Math.PI*2),r}static FromAngle(t,r=1){return new v(Math.cos(t)*r,Math.sin(t)*r)}static ToArray(t){return[t.x,t.y,t.z]}static ToJson(t){const{x:r,y:a,z:s}=t;return{x:r,y:a,z:s}}static Average(t){const r=t.length,a=new v(0,0);if(r===0)return a;for(let s=0;s<r;s++)a.add(t[s]);return a.div(r)}static Clamp(t,r,a){return a===void 0?new v(Math.min(Math.max(t.x,r)),Math.min(Math.max(t.y,r))):new v(Math.min(Math.max(t.x,r),a),Math.min(Math.max(t.y,r),a))}static PointsBetween(t,r,a=6){const s=[];for(let n=0;n<a;n++){const o=ar.easeInQuad(n/(a-1)),i=v.Lrp(t,r,o);i.z=Math.min(1,.5+Math.abs(.5-s$(o))*.65),s.push(i)}return s}static SnapToGrid(t,r=8){return new v(Math.round(t.x/r)*r,Math.round(t.y/r)*r)}}const s$=e=>e<.5?2*e*e:-1+(4-2*e)*e;function Se(e){return`${R(e.x)},${R(e.y)} `}function Pr(e,t){return`${R((e.x+t.x)/2)},${R((e.y+t.y)/2)} `}const Ce=Math.PI,Ge=Ce/2,Be=Ce*2,n$=Math.sin;function Pt(e,t,r){return Math.max(t,typeof r<"u"?Math.min(e,r):e)}function qu(e,t=1e10){return e?Math.round(e*t)/t:0}function Zi(e,t,r=1e-6){return Math.abs(e-t)<=r}function Jx(e,t){const r=Math.pow(e-t,2)/Math.pow(e+t,2);return Ce*(e+t)*(1+3*r/(10+Math.sqrt(4-3*r)))}function zn(e){return e=e%Be,e<0?e=e+Be:e===0&&(e=0),e}function qd(e,t){return e=zn(e),t=zn(t),e>t&&(t+=Be),t-e}function Qx(e,t){return Be-qd(e,t)}function Bp(e,t){const r=(t-e)%Be;return 2*r%Be-r}function kb(e){return(Be+e)%Be}function fh(e,t){const r=Be/t;let a=Math.floor((kb(e)+r/2)/r)*r%Be;return a<Ce&&(a+=Be),a>Ce&&(a-=Be),a}function eS(e,t){return e===t||Zi(e%(Math.PI/2)-t%(Math.PI/2),0)}function o$(e){return e*Ce/180}function i$(e){return e*180/Ce}function zo(e,t,r){return new v(e.x,e.y).add(v.FromAngle(r,t))}function Xm(e,t,r){const a=e/2,s=t/2,n=[];let o=1/0,i=-1/0,l=1/0,c=-1/0;for(let y=0;y<r;y++){const m=Be/r,w=-Ge+y*m,b=a+a*Math.cos(w),_=s+s*Math.sin(w);b<o&&(o=b),_<l&&(l=_),b>i&&(i=b),_>c&&(c=_),n.push(new v(b,_))}const d=i-o,p=c-l,f=e-d,h=t-p;if(f!==0||h!==0)for(let y=0;y<n.length;y++){const m=n[y];m.x=(m.x-o)/d*e,m.y=(m.y-l)/p*t}return n}function sc(e,t,r,a){return e<a&&r<t}function Da(e,t,r,a){const s=Math.max(e,r),n=Math.min(t,a);return s<=n?[s,n]:null}function c6(e,t,r){return(t.x-e.x)*(r.y-e.y)-(r.x-e.x)*(t.y-e.y)}function ta(e,t){let r=0,a,s;for(let n=0;n<t.length;n++){if(a=t[n],a.x===e.x&&a.y===e.y||(s=t[(n+1)%t.length],v.Dist(e,a)+v.Dist(e,s)===v.Dist(a,s)))return!0;a.y<=e.y?s.y>e.y&&c6(a,s,e)>0&&(r+=1):s.y<=e.y&&c6(a,s,e)<0&&(r-=1)}return r!==0}function R(e){return Math.round(e*1e4)/1e4}function fl(e){return Math.round(e*100)/100}const d6=e=>Math.abs(e)<Number.MAX_SAFE_INTEGER;function xn(e,t,r){return r<0?qd(e,t):Qx(e,t)}function Fb(e,t,r,a){let s;if(Math.abs(e)>Ce){s=Bp(t,a);const n=Bp(a,r);return Math.abs(s)<Math.abs(n)?s/e:(e-n)/e}else{s=Bp(t,a);const n=s/e;return Math.sign(s)!==Math.sign(e)?Math.abs(n)>.5?1:0:n}}function l$(e,t,r,a){const s=2*((t-e)%Be)%Be-(t-e)%Be;return a?(Be-Math.abs(s))*(r?1:-1):s}function U_(e,t,r){const a=-2*(e.x*(t.y-r.y)-e.y*(t.x-r.x)+t.x*r.y-r.x*t.y);return new v(((e.x*e.x+e.y*e.y)*(r.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-r.y)+(r.x*r.x+r.y*r.y)*(t.y-e.y))/a,((e.x*e.x+e.y*e.y)*(t.x-r.x)+(t.x*t.x+t.y*t.y)*(r.x-e.x)+(r.x*r.x+r.y*r.y)*(e.x-t.x))/a)}function c$(e,t,r,a,s){if(r===null)return[v.From(e),v.From(t)];const n=[],o=v.Angle(r,e),i=v.Angle(r,t),l=qd(o,i);for(let c=0;c<s;c++){const d=c/(s-1),p=o+l*d,f=zo(r,a,p);n.push(f)}return n}const Zm=({brush:e,color:t,opacity:r,className:a})=>{const s=S.useRef(null);El(s,e.x,e.y);const n=R(Math.max(1,e.w)),o=R(Math.max(1,e.h));return u.jsx("svg",{className:"tl-overlays__item",ref:s,children:t?u.jsxs("g",{className:"tl-brush",opacity:r,children:[u.jsx("rect",{width:n,height:o,fill:t,opacity:.75}),u.jsx("rect",{width:n,height:o,fill:"none",stroke:t,opacity:.1})]}):u.jsx("rect",{className:`tl-brush tl-brush__default ${a}`,width:n,height:o})})},u6={isLocked:!1,wheelBehavior:"pan",panSpeed:1,zoomSpeed:1,zoomSteps:[.1,.25,.5,1,2,4,8]},Jm={duration:0,easing:ar.easeInOutCubic},p6={CAMERA_MOVE:-10},d$=["top","right","bottom","left"],f6=0,W_=2,$u=1,h6=5,u$=128,p$={},tS=xr("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),vt={logPreventDefaults:xr("logPreventDefaults",{defaults:{all:!1}}),logPointerCaptures:xr("logPointerCaptures",{defaults:{all:!1}}),logElementRemoves:xr("logElementRemoves",{defaults:{all:!1}}),debugSvg:xr("debugSvg",{defaults:{all:!1}}),showFps:xr("showFps",{defaults:{all:!1}}),measurePerformance:xr("measurePerformance",{defaults:{all:!1}}),throwToBlob:xr("throwToBlob",{defaults:{all:!1}}),reconnectOnPing:xr("reconnectOnPing",{defaults:{all:!1}}),debugCursors:xr("debugCursors",{defaults:{all:!1}}),forceSrgb:xr("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:xr("debugGeometry",{defaults:{all:!1}}),hideShapes:xr("hideShapes",{defaults:{all:!1}}),editOnType:xr("editOnType",{defaults:{all:!1}})};if(typeof Element<"u"){const e=Element.prototype.removeChild;Jo("element removal logging",()=>{vt.logElementRemoves.get()?Element.prototype.removeChild=function(t){return console.warn("[tldraw] removing child:",t),e.call(this,t)}:Element.prototype.removeChild=e})}function xr(e,{defaults:t,shouldStoreForSession:r=!0}){return f$({name:e,defaults:t,shouldStoreForSession:r})}function f$(e){const t=g$(e),r=e.shouldStoreForSession?h$(e.name):null,a=rr(`debug:${e.name}`,r??t);return typeof window<"u"&&(e.shouldStoreForSession&&Jo(`debug:${e.name}`,()=>{const s=a.get();s===t?Vv(`tldraw_debug:${e.name}`):A_(`tldraw_debug:${e.name}`,JSON.stringify(s))}),Object.defineProperty(window,`tldraw${e.name.replace(/^[a-z]/,s=>s.toUpperCase())}`,{get(){return a.get()},set(s){a.set(s)},configurable:!0})),Object.assign(a,e)}function h$(e){try{return JSON.parse(Kv(`tldraw_debug:${e}`)??"null")}catch{return null}}function Qm(e){try{return e()}catch{return null}}function g$(e){switch(Qm(()=>({}).TLDRAW_ENV)??Qm(()=>({}).VERCEL_PUBLIC_TLDRAW_ENV)??Qm(()=>({}).NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return e.defaults.production??e.defaults.all;case"preview":case"staging":return e.defaults.staging??e.defaults.all;default:return e.defaults.development??e.defaults.all}}function hh(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return hh(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function ke(e){e.preventDefault(),vt.logPreventDefaults.get()&&console.warn("preventDefault called on event:",e)}function $d(e,t){if(e.setPointerCapture(t.pointerId),vt.logPointerCaptures.get()){const r=tS.get();r.set(e,(r.get(e)??0)+1),console.warn("setPointerCapture called on element:",e,t)}}function Ud(e,t){if(e.hasPointerCapture(t.pointerId)&&(e.releasePointerCapture(t.pointerId),vt.logPointerCaptures.get())){const r=tS.get();r.get(e)===1?r.delete(e):r.has(e)?r.set(e,r.get(e)-1):console.warn("Release without capture"),console.warn("releasePointerCapture called on element:",e,t)}}const qt=e=>e.stopPropagation(),Yt=(e,t,r)=>{e&&e.style.setProperty(t,r)};function Er(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:e.pointerType==="pen"}}function m$(){const e=N();return S.useMemo(function(){let a,s;function n(m){if(!m.isKilled){if(m.button===W_){e.dispatch({type:"pointer",target:"canvas",name:"right_click",...Er(m)});return}m.button!==0&&m.button!==1&&m.button!==5||($d(m.currentTarget,m),e.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Er(m)}))}}function o(m){m.isKilled||m.clientX===a&&m.clientY===s||(a=m.clientX,s=m.clientY,e.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Er(m)}))}function i(m){m.isKilled||m.button!==0&&m.button!==1&&m.button!==2&&m.button!==5||(a=m.clientX,s=m.clientY,Ud(m.currentTarget,m),e.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Er(m)}))}function l(m){if(m.isKilled||e.getInstanceState().isPenMode&&m.pointerType!=="pen")return;const w=m.pointerType==="mouse"||m.pointerType==="pen";e.updateInstanceState({isHoveringCanvas:w?!0:null})}function c(m){if(m.isKilled||e.getInstanceState().isPenMode&&m.pointerType!=="pen")return;const w=m.pointerType==="mouse"||m.pointerType==="pen";e.updateInstanceState({isHoveringCanvas:w?!1:null})}function d(m){m.isKilled=!0,ke(m)}function p(m){m.isKilled=!0,m.target instanceof HTMLElement&&m.target.tagName!=="A"&&m.target.tagName!=="TEXTAREA"&&!(e.getEditingShape()&&m.target.className.includes("tl-text-content"))&&ke(m)}function f(m){ke(m)}async function h(m){var b,_;if(ke(m),!((_=(b=m.dataTransfer)==null?void 0:b.files)!=null&&_.length))return;const w=Array.from(m.dataTransfer.files);await e.putExternalContent({type:"files",files:w,point:e.screenToPage({x:m.clientX,y:m.clientY}),ignoreParent:!1})}function y(m){qt(m)}return{onPointerDown:n,onPointerMove:o,onPointerUp:i,onPointerEnter:l,onPointerLeave:c,onDragOver:f,onDrop:h,onTouchStart:d,onTouchEnd:p,onClick:y}},[e])}function b$(){const e=N();S.useEffect(()=>{let t=e.getInstanceState().isCoarsePointer;const r=o=>{const i=o.pointerType!=="mouse";t!==i&&(t=i,e.updateInstanceState({isCoarsePointer:i}))};window.addEventListener("pointerdown",r,{capture:!0});const a=window.matchMedia&&window.matchMedia("(any-pointer: coarse)"),s=e.environment.isFirefox&&!e.environment.isAndroid&&!e.environment.isIos,n=()=>{const o=s?!1:a.matches;t===o&&(t=o,e.updateInstanceState({isCoarsePointer:o}))};return a&&(a.addEventListener("change",n),n()),()=>{window.removeEventListener("pointerdown",r,{capture:!0}),a&&a.removeEventListener("change",n)}},[e])}const rS=S.createContext(null);function y$({container:e,children:t}){return u.jsx(rS.Provider,{value:e,children:t})}function or(){return Vr(S.useContext(rS),"useContainer used outside of <Tldraw />")}function _$(){const e=N(),t=or(),r=H("isFocused",()=>e.getInstanceState().isFocused,[e]);S.useEffect(()=>{if(typeof matchMedia===void 0)return;let a=null;const s=()=>{a!=null&&a();const n=`(resolution: ${window.devicePixelRatio}dppx)`,o=matchMedia(n),i=l=>{l.type==="change"&&s()};o.addEventListener?o.addEventListener("change",s):o.addListener&&o.addListener(i),a=()=>{o.removeEventListener?o.removeEventListener("change",s):o.removeListener&&o.removeListener(i)},e.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return s(),()=>{a==null||a()}},[e]),S.useEffect(()=>{if(!r)return;const a=i=>{if(i.altKey&&(e.isIn("zoom")||!e.getPath().endsWith(".idle"))&&!Uu()&&ke(i),i.isKilled)return;switch(i.isKilled=!0,i.key){case"=":case"-":case"0":{if(i.metaKey||i.ctrlKey){ke(i);return}break}case"Tab":{if(Uu()||e.getIsMenuOpen())return;break}case",":return;case"Escape":{if((e.getEditingShape()||e.getSelectedShapeIds().length>0)&&i.preventDefault(),e.getOpenMenus().length>0)return;e.inputs.keys.has("Escape")||(e.inputs.keys.add("Escape"),e.cancel(),e.focus());return}default:if(Uu()||e.getIsMenuOpen())return}const l={type:"keyboard",name:i.repeat?"key_repeat":"key_down",key:i.key,code:i.code,shiftKey:i.shiftKey,altKey:i.altKey,ctrlKey:i.metaKey||i.ctrlKey};e.dispatch(l)},s=i=>{if(i.isKilled||(i.isKilled=!0,Uu()||e.getIsMenuOpen())||i.key===",")return;const l={type:"keyboard",name:"key_up",key:i.key,code:i.code,shiftKey:i.shiftKey,altKey:i.altKey,ctrlKey:i.metaKey||i.ctrlKey};e.dispatch(l)};function n(i){var l,c;if(t.contains(i.target)){const d=i.touches[0].pageX,p=i.touches[0].radiusX||0;(d-p<10||d+p>e.getViewportScreenBounds().width-10)&&(((l=i.target)==null?void 0:l.tagName)==="BUTTON"&&((c=i.target)==null||c.click()),ke(i))}}const o=i=>{t.contains(i.target)&&(i.ctrlKey||i.metaKey)&&ke(i)};return t.addEventListener("touchstart",n,{passive:!1}),t.addEventListener("wheel",o,{passive:!1}),document.addEventListener("gesturestart",ke),document.addEventListener("gesturechange",ke),document.addEventListener("gestureend",ke),t.addEventListener("keydown",a),t.addEventListener("keyup",s),()=>{t.removeEventListener("touchstart",n),t.removeEventListener("wheel",o),document.removeEventListener("gesturestart",ke),document.removeEventListener("gesturechange",ke),document.removeEventListener("gestureend",ke),t.removeEventListener("keydown",a),t.removeEventListener("keyup",s)}},[e,t,r])}const w$=["input","select","button","textarea"];function Uu(){const{activeElement:e}=document;return!!(e&&(e.getAttribute("contenteditable")||w$.indexOf(e.tagName.toLowerCase())>-1))}const v$=["textarea","input"];function x$(e){const t=N();S.useEffect(()=>{const r=e.current;if(!r)return;const a=s=>{var n;if(s instanceof PointerEvent&&s.pointerType==="pen"){s.isKilled=!0;const{target:o}=s;if(v$.includes((n=o.tagName)==null?void 0:n.toLocaleLowerCase())||t.isIn("select.editing_shape"))return;ke(s)}};return r.addEventListener("touchstart",a),r.addEventListener("touchend",a),()=>{r.removeEventListener("touchstart",a),r.removeEventListener("touchend",a)}},[t,e])}function S$(e,t,r){return Math.max(t,Math.min(e,r))}const zt={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function g6(e,t,r){return t===0||Math.abs(t)===1/0?Math.pow(e,r*5):e*t*r/(t+r*e)}function m6(e,t,r,a=.15){return a===0?S$(e,t,r):e<t?-g6(t-e,r-t,a)+t:e>r?+g6(e-r,r-t,a)+r:e}function k$(e,[t,r],[a,s]){const[[n,o],[i,l]]=e;return[m6(t,n,o,a),m6(r,i,l,s)]}function F$(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C$(e){var t=F$(e,"string");return typeof t=="symbol"?t:String(t)}function Xt(e,t,r){return t=C$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(a){Xt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const aS={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function y6(e){return e?e[0].toUpperCase()+e.slice(1):""}const P$=["enter","leave"];function I$(e=!1,t){return e&&!P$.includes(t)}function A$(e,t="",r=!1){const a=aS[e],s=a&&a[t]||t;return"on"+y6(e)+y6(s)+(I$(r,s)?"Capture":"")}const j$=["gotpointercapture","lostpointercapture"];function E$(e){let t=e.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const a=j$.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(a);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:r}}function D$(e,t=""){const r=aS[e],a=r&&r[t]||t;return e+a}function sS(e){return"touches"in e}function T$(e){return sS(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function M$(e){return Array.from(e.touches).filter(t=>{var r,a;return t.target===e.currentTarget||((r=e.currentTarget)===null||r===void 0||(a=r.contains)===null||a===void 0?void 0:a.call(r,t.target))})}function Cb(e,t){try{const r=t.clientX-e.clientX,a=t.clientY-e.clientY,s=(t.clientX+e.clientX)/2,n=(t.clientY+e.clientY)/2,o=Math.hypot(r,a);return{angle:-(Math.atan2(r,a)*180)/Math.PI,distance:o,origin:[s,n]}}catch{}return null}function B$(e){return M$(e).map(t=>t.identifier)}function _6(e,t){const[r,a]=Array.from(e.touches).filter(s=>t.includes(s.identifier));return Cb(r,a)}const w6=40,v6=800;function nS(e){let{deltaX:t,deltaY:r,deltaMode:a}=e;return a===1?(t*=w6,r*=w6):a===2&&(t*=v6,r*=v6),[t,r]}function L$(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:r,altKey:a,metaKey:s,ctrlKey:n}=e;Object.assign(t,{shiftKey:r,altKey:a,metaKey:s,ctrlKey:n})}return t}function gh(e,...t){return typeof e=="function"?e(...t):e}function R$(){}function O$(...e){return e.length===0?R$:e.length===1?e[0]:function(){let t;for(const r of e)t=r.apply(this,arguments)||t;return t}}function x6(e,t){return Object.assign({},t,e||{})}const z$=32;class oS{constructor(t,r,a){this.ctrl=t,this.args=r,this.key=a,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:a,args:s}=this;r[a]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,a=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=a.from?gh(a.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:a,shared:s}=this;r.args=this.args;let n=0;if(t&&(r.event=t,a.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,L$(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,n=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const F=r._delta.map(Math.abs);zt.addTo(r._distance,F)}this.axisIntent&&this.axisIntent(t);const[o,i]=r._movement,[l,c]=a.threshold,{_step:d,values:p}=r;if(a.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&p[0]),d[1]===!1&&(d[1]=Math.abs(i)>=c&&p[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(i)>=c&&Math.sign(i)*c)),r.intentional=d[0]!==!1||d[1]!==!1,!r.intentional)return;const f=[0,0];if(a.hasCustomTransform){const[F,P]=p;f[0]=d[0]!==!1?F-d[0]:0,f[1]=d[1]!==!1?P-d[1]:0}else f[0]=d[0]!==!1?o-d[0]:0,f[1]=d[1]!==!1?i-d[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(f);const h=r.offset,y=r._active&&!r._blocked||r.active;y&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,t&&(r.first&&("bounds"in a&&(r._bounds=gh(a.bounds,r)),this.setup&&this.setup()),r.movement=f,this.computeOffset()));const[m,w]=r.offset,[[b,_],[x,C]]=r._bounds;r.overflow=[m<b?-1:m>_?1:0,w<x?-1:w>C?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const k=r._active?a.rubberband||[0,0]:[0,0];if(r.offset=k$(r._bounds,r.offset,k),r.delta=zt.sub(r.offset,h),this.computeMovement(),y&&(!r.last||n>z$)){r.delta=zt.sub(r.offset,h);const F=r.delta.map(Math.abs);zt.addTo(r.distance,F),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&n>0&&(r.velocity=[F[0]/n,F[1]/n],r.timeDelta=n)}}emit(){const t=this.state,r=this.shared,a=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!a.triggerAllEvents)return;const s=this.handler(lt(lt(lt({},r),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function N$([e,t],r){const a=Math.abs(e),s=Math.abs(t);if(a>s&&a>r)return"x";if(s>a&&s>r)return"y"}class q$ extends oS{constructor(...t){super(...t),Xt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=zt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=zt.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,a=this.config;if(!r.axis&&t){const s=typeof a.axisThreshold=="object"?a.axisThreshold[T$(t)]:a.axisThreshold;r.axis=N$(r._movement,s)}r._blocked=(a.lockDirection||!!a.axis)&&!r.axis||!!a.axis&&a.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const $$=e=>e,S6=.15,iS={enabled(e=!0){return e},eventOptions(e,t,r){return lt(lt({},r.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[S6,S6];case!1:return[0,0];default:return zt.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return zt.toVector(e)},transform(e,t,r){const a=e||r.shared.transform;return this.hasCustomTransform=!!a,a||$$},threshold(e){return zt.toVector(e,0)}},U$=0,Wd=lt(lt({},iS),{},{axis(e,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(e=U$){return e},bounds(e={}){if(typeof e=="function")return n=>Wd.bounds(e(n));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:r=1/0,top:a=-1/0,bottom:s=1/0}=e;return[[t,r],[a,s]]}}),Hd=typeof window<"u"&&window.document&&window.document.createElement;function lS(){return Hd&&"ontouchstart"in window}function W$(){return lS()||Hd&&window.navigator.maxTouchPoints>1}function H$(){return Hd&&"onpointerdown"in window}function G$(){return Hd&&"exitPointerLock"in window.document}function K$(){try{return"constructor"in GestureEvent}catch{return!1}}const ba={isBrowser:Hd,gesture:K$(),touch:lS(),touchscreen:W$(),pointer:H$(),pointerLock:G$()},V$=250,Y$=180,X$=.5,Z$=50,J$=250,Q$=10,k6={mouse:0,touch:0,pen:8};lt(lt({},Wd),{},{device(e,t,{pointer:{touch:r=!1,lock:a=!1,mouse:s=!1}={}}){return this.pointerLock=a&&ba.pointerLock,ba.touch&&r?"touch":this.pointerLock?"mouse":ba.pointer&&!s?"pointer":ba.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&e?V$:void 0,!(!ba.touchscreen||r===!1))return e||(r!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:a=1,keys:s=!0}={}}){return this.pointerButtons=a,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(e,t,{filterTaps:r=!1,tapsThreshold:a=3,axis:s=void 0}){const n=zt.toVector(e,r?a:s?1:0);return this.filterTaps=r,this.tapsThreshold=a,n},swipe({velocity:e=X$,distance:t=Z$,duration:r=J$}={}){return{velocity:this.transform(zt.toVector(e)),distance:this.transform(zt.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return Y$;case!1:return 0;default:return e}},axisThreshold(e){return e?lt(lt({},k6),e):k6},keyboardDisplacement(e=Q$){return e}});function cS(e){const[t,r]=e.overflow,[a,s]=e._delta,[n,o]=e._direction;(t<0&&a>0&&n<0||t>0&&a<0&&n>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(e._movement[1]=e._movementBound[1])}const eU=30,tU=100;class rU extends oS{constructor(...t){super(...t),Xt(this,"ingKey","pinching"),Xt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:a}=this.state;t==="wheel"?this.state.offset=zt.add(r,a):this.state.offset=[(1+r[0])*a[0],r[1]+a[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,a]=t._movement;if(!t.axis){const s=Math.abs(r)*eU-Math.abs(a);s<0?t.axis="angle":s>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,a=this.ctrl.touchIds;if(r._active&&r._touchIds.every(n=>a.has(n))||a.size<2)return;this.start(t),r._touchIds=Array.from(a).slice(0,2);const s=_6(t,r._touchIds);s&&this.pinchStart(t,s)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,a=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(a.keys()).every(o=>s.has(o))||(a.size<2&&a.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const n=Cb(...Array.from(a.values()));n&&this.pinchStart(t,n)}pinchStart(t,r){const a=this.state;a.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=_6(t,this.state._touchIds);r&&this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const a=Cb(...Array.from(r.values()));a&&this.pinchMove(t,a)}pinchMove(t,r){const a=this.state,s=a._values[1],n=r.angle-s;let o=0;Math.abs(n)>270&&(o+=Math.sign(n)),this.computeValues([r.distance,r.angle-360*o]),a.origin=r.origin,a.turns=o,a._movement=[a._values[0]/a._initial[0]-1,a._values[1]-a._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const a=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=zt.sub(r._movement,a),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(a=>t[a]):!t[r])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const a=this.state;a._delta=[-nS(t)[1]/tU*a.offset[0],0],zt.addTo(a._movement,a._delta),cS(a),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this)),t("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const aU=lt(lt({},iS),{},{device(e,t,{shared:r,pointer:{touch:a=!1}={}}){if(r.target&&!ba.touch&&ba.gesture)return"gesture";if(ba.touch&&a)return"touch";if(ba.touchscreen){if(ba.pointer)return"pointer";if(ba.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:a={}}){const s=o=>{const i=x6(gh(r,o),{min:-1/0,max:1/0});return[i.min,i.max]},n=o=>{const i=x6(gh(a,o),{min:-1/0,max:1/0});return[i.min,i.max]};return typeof r!="function"&&typeof a!="function"?[s(),n()]:o=>[s(o),n(o)]},threshold(e,t,r){return this.lockDirection=r.axis==="lock",zt.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});lt(lt({},Wd),{},{mouseOnly:(e=!0)=>e});class sU extends q${constructor(...t){super(...t),Xt(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=nS(t),zt.addTo(r._movement,r._delta),cS(r),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const nU=Wd;lt(lt({},Wd),{},{mouseOnly:(e=!0)=>e});const H_=new Map,Pb=new Map;function oU(e){H_.set(e.key,e.engine),Pb.set(e.key,e.resolver)}const iU={key:"pinch",engine:rU,resolver:aU},lU={key:"wheel",engine:sU,resolver:nU};function cU(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,n;for(n=0;n<a.length;n++)s=a[n],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function dU(e,t){if(e==null)return{};var r=cU(e,t),a,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const uU={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=ba.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},pU=["target","eventOptions","window","enabled","transform"];function Lp(e={},t){const r={};for(const[a,s]of Object.entries(t))switch(typeof s){case"function":r[a]=s.call(r,e[a],a,e);break;case"object":r[a]=Lp(e[a],s);break;case"boolean":s&&(r[a]=e[a]);break}return r}function fU(e,t,r={}){const a=e,{target:s,eventOptions:n,window:o,enabled:i,transform:l}=a,c=dU(a,pU);if(r.shared=Lp({target:s,eventOptions:n,window:o,enabled:i,transform:l},uU),t){const d=Pb.get(t);r[t]=Lp(lt({shared:r.shared},c),d)}else for(const d in c){const p=Pb.get(d);p&&(r[d]=Lp(lt({shared:r.shared},c[d]),p))}return r}class dS{constructor(t,r){Xt(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,a,s,n){const o=this._listeners,i=D$(r,a),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=lt(lt({},l),n);t.addEventListener(i,s,c);const d=()=>{t.removeEventListener(i,s,c),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class hU{constructor(){Xt(this,"_timeouts",new Map)}add(t,r,a=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(r,a,...s))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class gU{constructor(t){Xt(this,"gestures",new Set),Xt(this,"_targetEventStore",new dS(this)),Xt(this,"gestureEventStores",{}),Xt(this,"gestureTimeoutStores",{}),Xt(this,"handlers",{}),Xt(this,"config",{}),Xt(this,"pointerIds",new Set),Xt(this,"touchIds",new Set),Xt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),mU(this,t)}setEventIds(t){if(sS(t))return this.touchIds=new Set(B$(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=fU(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,a={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const i=this.config[o],l=F6(a,i.eventOptions,!!s);if(i.enabled){const c=H_.get(o);new c(this,t,o).bind(l)}}const n=F6(a,r.eventOptions,!!s);for(const o in this.nativeHandlers)n(o,"",i=>this.nativeHandlers[o](lt(lt({},this.state.shared),{},{event:i,args:t})),void 0,!0)}for(const n in a)a[n]=O$(...a[n]);if(!s)return a;for(const n in a){const{device:o,capture:i,passive:l}=E$(n);this._targetEventStore.add(s,o,"",a[n],{capture:i,passive:l})}}}}function ii(e,t){e.gestures.add(t),e.gestureEventStores[t]=new dS(e,t),e.gestureTimeoutStores[t]=new hU}function mU(e,t){t.drag&&ii(e,"drag"),t.wheel&&ii(e,"wheel"),t.scroll&&ii(e,"scroll"),t.move&&ii(e,"move"),t.pinch&&ii(e,"pinch"),t.hover&&ii(e,"hover")}const F6=(e,t,r)=>(a,s,n,o={},i=!1)=>{var l,c;const d=(l=o.capture)!==null&&l!==void 0?l:t.capture,p=(c=o.passive)!==null&&c!==void 0?c:t.passive;let f=i?a:A$(a,s,d);r&&p&&(f+="Passive"),e[f]=e[f]||[],e[f].push(n)},bU=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function yU(e){const t={},r={},a=new Set;for(let s in e)bU.test(s)?(a.add(RegExp.lastMatch),r[s]=e[s]):t[s]=e[s];return[r,t,a]}function li(e,t,r,a,s,n){if(!e.has(r)||!H_.has(a))return;const o=r+"Start",i=r+"End",l=c=>{let d;return c.first&&o in t&&t[o](c),r in t&&(d=t[r](c)),c.last&&i in t&&t[i](c),d};s[a]=l,n[a]=n[a]||{}}function _U(e,t){const[r,a,s]=yU(e),n={};return li(s,r,"onDrag","drag",n,t),li(s,r,"onWheel","wheel",n,t),li(s,r,"onScroll","scroll",n,t),li(s,r,"onPinch","pinch",n,t),li(s,r,"onMove","move",n,t),li(s,r,"onHover","hover",n,t),{handlers:n,config:t,nativeHandlers:a}}function wU(e,t={},r,a){const s=_e.useMemo(()=>new gU(e),[]);if(s.applyHandlers(e,a),s.applyConfig(t,r),_e.useEffect(s.effect.bind(s)),_e.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function vU(e){return e.forEach(oU),function(r,a){const{handlers:s,nativeHandlers:n,config:o}=_U(r,a||{});return wU(s,o,void 0,n)}}const C6=10,xU=/Mac|iPod|iPhone|iPad/.test(typeof window>"u"?"node":window.navigator.platform);function uS(e){let{deltaY:t,deltaX:r}=e,a=0;return e.ctrlKey||e.altKey||e.metaKey?a=(Math.abs(t)>C6?C6*Math.sign(t):t)/100:e.shiftKey&&!xU&&(r=t,t=0),{x:-r,y:-t,z:-a}}const SU=vU([lU,iU]);let ci;const kU=e=>ci===void 0?(ci=e,!1):e-ci>120&&e-ci<160?(ci=e,!0):(ci=e,!1);function FU(e){const t=N(),r=S.useMemo(()=>{let a="not sure";const s=({event:m})=>{if(!t.getInstanceState().isFocused||(a="not sure",kU(Date.now())))return;const w=t.getEditingShapeId();if(w){const x=t.getShape(w);if(x&&t.getShapeUtil(x).canScroll(x)){const k=t.getShapePageBounds(w);if(k!=null&&k.containsPoint(t.inputs.currentPagePoint))return}}ke(m),qt(m);const b=uS(m);if(b.x===0&&b.y===0)return;const _={type:"wheel",name:"wheel",delta:b,point:new v(m.clientX,m.clientY),shiftKey:m.shiftKey,altKey:m.altKey,ctrlKey:m.metaKey||m.ctrlKey};t.dispatch(_)};let n=1,o=1,i=1,l=0;const c=new v,d=new v,p=m=>{const w=e.current;a="not sure";const{event:b,origin:_,da:x}=m;b instanceof WheelEvent||(b.target===w||w!=null&&w.contains(b.target))&&(d.x=_[0],d.y=_[1],c.x=_[0],c.y=_[1],n=x[0],o=t.getZoomLevel(),t.dispatch({type:"pinch",name:"pinch_start",point:{x:_[0],y:_[1],z:t.getZoomLevel()},delta:{x:0,y:0},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey}))},f=m=>{if(m&&(a="zooming"),a==="zooming")return;const w=Math.abs(l-n),b=v.Dist(c,d);switch(a){case"not sure":{w>24?a="zooming":b>16&&(a="panning");break}case"panning":{w>64&&(a="zooming");break}}};return{onWheel:s,onPinchStart:p,onPinchEnd:m=>{const w=e.current,{event:b,origin:_,offset:x}=m;if(b instanceof WheelEvent||!(b.target===w||w!=null&&w.contains(b.target)))return;const C=x[0];a="not sure",t.timers.requestAnimationFrame(()=>{t.dispatch({type:"pinch",name:"pinch_end",point:{x:_[0],y:_[1],z:C},delta:{x:_[0],y:_[1]},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey})})},onPinch:m=>{const w=e.current,{event:b,origin:_,offset:x,da:C}=m;if(b instanceof WheelEvent||!(b.target===w||w!=null&&w.contains(b.target)))return;const k=m.type==="gesturechange"||m.type==="gestureend";l=C[0];const F=_[0]-d.x,P=_[1]-d.y;switch(d.x=_[0],d.y=_[1],f(k),a){case"zooming":{i=x[0],t.dispatch({type:"pinch",name:"pinch",point:{x:_[0],y:_[1],z:i},delta:{x:F,y:P},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey});break}case"panning":{t.dispatch({type:"pinch",name:"pinch",point:{x:_[0],y:_[1],z:o},delta:{x:F,y:P},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey});break}}}}},[t,e]);SU(r,{target:e,eventOptions:{passive:!1},pinch:{from:()=>[t.getZoomLevel(),0],scaleBounds:()=>({from:t.getZoomLevel(),max:8,min:.05})}})}function e2(e,t,r){const a=e.getShape(t),s=e.getShapeHandles(a);return{shape:a,handle:s.find(n=>n.id===r)}}function CU(e,t){const r=N();return S.useMemo(()=>{const a=l=>{if(l.isKilled)return;const c=hh(l.currentTarget);$d(c,l);const{shape:d,handle:p}=e2(r,e,t);p&&r.dispatch({type:"pointer",target:"handle",handle:p,shape:d,name:"pointer_down",...Er(l)})};let s,n;return{onPointerDown:a,onPointerMove:l=>{if(l.isKilled||l.clientX===s&&l.clientY===n)return;s=l.clientX,n=l.clientY;const{shape:c,handle:d}=e2(r,e,t);d&&r.dispatch({type:"pointer",target:"handle",handle:d,shape:c,name:"pointer_move",...Er(l)})},onPointerUp:l=>{if(l.isKilled)return;const c=hh(l.currentTarget);Ud(c,l);const{shape:d,handle:p}=e2(r,e,t);p&&r.dispatch({type:"pointer",target:"handle",handle:p,shape:d,name:"pointer_up",...Er(l)})}}},[r,e,t])}var pS="Expected a function",P6=0/0,PU="[object Symbol]",IU=/^\s+|\s+$/g,AU=/^[-+]0x[0-9a-f]+$/i,jU=/^0b[01]+$/i,EU=/^0o[0-7]+$/i,DU=parseInt,TU=typeof er=="object"&&er&&er.Object===Object&&er,MU=typeof self=="object"&&self&&self.Object===Object&&self,BU=TU||MU||Function("return this")(),LU=Object.prototype,RU=LU.toString,OU=Math.max,zU=Math.min,t2=function(){return BU.Date.now()};function NU(e,t,r){var a,s,n,o,i,l,c=0,d=!1,p=!1,f=!0;if(typeof e!="function")throw new TypeError(pS);t=I6(t)||0,mh(r)&&(d=!!r.leading,p="maxWait"in r,n=p?OU(I6(r.maxWait)||0,t):n,f="trailing"in r?!!r.trailing:f);function h(F){var P=a,I=s;return a=s=void 0,c=F,o=e.apply(I,P),o}function y(F){return c=F,i=setTimeout(b,t),d?h(F):o}function m(F){var P=F-l,I=F-c,j=t-P;return p?zU(j,n-I):j}function w(F){var P=F-l,I=F-c;return l===void 0||P>=t||P<0||p&&I>=n}function b(){var F=t2();if(w(F))return _(F);i=setTimeout(b,m(F))}function _(F){return i=void 0,f&&a?h(F):(a=s=void 0,o)}function x(){i!==void 0&&clearTimeout(i),c=0,a=l=s=i=void 0}function C(){return i===void 0?o:_(t2())}function k(){var F=t2(),P=w(F);if(a=arguments,s=this,l=F,P){if(i===void 0)return y(l);if(p)return i=setTimeout(b,t),h(l)}return i===void 0&&(i=setTimeout(b,t)),o}return k.cancel=x,k.flush=C,k}function qU(e,t,r){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(pS);return mh(r)&&(a="leading"in r?!!r.leading:a,s="trailing"in r?!!r.trailing:s),NU(e,t,{leading:a,maxWait:t,trailing:s})}function mh(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function $U(e){return!!e&&typeof e=="object"}function UU(e){return typeof e=="symbol"||$U(e)&&RU.call(e)==PU}function I6(e){if(typeof e=="number")return e;if(UU(e))return P6;if(mh(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mh(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(IU,"");var r=jU.test(e);return r||EU.test(e)?DU(e.slice(2),r?2:8):AU.test(e)?P6:+e}var WU=qU;const HU=Yn(WU),Xe=class Xe{constructor(t=0,r=0,a=0,s=0){g(this,"x",0);g(this,"y",0);g(this,"w",0);g(this,"h",0);this.x=t,this.y=r,this.w=a,this.h=s}get point(){return new v(this.x,this.y)}set point(t){this.x=t.x,this.y=t.y}get minX(){return this.x}set minX(t){this.x=t}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(t){this.y=t}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(t){this.w=t}get height(){return this.h}set height(t){this.h=t}get aspectRatio(){return this.width/this.height}get center(){return new v(this.midX,this.midY)}set center(t){this.minX=t.x-this.width/2,this.minY=t.y-this.height/2}get corners(){return[new v(this.minX,this.minY),new v(this.maxX,this.minY),new v(this.maxX,this.maxY),new v(this.minX,this.maxY)]}get cornersAndCenter(){return[new v(this.minX,this.minY),new v(this.maxX,this.minY),new v(this.maxX,this.maxY),new v(this.minX,this.maxY),this.center]}get sides(){const{corners:t}=this;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]}get size(){return new v(this.w,this.h)}toFixed(){return this.x=qu(this.x),this.y=qu(this.y),this.w=qu(this.w),this.h=qu(this.h),this}setTo(t){return this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this}set(t=0,r=0,a=0,s=0){return this.x=t,this.y=r,this.w=a,this.h=s,this}expand(t){const r=Math.min(this.minX,t.minX),a=Math.min(this.minY,t.minY),s=Math.max(this.maxX,t.maxX),n=Math.max(this.maxY,t.maxY);return this.x=r,this.y=a,this.w=s-r,this.h=n-a,this}expandBy(t){return this.x-=t,this.y-=t,this.w+=t*2,this.h+=t*2,this}scale(t){return this.x/=t,this.y/=t,this.w/=t,this.h/=t,this}clone(){const{x:t,y:r,w:a,h:s}=this;return new Xe(t,r,a,s)}translate(t){return this.x+=t.x,this.y+=t.y,this}snapToGrid(t){const r=Math.round(this.minX/t)*t,a=Math.round(this.minY/t)*t,s=Math.round(this.maxX/t)*t,n=Math.round(this.maxY/t)*t;this.minX=r,this.minY=a,this.width=Math.max(1,s-r),this.height=Math.max(1,n-a)}collides(t){return Xe.Collides(this,t)}contains(t){return Xe.Contains(this,t)}includes(t){return Xe.Includes(this,t)}containsPoint(t,r=0){return Xe.ContainsPoint(this,t,r)}getHandlePoint(t){switch(t){case"top_left":return new v(this.minX,this.minY);case"top_right":return new v(this.maxX,this.minY);case"bottom_left":return new v(this.minX,this.maxY);case"bottom_right":return new v(this.maxX,this.maxY);case"top":return new v(this.midX,this.minY);case"right":return new v(this.maxX,this.midY);case"bottom":return new v(this.midX,this.maxY);case"left":return new v(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(t,r,a){const{minX:s,minY:n,maxX:o,maxY:i}=this;let{minX:l,minY:c,maxX:d,maxY:p}=this;switch(t){case"left":case"top_left":case"bottom_left":{l+=r;break}case"right":case"top_right":case"bottom_right":{d+=r;break}}switch(t){case"top":case"top_left":case"top_right":{c+=a;break}case"bottom":case"bottom_left":case"bottom_right":{p+=a;break}}const f=(d-l)/(o-s),h=(p-c)/(i-n),y=f<0,m=h<0;if(y){const w=d;d=l,l=w}if(m){const w=p;p=c,c=w}this.minX=l,this.minY=c,this.width=Math.abs(d-l),this.height=Math.abs(p-c)}union(t){const r=Math.min(this.minX,t.x),a=Math.min(this.minY,t.y),s=Math.max(this.maxX,t.w+t.x),n=Math.max(this.maxY,t.h+t.y);return this.x=r,this.y=a,this.width=s-r,this.height=n-a,this}static From(t){return new Xe(t.x,t.y,t.w,t.h)}static FromCenter(t,r){return new Xe(t.x-r.x/2,t.y-r.y/2,r.x,r.y)}static FromPoints(t){if(t.length===0)return new Xe;let r=1/0,a=1/0,s=-1/0,n=-1/0,o;for(let i=0,l=t.length;i<l;i++)o=t[i],r=Math.min(o.x,r),a=Math.min(o.y,a),s=Math.max(o.x,s),n=Math.max(o.y,n);return new Xe(r,a,s-r,n-a)}static Expand(t,r){const a=Math.min(r.minX,t.minX),s=Math.min(r.minY,t.minY),n=Math.max(r.maxX,t.maxX),o=Math.max(r.maxY,t.maxY);return new Xe(a,s,n-a,o-s)}static ExpandBy(t,r){return new Xe(t.minX-r,t.minY-r,t.width+r*2,t.height+r*2)}static Resize(t,r,a,s,n=!1){const{minX:o,minY:i,maxX:l,maxY:c}=t;let{minX:d,minY:p,maxX:f,maxY:h}=t;switch(r){case"left":case"top_left":case"bottom_left":{d+=a;break}case"right":case"top_right":case"bottom_right":{f+=a;break}}switch(r){case"top":case"top_left":case"top_right":{p+=s;break}case"bottom":case"bottom_left":case"bottom_right":{h+=s;break}}const y=(f-d)/(l-o),m=(h-p)/(c-i),w=y<0,b=m<0;if(n){const x=(l-o)/(c-i),C=Math.abs(f-d),k=Math.abs(h-p),F=C*(m<0?1:-1)*(1/x),P=k*(y<0?1:-1)*x,I=x<C/k;switch(r){case"top_left":{I?p=h+F:d=f+P;break}case"top_right":{I?p=h+F:f=d-P;break}case"bottom_right":{I?h=p-F:f=d-P;break}case"bottom_left":{I?h=p-F:d=f+P;break}case"bottom":case"top":{const j=(d+f)/2,A=k*x;d=j-A/2,f=j+A/2;break}case"left":case"right":{const j=(p+h)/2,A=C/x;p=j-A/2,h=j+A/2;break}}}if(w){const x=f;f=d,d=x}if(b){const x=h;h=p,p=x}const _=new Xe(d,p,Math.abs(f-d),Math.abs(h-p));return{box:_,scaleX:+(_.width/t.width*(y>0?1:-1)).toFixed(5),scaleY:+(_.height/t.height*(m>0?1:-1)).toFixed(5)}}equals(t){return Xe.Equals(this,t)}static Equals(t,r){return r.x===t.x&&r.y===t.y&&r.w===t.w&&r.h===t.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(t){return new Xe(t.x,t.y,Math.max(1,t.w),Math.max(1,t.h))}};g(Xe,"Collides",(t,r)=>!(t.maxX<r.minX||t.minX>r.maxX||t.maxY<r.minY||t.minY>r.maxY)),g(Xe,"Contains",(t,r)=>t.minX<r.minX&&t.minY<r.minY&&t.maxY>r.maxY&&t.maxX>r.maxX),g(Xe,"Includes",(t,r)=>Xe.Collides(t,r)||Xe.Contains(t,r)),g(Xe,"ContainsPoint",(t,r,a=0)=>!(r.x<t.minX-a||r.y<t.minY-a||r.x>t.maxX+a||r.y>t.maxY+a)),g(Xe,"Common",t=>{let r=1/0,a=1/0,s=-1/0,n=-1/0;for(let o=0;o<t.length;o++){const i=t[o];r=Math.min(r,i.minX),a=Math.min(a,i.minY),s=Math.max(s,i.maxX),n=Math.max(n,i.maxY)}return new Xe(r,a,s-r,n-a)}),g(Xe,"Sides",(t,r=0)=>{const{corners:a}=t;return[[a[0],a[1]],[a[1],a[2]],[a[2],a[3]],[a[3],a[0]]]});let Z=Xe;function GU(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}function KU(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}function VU(e){return e==="top_left"||e==="top_right"||e==="bottom_right"||e==="bottom_left"}function YU(e){const t=N();S.useLayoutEffect(()=>{let r=new Z;function a(){const c=e.current;if(!c)return null;const d=c.getBoundingClientRect(),p=new Z(d.left||d.x,d.top||d.y,Math.max(d.width,1),Math.max(d.height,1));r.equals(p)||(t.updateViewportScreenBounds(p),r=p)}a();const s=HU(a,200,{trailing:!0}),n=t.timers.setInterval(s,1e3);window.addEventListener("resize",s);const o=new ResizeObserver(c=>{c[0].contentRect&&s()}),i=e.current;let l=null;return i&&(o.observe(i),l=XU(i),l.addEventListener("scroll",s)),()=>{clearInterval(n),window.removeEventListener("resize",s),o.disconnect(),l==null||l.removeEventListener("scroll",s)}},[t,e])}/*!
 * Author: excalidraw
 * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE
 * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600
 */const XU=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:r}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(r==="auto"||r==="scroll"||r==="overlay"))return t;t=t.parentElement}return document},Me=class Me{constructor(t,r,a,s,n,o){g(this,"a",1);g(this,"b",0);g(this,"c",0);g(this,"d",1);g(this,"e",0);g(this,"f",0);this.a=t,this.b=r,this.c=a,this.d=s,this.e=n,this.f=o}equals(t){return this===t||this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(t){const r=t,{a,b:s,c:n,d:o,e:i,f:l}=this;return this.a=a*r.a+n*r.b,this.c=a*r.c+n*r.d,this.e=a*r.e+n*r.f+i,this.b=s*r.a+o*r.b,this.d=s*r.c+o*r.d,this.f=s*r.e+o*r.f+l,this}rotate(t,r,a){return t===0?this:r===void 0?this.multiply(Me.Rotate(t)):this.translate(r,a).multiply(Me.Rotate(t)).translate(-r,-a)}translate(t,r){return this.multiply(Me.Translate(t,r))}scale(t,r){return this.multiply(Me.Scale(t,r))}invert(){const{a:t,b:r,c:a,d:s,e:n,f:o}=this,i=t*s-r*a;return this.a=s/i,this.b=r/-i,this.c=a/-i,this.d=t/i,this.e=(s*n-a*o)/-i,this.f=(r*n-t*o)/i,this}applyToPoint(t){return Me.applyToPoint(this,t)}applyToPoints(t){return Me.applyToPoints(this,t)}rotation(){return Me.Rotation(this)}point(){return Me.Point(this)}decomposed(){return Me.Decompose(this)}toCssString(){return Me.toCssString(this)}setTo(t){return Object.assign(this,t),this}decompose(){return Me.Decompose(this)}clone(){return new Me(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new Me(1,0,0,1,0,0)}static Translate(t,r){return new Me(1,0,0,1,t,r)}static Rotate(t,r,a){if(t===0)return Me.Identity();const s=Math.cos(t),n=Math.sin(t),o=new Me(s,n,-n,s,0,0);return r===void 0?o:Me.Compose(Me.Translate(r,a),o,Me.Translate(-r,-a))}static Multiply(t,r){return{a:t.a*r.a+t.c*r.b,c:t.a*r.c+t.c*r.d,e:t.a*r.e+t.c*r.f+t.e,b:t.b*r.a+t.d*r.b,d:t.b*r.c+t.d*r.d,f:t.b*r.e+t.d*r.f+t.f}}static Inverse(t){const r=t.a*t.d-t.b*t.c;return{a:t.d/r,b:t.b/-r,c:t.c/-r,d:t.a/r,e:(t.d*t.e-t.c*t.f)/-r,f:(t.b*t.e-t.a*t.f)/r}}static Absolute(t){const r=t.a*t.d-t.b*t.c;return{a:t.d/r,b:t.b/-r,c:t.c/-r,d:t.a/r,e:(t.d*t.e-t.c*t.f)/r,f:(t.b*t.e-t.a*t.f)/-r}}static Compose(...t){const r=Me.Identity();for(let a=0,s=t.length;a<s;a++)r.multiply(t[a]);return r}static Point(t){return new v(t.e,t.f)}static Rotation(t){let r;if(t.a!==0||t.c!==0){const a=(t.a*t.a+t.c*t.c)**.5;r=Math.acos(t.a/a)*(t.c>0?-1:1)}else if(t.b!==0||t.d!==0){const a=(t.b*t.b+t.d*t.d)**.5;r=Ge+Math.acos(t.b/a)*(t.d>0?-1:1)}else r=0;return kb(r)}static Decompose(t){let r,a,s;if(t.a!==0||t.c!==0){const n=(t.a*t.a+t.c*t.c)**.5;r=n,a=(t.a*t.d-t.b*t.c)/n,s=Math.acos(t.a/n)*(t.c>0?-1:1)}else if(t.b!==0||t.d!==0){const n=(t.b*t.b+t.d*t.d)**.5;r=(t.a*t.d-t.b*t.c)/n,a=n,s=Ge+Math.acos(t.b/n)*(t.d>0?-1:1)}else r=0,a=0,s=0;return{x:t.e,y:t.f,scaleX:r,scaleY:a,rotation:kb(s)}}static Smooth(t,r=1e10){return t.a=Math.round(t.a*r)/r,t.b=Math.round(t.b*r)/r,t.c=Math.round(t.c*r)/r,t.d=Math.round(t.d*r)/r,t.e=Math.round(t.e*r)/r,t.f=Math.round(t.f*r)/r,t}static toCssString(t){return`matrix(${R(t.a)}, ${R(t.b)}, ${R(t.c)}, ${R(t.d)}, ${R(t.e)}, ${R(t.f)})`}static applyToPoint(t,r){return new v(t.a*r.x+t.c*r.y+t.e,t.b*r.x+t.d*r.y+t.f,r.z)}static applyToXY(t,r,a){return[t.a*r+t.c*a+t.e,t.b*r+t.d*a+t.f]}static applyToPoints(t,r){return r.map(a=>new v(t.a*a.x+t.c*a.y+t.e,t.b*a.x+t.d*a.y+t.f,a.z))}static applyToBounds(t,r){return new Z(t.e+r.minX,t.f+r.minY,r.width,r.height)}static From(t){return new Me(t.a,t.b,t.c,t.d,t.e,t.f)}static Cast(t){return t instanceof Me?t:Me.From(t)}};g(Me,"Scale",(t,r,a,s)=>{const n=new Me(t,0,0,r,0,0);return a===void 0?n:Me.Compose(Me.Translate(a,s),n,Me.Translate(-a,-s))});let ae=Me;function fS(e,t){return t===0?e:fS(t,e%t)}function hS(e){const t=e.toString().split(".")[1];if(!t)return 1;const r=Math.pow(10,t.length),a=parseInt(t,10);return r/fS(a,r)}class ro{constructor(t){g(this,"isFilled",!1);g(this,"isClosed",!0);g(this,"isLabel",!1);g(this,"debugColor");g(this,"ignore");g(this,"_vertices");g(this,"_bounds");g(this,"_area");g(this,"_length");this.isFilled=t.isFilled,this.isClosed=t.isClosed,this.isLabel=t.isLabel??!1,this.debugColor=t.debugColor,this.ignore=t.ignore}hitTestPoint(t,r=0,a=!1){return this.isClosed&&(this.isFilled||a)&&ta(t,this.vertices)?!0:v.Dist2(t,this.nearestPoint(t))<=r*r}distanceToPoint(t,r=!1){return t.dist(this.nearestPoint(t))*(this.isClosed&&(this.isFilled||r)&&ta(t,this.vertices)?-1:1)}distanceToLineSegment(t,r){if(t.equals(r))return this.distanceToPoint(t);const{vertices:a}=this;let s,n=1/0,o,i,l;for(let c=0;c<a.length;c++)i=a[c],l=v.NearestPointOnLineSegment(t,r,i,!0),o=v.Dist2(i,l),o<n&&(n=o,s=l);if(!s)throw Error("nearest point not found");return this.isClosed&&this.isFilled&&ta(s,this.vertices)?-n:n}hitTestLineSegment(t,r,a=0){return this.distanceToLineSegment(t,r)<=a}nearestPointOnLineSegment(t,r){const{vertices:a}=this;let s,n=1/0,o,i,l;for(let c=0;c<a.length;c++)i=a[c],l=v.NearestPointOnLineSegment(t,r,i,!0),o=v.Dist2(i,l),o<n&&(n=o,s=l);if(!s)throw Error("nearest point not found");return s}isPointInBounds(t,r=0){const{bounds:a}=this;return!(t.x<a.minX-r||t.y<a.minY-r||t.x>a.maxX+r||t.y>a.maxY+r)}get vertices(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}getBounds(){return Z.FromPoints(this.vertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:t}=this;let r=0;for(let a=0,s=t.length;a<s;a++){const n=t[a],o=t[(a+1)%s];r+=n.x*o.y-o.x*n.y}return r/2}toSimpleSvgPath(){let t="";const{vertices:r}=this,a=r.length;if(a===0)return t;t+=`M${r[0].x},${r[0].y}`;for(let s=1;s<a;s++)t+=`L${r[s].x},${r[s].y}`;return this.isClosed&&(t+="Z"),t}get length(){return this._length?this._length:(this._length=this.getLength(),this._length)}getLength(){const{vertices:t}=this;let r,a=t[0],s=0;for(let n=1;n<t.length;n++)r=t[n],s+=v.Dist2(a,r),a=r;return Math.sqrt(s)}}class $a extends ro{constructor(r){super({...r,isClosed:!0,isFilled:!1});g(this,"children",[]);g(this,"ignoredChildren",[]);for(const a of r.children)a.ignore?this.ignoredChildren.push(a):this.children.push(a);if(this.children.length===0)throw Error("Group2d must have at least one child")}getVertices(){return this.children.filter(r=>!r.isLabel).flatMap(r=>r.vertices)}nearestPoint(r){let a=1/0,s;const{children:n}=this;if(n.length===0)throw Error("no children");let o,i;for(const l of n)o=l.nearestPoint(r),i=v.Dist2(o,r),i<a&&(a=i,s=o);if(!s)throw Error("nearest point not found");return s}distanceToPoint(r,a=!1){return Math.min(...this.children.map((s,n)=>s.distanceToPoint(r,a||n>0)))}hitTestPoint(r,a,s){return!!this.children.filter(n=>!n.isLabel).find(n=>n.hitTestPoint(r,a,s))}hitTestLineSegment(r,a,s){return!!this.children.filter(n=>!n.isLabel).find(n=>n.hitTestLineSegment(r,a,s))}getArea(){return this.children[0].area}toSimpleSvgPath(){let r="";for(const s of this.children)r+=s.toSimpleSvgPath();const a=Z.FromPoints(this.vertices).corners;for(let s=0,n=a.length;s<n;s++){const o=a[s],i=a[(s-1+n)%n],l=o.dist(i),c=a[(s+1)%n],d=o.dist(c),p=o.clone().lrp(i,4/l),f=o,h=o.clone().lrp(c,4/d);r+=`M${p.x},${p.y} L${f.x},${f.y} L${h.x},${h.y} `}return r}getLength(){return this.children.reduce((r,a)=>a.isLabel?r:r+a.length,0)}getSvgPathData(){return this.children.map((r,a)=>r.isLabel?"":r.getSvgPathData(a===0)).join(" ")}}function ZU(e=!0){const[t,r]=S.useState(0),a=N();S.useEffect(()=>{if(!e)return;const s=()=>r(n=>n+1);return a.on("tick",s),()=>{a.off("tick",s)}},[a,e])}const JU=la(function({showStroke:t=!0,showVertices:r=!0,showClosestPointOnOutline:a=!0}){const s=N();ZU(a);const n=s.getZoomLevel(),o=s.getRenderingShapes(),{inputs:{currentPagePoint:i}}=s;return u.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:o.map(l=>{const c=s.getShape(l.id);if(c.type==="group")return null;const d=s.getShapeGeometry(c),p=s.getShapePageTransform(c),f=s.getPointInShapeSpace(c,i),h=d.nearestPoint(f),y=d.distanceToPoint(f,!0),m=Math.abs(y)*n,w=y<0,{vertices:b}=d;return u.jsxs("g",{transform:p.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[t&&u.jsx(gS,{geometry:d}),r&&b.map((_,x)=>u.jsx("circle",{cx:_.x,cy:_.y,r:"2",fill:`hsl(${Xf(x,[0,b.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:"1"},`v${x}`)),a&&m<150&&u.jsx("line",{x1:h.x,y1:h.y,x2:f.x,y2:f.y,opacity:1-m/150,stroke:w?"goldenrod":"dodgerblue",strokeWidth:"2"})]},l.id+"_outline")})})});function gS({geometry:e}){return e instanceof $a?u.jsx(u.Fragment,{children:[...e.children,...e.ignoredChildren].map((t,r)=>u.jsx(gS,{geometry:t},r))}):u.jsx("path",{stroke:e.debugColor??"red",strokeWidth:"2",fill:"none",opacity:"1",d:e.toSimpleSvgPath()})}var QU=200,G_="__lodash_hash_undefined__",eW=1/0,tW="[object Function]",rW="[object GeneratorFunction]",aW=/[\\^$.*+?()[\]{}|]/g,sW=/^\[object .+?Constructor\]$/,nW=typeof er=="object"&&er&&er.Object===Object&&er,oW=typeof self=="object"&&self&&self.Object===Object&&self,K_=nW||oW||Function("return this")();function iW(e,t){var r=e?e.length:0;return!!r&&dW(e,t,0)>-1}function lW(e,t,r){for(var a=-1,s=e?e.length:0;++a<s;)if(r(t,e[a]))return!0;return!1}function cW(e,t,r,a){for(var s=e.length,n=r+(a?1:-1);a?n--:++n<s;)if(t(e[n],n,e))return n;return-1}function dW(e,t,r){if(t!==t)return cW(e,uW,r);for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}function uW(e){return e!==e}function pW(e,t){return e.has(t)}function fW(e,t){return e==null?void 0:e[t]}function hW(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function mS(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var gW=Array.prototype,mW=Function.prototype,bS=Object.prototype,r2=K_["__core-js_shared__"],A6=function(){var e=/[^.]+$/.exec(r2&&r2.keys&&r2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yS=mW.toString,V_=bS.hasOwnProperty,bW=bS.toString,yW=RegExp("^"+yS.call(V_).replace(aW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_W=gW.splice,wW=Y_(K_,"Map"),a2=Y_(K_,"Set"),gd=Y_(Object,"create");function No(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function vW(){this.__data__=gd?gd(null):{}}function xW(e){return this.has(e)&&delete this.__data__[e]}function SW(e){var t=this.__data__;if(gd){var r=t[e];return r===G_?void 0:r}return V_.call(t,e)?t[e]:void 0}function kW(e){var t=this.__data__;return gd?t[e]!==void 0:V_.call(t,e)}function FW(e,t){var r=this.__data__;return r[e]=gd&&t===void 0?G_:t,this}No.prototype.clear=vW;No.prototype.delete=xW;No.prototype.get=SW;No.prototype.has=kW;No.prototype.set=FW;function Dl(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function CW(){this.__data__=[]}function PW(e){var t=this.__data__,r=lg(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():_W.call(t,r,1),!0}function IW(e){var t=this.__data__,r=lg(t,e);return r<0?void 0:t[r][1]}function AW(e){return lg(this.__data__,e)>-1}function jW(e,t){var r=this.__data__,a=lg(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}Dl.prototype.clear=CW;Dl.prototype.delete=PW;Dl.prototype.get=IW;Dl.prototype.has=AW;Dl.prototype.set=jW;function Tl(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function EW(){this.__data__={hash:new No,map:new(wW||Dl),string:new No}}function DW(e){return cg(this,e).delete(e)}function TW(e){return cg(this,e).get(e)}function MW(e){return cg(this,e).has(e)}function BW(e,t){return cg(this,e).set(e,t),this}Tl.prototype.clear=EW;Tl.prototype.delete=DW;Tl.prototype.get=TW;Tl.prototype.has=MW;Tl.prototype.set=BW;function bh(e){var t=-1,r=e?e.length:0;for(this.__data__=new Tl;++t<r;)this.add(e[t])}function LW(e){return this.__data__.set(e,G_),this}function RW(e){return this.__data__.has(e)}bh.prototype.add=bh.prototype.push=LW;bh.prototype.has=RW;function lg(e,t){for(var r=e.length;r--;)if(HW(e[r][0],t))return r;return-1}function OW(e){if(!_S(e)||$W(e))return!1;var t=GW(e)||hW(e)?yW:sW;return t.test(UW(e))}function zW(e,t,r){var a=-1,s=iW,n=e.length,o=!0,i=[],l=i;if(r)o=!1,s=lW;else if(n>=QU){var c=t?null:NW(e);if(c)return mS(c);o=!1,s=pW,l=new bh}else l=t?[]:i;e:for(;++a<n;){var d=e[a],p=t?t(d):d;if(d=r||d!==0?d:0,o&&p===p){for(var f=l.length;f--;)if(l[f]===p)continue e;t&&l.push(p),i.push(d)}else s(l,p,r)||(l!==i&&l.push(p),i.push(d))}return i}var NW=a2&&1/mS(new a2([,-0]))[1]==eW?function(e){return new a2(e)}:KW;function cg(e,t){var r=e.__data__;return qW(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Y_(e,t){var r=fW(e,t);return OW(r)?r:void 0}function qW(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function $W(e){return!!A6&&A6 in e}function UW(e){if(e!=null){try{return yS.call(e)}catch{}try{return e+""}catch{}}return""}function WW(e){return e&&e.length?zW(e):[]}function HW(e,t){return e===t||e!==e&&t!==t}function GW(e){var t=_S(e)?bW.call(e):"";return t==tW||t==rW}function _S(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function KW(){}var VW=WW;const YW=Yn(VW);function wS(e){return YW(e)}function XW(){const e=N(),t=EN("userIds",()=>wS(e.getCollaborators().map(r=>r.userId)).sort(),{isEqual:(r,a)=>{var s;return r.join(",")===((s=a.join)==null?void 0:s.call(a,","))}},[e]);return H(t)}function vS(e){const t=N();return H(`latestPresence:${e}`,()=>t.getCollaborators().find(a=>a.userId===e),[t])??null}const ZW=la(function(){const t=XW();return u.jsx(u.Fragment,{children:t.map(r=>u.jsx(JW,{collaboratorId:r},r))})}),JW=la(function({collaboratorId:t}){const r=N(),a=vS(t),s=eH(r,a);if(!(a&&a.currentPageId===r.getCurrentPageId()))return null;switch(s){case"inactive":{const{followingUserId:n,highlightedUserIds:o}=r.getInstanceState();if(!(n===a.userId||o.includes(a.userId)))return null;break}case"idle":{const{highlightedUserIds:n}=r.getInstanceState();if(a.followingUserId===r.user.getId()&&!(a.chatMessage||n.includes(a.userId)))return null;break}}return u.jsx(QW,{latestPresence:a})}),QW=la(function({latestPresence:t}){const r=N(),{CollaboratorBrush:a,CollaboratorScribble:s,CollaboratorCursor:n,CollaboratorHint:o,CollaboratorShapeIndicator:i}=st(),l=r.getZoomLevel(),c=r.getViewportPageBounds(),{userId:d,chatMessage:p,brush:f,scribbles:h,selectedShapeIds:y,userName:m,cursor:w,color:b}=t,_=!(w.x<c.minX-12/l||w.y<c.minY-16/l||w.x>c.maxX-12/l||w.y>c.maxY-16/l);return u.jsxs(u.Fragment,{children:[f&&a?u.jsx(a,{className:"tl-collaborator__brush",brush:f,color:b,opacity:.1},d+"_brush"):null,_&&n?u.jsx(n,{className:"tl-collaborator__cursor",point:w,color:b,zoom:l,name:m!=="New User"?m:null,chatMessage:p},d+"_cursor"):o?u.jsx(o,{className:"tl-collaborator__cursor-hint",point:w,color:b,zoom:l,viewport:c},d+"_cursor_hint"):null,s&&h.length?u.jsx(u.Fragment,{children:h.map(x=>u.jsx(s,{className:"tl-collaborator__scribble",scribble:x,color:b,zoom:l,opacity:x.color==="laser"?.5:.1},d+"_scribble_"+x.id))}):null,i&&y.map(x=>u.jsx(i,{className:"tl-collaborator__shape-indicator",shapeId:x,color:b,opacity:.5},d+"_"+x))]})});function j6(e,t){return t>e.options.collaboratorInactiveTimeoutMs?"inactive":t>e.options.collaboratorIdleTimeoutMs?"idle":"active"}function eH(e,t){const r=S.useRef((t==null?void 0:t.lastActivityTimestamp)??-1),[a,s]=S.useState(()=>j6(e,Date.now()-r.current));return S.useEffect(()=>{const n=e.timers.setInterval(()=>{s(j6(e,Date.now()-r.current))},e.options.collaboratorCheckIntervalMs);return()=>clearInterval(n)},[e]),t&&(r.current=t.lastActivityTimestamp),a}const xS=S.memo(function({id:t,shape:r,util:a,index:s,backgroundIndex:n,opacity:o,dprMultiple:i}){const l=N(),{ShapeErrorFallback:c}=st(),d=S.useRef(null),p=S.useRef(null),f=S.useRef({transform:"",clipPath:"none",width:0,height:0,x:0,y:0,isCulled:!1});On("set shape stuff",()=>{const m=l.getShape(t);if(!m)return;const w=f.current,b=l.getShapeClipPath(t)??"none";b!==w.clipPath&&(Yt(d.current,"clip-path",b),Yt(p.current,"clip-path",b),w.clipPath=b);const _=l.getShapePageTransform(t),x=ae.toCssString(_),C=l.getShapeGeometry(m).bounds;x!==w.transform&&(Yt(d.current,"transform",x),Yt(p.current,"transform",x),w.transform=x);const k=C.w%i,F=C.h%i,P=k===0?C.w:C.w+(i-k),I=F===0?C.h:C.h+(i-F);(P!==w.width||I!==w.height)&&(Yt(d.current,"width",Math.max(P,i)+"px"),Yt(d.current,"height",Math.max(I,i)+"px"),Yt(p.current,"width",Math.max(P,i)+"px"),Yt(p.current,"height",Math.max(I,i)+"px"),w.width=P,w.height=I)},[l]),On("set opacity and z-index",()=>{const m=d.current,w=p.current;Yt(m,"opacity",o),Yt(w,"opacity",o),Yt(m,"z-index",s),Yt(w,"z-index",n)},[o,s,n]),On("set display",()=>{if(!l.getShape(t))return;const b=l.getCulledShapes().has(t);b!==f.current.isCulled&&(Yt(d.current,"display",b?"none":"block"),Yt(p.current,"display",b?"none":"block"),f.current.isCulled=b)},[l]);const h=S.useCallback(m=>l.annotateError(m,{origin:"shape",willCrashApp:!1}),[l]);if(!r)return null;const y="fill"in r.props&&r.props.fill!=="none";return u.jsxs(u.Fragment,{children:[a.backgroundComponent&&u.jsx("div",{ref:p,className:"tl-shape tl-shape-background","data-shape-type":r.type,draggable:!1,children:u.jsx(hd,{fallback:c,onError:h,children:u.jsx(rH,{shape:r,util:a})})}),u.jsx("div",{ref:d,className:"tl-shape","data-shape-type":r.type,"data-shape-is-filled":y,draggable:!1,children:u.jsx(hd,{fallback:c,onError:h,children:u.jsx(tH,{shape:r,util:a})})})]})}),tH=S.memo(function({shape:t,util:r}){return ag("InnerShape:"+t.type,()=>r.component(r.editor.store.unsafeGetWithoutCapture(t.id)))},(e,t)=>e.shape.props===t.shape.props&&e.shape.meta===t.shape.meta),rH=S.memo(function({shape:t,util:r}){return ag("InnerShape:"+t.type,()=>{var a;return(a=r.backgroundComponent)==null?void 0:a.call(r,r.editor.store.unsafeGetWithoutCapture(t.id))})},(e,t)=>e.shape.props===t.shape.props&&e.shape.meta===t.shape.meta);function aH({className:e}){const t=N(),{Background:r,SvgDefs:a}=st(),s=S.useRef(null),n=S.useRef(null),o=S.useRef(null),i=or();YU(s),_$(),b$(),FU(s),x$(s);const l=S.useRef({lodDisableTextOutline:!1,allowTextOutline:!0});On("position layers",function(){const{x:b,y:_,z:x}=t.getCamera();if(l.current.allowTextOutline&&t.environment.isSafari&&(i.style.setProperty("--tl-text-outline","none"),l.current.allowTextOutline=!1),l.current.allowTextOutline&&x<t.options.textShadowLod!==l.current.lodDisableTextOutline){const F=x<t.options.textShadowLod;i.style.setProperty("--tl-text-outline",F?"none":"var(--tl-text-outline-reference)"),l.current.lodDisableTextOutline=F}const C=x>=1?Xf(x,[1,8],[.125,.5],!0):Xf(x,[.1,1],[-2,.125],!0),k=`scale(${R(x)}) translate(${R(b+C)}px,${R(_+C)}px)`;Yt(n.current,"transform",k),Yt(o.current,"transform",k)},[t,i]);const c=m$(),d=H("shapeSvgDefs",()=>{const w=new Map;for(const b of ht(t.shapeUtils)){if(!b)return;const _=b.getCanvasSvgDefs();for(const{key:x,component:C}of _)w.has(x)||w.set(x,u.jsx(C,{},x))}return[...w.values()]},[t]),p=H("debug_shapes",()=>vt.hideShapes.get(),[vt]),f=H("debug_svg",()=>vt.debugSvg.get(),[vt]),h=H("debug_geometry",()=>vt.debugGeometry.get(),[vt]),y=H("isEditingAnything",()=>t.getEditingShapeId()!==null,[t]),m=H("isSelectingAnything",()=>!!t.getSelectedShapeIds().length,[t]);return u.jsxs("div",{ref:s,draggable:!1,"data-iseditinganything":y,"data-isselectinganything":m,className:le("tl-canvas",e),"data-testid":"canvas",...c,children:[u.jsx("svg",{className:"tl-svg-context",children:u.jsxs("defs",{children:[d,u.jsx(bH,{}),u.jsx(yH,{}),a&&u.jsx(a,{})]})}),r&&u.jsx("div",{className:"tl-background__wrapper",children:u.jsx(r,{})}),u.jsx(sH,{}),u.jsxs("div",{ref:n,className:"tl-html-layer tl-shapes",draggable:!1,children:[u.jsx(xH,{}),u.jsx(vH,{}),p?null:f?u.jsx(pH,{}):u.jsx(hH,{})]}),u.jsx("div",{className:"tl-overlays",children:u.jsxs("div",{ref:o,className:"tl-html-layer",children:[h?u.jsx(JU,{}):null,u.jsx(cH,{}),u.jsx(oH,{}),u.jsx(nH,{}),u.jsx(iH,{}),u.jsx(gH,{}),u.jsx(mH,{}),u.jsx(lH,{}),u.jsx(wH,{}),u.jsx(ZW,{})]})}),u.jsx(SH,{})]})}function sH(){const e=N(),t=H("gridSize",()=>e.getDocumentSettings().gridSize,[e]),{x:r,y:a,z:s}=H("camera",()=>e.getCamera(),[e]),n=H("isGridMode",()=>e.getInstanceState().isGridMode,[e]),{Grid:o}=st();return o&&n?u.jsx(o,{x:r,y:a,z:s,size:t}):null}function nH(){const e=N(),t=H("scribbles",()=>e.getInstanceState().scribbles,[e]),r=H("zoomLevel",()=>e.getZoomLevel(),[e]),{Scribble:a}=st();return a&&t.length?u.jsx(u.Fragment,{children:t.map(s=>u.jsx(a,{className:"tl-user-scribble",scribble:s,zoom:r},s.id))}):null}function oH(){const e=N(),t=H("brush",()=>e.getInstanceState().brush,[e]),{Brush:r}=st();return r&&t?u.jsx(r,{className:"tl-user-brush",brush:t}):null}function iH(){const e=N(),t=H("zoomBrush",()=>e.getInstanceState().zoomBrush,[e]),{ZoomBrush:r}=st();return r&&t?u.jsx(r,{className:"tl-user-brush tl-zoom-brush",brush:t}):null}function lH(){const e=N(),t=H("snapLines",()=>e.snaps.getIndicators(),[e]),r=H("zoomLevel",()=>e.getZoomLevel(),[e]),{SnapIndicator:a}=st();return a&&t.length>0?u.jsx(u.Fragment,{children:t.map(s=>u.jsx(a,{className:"tl-user-snapline",line:s,zoom:r},s.id))}):null}function cH(){const e=N(),t=H("handles shapeIdWithHandles",()=>{const{isReadonly:r,isChangingStyle:a}=e.getInstanceState();if(r||a)return!1;const s=e.getOnlySelectedShape();return!s||!e.getShapeHandles(s)?!1:s.id},[e]);return t?u.jsx(dH,{shapeId:t}):null}function dH({shapeId:e}){const t=N(),{Handles:r}=st(),a=H("zoomLevel",()=>t.getZoomLevel(),[t]),s=H("coarse pointer",()=>t.getInstanceState().isCoarsePointer,[t]),n=H("handles transform",()=>t.getShapePageTransform(e),[t,e]),o=H("handles",()=>{const i=t.getShapeHandles(e);if(!i)return null;const l=(s?t.options.coarseHandleRadius:t.options.handleRadius)/a*2;return i.filter(c=>c.type!=="virtual"||!i.some(d=>d!==c&&d.type==="vertex"&&v.Dist(c,d)<l)).sort(c=>c.type==="vertex"?1:-1)},[t,a,s,e]);return!r||!o||!n?null:u.jsx(r,{children:u.jsx("g",{transform:ae.toCssString(n),children:o.map(i=>u.jsx(uH,{shapeId:e,handle:i,zoom:a,isCoarse:s},i.id))})})}function uH({shapeId:e,handle:t,zoom:r,isCoarse:a}){const s=CU(e,t.id),{Handle:n}=st();return n?u.jsx("g",{"aria-label":"handle",transform:`translate(${t.x}, ${t.y})`,...s,children:u.jsx(n,{shapeId:e,handle:t,zoom:r,isCoarse:a})}):null}function pH(){const e=N(),t=H("rendering shapes",()=>e.getRenderingShapes(),[e]),r=H("dpr multiple",()=>hS(Math.floor(e.getInstanceState().devicePixelRatio*100)/100),[e]);return u.jsx(u.Fragment,{children:t.map(a=>u.jsxs(S.Fragment,{children:[u.jsx(xS,{...a,dprMultiple:r}),u.jsx(_H,{id:a.id})]},a.id+"_fragment"))})}function fH(){const e=N(),t=S.useRef(new Set);return On("reflow for culled shapes",()=>{const r=e.getCulledShapes();if(t.current.size===r.size&&[...r].every(s=>t.current.has(s)))return;t.current=r;const a=document.getElementsByClassName("tl-canvas");a.length!==0&&a[0].offsetHeight},[e]),null}function hH(){const e=N(),t=H("rendering shapes",()=>e.getRenderingShapes(),[e]),r=H("dpr multiple",()=>hS(Math.floor(e.getInstanceState().devicePixelRatio*100)/100),[e]);return u.jsxs(u.Fragment,{children:[t.map(a=>u.jsx(xS,{...a,dprMultiple:r},a.id+"_shape")),e.environment.isSafari&&u.jsx(fH,{})]})}function gH(){const e=N(),t=H("rendering shapes",()=>e.getRenderingShapes(),[e]),r=S.useRef(new Set),a=H("should display selected ids",()=>{const n=r.current,o=new Set;if(e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.getInstanceState().isChangingStyle){const i=e.getSelectedShapeIds();for(const l of i)o.add(l);if(e.isInAny("select.idle","select.editing_shape")){const l=e.getInstanceState();if(l.isHoveringCanvas&&!l.isCoarsePointer){const c=e.getHoveredShapeId();c&&o.add(c)}}}if(n.size!==o.size)return r.current=o,o;for(const i of o)if(!n.has(i))return r.current=o,o;return n},[e]),{ShapeIndicator:s}=st();return s?u.jsx(u.Fragment,{children:t.map(({id:n})=>u.jsx(s,{shapeId:n,hidden:!a.has(n)},n+"_indicator"))}):null}function mH(){const e=N(),{ShapeIndicator:t}=st(),r=H("hinting shape ids",()=>k_(e.getHintingShapeIds()),[e]);return!r.length||!t?null:u.jsx(u.Fragment,{children:r.map(a=>u.jsx(t,{className:"tl-user-indicator__hint",shapeId:a},a+"_hinting"))})}function bH(){return u.jsxs("g",{id:"cursor",children:[u.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[u.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),u.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),u.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[u.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),u.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),u.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[u.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),u.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function yH(){return u.jsx("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function _H({id:e}){const t=N(),[r,a]=S.useState(null),s=H("is in root",()=>{const n=t.getShape(e);return(n==null?void 0:n.parentId)===t.getCurrentPageId()},[t,e]);return S.useEffect(()=>{if(!s)return;let n=null;const o=Jo("shape to svg",async()=>{const i=Math.random();n=i;const c=t.isShapeOfType(e,"frame")?0:10;let d=t.getShapePageBounds(e);if(!d)return;d=d.clone().expandBy(c);const p=await t.getSvgString([e],{padding:c,background:t.getInstanceState().exportBackground});if(n!==i||!p)return;const f=`data:image/svg+xml;utf8,${encodeURIComponent(p.svg)}`;a({src:f,bounds:d})});return()=>{n=null,o()}},[t,e,s]),!s||!r?null:u.jsx("img",{src:r.src,width:r.bounds.width,height:r.bounds.height,style:{position:"absolute",top:0,left:0,transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}})}function wH(){const e=N(),t=H("selection rotation",()=>e.getSelectionRotation(),[e]),r=H("selection bounds",()=>e.getSelectionRotatedPageBounds(),[e]),{SelectionForeground:a}=st();return!r||!a?null:u.jsx(a,{bounds:r,rotation:t})}function vH(){const e=N(),t=H("selection rotation",()=>e.getSelectionRotation(),[e]),r=H("selection bounds",()=>e.getSelectionRotatedPageBounds(),[e]),{SelectionBackground:a}=st();return!r||!a?null:u.jsx(a,{bounds:r,rotation:t})}function xH(){const{OnTheCanvas:e}=st();return e?u.jsx(e,{}):null}function SH(){const e=N(),t=H("camera state",()=>e.getCameraState(),[e]);return u.jsx("div",{className:le("tl-hit-test-blocker",{"tl-hit-test-blocker__hidden":t==="idle"})})}function kH({className:e,zoom:t,point:r,color:a,viewport:s,opacity:n=1}){const o=S.useRef(null);return El(o,Pt(r.x,s.minX+5/t,s.maxX-5/t),Pt(r.y,s.minY+5/t,s.maxY-5/t),1/t,v.Angle(s.center,r)),u.jsxs("svg",{ref:o,className:le("tl-overlays__item",e),children:[u.jsx("use",{href:"#cursor_hint",color:a,strokeWidth:3,stroke:"var(--color-background)"}),u.jsx("use",{href:"#cursor_hint",color:a,opacity:n})]})}const E6=S.memo(function({className:t,zoom:r,point:a,color:s,name:n,chatMessage:o}){const i=S.useRef(null);return El(i,a==null?void 0:a.x,a==null?void 0:a.y,1/r),a?u.jsxs("div",{ref:i,className:le("tl-overlays__item",t),children:[u.jsx("svg",{className:"tl-cursor",children:u.jsx("use",{href:"#cursor",color:s})}),o?u.jsxs(u.Fragment,{children:[n&&u.jsx("div",{className:"tl-nametag-title",style:{color:s},children:n}),u.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:s},children:o})]}):n&&u.jsx("div",{className:"tl-nametag",style:{backgroundColor:s},children:n})]}):null});function FH({x:e,y:t,z:r,size:a}){const s=N(),{gridSteps:n}=s.options;return u.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("defs",{children:n.map(({min:o,mid:i,step:l},c)=>{const d=l*a*r,p=.5+e*r,f=.5+t*r,h=p>0?p%d:d+p%d,y=f>0?f%d:d+f%d,m=r<i?Xf(r,[o,i],[0,1]):1;return u.jsx("pattern",{id:`grid-${l}`,width:d,height:d,patternUnits:"userSpaceOnUse",children:u.jsx("circle",{className:"tl-grid-dot",cx:h,cy:y,r:1,opacity:m})},`grid-pattern-${c}`)})}),n.map(({step:o},i)=>u.jsx("rect",{width:"100%",height:"100%",fill:`url(#grid-${o})`},`grid-rect-${i}`))]})}function CH({handle:e,isCoarse:t,className:r,zoom:a}){const s=N(),n=(t?s.options.coarseHandleRadius:s.options.handleRadius)/a;if(e.type==="clone"){const i=3/Math.max(a,.35),l=`M0,${-i} A${i},${i} 0 0,1 0,${i}`,c=d$.indexOf(e.id);return u.jsxs("g",{className:le(`tl-handle tl-handle__${e.type}`,r),children:[u.jsx("circle",{className:"tl-handle__bg",r:n}),u.jsx("path",{className:"tl-handle__fg",d:l,transform:`rotate(${-90+90*c})`})]})}const o=(e.type==="create"&&t?3:4)/Math.max(a,.35);return u.jsxs("g",{className:le(`tl-handle tl-handle__${e.type}`,r),children:[u.jsx("circle",{className:"tl-handle__bg",r:n}),u.jsx("circle",{className:"tl-handle__fg",r:o})]})}const PH=({children:e})=>u.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:e}),IH=()=>{const{Spinner:e}=st();return u.jsx(l0,{children:e?u.jsx(e,{}):null})};function X_(e,t=!0){const r=e.length;if(r<2)return"";let a=e[0],s=e[1];if(r===2)return`M${Se(a)}L${Se(s)}`;let n="";for(let o=2,i=r-1;o<i;o++)a=e[o],s=e[o+1],n+=Pr(a,s);return t?`M${Pr(e[0],e[1])}Q${Se(e[1])}${Pr(e[1],e[2])}T${n}${Pr(e[r-1],e[0])}${Pr(e[0],e[1])}Z`:`M${Se(e[0])}Q${Se(e[1])}${Pr(e[1],e[2])}${e.length>3?"T":""}${n}L${Se(e[r-1])}`}function D6({scribble:e,zoom:t,color:r,opacity:a,className:s}){return e.points.length?u.jsx("svg",{className:s&&le("tl-overlays__item",s),children:u.jsx("path",{className:"tl-scribble",d:X_(e.points,!1),stroke:r??`var(--color-${e.color})`,fill:"none",strokeWidth:8/t,opacity:a??e.opacity})}):null}function SS({bounds:e,rotation:t}){const r=S.useRef(null);return El(r,e.x,e.y,1,t),S.useLayoutEffect(()=>{const a=r.current;a&&(a.style.width=R(Math.max(1,e.width))+"px",a.style.height=R(Math.max(1,e.height))+"px")},[e.width,e.height]),u.jsx("div",{ref:r,className:"tl-selection__bg",draggable:!1})}function AH({bounds:e,rotation:t}){const r=N(),a=S.useRef(null),s=H("only selected shape",()=>r.getOnlySelectedShape(),[r]),n=s?r.getShapeUtil(s).expandSelectionOutlinePx(s):0;return El(a,e==null?void 0:e.x,e==null?void 0:e.y,1,t,{x:-n,y:-n}),e=e.clone().expandBy(n).zeroFix(),u.jsx("svg",{ref:a,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:u.jsx("rect",{className:le("tl-selection__fg__outline"),width:R(e.width),height:R(e.height)})})}const jH=()=>u.jsx("div",{className:"tl-shape-error-boundary"}),EH=({shape:e,util:t})=>ag("Indicator: "+e.type,()=>t.indicator(t.editor.store.unsafeGetWithoutCapture(e.id))),DH=({editor:e,id:t})=>{const r=H("shape for indicator",()=>e.store.get(t),[e,t]),{ShapeIndicatorErrorFallback:a}=st();return!r||r.isLocked?null:u.jsx(hd,{fallback:a,onError:s=>e.annotateError(s,{origin:"react.shapeIndicator",willCrashApp:!1}),children:u.jsx(EH,{shape:r,util:e.getShapeUtil(r)},r.id)})},T6=S.memo(function({shapeId:t,className:r,color:a,hidden:s,opacity:n}){const o=N(),i=S.useRef(null);return On("indicator transform",()=>{const l=i.current;if(!l)return;const c=o.getShapePageTransform(t);c&&l.style.setProperty("transform",c.toCssString())},[o,t]),S.useLayoutEffect(()=>{const l=i.current;l&&l.style.setProperty("display",s?"none":"block")},[s]),u.jsx("svg",{ref:i,className:le("tl-overlays__item",r),children:u.jsx("g",{className:"tl-shape-indicator",stroke:a??"var(--color-selected)",opacity:n,children:u.jsx(DH,{editor:o,id:t})})})}),TH=()=>u.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"});function MH({points:e,zoom:t}){const r=2.5/t,a=e.reduce((f,h)=>Math.min(f,h.x),1/0),s=e.reduce((f,h)=>Math.max(f,h.x),-1/0),n=e.reduce((f,h)=>Math.min(f,h.y),1/0),o=e.reduce((f,h)=>Math.max(f,h.y),-1/0),i=e.some(f=>f.x===a&&f.y===n);let l,c,d,p;return i?(l=a,c=n,d=s,p=o):(l=a,c=o,d=s,p=n),u.jsxs("g",{className:"tl-snap-indicator",stroke:"lime",children:[u.jsx("line",{x1:l,y1:c,x2:d,y2:p}),e.map((f,h)=>u.jsx("g",{transform:`translate(${f.x},${f.y})`,children:u.jsx("path",{className:"tl-snap-point",d:`M ${-r},${-r} L ${r},${r} M ${-r},${r} L ${r},${-r}`})},h))]})}function BH({gaps:e,direction:t,zoom:r}){const a=3.5/r;let s=[-1/0,1/0],n=null;const o=t==="horizontal";for(const l of e){if(n=Da(s[0],s[1],o?l.startEdge[0].y:l.startEdge[0].x,o?l.startEdge[1].y:l.startEdge[1].x),n)s=n;else continue;if(n=Da(s[0],s[1],o?l.endEdge[0].y:l.endEdge[0].x,o?l.endEdge[1].y:l.endEdge[1].x),n)s=n;else continue}if(s===null)return null;const i=(s[0]+s[1])/2;return u.jsx("g",{className:"tl-snap-indicator",stroke:"cyan",children:e.map(({startEdge:l,endEdge:c},d)=>u.jsx(S.Fragment,{children:o?u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:l[0].x,y1:i-2*a,x2:l[1].x,y2:i+2*a}),u.jsx("line",{x1:c[0].x,y1:i-2*a,x2:c[1].x,y2:i+2*a}),u.jsx("line",{x1:l[0].x,y1:i,x2:c[0].x,y2:i}),u.jsx("line",{x1:(l[0].x+c[0].x)/2,y1:i-a,x2:(l[0].x+c[0].x)/2,y2:i+a})]}):u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:i-2*a,y1:l[0].y,x2:i+2*a,y2:l[1].y}),u.jsx("line",{x1:i-2*a,y1:c[0].y,x2:i+2*a,y2:c[1].y}),u.jsx("line",{x1:i,y1:l[0].y,x2:i,y2:c[0].y}),u.jsx("line",{x1:i-a,y1:(l[0].y+c[0].y)/2,x2:i+a,y2:(l[0].y+c[0].y)/2})]})},d))})}function LH({className:e,line:t,zoom:r}){return u.jsx("svg",{className:le("tl-overlays__item",e),children:t.type==="points"?u.jsx(MH,{...t,zoom:r}):t.type==="gaps"?u.jsx(BH,{...t,zoom:r}):null})}function RH(){return u.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",children:u.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[u.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),u.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:u.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const OH=()=>null;function kS(e,t){const r=S.useRef(e);return t(e,r.current)?r.current:(r.current=e,e)}function $c(e){return kS(e,Nz)}function Z_(e){return kS(e,$v)}const FS=S.createContext(null);function zH({overrides:e={},children:t}){const r=Z_(e);return u.jsx(FS.Provider,{value:S.useMemo(()=>({Background:a$,SvgDefs:OH,Brush:Zm,ZoomBrush:Zm,CollaboratorBrush:Zm,Cursor:E6,CollaboratorCursor:E6,CollaboratorHint:kH,CollaboratorShapeIndicator:T6,Grid:FH,Scribble:D6,SnapIndicator:LH,Handles:PH,Handle:CH,CollaboratorScribble:D6,ErrorFallback:PS,ShapeErrorFallback:jH,ShapeIndicatorErrorFallback:TH,Spinner:RH,SelectionBackground:SS,SelectionForeground:AH,ShapeIndicator:T6,OnTheCanvas:null,InFrontOfTheCanvas:null,Canvas:aH,LoadingScreen:IH,...r}),[r]),children:t})}function st(){const e=S.useContext(FS);if(!e)throw new Error("useEditorComponents must be used inside of <EditorComponentsProvider />");return e}const J_={openWindow:(e,t)=>window.open(e,t,"noopener noreferrer"),refreshPage:()=>window.location.reload(),hardReset:async()=>{var e;return await((e=window.__tldraw__hardReset)==null?void 0:e.call(window))}};function CS(){J_.hardReset()}function NH(){J_.refreshPage()}const qH="https://github.com/tldraw/tldraw/issues/new",PS=({error:e,editor:t})=>{const r=S.useRef(null),[a,s]=S.useState(!1),[n,o]=S.useState(!1),[i,l]=S.useState(!1);let c=null;try{c=st().Canvas??null}catch{}const d=e instanceof Error?e.message:String(e),p=e instanceof Error?e.stack:null,f=H("isDarkMode",()=>{try{if(t)return t.user.getIsDarkMode()}catch{}return null},[t]),[h,y]=S.useState(null);S.useLayoutEffect(()=>{var k;f!==null&&y(f);let x=(k=r.current)==null?void 0:k.parentElement,C=!1;for(;x;){if(x.classList.contains("tl-theme__dark")||x.classList.contains("tl-theme__light")){C=!0;break}x=x.parentElement}if(C){y(null);return}y(window.matchMedia("(prefers-color-scheme: dark)").matches)},[f]),S.useEffect(()=>{if(n){const x=t==null?void 0:t.timers.setTimeout(()=>{o(!1)},2e3);return()=>clearTimeout(x)}},[n,t]);const m=()=>{const x=document.createElement("textarea");x.value=p??d,document.body.appendChild(x),x.select(),document.execCommand("copy"),x.remove(),o(!0)},w=()=>{NH()},b=async()=>{CS()},_=new URL(qH);return _.searchParams.set("title",d),_.searchParams.set("labels","bug"),_.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${p??d}
\`\`\`

My browser: ${navigator.userAgent}`),u.jsxs("div",{ref:r,className:le("tl-container tl-error-boundary",h===null?"":h?"tl-theme__dark":"tl-theme__light"),children:[u.jsx("div",{className:"tl-error-boundary__overlay"}),t&&u.jsx(Zx,{onError:Yf,fallback:()=>null,children:u.jsx(ig.Provider,{value:t,children:u.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:c?u.jsx(c,{}):null})})}),u.jsx("div",{className:le("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":a&&!i}),children:i?u.jsxs(u.Fragment,{children:[u.jsx("h2",{children:"Are you sure?"}),u.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),u.jsxs("div",{className:"tl-error-boundary__content__actions",children:[u.jsx("button",{onClick:()=>l(!1),children:"Cancel"}),u.jsx("button",{className:"tl-error-boundary__reset",onClick:b,children:"Reset data"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("h2",{children:"Something's gone wrong."}),u.jsxs("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",u.jsx("a",{href:_.toString(),children:"create a GitHub issue"})," or"," ",u.jsx("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),a&&u.jsxs(u.Fragment,{children:["Message:",u.jsx("h4",{children:u.jsx("code",{children:d})}),"Stack trace:",u.jsxs("div",{className:"tl-error-boundary__content__error",children:[u.jsx("pre",{children:u.jsx("code",{children:p??d})}),u.jsx("button",{onClick:m,children:n?"Copied!":"Copy"})]})]}),u.jsxs("div",{className:"tl-error-boundary__content__actions",children:[u.jsx("button",{onClick:()=>s(!a),children:a?"Hide details":"Show details"}),u.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[u.jsx("button",{className:"tl-error-boundary__reset",onClick:()=>l(!0),children:"Reset data"}),u.jsx("button",{className:"tl-error-boundary__refresh",onClick:w,children:"Refresh Page"})]})]})]})})]})};function rt(){return zd()}const IS="TLDRAW_USER_DATA_v3",AS=me({id:pe,name:pe.nullable().optional(),locale:pe.nullable().optional(),color:pe.nullable().optional(),isDarkMode:ye.nullable().optional(),animationSpeed:ue.nullable().optional(),edgeScrollSpeed:ue.nullable().optional(),isSnapMode:ye.nullable().optional(),isWrapMode:ye.nullable().optional()}),bi={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4,AddExcalidrawSelectMode:5},Q_=Math.max(...Object.values(bi));function $H(e){e.version<bi.AddAnimationSpeed&&(e.user.animationSpeed=1),e.version<bi.AddIsSnapMode&&(e.user.isSnapMode=!1),e.version<bi.MakeFieldsNullable,e.version<bi.AddEdgeScrollSpeed&&(e.user.edgeScrollSpeed=1),e.version<bi.AddExcalidrawSelectMode&&(e.user.isWrapMode=!1),e.version=Q_}const M6=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function UH(){return M6[Math.floor(Math.random()*M6.length)]}function WH(){var e,t;return typeof window>"u"?!1:((t=(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)"))==null?void 0:t.matches)??!1}function HH(){var e,t;return typeof window>"u"?!1:((t=(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-reduced-motion: reduce)"))==null?void 0:t.matches)??!1}const mo=Object.freeze({name:"New User",locale:Jq(),color:UH(),isDarkMode:!1,edgeScrollSpeed:1,animationSpeed:HH()?0:1,isSnapMode:!1,isWrapMode:!1});function s2(){return{id:rt()}}function jS(e){if(e===null||typeof e!="object"||!("version"in e)||!("user"in e)||typeof e.version!="number")return s2();const t=mt(e);$H(t);try{return AS.validate(t.user)}catch{return s2()}}function GH(){const e=JSON.parse(P_(IS)||"null")??null;return jS(e)}const md=rr("globalUserData",null);function KH(){I_(IS,JSON.stringify({version:Q_,user:md.get()}))}function VH(e){AS.validate(e),md.set(e),KH(),XH()}const YH=typeof process<"u"&&!1,Ji=typeof BroadcastChannel<"u"&&!YH?new BroadcastChannel("tldraw-user-sync"):null;Ji==null||Ji.addEventListener("message",e=>{const t=e.data;(t==null?void 0:t.type)===DS&&(t==null?void 0:t.origin)!==ES()&&md.set(jS(t.data))});let n2=null;function ES(){return n2===null&&(n2=rt()),n2}const DS="tldraw-user-preferences-change";function XH(){Ji==null||Ji.postMessage({type:DS,origin:ES(),data:{user:TS(),version:Q_}})}function TS(){let e=md.get();return e||(e=GH(),md.set(e)),e}function MS(e={}){return{derivePresenceState:e.derivePresenceState??(()=>K("presence",()=>null)),userPreferences:e.userPreferences??K("userPreferences",()=>TS()),setUserPreferences:e.setUserPreferences??VH}}var BS={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function n(l,c,d,p,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new s(d,p||l,f),y=r?r+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],h]:l._events[y].push(h):(l._events[y]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new a:delete l._events[c]}function i(){this._events=new a,this._eventsCount=0}i.prototype.eventNames=function(){var c=[],d,p;if(this._eventsCount===0)return c;for(p in d=this._events)t.call(d,p)&&c.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},i.prototype.listeners=function(c){var d=r?r+c:c,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,h=p.length,y=new Array(h);f<h;f++)y[f]=p[f].fn;return y},i.prototype.listenerCount=function(c){var d=r?r+c:c,p=this._events[d];return p?p.fn?1:p.length:0},i.prototype.emit=function(c,d,p,f,h,y){var m=r?r+c:c;if(!this._events[m])return!1;var w=this._events[m],b=arguments.length,_,x;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),b){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,p),!0;case 4:return w.fn.call(w.context,d,p,f),!0;case 5:return w.fn.call(w.context,d,p,f,h),!0;case 6:return w.fn.call(w.context,d,p,f,h,y),!0}for(x=1,_=new Array(b-1);x<b;x++)_[x-1]=arguments[x];w.fn.apply(w.context,_)}else{var C=w.length,k;for(x=0;x<C;x++)switch(w[x].once&&this.removeListener(c,w[x].fn,void 0,!0),b){case 1:w[x].fn.call(w[x].context);break;case 2:w[x].fn.call(w[x].context,d);break;case 3:w[x].fn.call(w[x].context,d,p);break;case 4:w[x].fn.call(w[x].context,d,p,f);break;default:if(!_)for(k=1,_=new Array(b-1);k<b;k++)_[k-1]=arguments[k];w[x].fn.apply(w[x].context,_)}}return!0},i.prototype.on=function(c,d,p){return n(this,c,d,p,!1)},i.prototype.once=function(c,d,p){return n(this,c,d,p,!0)},i.prototype.removeListener=function(c,d,p,f){var h=r?r+c:c;if(!this._events[h])return this;if(!d)return o(this,h),this;var y=this._events[h];if(y.fn)y.fn===d&&(!f||y.once)&&(!p||y.context===p)&&o(this,h);else{for(var m=0,w=[],b=y.length;m<b;m++)(y[m].fn!==d||f&&!y[m].once||p&&y[m].context!==p)&&w.push(y[m]);w.length?this._events[h]=w.length===1?w[0]:w:o(this,h)}return this},i.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=r,i.EventEmitter=i,e.exports=i})(BS);var ZH=BS.exports;const JH=Yn(ZH),Qi="TLDRAW_TAB_ID_v2",ps=globalThis.window;function QH(){return ps?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(ps.navigator.platform)||ps.navigator.userAgent.includes("Mac")&&"ontouchend"in document:!1}const yh=ps?ps[Qi]??Kv(Qi)??"TLDRAW_INSTANCE_STATE_V1_"+rt():"<error>";ps&&(ps[Qi]=yh,QH()?A_(Qi,yh):Vv(Qi));ps==null||ps.addEventListener("beforeunload",()=>{A_(Qi,yh)});const LS={Initial:0},dg=Math.max(...Object.values(LS));function eG(e){e.version<LS.Initial,e.version=dg}const RS=me({version:ue,currentPageId:pd,isFocusMode:ye,exportBackground:ye,isDebugMode:ye,isToolLocked:ye,isGridMode:ye,pageStates:Rt(me({pageId:pd,camera:me({x:ue,y:ue,z:ue}),selectedShapeIds:Rt(ha),focusedGroupId:ha.nullable()}))});function tG(e){if(!e||typeof e!="object")return console.warn("Invalid instance state"),null;if(!("version"in e)||typeof e.version!="number")return console.warn("No version in instance state"),null;e.version!==dg&&(e=mt(e),eG(e));try{return RS.validate(e)}catch(t){return console.warn(t),null}}function OS(e){const t=e.query.ids("page");return K("sessionStateSnapshot",()=>{const r=e.get(ur);if(!r)return null;const a=[...t.get()];return{version:dg,currentPageId:r.currentPageId,exportBackground:r.exportBackground,isFocusMode:r.isFocusMode,isDebugMode:r.isDebugMode,isToolLocked:r.isToolLocked,isGridMode:r.isGridMode,pageStates:a.map(s=>{const n=e.get(La.createId(s)),o=e.get(ns.createId(s));return{pageId:s,camera:{x:(o==null?void 0:o.x)??0,y:(o==null?void 0:o.y)??0,z:(o==null?void 0:o.z)??1},selectedShapeIds:(n==null?void 0:n.selectedShapeIds)??[],focusedGroupId:(n==null?void 0:n.focusedGroupId)??null}})}})}function zS(e,t){const r=tG(t);if(!r)return;const a=e.schema.types.instance.create({id:ur,...kx(e.get(ur)),currentPageId:r.currentPageId,isDebugMode:r.isDebugMode,isFocusMode:r.isFocusMode,isToolLocked:r.isToolLocked,isGridMode:r.isGridMode,exportBackground:r.exportBackground}),s=e.allRecords().filter(n=>n.typeName==="instance_page_state"||n.typeName==="camera");e.atomic(()=>{e.remove(s.map(n=>n.id));for(const n of r.pageStates)e.put([ns.create({id:ns.createId(n.pageId),x:n.camera.x,y:n.camera.y,z:n.camera.z}),La.create({id:La.createId(n.pageId),pageId:n.pageId,selectedShapeIds:n.selectedShapeIds,focusedGroupId:n.focusedGroupId})]);e.put([a]),e.ensureStoreIsUsable()})}function rG(e){var s;const t=[];for(const n of Object.values(e))(s=n.typeName)!=null&&s.match(/^(instance.*|pointer|camera)$/)&&t.push(n);const r=t.filter(n=>n.typeName==="instance"&&n.id!==ur)[0];if(!r)return null;const a={version:dg,currentPageId:r.currentPageId,exportBackground:!!r.exportBackground,isFocusMode:!!r.isFocusMode,isDebugMode:!!r.isDebugMode,isToolLocked:!!r.isToolLocked,isGridMode:!1,pageStates:t.filter(n=>n.typeName==="instance_page_state"&&n.instanceId===r.id).map(n=>{const o=e[n.cameraId]??{x:0,y:0,z:1};return{pageId:n.pageId,camera:{x:o.x,y:o.y,z:o.z},selectedShapeIds:n.selectedShapeIds,focusedGroupId:n.focusedGroupId}})};try{return RS.validate(a),a}catch{return null}}function NS(e,t){let r={};if("store"in t){const s=e.schema.migrateStoreSnapshot(t);if(s.type!=="success")throw new Error("Failed to migrate store snapshot: "+s.reason);r.document={schema:e.schema.serialize(),store:zc(s.value,(n,{typeName:o})=>e.scopedTypes.document.has(o))}}else r=t;const a=kx(e.get(ur));e.atomic(()=>{r.document&&e.loadStoreSnapshot(r.document),a&&e.update(ur,s=>({...s,...a})),r.session&&zS(e,r.session)})}const aG=new $n;function sG(e){const r=aG.get(e,OS).get();if(!r)throw new Error("Session state is not ready yet");return{document:e.getStoreSnapshot(),session:r}}function qS(e){const t=[],r=new Set;for(const a of e){if(r.has(a.type))throw new Error(`Binding type "${a.type}" is defined more than once`);t.push(a),r.add(a.type)}return t}function Hn({children:e,className:t="",...r}){return u.jsx("svg",{...r,className:le("tl-svg-container",t),children:e})}function e0(e,t,r,a){const s=e.x-r.x,n=e.y-r.y,o=a.x-r.x,i=a.y-r.y,l=t.x-e.x,c=t.y-e.y,d=o*n-i*s,p=l*n-c*s,f=i*l-o*c;if(d===0||p===0||f===0)return null;if(f!==0){const h=d/f,y=p/f;if(0<=h&&h<=1&&0<=y&&y<=1)return v.AddXY(e,h*l,h*c)}return null}function Gd(e,t,r,a){const s=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),n=2*((t.x-e.x)*(e.x-r.x)+(t.y-e.y)*(e.y-r.y)),o=r.x*r.x+r.y*r.y+e.x*e.x+e.y*e.y-2*(r.x*e.x+r.y*e.y)-a*a,i=n*n-4*s*o;if(i<0||i===0)return null;const l=Math.sqrt(i),c=(-n+l)/(2*s),d=(-n-l)/(2*s);if((c<0||c>1)&&(d<0||d>1))return null;const p=[];return 0<=c&&c<=1&&p.push(v.Lrp(e,t,c)),0<=d&&d<=1&&p.push(v.Lrp(e,t,d)),p.length===0?null:p}function nG(e,t,r){const a=[];let s;for(let n=0,o=r.length-1;n<o;n++)s=e0(e,t,r[n],r[n+1]),s&&a.push(s);return a.length===0?null:a}function t0(e,t,r){const a=[];let s;for(let n=1,o=r.length;n<o+1;n++)s=e0(e,t,r[n-1],r[n%r.length]),s&&a.push(s);return a.length===0?null:a}function oG(e,t,r,a){let s=r.x-e.x,n=r.y-e.y;const o=Math.sqrt(s*s+n*n),i=(o*o-a*a+t*t)/(2*o),l=Math.sqrt(t*t-i*i);return s/=o,n/=o,[new v(e.x+s*i-n*l,e.y+n*i+s*l),new v(e.x+s*i+n*l,e.y+n*i-s*l)]}function Ib(e,t,r){const a=[];let s,n,o;for(let i=0,l=r.length;i<l;i++)s=r[i],n=r[(i+1)%r.length],o=Gd(s,n,e,t),o&&a.push(...o);return a.length===0?null:a}function B6(e,t,r){const a=[];let s,n,o;for(let i=1,l=r.length;i<l;i++)s=r[i-1],n=r[i],o=Gd(s,n,e,t),o&&a.push(...o);return a.length===0?null:a}function Wu(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function r0(e,t,r,a){return Wu(e,r,a)!==Wu(t,r,a)&&Wu(e,t,r)!==Wu(e,t,a)}function L6(e,t){const r=new Map;let a,s,n,o;for(let i=0,l=e.length;i<l;i++)if(a=e[i],ta(a,t)){const c=o2(a);r.has(c)||r.set(c,a)}for(let i=0,l=t.length;i<l;i++)if(a=t[i],ta(a,e)){const c=o2(a);r.has(c)||r.set(c,a)}for(let i=0,l=e.length;i<l;i++){a=e[i],s=e[(i+1)%e.length];for(let c=0,d=t.length;c<d;c++){n=t[c],o=t[(c+1)%t.length];const p=e0(a,s,n,o);if(p!==null){const f=o2(p);r.has(f)||r.set(f,p)}}}return r.size===0?null:iG([...r.values()])}function o2(e){return`${e.x},${e.y}`}function iG(e){const t=v.Average(e);return e.sort((r,a)=>v.Angle(t,r)-v.Angle(t,a))}function _h(e,t){let r,a,s,n;for(let o=0,i=e.length;o<i;o++){r=e[o],a=e[(o+1)%i];for(let l=0,c=t.length;l<c;l++)if(s=t[l],n=t[(l+1)%c],r0(r,a,s,n))return!0}return!1}function lG(e,t){let r,a,s,n;for(let o=0,i=e.length;o<i;o++){r=e[o],a=e[(o+1)%i];for(let l=1,c=t.length;l<c;l++)if(s=t[l-1],n=t[l],r0(r,a,s,n))return!0}return!1}class Rs extends ro{constructor(r){super({...r,isClosed:!1,isFilled:!1});g(this,"start");g(this,"end");g(this,"d");g(this,"u");g(this,"ul");const{start:a,end:s}=r;this.start=a,this.end=s,this.d=a.clone().sub(s),this.u=this.d.clone().uni(),this.ul=this.u.len()}getLength(){return this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(r){const{start:a,end:s,u:n,ul:o}=this;if(o===0)return a;const i=v.Sub(r,a).dpr(n)/o,l=a.x+n.x*i;if(l<Math.min(a.x,s.x))return a.x<s.x?a:s;if(l>Math.max(a.x,s.x))return a.x>s.x?a:s;const c=a.y+n.y*i;return c<Math.min(a.y,s.y)?a.y<s.y?a:s:c>Math.max(a.y,s.y)?a.y>s.y?a:s:new v(l,c)}hitTestLineSegment(r,a,s=0){return r0(r,a,this.start,this.end)||this.distanceToLineSegment(r,a)<=s}getSvgPathData(r=!0){const{start:a,end:s}=this;return`${r?`M${a.toFixed()}`:""} L${s.toFixed()}`}}class Ml extends ro{constructor(r){super({isClosed:!1,isFilled:!1,...r});g(this,"points");g(this,"_segments");const{points:a}=r;this.points=a}get segments(){if(!this._segments){this._segments=[];const{vertices:r}=this;for(let a=0,s=r.length-1;a<s;a++){const n=r[a],o=r[a+1];this._segments.push(new Rs({start:n,end:o}))}this.isClosed&&this._segments.push(new Rs({start:r[r.length-1],end:r[0]}))}return this._segments}getLength(){return this.segments.reduce((r,a)=>r+a.length,0)}getVertices(){return this.points}nearestPoint(r){const{segments:a}=this;let s=this.points[0],n=1/0,o,i;for(let l=0;l<a.length;l++)o=a[l].nearestPoint(r),i=v.Dist2(o,r),i<n&&(s=o,n=i);if(!s)throw Error("nearest point not found");return s}hitTestLineSegment(r,a,s=0){const{segments:n}=this;for(let o=0,i=n.length;o<i;o++)if(n[o].hitTestLineSegment(r,a,s))return!0;return!1}getSvgPathData(){const{vertices:r}=this;return r.length<2?"":r.reduce((a,s,n)=>n===0?`M ${s.x} ${s.y}`:`${a} L ${s.x} ${s.y}`,"")}}class _t extends Ml{constructor(t){super({...t}),this.isClosed=!0}}class Ys extends _t{constructor(r){const{x:a=0,y:s=0,width:n,height:o}=r;super({...r,points:[new v(a,s),new v(a+n,s),new v(a+n,s+o),new v(a,s+o)]});g(this,"x");g(this,"y");g(this,"w");g(this,"h");this.x=a,this.y=s,this.w=n,this.h=o}getBounds(){return new Z(this.x,this.y,this.w,this.h)}getSvgPathData(){const{x:r,y:a,w:s,h:n}=this;return`M${r},${a} h${s} v${n} h-${s}z`}}class za{constructor(t){g(this,"canSnap",()=>!0);g(this,"canScroll",()=>!1);g(this,"canEdit",()=>!1);g(this,"canResize",()=>!0);g(this,"canEditInReadOnly",()=>!1);g(this,"canCrop",()=>!1);g(this,"canBeLaidOut",()=>!0);g(this,"hideResizeHandles",()=>!1);g(this,"hideRotateHandle",()=>!1);g(this,"hideSelectionBoundsBg",()=>!1);g(this,"hideSelectionBoundsFg",()=>!1);g(this,"isAspectRatioLocked",()=>!1);g(this,"onBeforeCreate");g(this,"onBeforeUpdate");g(this,"onDragShapesOver");g(this,"onDragShapesOut");g(this,"onDropShapesOver");g(this,"onResizeStart");g(this,"onResize");g(this,"onResizeEnd");g(this,"onTranslateStart");g(this,"onTranslate");g(this,"onTranslateEnd");g(this,"onHandleDrag");g(this,"onRotateStart");g(this,"onRotate");g(this,"onRotateEnd");g(this,"onBindingChange");g(this,"onChildrenChange");g(this,"onDoubleClickHandle");g(this,"onDoubleClickEdge");g(this,"onDoubleClick");g(this,"onClick");g(this,"onEditEnd");this.editor=t}canBind(t){return!0}providesBackgroundForChildren(t){return!1}canReceiveNewChildrenOfType(t,r){return!1}canDropShapes(t,r){return!1}expandSelectionOutlinePx(t){return 0}getCanvasSvgDefs(){return[]}getBoundsSnapGeometry(t){return{}}getHandleSnapGeometry(t){return{}}}g(za,"props"),g(za,"migrations"),g(za,"type");function cG(e,t,r={}){const{closed:a=!1,snap:s=1,start:n="outset",end:o="outset",lengthRatio:i=2,style:l="dashed"}=r;let c=0,d=0,p=1,f=0,h=0;switch(l){case"dashed":{p=1,c=Math.min(t*i,e/4);break}case"dotted":{p=100,c=t/p;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return a||(n==="outset"?(e+=c/2,h+=c/2):n==="skip"&&(e-=c,h-=c),o==="outset"?e+=c/2:o==="skip"&&(e-=c)),d=Math.floor(e/c/(2*p)),d-=d%s,d<3&&l==="dashed"?e/t<5?(c=e,d=1,f=0):(c=e*.333,f=e*.333):(d=Math.max(d,3),c=e/d/(2*p),a?(h=c/2,f=(e-d*c)/d):f=(e-d*c)/Math.max(1,d-1)),{strokeDasharray:[c,f].join(" "),strokeDashoffset:h.toString()}}function R6({bounds:e,className:t}){const r=N(),a=H("zoom level",()=>r.getZoomLevel(),[r]);return u.jsx("g",{className:t,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:e.sides.map((s,n)=>{const{strokeDasharray:o,strokeDashoffset:i}=cG(s[0].dist(s[1]),1/a,{style:"dashed",lengthRatio:4});return u.jsx("line",{x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y,strokeDasharray:o,strokeDashoffset:i},n)})})}class Rp extends za{constructor(){super(...arguments);g(this,"hideSelectionBoundsFg",()=>!0);g(this,"canBind",()=>!1);g(this,"onChildrenChange",r=>{const a=this.editor.getSortedChildIdsForParent(r.id);if(a.length===0){this.editor.getCurrentPageState().focusedGroupId===r.id&&this.editor.popFocusedGroupId(),this.editor.deleteShapes([r.id]);return}else if(a.length===1){this.editor.getCurrentPageState().focusedGroupId===r.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(a,r.parentId),this.editor.deleteShapes([r.id]);return}})}getDefaultProps(){return{}}getGeometry(r){const a=this.editor.getSortedChildIdsForParent(r.id);return a.length===0?new Ys({width:1,height:1,isFilled:!1}):new $a({children:a.map(s=>{const n=this.editor.getShape(s),o=this.editor.getShapeGeometry(s),i=this.editor.getShapeLocalTransform(n).applyToPoints(o.vertices);return o.isClosed?new _t({points:i,isFilled:!0}):new Ml({points:i})})})}component(r){const a=this.editor.getErasingShapeIds().includes(r.id),{hintingShapeIds:s}=this.editor.getCurrentPageState(),n=s.length>0&&s.some(l=>l!==r.id&&this.editor.isShapeOfType(this.editor.getShape(l),"group")),o=this.editor.getCurrentPageState().focusedGroupId!==r.id;if(!a&&(o||n))return null;const i=this.editor.getShapeGeometry(r).bounds;return u.jsx(Hn,{id:r.id,children:u.jsx(R6,{className:"tl-group",bounds:i})})}indicator(r){const a=this.editor.getShapeGeometry(r).bounds;return u.jsx(R6,{className:"",bounds:a})}}g(Rp,"type","group"),g(Rp,"props",Lx),g(Rp,"migrations",Rx);const $S=[Rp],dG=new Set($S.map(e=>e.type));function US(e){const t=[...$S],r=new Set;for(const a of e){if(dG.has(a.type))throw new Error(`Shape type "${a.type}" is a core shapes type and cannot be overridden`);if(r.has(a.type))throw new Error(`Shape type "${a.type}" is defined more than once`);t.push(a),r.add(a.type)}return t}const uG={maxShapesPerPage:4e3,maxPages:40,animationMediumMs:320,followChaseViewportSnap:2,doubleClickDurationMs:450,multiClickDurationMs:200,coarseDragDistanceSquared:36,dragDistanceSquared:16,defaultSvgPadding:32,cameraSlideFriction:.09,maxPointsPerDrawShape:500,gridSteps:[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],collaboratorInactiveTimeoutMs:6e4,collaboratorIdleTimeoutMs:3e3,collaboratorCheckIntervalMs:1200,cameraMovingTimeoutMs:64,hitTestMargin:8,edgeScrollSpeed:20,edgeScrollDistance:8,coarsePointerWidth:12,coarseHandleRadius:20,handleRadius:12,longPressDurationMs:500,textShadowLod:.35,adjacentShapeMargin:10};function O6(e,t){if(!t)return!1;switch(e.type){case"mixed":return t.type==="mixed";case"shared":return t.type==="shared"&&e.value===t.value;default:throw tr(e)}}class pG{constructor(t){g(this,"map");this.map=new Map(t)}get(t){return this.map.get(t)}getAsKnownValue(t){const r=this.get(t);if(r&&r.type!=="mixed")return r.value}get size(){return this.map.size}equals(t){if(this.size!==t.size)return!1;const r=new Set;for(const[a,s]of this){if(!O6(s,t.get(a)))return!1;r.add(a)}for(const[a,s]of t)if(!r.has(a)&&!O6(s,this.get(a)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class Ab extends pG{set(t,r){this.map.set(t,r)}applyValue(t,r){const a=this.get(t);if(!a){this.set(t,{type:"shared",value:r});return}switch(a.type){case"mixed":return;case"shared":a.value!==r&&this.set(t,{type:"mixed"});return;default:tr(a,"type")}}}function fG(e,t,r){return fetch(e).then(function(a){return a.arrayBuffer()}).then(function(a){return new File([a],t,{type:r})})}function hG(e,t){var s;let r=e;const a=new Set(t);for(;a.has(r);)r=(s=/^.*(\d+)$/.exec(r))!=null&&s[1]?r.replace(/(\d+)(?=\D?)$/,n=>(+n+1).toString()):`${r} 1`;return r}function Hu(e,t,r){if(r.length===0)return[];const a=new Map;for(const n of ge(r.map(o=>e.getShape(o)))){const{parentId:o}=n;a.has(o)||a.set(o,{children:ge(e.getSortedChildIdsForParent(o).map(i=>e.getShape(i))),moving:new Set}),a.get(o).moving.add(n)}const s=[];switch(t){case"toBack":{a.forEach(({moving:n,children:o})=>gG(n,o,s));break}case"toFront":{a.forEach(({moving:n,children:o})=>mG(n,o,s));break}case"forward":{a.forEach(({moving:n,children:o})=>bG(n,o,s));break}case"backward":{a.forEach(({moving:n,children:o})=>yG(n,o,s));break}}return s}function gG(e,t,r){const a=t.length;if(e.size===a)return;let s,n;for(let o=0;o<a;o++){const i=t[o];if(e.has(i))s=i.index,e.delete(i);else{n=i.index;break}}if(e.size!==0){const o=ul(s,n,e.size);r.push(...Array.from(e.values()).sort(Qt).map((i,l)=>({...i,index:o[l]})))}}function mG(e,t,r){const a=t.length;if(e.size===a)return;let s,n;for(let o=a-1;o>-1;o--){const i=t[o];if(e.has(i))n=i.index,e.delete(i);else{s=i.index;break}}if(e.size!==0){const o=ul(s,n,e.size);r.push(...Array.from(e.values()).sort(Qt).map((i,l)=>({...i,index:o[l]})))}}function bG(e,t,r){var n;const a=t.length;if(e.size===a)return;let s={name:"skipping"};for(let o=0;o<a;o++){const i=e.has(t[o]);switch(s.name){case"skipping":{if(!i)continue;s={name:"selecting",selectIndex:o};break}case"selecting":{if(i)continue;const{selectIndex:l}=s;ul(t[o].index,(n=t[o+1])==null?void 0:n.index,o-l).forEach((c,d)=>r.push({...t[l+d],index:c})),s={name:"skipping"};break}}}}function yG(e,t,r){var n;const a=t.length;if(e.size===a)return;let s={name:"skipping"};for(let o=a-1;o>-1;o--){const i=e.has(t[o]);switch(s.name){case"skipping":{if(!i)continue;s={name:"selecting",selectIndex:o};break}case"selecting":{if(i)continue;ul((n=t[o-1])==null?void 0:n.index,t[o].index,s.selectIndex-o).forEach((l,c)=>{r.push({...t[o+c+1],index:l})}),s={name:"skipping"};break}}}}function WS({editor:e}){const t=e.getSelectedShapes(),r=e.getSelectionRotation(),a=e.getSelectionRotatedPageBounds(),{inputs:{originPagePoint:s}}=e;if(!a)return null;const n=a.center.clone().rotWith(a.point,r);return{selectionPageCenter:n,initialCursorAngle:n.angle(s),initialSelectionRotation:r,shapeSnapshots:t.map(o=>({shape:mt(o),initialPagePoint:e.getShapePageTransform(o.id).point()}))}}function Op({delta:e,editor:t,snapshot:r,stage:a}){const{selectionPageCenter:s,shapeSnapshots:n}=r;t.updateShapes(n.map(({shape:i,initialPagePoint:l})=>{const c=Kr(i.parentId)?t.getShapePageTransform(i.parentId):ae.Identity(),d=v.RotWith(l,s,e),p=ae.applyToPoint(ae.Inverse(c),d),f=zn(i.rotation+e);return{id:i.id,type:i.type,x:p.x,y:p.y,rotation:f}}));const o=[];n.forEach(({shape:i})=>{var p,f,h;const l=t.getShape(i.id);if(!l)return;const c=t.getShapeUtil(i);if(a==="start"||a==="one-off"){const y=(p=c.onRotateStart)==null?void 0:p.call(c,i);y&&o.push(y)}const d=(f=c.onRotate)==null?void 0:f.call(c,i,l);if(d&&o.push(d),a==="end"||a==="one-off"){const y=(h=c.onRotateEnd)==null?void 0:h.call(c,i,l);y&&o.push(y)}}),o.length>0&&t.updateShapes(o)}const _G=e=>{const{store:t}=e,r=t.query.filterHistory("binding"),a=t.query.records("binding");function s(){const n=a.get(),o=new Map;for(const i of n){const{fromId:l,toId:c}=i,d=o.get(l);d?d.push(i):o.set(l,[i]);const p=o.get(c);p?p.push(i):o.set(c,[i])}return o}return K("arrowBindingsIndex",(n,o)=>{if(ds(n))return s();const i=n,l=r.getDiffSince(o);if(l===Rr)return s();let c;function d(h){c??(c=new Map(i));const y=c.get(h.fromId),m=y==null?void 0:y.filter(_=>_.id!==h.id);m!=null&&m.length?c.set(h.fromId,m):c.delete(h.fromId);const w=c.get(h.toId),b=w==null?void 0:w.filter(_=>_.id!==h.id);b!=null&&b.length?c.set(h.toId,b):c.delete(h.toId)}function p(h){c??(c=new Map(i));let y=c.get(h);return y?y===i.get(h)&&(y=y.slice(0),c.set(h,y)):(y=[],c.set(h,y)),y}function f(h){p(h.fromId).push(h),p(h.toId).push(h)}for(const h of l){for(const y of ht(h.added))f(y);for(const[y,m]of ht(h.updated))d(y),f(m);for(const y of ht(h.removed))d(y)}return c??i})};function wG(e,t,r){const a=e.getShapeMaskedPageBounds(t);return a===void 0?!0:!r.includes(a)}const vG=e=>{function t(r){const a=r.getCurrentPageShapeIds(),s=r.getViewportPageBounds(),n=new Set;return a.forEach(o=>{wG(r,o,s)&&n.add(o)}),n}return K("getCulledShapes",r=>{if(ds(r))return t(e);const a=t(e);if(r.size!==a.size)return a;for(const s of r)if(!a.has(s))return a;return r})},xG=e=>{const t=e.query.ids("shape"),r=e.query.filterHistory("shape");function a(){const s={},n=t.get(),o=Array(n.size);return n.forEach(i=>o.push(e.get(i))),o.sort(Qt),o.forEach(i=>{s[i.parentId]||(s[i.parentId]=[]),s[i.parentId].push(i.id)}),s}return K("parentsToChildrenWithIndexes",(s,n)=>{if(ds(s))return a();const o=r.getDiffSince(n);if(o===Rr)return a();if(o.length===0)return s;let i=null;const l=p=>{i||(i={...s}),i[p]?i[p]===s[p]&&(i[p]=[...i[p]]):i[p]=[]},c=new Set;let d;for(let p=0,f=o.length;p<f;p++){d=o[p];for(const h of Object.values(d.added))Cn(h)&&(l(h.parentId),i[h.parentId].push(h.id),c.add(i[h.parentId]));for(const[h,y]of Object.values(d.updated))if(Cn(y)&&Cn(h)){if(h.parentId!==y.parentId)l(h.parentId),l(y.parentId),i[h.parentId].splice(i[h.parentId].indexOf(y.id),1),i[y.parentId].push(y.id),c.add(i[y.parentId]);else if(h.index!==y.index){l(y.parentId);const m=i[y.parentId].indexOf(y.id);i[y.parentId][m]=y.id,c.add(i[y.parentId])}}for(const h of Object.values(d.removed))Cn(h)&&(l(h.parentId),i[h.parentId].splice(i[h.parentId].indexOf(h.id),1))}for(const p of c){const f=ge(p.map(h=>e.get(h)));f.sort(Qt),p.splice(0,p.length,...f.map(h=>h.id))}return i??s})},i2=(e,t,r)=>{for(;!Sr(r.parentId);){const a=e.get(r.parentId);if(!a)return!1;r=a}return r.parentId===t},SG=(e,t)=>{const r=e.query.ids("shape");let a=null;function s(){const n=t();return a=n,new Set([...r.get()].filter(o=>i2(e,n,e.get(o))))}return K("_shapeIdsInCurrentPage",(n,o)=>{if(ds(n))return s();const i=t();if(i!==a)return s();const l=e.history.getDiffSince(o);if(l===Rr)return s();const c=new Dp(n);for(const p of l){for(const f of Object.values(p.added))Cn(f)&&i2(e,i,f)&&c.add(f.id);for(const[f,h]of Object.values(p.updated))Cn(h)&&(i2(e,i,h)?c.add(h.id):c.remove(h.id));for(const f of Object.keys(p.removed))Kr(f)&&c.remove(f)}const d=c.get();return d?vc(d.value,d.diff):n})},HS=S.createContext(null);function kG({context:e,editor:t,children:r}){return u.jsx(ig.Provider,{value:t,children:u.jsx(HS.Provider,{value:e,children:r})})}function GS(){const e=S.useContext(HS);return e?{isDarkMode:e.isDarkMode}:null}async function FG(e,t,r={}){var k,F;const a=typeof t[0]=="string"?t:t.map(P=>P.id);if(a.length===0)return;if(!window.document)throw Error("No document");const{scale:s=1,background:n=!1,padding:o=e.options.defaultSvgPadding,preserveAspectRatio:i=!1}=r,l=r.darkMode??e.user.getIsDarkMode(),c=an({isDarkMode:l}),d=e.getShapeAndDescendantIds(a),p=e.getUnorderedRenderingShapes(!1).filter(({id:P})=>d.has(P));let f=null;if(r.bounds)f=r.bounds;else for(const{id:P}of p){const I=e.getShapeMaskedPageBounds(P);I&&(f?f.union(I):f=I.clone())}if(!f)return;const h=a.length===1&&e.isShapeOfType(e.getShape(a[0]),"frame")?a[0]:null;h||f.expandBy(o);const y=f.width*s,m=f.height*s;try{(F=(k=document.body).focus)==null||F.call(k)}catch{}const w=[],b=new Map,_={isDarkMode:l,addExportDef:P=>{if(b.has(P.key))return;const I=(async()=>{const j=await P.getElement();j&&w.push(u.jsx(S.Fragment,{children:j},w.length))})();b.set(P.key,I)}},x=(await Promise.all(p.map(async({id:P,opacity:I,index:j,backgroundIndex:A})=>{var O,$;if(P===h)return[];const D=e.getShape(P);if(e.isShapeOfType(D,"group"))return[];const z=e.getShapeUtil(D);let T=await((O=z.toSvg)==null?void 0:O.call(z,D,_)),M=await(($=z.toBackgroundSvg)==null?void 0:$.call(z,D,_));if(!T&&!M){const U=e.getShapePageBounds(D);T=u.jsx("rect",{width:U.w,height:U.h,fill:c.solid,stroke:c.grey.pattern,strokeWidth:1})}let L=e.getShapePageTransform(D).toCssString();"scale"in D.props&&D.props.scale!==1&&(L=`${L} scale(${D.props.scale}, ${D.props.scale})`),T&&(T=u.jsx("g",{transform:L,opacity:I,children:T},D.id)),M&&(M=u.jsx("g",{transform:L,opacity:I,children:M},`bg_${D.id}`));const G=e.getShapeMask(D.id);if(G){const U=`mask_${D.id.replace(":","_")}`;w.push(u.jsx("clipPath",{id:U,children:u.jsx("path",{d:`M${G.map(({x:X,y:ne})=>`${X},${ne}`).join("L")}Z`})},w.length)),T&&(T=u.jsx("g",{clipPath:`url(#${U})`,children:T},D.id)),M&&(M=u.jsx("g",{clipPath:`url(#${U})`,children:M},`bg_${D.id}`))}const W=[];return T&&W.push({zIndex:j,element:T}),M&&W.push({zIndex:A,element:M}),W}))).flat();return await Promise.all(b.values()),{jsx:u.jsx(kG,{editor:e,context:_,children:u.jsxs("svg",{preserveAspectRatio:i||void 0,direction:"ltr",width:y,height:m,viewBox:`${f.minX} ${f.minY} ${f.width} ${f.height}`,strokeLinecap:"round",strokeLinejoin:"round",style:{backgroundColor:n?h?c.solid:c.background:"transparent"},children:[u.jsx("defs",{children:w}),x.sort((P,I)=>P.zIndex-I.zIndex).map(({element:P})=>P)]})}),width:y,height:m}}const CG=40;class PG{constructor(t){g(this,"_clickId","");g(this,"_clickTimeout");g(this,"_clickScreenPoint");g(this,"_previousScreenPoint");g(this,"_getClickTimeout",(t,r=rt())=>{this._clickId=r,clearTimeout(this._clickTimeout),this._clickTimeout=this.editor.timers.setTimeout(()=>{if(this._clickState===t&&this._clickId===r){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}}this._clickState="idle"}},t==="idle"||t==="pendingDouble"?this.editor.options.doubleClickDurationMs:this.editor.options.multiClickDurationMs)});g(this,"_clickState","idle");g(this,"lastPointerInfo",{});g(this,"handlePointerEvent",t=>{switch(t.name){case"pointer_down":{if(!this._clickState)return t;switch(this._clickScreenPoint=v.From(t.point),this._previousScreenPoint&&v.Dist2(this._previousScreenPoint,this._clickScreenPoint)>CG**2&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=t,this._clickState){case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...t,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...t,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...t,type:"click",name:"quadruple_click",phase:"down"};case"idle":{this._clickState="pendingDouble";break}case"pendingOverflow":{this._clickState="overflow";break}}return this._clickTimeout=this._getClickTimeout(this._clickState),t}case"pointer_up":{if(!this._clickState)return t;switch(this._clickScreenPoint=v.From(t.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"}}return t}case"pointer_move":return this._clickState!=="idle"&&this._clickScreenPoint&&v.Dist2(this._clickScreenPoint,this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?this.editor.options.coarseDragDistanceSquared:this.editor.options.dragDistanceSquared)&&this.cancelDoubleClickTimeout(),t}return t});g(this,"cancelDoubleClickTimeout",()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"});this.editor=t}get clickState(){return this._clickState}}class IG{constructor(t){g(this,"isSafari");g(this,"isIos");g(this,"isChromeForIos");g(this,"isFirefox");g(this,"isAndroid");this.editor=t,typeof window<"u"&&"navigator"in window?(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent)):(this.isSafari=!1,this.isIos=!1,this.isChromeForIos=!1,this.isFirefox=!1,this.isAndroid=!1)}}class AG{constructor(t,r){g(this,"disposeSideEffectListener");this.editor=t,this.disposeSideEffectListener=t.sideEffects.registerAfterChangeHandler("instance",(s,n)=>{s.isFocused!==n.isFocused&&(n.isFocused?this.focus():this.blur(),this.updateContainerClass())});const a=t.getInstanceState().isFocused;r!==a&&t.updateInstanceState({isFocused:!!r}),this.updateContainerClass()}updateContainerClass(){const t=this.editor.getContainer();this.editor.getInstanceState().isFocused?t.classList.add("tl-container__focused"):t.classList.remove("tl-container__focused")}focus(){this.editor.getContainer().focus()}blur(){this.editor.complete(),this.editor.getContainer().blur()}dispose(){var t;(t=this.disposeSideEffectListener)==null||t.call(this)}}function nc(e){if(e){let t=z6;for(;e.length;)t=t.push(e.pop());return t}return z6}class jG{constructor(){g(this,"length",0);g(this,"head",null);g(this,"tail",this)}push(t){return new a0(t,this)}toArray(){return zs}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}const z6=new jG;class a0{constructor(t,r){g(this,"length");this.head=t,this.tail=r,this.length=r.length+1}push(t){return new a0(t,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let t=this;return{next(){if(t.length){const r=t.head;return t=t.tail,{value:r,done:!1}}else return{value:void 0,done:!0}}}}}class EG{constructor(t){g(this,"store");g(this,"dispose");g(this,"state","recording");g(this,"pendingDiff",new TG);g(this,"stacks",rr("HistoryManager.stacks",{undos:nc(),redos:nc()},{isEqual:(t,r)=>t.undos===r.undos&&t.redos===r.redos}));g(this,"annotateError");g(this,"onBatchComplete",()=>{});g(this,"_isInBatch",!1);g(this,"batch",(t,r)=>{const a=this.state;a!=="paused"&&(r!=null&&r.history)&&(this.state=DG[r.history]);try{if(this._isInBatch)return t(),this;this._isInBatch=!0;try{Ao(()=>{t(),this.onBatchComplete()})}catch(s){throw this.annotateError(s),s}finally{this._isInBatch=!1}return this}finally{this.state=a}});g(this,"_undo",({pushToRedoStack:t,toMark:r=void 0})=>{var s;const a=this.state;this.state="paused";try{let{undos:n,redos:o}=this.stacks.get();const i=this.pendingDiff.clear(),l=Jv(i),c=yb(i);t&&!l&&(o=o.push({type:"diff",diff:i}));let d=!1;if(l)for(;((s=n.head)==null?void 0:s.type)==="stop";){const p=n.head;if(n=n.tail,t&&(o=o.push(p)),p.id===r){d=!0;break}}if(!d)e:for(;n.head;){const p=n.head;switch(n=n.tail,t&&(o=o.push(p)),p.type){case"diff":Nc(c,[yb(p.diff)]);break;case"stop":if(!r||p.id===r)break e;break;default:tr(p)}}this.store.applyDiff(c,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:n,redos:o})}finally{this.state=a}return this});g(this,"undo",()=>(this._undo({pushToRedoStack:!0}),this));g(this,"redo",()=>{var r;const t=this.state;this.state="paused";try{this.flushPendingDiff();let{undos:a,redos:s}=this.stacks.get();if(s.length===0)return this;for(;((r=s.head)==null?void 0:r.type)==="stop";)a=a.push(s.head),s=s.tail;const n=Zf();for(;s.head;){const o=s.head;if(a=a.push(o),s=s.tail,o.type==="diff")Nc(n,[o.diff]);else break}this.store.applyDiff(n,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:a,redos:s})}finally{this.state=t}return this});g(this,"bail",()=>(this._undo({pushToRedoStack:!1}),this));g(this,"bailToMark",t=>(this._undo({pushToRedoStack:!1,toMark:t}),this));g(this,"squashToMark",t=>{var n;let r=this.stacks.get().undos;const a=[];for(;r.head&&!(r.head.type==="stop"&&r.head.id===t);)r.head.type==="diff"&&a.push(r.head.diff),r=r.tail;if(!r.head||((n=r.head)==null?void 0:n.id)!==t)return console.error("Could not find mark to squash to: ",t),this;if(a.length===0)return this;const s=Zf();return Nc(s,a.reverse()),this.stacks.update(({redos:o})=>({undos:r.push({type:"diff",diff:s}),redos:o})),this});g(this,"mark",(t=rt())=>(Ao(()=>{this.flushPendingDiff(),this.stacks.update(({undos:r,redos:a})=>({undos:r.push({type:"stop",id:t}),redos:a}))}),t));this.store=t.store,this.annotateError=t.annotateError??Yf,this.dispose=this.store.addHistoryInterceptor((r,a)=>{if(a==="user")switch(this.state){case"recording":this.pendingDiff.apply(r.changes),this.stacks.update(({undos:s})=>({undos:s,redos:nc()}));break;case"recordingPreserveRedoStack":this.pendingDiff.apply(r.changes);break;case"paused":break;default:tr(this.state)}})}flushPendingDiff(){if(this.pendingDiff.isEmpty())return;const t=this.pendingDiff.clear();this.stacks.update(({undos:r,redos:a})=>({undos:r.push({type:"diff",diff:t}),redos:a}))}getNumUndos(){return this.stacks.get().undos.length+(this.pendingDiff.isEmpty()?0:1)}getNumRedos(){return this.stacks.get().redos.length}ignore(t){return this.batch(t,{history:"ignore"})}clear(){this.stacks.set({undos:nc(),redos:nc()}),this.pendingDiff.clear()}debug(){const{undos:t,redos:r}=this.stacks.get();return{undos:t.toArray(),redos:r.toArray(),pendingDiff:this.pendingDiff.debug(),state:this.state}}}const DG={record:"recording","record-preserveRedoStack":"recordingPreserveRedoStack",ignore:"paused"};class TG{constructor(){g(this,"diff",Zf());g(this,"isEmptyAtom",rr("PendingDiff.isEmpty",!0))}clear(){const t=this.diff;return this.diff=Zf(),this.isEmptyAtom.set(!0),t}isEmpty(){return this.isEmptyAtom.get()}apply(t){Nc(this.diff,[t]),this.isEmptyAtom.set(Jv(this.diff))}debug(){return{diff:this.diff,isEmpty:this.isEmpty()}}}class MG{constructor(t){g(this,"scribbleItems",new Map);g(this,"state","paused");g(this,"addScribble",(t,r=rt())=>{const a={id:r,scribble:{id:r,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0,...t,state:"starting"},timeoutMs:0,delayRemaining:t.delay??0,prev:null,next:null};return this.scribbleItems.set(r,a),a});g(this,"stop",t=>{const r=this.scribbleItems.get(t);if(!r)throw Error(`Scribble with id ${t} not found`);return r.delayRemaining=Math.min(r.delayRemaining,200),r.scribble.state="stopping",r});g(this,"addPoint",(t,r,a)=>{const s=this.scribbleItems.get(t);if(!s)throw Error(`Scribble with id ${t} not found`);const{prev:n}=s,o={x:r,y:a,z:.5};return(!n||v.Dist(n,o)>=1)&&(s.next=o),s});g(this,"tick",t=>{this.scribbleItems.size!==0&&this.editor.batch(()=>{this.scribbleItems.forEach(r=>{if(r.scribble.state==="starting"){const{next:l,prev:c}=r;l&&l!==c&&(r.prev=l,r.scribble.points.push(l)),r.scribble.points.length>8&&(r.scribble.state="active");return}r.delayRemaining>0&&(r.delayRemaining=Math.max(0,r.delayRemaining-t)),r.timeoutMs+=t,r.timeoutMs>=16&&(r.timeoutMs=0);const{delayRemaining:a,timeoutMs:s,prev:n,next:o,scribble:i}=r;switch(i.state){case"active":{o&&o!==n?(r.prev=o,i.points.push(o),a===0&&i.points.length>8&&i.points.shift()):s===0&&(i.points.length>1?i.points.shift():r.delayRemaining=i.delay);break}case"stopping":{if(r.delayRemaining===0&&s===0){if(i.points.length===1){this.scribbleItems.delete(r.id);return}i.shrink&&(i.size=Math.max(1,i.size*(1-i.shrink))),i.points.shift()}break}}}),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map(({scribble:r})=>({...r,points:[...r.points]})).slice(-5)})})});this.editor=t}reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear()}}var BG=Object.defineProperty,LG=Object.getOwnPropertyDescriptor,ug=(e,t,r,a)=>{for(var s=a>1?void 0:a?LG(t,r):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(s=(a?o(t,r,s):o(s))||s);return a&&s&&BG(t,r,s),s};const ce=e=>Math.round(e*10**8)/10**8;function js(e,t,r,a,s){const n=e.filter(i=>(a==="forward"?i.startNode.id===t:i.endNode.id===t)&&ce(i.length)===ce(r)&&Da(i.breadthIntersection[0],i.breadthIntersection[1],s[0],s[1]));if(n.length===0)return[];const o=new Set;return n.forEach(i=>{const l=a==="forward"?i.endNode.id:i.startNode.id;if(!o.has(l)){o.add(l);const c=js(e,l,r,a,Da(i.breadthIntersection[0],i.breadthIntersection[1],s[0],s[1]));n.push(...c)}}),n}function RG(e){e.sort((t,r)=>r.gaps.length-t.gaps.length);for(let t=e.length-1;t>0;t--){const r=e[t];for(let a=t-1;a>=0;a--){const s=e[a];if(s.direction===r.direction&&r.gaps.every(n=>s.gaps.some(o=>ce(n.startEdge[0].x)===ce(o.startEdge[0].x)&&ce(n.startEdge[0].y)===ce(o.startEdge[0].y)&&ce(n.startEdge[1].x)===ce(o.startEdge[1].x)&&ce(n.startEdge[1].y)===ce(o.startEdge[1].y))&&s.gaps.some(o=>ce(n.endEdge[0].x)===ce(o.endEdge[0].x)&&ce(n.endEdge[0].y)===ce(o.endEdge[0].y)&&ce(n.endEdge[1].x)===ce(o.endEdge[1].x)&&ce(n.endEdge[1].y)===ce(o.endEdge[1].y)))){e.splice(t,1);break}}}}class Kd{constructor(t){g(this,"editor");this.manager=t,this.editor=t.editor}getSnapPointsCache(){const{editor:t}=this;return t.store.createComputedCache("snapPoints",r=>{const a=t.getShapePageTransform(r.id);if(!a)return;const n=t.getShapeUtil(r).getBoundsSnapGeometry(r).points??t.getShapeGeometry(r).bounds.cornersAndCenter;if(!(!a||!n))return n.map((o,i)=>{const{x:l,y:c}=ae.applyToPoint(a,o);return{x:l,y:c,id:`${r.id}:${i}`}})})}getSnapPoints(t){return this.getSnapPointsCache().get(t)??[]}getSnappablePoints(){const t=this.getSnapPointsCache(),r=this.manager.getSnappableShapes(),a=[];for(const s of r){const n=t.get(s);n&&a.push(...n)}return a}getSnappableGapNodes(){return Array.from(this.manager.getSnappableShapes(),t=>({id:t,pageBounds:Vr(this.editor.getShapePageBounds(t))}))}getVisibleGaps(){const t=[],r=[];let a,s;const n=this.getSnappableGapNodes().sort((i,l)=>i.pageBounds.minX-l.pageBounds.minX);for(let i=0;i<n.length;i++){a=n[i];for(let l=i+1;l<n.length;l++)s=n[l],a.pageBounds.maxX<s.pageBounds.minX&&sc(a.pageBounds.minY,a.pageBounds.maxY,s.pageBounds.minY,s.pageBounds.maxY)&&t.push({startNode:a,endNode:s,startEdge:[new v(a.pageBounds.maxX,a.pageBounds.minY),new v(a.pageBounds.maxX,a.pageBounds.maxY)],endEdge:[new v(s.pageBounds.minX,s.pageBounds.minY),new v(s.pageBounds.minX,s.pageBounds.maxY)],length:s.pageBounds.minX-a.pageBounds.maxX,breadthIntersection:Da(a.pageBounds.minY,a.pageBounds.maxY,s.pageBounds.minY,s.pageBounds.maxY)})}const o=n.sort((i,l)=>i.pageBounds.minY-l.pageBounds.minY);for(let i=0;i<o.length;i++){a=o[i];for(let l=i+1;l<o.length;l++)s=o[l],a.pageBounds.maxY<s.pageBounds.minY&&sc(a.pageBounds.minX,a.pageBounds.maxX,s.pageBounds.minX,s.pageBounds.maxX)&&r.push({startNode:a,endNode:s,startEdge:[new v(a.pageBounds.minX,a.pageBounds.maxY),new v(a.pageBounds.maxX,a.pageBounds.maxY)],endEdge:[new v(s.pageBounds.minX,s.pageBounds.minY),new v(s.pageBounds.maxX,s.pageBounds.minY)],length:s.pageBounds.minY-a.pageBounds.maxY,breadthIntersection:Da(a.pageBounds.minX,a.pageBounds.maxX,s.pageBounds.minX,s.pageBounds.maxX)})}return{horizontal:t,vertical:r}}snapTranslateShapes({lockedAxis:t,initialSelectionPageBounds:r,initialSelectionSnapPoints:a,dragDelta:s}){var w,b;const n=this.manager.getSnapThreshold(),o=this.getSnappablePoints(),i=r.clone().translate(s),l=a.map(({x:_,y:x},C)=>({id:"selection:"+C,x:_+s.x,y:x+s.y})),c=o,d=[],p=[],f=new v(n,n);this.collectPointSnaps({minOffset:f,nearestSnapsX:d,nearestSnapsY:p,otherNodeSnapPoints:c,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:i,nearestSnapsX:d,nearestSnapsY:p,minOffset:f});const h=new v(t==="x"?0:((w=d[0])==null?void 0:w.nudge)??0,t==="y"?0:((b=p[0])==null?void 0:b.nudge)??0);f.x=0,f.y=0,d.length=0,p.length=0,l.forEach(_=>{_.x+=h.x,_.y+=h.y}),i.translate(h),this.collectPointSnaps({minOffset:f,nearestSnapsX:d,nearestSnapsY:p,otherNodeSnapPoints:c,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:i,nearestSnapsX:d,nearestSnapsY:p,minOffset:f});const y=this.getPointSnapLines({nearestSnapsX:d,nearestSnapsY:p}),m=this.getGapSnapLines({selectionPageBounds:i,nearestSnapsX:d,nearestSnapsY:p});return this.manager.setIndicators([...m,...y]),{nudge:h}}snapResizeShapes({initialSelectionPageBounds:t,dragDelta:r,handle:a,isAspectRatioLocked:s,isResizingFromCenter:n}){var P,I;const o=this.manager.getSnapThreshold(),{box:i,scaleX:l,scaleY:c}=Z.Resize(t,a,n?r.x*2:r.x,n?r.y*2:r.y,s);let d=a;l<0&&(d=KU(d)),c<0&&(d=GU(d)),n&&(i.center=t.center);const p=d==="top"||d==="bottom",f=d==="left"||d==="right",h=N6(d,i),y=this.getSnappablePoints(),m=[],w=[],b=new v(o,o);this.collectPointSnaps({minOffset:b,nearestSnapsX:m,nearestSnapsY:w,otherNodeSnapPoints:y,selectionSnapPoints:h});const _=new v(p?0:((P=m[0])==null?void 0:P.nudge)??0,f?0:((I=w[0])==null?void 0:I.nudge)??0);if(s&&VU(d)&&_.len()!==0){const j=m.length&&w.length?Math.abs(_.x)<Math.abs(_.y)?"x":"y":m.length?"x":"y",A=t.aspectRatio;j==="x"?(w.length=0,_.y=_.x/A,(d==="bottom_left"||d==="top_right")&&(_.y=-_.y)):(m.length=0,_.x=_.y*A,(d==="bottom_left"||d==="top_right")&&(_.x=-_.x))}const x=v.Add(r,_),{box:C}=Z.Resize(t,a,n?x.x*2:x.x,n?x.y*2:x.y,s);n&&(C.center=t.center);const k=N6("any",C);m.length=0,w.length=0,b.x=0,b.y=0,this.collectPointSnaps({minOffset:b,nearestSnapsX:m,nearestSnapsY:w,otherNodeSnapPoints:y,selectionSnapPoints:k});const F=this.getPointSnapLines({nearestSnapsX:m,nearestSnapsY:w});return this.manager.setIndicators([...F]),{nudge:_}}collectPointSnaps({selectionSnapPoints:t,otherNodeSnapPoints:r,minOffset:a,nearestSnapsX:s,nearestSnapsY:n}){for(const o of t)for(const i of r){const l=v.Sub(o,i),c=Math.abs(l.x),d=Math.abs(l.y);ce(c)<=ce(a.x)&&(ce(c)<ce(a.x)&&(s.length=0),s.push({type:"points",points:{thisPoint:o,otherPoint:i},nudge:i.x-o.x}),a.x=c),ce(d)<=ce(a.y)&&(ce(d)<ce(a.y)&&(n.length=0),n.push({type:"points",points:{thisPoint:o,otherPoint:i},nudge:i.y-o.y}),a.y=d)}}collectGapSnaps({selectionPageBounds:t,minOffset:r,nearestSnapsX:a,nearestSnapsY:s}){const{horizontal:n,vertical:o}=this.getVisibleGaps();for(const i of n){if(!sc(i.breadthIntersection[0],i.breadthIntersection[1],t.minY,t.maxY))continue;const c=i.startEdge[0].x+i.length/2-t.center.x;if(i.length>t.width&&ce(Math.abs(c))<=ce(r.x)){ce(Math.abs(c))<ce(r.x)&&(a.length=0),r.x=Math.abs(c);const b={type:"gap_center",gap:i,nudge:c},_=a.find(({type:C})=>C==="gap_center"),x=_&&Da(i.breadthIntersection[0],i.breadthIntersection[1],_.gap.breadthIntersection[0],_.gap.breadthIntersection[1]);_&&_.gap.length>i.length&&x?a[a.indexOf(_)]=b:(!_||!x)&&a.push(b)}const p=i.startNode.pageBounds.minX-i.length,f=t.maxX,h=p-f;ce(Math.abs(h))<=ce(r.x)&&(ce(Math.abs(h))<ce(r.x)&&(a.length=0),r.x=Math.abs(h),a.push({type:"gap_duplicate",gap:i,protrusionDirection:"left",nudge:h}));const y=i.endNode.pageBounds.maxX+i.length,m=t.minX,w=y-m;ce(Math.abs(w))<=ce(r.x)&&(ce(Math.abs(w))<ce(r.x)&&(a.length=0),r.x=Math.abs(w),a.push({type:"gap_duplicate",gap:i,protrusionDirection:"right",nudge:w}))}for(const i of o){if(!sc(i.breadthIntersection[0],i.breadthIntersection[1],t.minX,t.maxX))continue;const c=i.startEdge[0].y+i.length/2-t.center.y;if(i.length>t.height&&ce(Math.abs(c))<=ce(r.y)){ce(Math.abs(c))<ce(r.y)&&(s.length=0),r.y=Math.abs(c);const b={type:"gap_center",gap:i,nudge:c},_=s.find(({type:C})=>C==="gap_center"),x=_&&sc(_.gap.breadthIntersection[0],_.gap.breadthIntersection[1],i.breadthIntersection[0],i.breadthIntersection[1]);_&&_.gap.length>i.length&&x?s[s.indexOf(_)]=b:(!_||!x)&&s.push(b);continue}const p=i.startNode.pageBounds.minY-i.length,f=t.maxY,h=p-f;ce(Math.abs(h))<=ce(r.y)&&(ce(Math.abs(h))<ce(r.y)&&(s.length=0),r.y=Math.abs(h),s.push({type:"gap_duplicate",gap:i,protrusionDirection:"top",nudge:h}));const y=i.endNode.pageBounds.maxY+i.length,m=t.minY,w=y-m;ce(Math.abs(w))<=ce(r.y)&&(ce(Math.abs(w))<ce(r.y)&&(s.length=0),r.y=Math.abs(w),s.push({type:"gap_duplicate",gap:i,protrusionDirection:"bottom",nudge:w}))}}getPointSnapLines({nearestSnapsX:t,nearestSnapsY:r}){const a={},s={};if(t.length>0){for(const n of t)if(n.type==="points"){const o=ce(n.points.otherPoint.x);a[o]||(a[o]=[]),a[o].push(n.points)}}if(r.length>0){for(const n of r)if(n.type==="points"){const o=ce(n.points.otherPoint.y);s[o]||(s[o]=[]),s[o].push(n.points)}}return Object.values(a).concat(Object.values(s)).map(n=>({id:rt(),type:"points",points:k_(n.map(o=>v.From(o.otherPoint)).concat(n.map(o=>v.From(o.thisPoint))),(o,i)=>o.equals(i))}))}getGapSnapLines({selectionPageBounds:t,nearestSnapsX:r,nearestSnapsY:a}){const{vertical:s,horizontal:n}=this.getVisibleGaps(),o={top:t.sides[0],right:t.sides[1],bottom:[t.corners[3],t.corners[2]],left:[t.corners[0],t.corners[3]]},i=[];if(r.length>0)for(const l of r){if(l.type==="points")continue;const{gap:{breadthIntersection:c,startEdge:d,startNode:p,endNode:f,length:h,endEdge:y}}=l;switch(l.type){case"gap_center":{const m=(h-t.width)/2,w=Da(c[0],c[1],t.minY,t.maxY);i.push({type:"gaps",direction:"horizontal",id:rt(),gaps:[...js(n,p.id,m,"backward",w),{startEdge:d,endEdge:o.left},{startEdge:o.right,endEdge:y},...js(n,f.id,m,"forward",w)]});break}case"gap_duplicate":{const m=Da(c[0],c[1],t.minY,t.maxY);i.push({type:"gaps",direction:"horizontal",id:rt(),gaps:l.protrusionDirection==="left"?[{startEdge:o.right,endEdge:d.map(w=>w.clone().addXY(-p.pageBounds.width,0))},{startEdge:d,endEdge:y},...js(n,f.id,h,"forward",m)]:[...js(n,p.id,h,"backward",m),{startEdge:d,endEdge:y},{startEdge:y.map(w=>w.clone().addXY(l.gap.endNode.pageBounds.width,0)),endEdge:o.left}]});break}}}if(a.length>0)for(const l of a){if(l.type==="points")continue;const{gap:{breadthIntersection:c,startEdge:d,startNode:p,endNode:f,length:h,endEdge:y}}=l;switch(l.type){case"gap_center":{const m=(h-t.height)/2,w=Da(c[0],c[1],t.minX,t.maxX);i.push({type:"gaps",direction:"vertical",id:rt(),gaps:[...js(s,p.id,m,"backward",w),{startEdge:d,endEdge:o.top},{startEdge:o.bottom,endEdge:y},...js(s,l.gap.endNode.id,m,"forward",w)]});break}case"gap_duplicate":{const m=Da(c[0],c[1],t.minX,t.maxX);i.push({type:"gaps",direction:"vertical",id:rt(),gaps:l.protrusionDirection==="top"?[{startEdge:o.bottom,endEdge:d.map(w=>w.clone().addXY(0,-p.pageBounds.height))},{startEdge:d,endEdge:y},...js(s,f.id,h,"forward",m)]:[...js(s,p.id,h,"backward",m),{startEdge:d,endEdge:y},{startEdge:y.map(w=>w.clone().addXY(0,f.pageBounds.height)),endEdge:o.top}]})}break}}return RG(i),i}}ug([K],Kd.prototype,"getSnapPointsCache",1);ug([K],Kd.prototype,"getSnappablePoints",1);ug([K],Kd.prototype,"getSnappableGapNodes",1);ug([K],Kd.prototype,"getVisibleGaps",1);function N6(e,t){const{minX:r,maxX:a,minY:s,maxY:n}=t,o=[];switch(e){case"top":case"left":case"top_left":case"any":o.push({id:"top_left",handle:"top_left",x:r,y:s})}switch(e){case"top":case"right":case"top_right":case"any":o.push({id:"top_right",handle:"top_right",x:a,y:s})}switch(e){case"bottom":case"right":case"bottom_right":case"any":o.push({id:"bottom_right",handle:"bottom_right",x:a,y:n})}switch(e){case"bottom":case"left":case"bottom_left":case"any":o.push({id:"bottom_left",handle:"bottom_left",x:r,y:n})}return o}var OG=Object.defineProperty,zG=Object.getOwnPropertyDescriptor,NG=(e,t,r,a)=>{for(var s=a>1?void 0:a?zG(t,r):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(s=(a?o(t,r,s):o(s))||s);return a&&s&&OG(t,r,s),s};const qG=()=>null,$G=()=>[];class KS{constructor(t){g(this,"editor");this.manager=t,this.editor=t.editor}getSnapGeometryCache(){const{editor:t}=this;return t.store.createComputedCache("handle snap geometry",r=>{const a=t.getShapeUtil(r).getHandleSnapGeometry(r);return{outline:a.outline===void 0?t.getShapeGeometry(r):a.outline,points:a.points??[],getSelfSnapOutline:a.getSelfSnapOutline??qG,getSelfSnapPoints:a.getSelfSnapPoints??$G}})}*iterateSnapPointsInPageSpace(t,r){var s,n;const a=(s=this.getSnapGeometryCache().get(t))==null?void 0:s.getSelfSnapPoints(r);if(a&&a.length){const o=Vr(this.editor.getShapePageTransform(t));for(const i of a)yield o.applyToPoint(i)}for(const o of this.manager.getSnappableShapes()){if(o===t)continue;const i=(n=this.getSnapGeometryCache().get(o))==null?void 0:n.points;if(!i||!i.length)continue;const l=Vr(this.editor.getShapePageTransform(o));for(const c of i)yield l.applyToPoint(c)}}*iterateSnapOutlines(t,r){var s,n;const a=(s=this.getSnapGeometryCache().get(t))==null?void 0:s.getSelfSnapOutline(r);a&&(yield{shapeId:t,outline:a});for(const o of this.manager.getSnappableShapes()){if(o===t)continue;const i=(n=this.getSnapGeometryCache().get(o))==null?void 0:n.outline;i&&(yield{shapeId:o,outline:i})}}getHandleSnapPosition({currentShapeId:t,handle:r,handleInPageSpace:a}){const s=this.manager.getSnapThreshold();let n=s,o=null;for(const c of this.iterateSnapPointsInPageSpace(t,r))v.DistMin(a,c,n)&&(n=v.Dist(a,c),o=c);if(o)return o;let i=s,l=null;for(const{shapeId:c,outline:d}of this.iterateSnapOutlines(t,r)){const p=Vr(this.editor.getShapePageTransform(c)),f=this.editor.getPointInShapeSpace(c,a),h=d.nearestPoint(f),y=p.applyToPoint(h);v.DistMin(a,y,i)&&(i=v.Dist(a,y),l=y)}return l||null}snapHandle({currentShapeId:t,handle:r}){const s=Vr(this.editor.getShapePageTransform(t)).applyToPoint(r),n=this.getHandleSnapPosition({currentShapeId:t,handle:r,handleInPageSpace:s});return n?(this.manager.setIndicators([{id:rt(),type:"points",points:[n]}]),{nudge:v.Sub(n,s)}):null}}NG([K],KS.prototype,"getSnapGeometryCache",1);var UG=Object.defineProperty,WG=Object.getOwnPropertyDescriptor,s0=(e,t,r,a)=>{for(var s=a>1?void 0:a?WG(t,r):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(s=(a?o(t,r,s):o(s))||s);return a&&s&&UG(t,r,s),s};class pg{constructor(t){g(this,"shapeBounds");g(this,"handles");g(this,"_snapIndicators",rr("snapLines",void 0));this.editor=t,this.shapeBounds=new Kd(this),this.handles=new KS(this)}getIndicators(){return this._snapIndicators.get()??zs}clearIndicators(){this.getIndicators().length&&this._snapIndicators.set(void 0)}setIndicators(t){this._snapIndicators.set(t)}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){const{editor:t}=this,r=t.getViewportPageBounds(),a=t.getSelectedShapeIds(),s=new Set,n=o=>{if(Kr(o)){const l=t.getShape(o);l&&t.isShapeOfType(l,"frame")&&s.add(o)}const i=t.getSortedChildIdsForParent(o);for(const l of i){if(a.includes(l))continue;const c=t.getShape(l);if(!c||!t.getShapeUtil(c).canSnap(c))continue;const p=t.getShapePageBounds(l);if(p&&r.includes(p)){if(t.isShapeOfType(c,"group")){n(l);continue}s.add(l)}}};return n(this.getCurrentCommonAncestor()??t.getCurrentPageId()),s}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}s0([K],pg.prototype,"getSnapThreshold",1);s0([K],pg.prototype,"getSnappableShapes",1);s0([K],pg.prototype,"getCurrentCommonAncestor",1);const HG=/\r?\n|\r/g;function q6(e){return e.replace(HG,`
`).split(`
`).map(t=>t||" ").join(`
`)}const GG={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},KG=/\s/;class VG{constructor(t){g(this,"baseElm");g(this,"measureText",(t,r)=>{var o;const a=(o=this.baseElm)==null?void 0:o.cloneNode();this.baseElm.insertAdjacentElement("afterend",a),a.setAttribute("dir","auto"),a.style.setProperty("unicode-bidi","plaintext"),a.style.setProperty("font-family",r.fontFamily),a.style.setProperty("font-style",r.fontStyle),a.style.setProperty("font-weight",r.fontWeight),a.style.setProperty("font-size",r.fontSize+"px"),a.style.setProperty("line-height",r.lineHeight*r.fontSize+"px"),a.style.setProperty("max-width",r.maxWidth===null?null:r.maxWidth+"px"),a.style.setProperty("min-width",r.minWidth===null?null:r.minWidth+"px"),a.style.setProperty("padding",r.padding),a.style.setProperty("overflow-wrap",r.disableOverflowWrapBreaking?"normal":"break-word"),a.textContent=q6(t);const s=a.scrollWidth,n=a.getBoundingClientRect();return a.remove(),{x:0,y:0,w:n.width,h:n.height,scrollWidth:s}});var s;this.editor=t;const r=this.editor.getContainer();(s=r.querySelector("#tldraw_text_measure"))==null||s.remove();const a=document.createElement("div");a.id="tldraw_text_measure",a.classList.add("tl-text"),a.classList.add("tl-text-measure"),a.tabIndex=-1,r.appendChild(a),this.baseElm=a}measureElementTextNodeSpans(t,{shouldTruncateToFirstLine:r=!1}={}){const a=[],s=t.getBoundingClientRect(),n=-s.left,o=-s.top,i=new Range,l=t.childNodes[0];let c=0,d=null,p=null,f=0,h=0,y=!1;for(const m of t.childNodes)if(m.nodeType===Node.TEXT_NODE)for(const w of m.textContent??""){i.setStart(l,c),i.setEnd(l,c+w.length);const b=i.getClientRects(),_=b[b.length-1],x=_.top+o,C=_.left+n,k=_.right+n,F=C<h,P=KG.test(w);if(P!==p||x!==f||!d){if(d){if(r&&x!==f){y=!0;break}a.push(d)}d={box:{x:C,y:x,w:_.width,h:_.height},text:w},h=C}else F&&(d.box.x=C),d.box.w=F?d.box.w+_.width:k-d.box.x,d.text+=w;w===`
`&&(h=0),p=P,f=x,c+=w.length}return d&&a.push(d),{spans:a,didTruncate:y}}measureTextSpans(t,r){var c;if(t==="")return[];const a=(c=this.baseElm)==null?void 0:c.cloneNode();this.baseElm.insertAdjacentElement("afterend",a);const s=Math.ceil(r.width-r.padding*2);a.setAttribute("dir","auto"),a.style.setProperty("unicode-bidi","plaintext"),a.style.setProperty("width",`${s}px`),a.style.setProperty("height","min-content"),a.style.setProperty("font-size",`${r.fontSize}px`),a.style.setProperty("font-family",r.fontFamily),a.style.setProperty("font-weight",r.fontWeight),a.style.setProperty("line-height",`${r.lineHeight*r.fontSize}px`),a.style.setProperty("text-align",GG[r.textAlign]);const n=r.overflow==="truncate-ellipsis"||r.overflow==="truncate-clip";n&&(a.style.setProperty("overflow-wrap","anywhere"),a.style.setProperty("word-break","break-all"));const o=q6(t);a.textContent=o;const{spans:i,didTruncate:l}=this.measureElementTextNodeSpans(a,{shouldTruncateToFirstLine:n});if(r.overflow==="truncate-ellipsis"&&l){a.textContent="…";const d=Math.ceil(this.measureElementTextNodeSpans(a).spans[0].box.w);a.style.setProperty("width",`${s-d}px`),a.textContent=o;const p=this.measureElementTextNodeSpans(a,{shouldTruncateToFirstLine:!0}).spans,f=p[p.length-1];return p.push({text:"…",box:{x:Math.min(f.box.x+f.box.w,r.width-r.padding-d),y:f.box.y,w:d,h:f.box.h}}),p}return a.remove(),i}}const $6=(typeof process<"u",Xv);class YG{constructor(t){g(this,"cancelRaf");g(this,"isPaused",!0);g(this,"now",0);g(this,"start",()=>{var t;this.isPaused=!1,(t=this.cancelRaf)==null||t.call(this),this.cancelRaf=$6(this.tick),this.now=Date.now()});g(this,"tick",()=>{if(this.isPaused)return;const t=Date.now(),r=t-this.now;this.now=t,this.updatePointerVelocity(r),this.editor.emit("frame",r),this.editor.emit("tick",r),this.cancelRaf=$6(this.tick)});g(this,"dispose",()=>{var t;this.isPaused=!0,(t=this.cancelRaf)==null||t.call(this)});g(this,"prevPoint",new v);g(this,"updatePointerVelocity",t=>{const{prevPoint:r,editor:{inputs:{currentScreenPoint:a,pointerVelocity:s}}}=this;if(t===0)return;const n=v.Sub(a,r);this.prevPoint=a.clone();const o=n.len(),i=o?n.div(o):new v(0,0),l=s.clone().lrp(i.mul(o/t),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),s.equals(l)||(this.editor.inputs.pointerVelocity=l)});this.editor=t,this.editor.disposables.add(this.dispose),this.start()}}var XG=Object.defineProperty,ZG=Object.getOwnPropertyDescriptor,xs=(e,t,r,a)=>{for(var s=a>1?void 0:a?ZG(t,r):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(s=(a?o(t,r,s):o(s))||s);return a&&s&&XG(t,r,s),s};class Ga{constructor(t,r){g(this,"updateUserPreferences",t=>{this.user.setUserPreferences({...this.user.userPreferences.get(),...t})});this.user=t,this.inferDarkMode=r}getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode(),isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode()}}getIsDarkMode(){return this.user.userPreferences.get().isDarkMode??(this.inferDarkMode?WH():!1)}getEdgeScrollSpeed(){return this.user.userPreferences.get().edgeScrollSpeed??mo.edgeScrollSpeed}getAnimationSpeed(){return this.user.userPreferences.get().animationSpeed??mo.animationSpeed}getId(){return this.user.userPreferences.get().id}getName(){return this.user.userPreferences.get().name??mo.name}getLocale(){return this.user.userPreferences.get().locale??mo.locale}getColor(){return this.user.userPreferences.get().color??mo.color}getIsSnapMode(){return this.user.userPreferences.get().isSnapMode??mo.isSnapMode}getIsWrapMode(){return this.user.userPreferences.get().isWrapMode??mo.isWrapMode}}xs([K],Ga.prototype,"getUserPreferences",1);xs([K],Ga.prototype,"getIsDarkMode",1);xs([K],Ga.prototype,"getEdgeScrollSpeed",1);xs([K],Ga.prototype,"getAnimationSpeed",1);xs([K],Ga.prototype,"getId",1);xs([K],Ga.prototype,"getName",1);xs([K],Ga.prototype,"getLocale",1);xs([K],Ga.prototype,"getColor",1);xs([K],Ga.prototype,"getIsSnapMode",1);xs([K],Ga.prototype,"getIsWrapMode",1);const JG={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",long_press:"onLongPress",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick",tick:"onTick"},QG=["brushing","cropping","dragging","dragging_handle","drawing","erasing","lasering","resizing","rotating","scribble_brushing","translating"];class se{constructor(t,r){g(this,"performanceTracker");g(this,"id");g(this,"type");g(this,"shapeType");g(this,"initial");g(this,"children");g(this,"parent");g(this,"_path");g(this,"_current");g(this,"_isActive");g(this,"transition",(t,r={})=>{var n;const a=t.split(".");let s=this;for(let o=0;o<a.length;o++){const i=a[o],l=s.getCurrent(),c=(n=s.children)==null?void 0:n[i];if(!c)throw Error(`${s.id} - no child state exists with the id ${i}.`);if((l==null?void 0:l.id)!==c.id&&(l==null||l.exit(r,i),s._current.set(c),c.enter(r,(l==null?void 0:l.id)||"initial"),!c.getIsActive()))break;s=c}return this});g(this,"handleEvent",t=>{var s;const r=JG[t.name],a=this._current.__unsafe__getWithoutCapture();(s=this[r])==null||s.call(this,t),this._isActive.__unsafe__getWithoutCapture()&&a&&a===this._current.__unsafe__getWithoutCapture()&&a.handleEvent(t)});g(this,"enter",(t,r)=>{var a;if(vt.measurePerformance.get()&&QG.includes(this.id)&&this.performanceTracker.start(this.id),this._isActive.set(!0),(a=this.onEnter)==null||a.call(this,t,r),this.children&&this.initial&&this.getIsActive()){const s=this.children[this.initial];this._current.set(s),s.enter(t,r)}});g(this,"exit",(t,r)=>{var a,s;vt.measurePerformance.get()&&this.performanceTracker.isStarted()&&this.performanceTracker.stop(),this._isActive.set(!1),(a=this.onExit)==null||a.call(this,t,r),this.getIsActive()||(s=this.getCurrent())==null||s.exit(t,r)});g(this,"_currentToolIdMask",rr("curent tool id mask",void 0));g(this,"onWheel");g(this,"onPointerDown");g(this,"onPointerMove");g(this,"onLongPress");g(this,"onPointerUp");g(this,"onDoubleClick");g(this,"onTripleClick");g(this,"onQuadrupleClick");g(this,"onRightClick");g(this,"onMiddleClick");g(this,"onKeyDown");g(this,"onKeyUp");g(this,"onKeyRepeat");g(this,"onCancel");g(this,"onComplete");g(this,"onInterrupt");g(this,"onTick");g(this,"onEnter");g(this,"onExit");this.editor=t;const{id:a,children:s,initial:n}=this.constructor;this.id=a,this._isActive=rr("toolIsActive"+this.id,!1),this._current=rr("toolState"+this.id,void 0),this._path=K("toolPath"+this.id,()=>{const o=this.getCurrent();return this.id+(o?`.${o.getPath()}`:"")}),this.parent=r??{},this.parent?s&&n?(this.type="branch",this.initial=n,this.children=Object.fromEntries(s().map(o=>[o.id,new o(this.editor,this)])),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",s&&n&&(this.initial=n,this.children=Object.fromEntries(s().map(o=>[o.id,new o(this.editor,this)])),this._current.set(this.children[this.initial]))),this.performanceTracker=new Bv}getPath(){return this._path.get()}getCurrent(){return this._current.get()}getIsActive(){return this._isActive.get()}getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(t){this._currentToolIdMask.set(t)}}g(se,"id"),g(se,"initial"),g(se,"children");class zp extends se{constructor(){super(...arguments);g(this,"onKeyDown",r=>{var a;switch(r.code){case"KeyZ":{if(!(r.shiftKey||r.ctrlKey)){const s=this.getCurrent();s&&((a=s.getCurrent())==null?void 0:a.id)==="idle"&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...r,onInteractionEnd:s.id})}break}}})}}g(zp,"id","root"),g(zp,"initial",""),g(zp,"children",()=>[]);var eK=Object.defineProperty,tK=Object.getOwnPropertyDescriptor,te=(e,t,r,a)=>{for(var s=a>1?void 0:a?tK(t,r):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(s=(a?o(t,r,s):o(s))||s);return a&&s&&eK(t,r,s),s};class J extends JH{constructor({store:r,user:a,shapeUtils:s,bindingUtils:n,tools:o,getContainer:i,cameraOptions:l,initialState:c,autoFocus:d,inferDarkMode:p,options:f}){super();g(this,"options");g(this,"store");g(this,"root");g(this,"disposables",new Set);g(this,"_tickManager");g(this,"snaps");g(this,"timers");g(this,"user");g(this,"textMeasure");g(this,"environment");g(this,"scribbles");g(this,"sideEffects");g(this,"focusManager");g(this,"getContainer");g(this,"shapeUtils");g(this,"styleProps");g(this,"bindingUtils");g(this,"history");g(this,"_crashingError",null);g(this,"_updateInstanceState",(r,a)=>{this.batch(()=>{this.store.put([{...this.getInstanceState(),...r}])},a)});g(this,"_isChangingStyleTimeout",-1);g(this,"setCursor",r=>(this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...r}}),this));g(this,"_updateCurrentPageState",(r,a)=>{this.batch(()=>{this.store.update(r.id??this.getCurrentPageState().id,s=>({...s,...r}))},{history:"ignore",...a})});g(this,"_cameraOptions",rr("camera options",u6));g(this,"_viewportAnimation",null);g(this,"_willSetInitialBounds",!0);g(this,"_isLockedOnFollowingUser",rr("isLockedOnFollowingUser",!1));g(this,"_cameraState",rr("camera state","idle"));g(this,"_cameraStateTimeoutRemaining",0);g(this,"_decayCameraStateTimeout",r=>{this._cameraStateTimeoutRemaining-=r,!(this._cameraStateTimeoutRemaining>0)&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"))});g(this,"_tickCameraState",()=>{this._cameraStateTimeoutRemaining=this.options.cameraMovingTimeoutMs,this._cameraState.__unsafe__getWithoutCapture()==="idle"&&(this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout))});g(this,"_currentPageShapeIds");g(this,"_parentIdsToChildIds");g(this,"animatingShapes",new Map);g(this,"_updateShapes",r=>{this.getInstanceState().isReadonly||this.batch(()=>{var o,i;const a=[];let s,n;for(let l=0,c=r.length;l<c;l++){const d=r[l];d&&(s=this.getShape(d.id),s&&(n=As(s,d),n!==s&&(n=((i=(o=this.getShapeUtil(s)).onBeforeUpdate)==null?void 0:i.call(o,s,n))??n,a.push(n))))}this.store.put(a)})});g(this,"externalAssetContentHandlers",{file:null,url:null});g(this,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null});g(this,"inputs",{originPagePoint:new v,originScreenPoint:new v,previousPagePoint:new v,previousScreenPoint:new v,currentPagePoint:new v,currentScreenPoint:new v,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new v});g(this,"_clickManager",new PG(this));g(this,"_prevCursor","default");g(this,"_shiftKeyTimeout",-1);g(this,"_setShiftKeyTimeout",()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ShiftLeft"})});g(this,"_altKeyTimeout",-1);g(this,"_setAltKeyTimeout",()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"AltLeft"})});g(this,"_ctrlKeyTimeout",-1);g(this,"_setCtrlKeyTimeout",()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ControlLeft"})});g(this,"_restoreToolId","select");g(this,"_pinchStart",1);g(this,"_didPinch",!1);g(this,"_selectedShapeIdsAtPointerDown",[]);g(this,"_longPressTimeout",-1);g(this,"capturedPointerId",null);g(this,"performanceTracker");g(this,"performanceTrackerTimeout",-1);g(this,"dispatch",r=>(this._pendingEventsForNextTick.push(r),r.type==="pointer"&&r.name==="pointer_move"||r.type==="wheel"||r.type==="pinch"||this._flushEventsForTick(0),this));g(this,"_pendingEventsForNextTick",[]);g(this,"_flushEventForTick",r=>{if(this.getCrashingError())return this;const{inputs:a}=this,{type:s}=r;if(r.type==="misc"){(r.name==="cancel"||r.name==="complete")&&(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.setCursor({type:this._prevCursor,rotation:0}))),this.root.handleEvent(r);return}r.shiftKey?(clearTimeout(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,a.shiftKey=!0):!r.shiftKey&&a.shiftKey&&this._shiftKeyTimeout===-1&&(this._shiftKeyTimeout=this.timers.setTimeout(this._setShiftKeyTimeout,150)),r.altKey?(clearTimeout(this._altKeyTimeout),this._altKeyTimeout=-1,a.altKey=!0):!r.altKey&&a.altKey&&this._altKeyTimeout===-1&&(this._altKeyTimeout=this.timers.setTimeout(this._setAltKeyTimeout,150)),r.ctrlKey?(clearTimeout(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,a.ctrlKey=!0):!r.ctrlKey&&a.ctrlKey&&this._ctrlKeyTimeout===-1&&(this._ctrlKeyTimeout=this.timers.setTimeout(this._setCtrlKeyTimeout,150));const{originPagePoint:n,currentPagePoint:o}=a;a.isPointing||(a.isDragging=!1);const i=this.store.unsafeGetWithoutCapture(ur),l=this.store.get(this._getCurrentPageStateId()),c=this._cameraOptions.__unsafe__getWithoutCapture();switch(s){case"pinch":{if(c.isLocked)return;switch(clearTimeout(this._longPressTimeout),this._updateInputsFromEvent(r),r.name){case"pinch_start":{if(a.isPinching)return;a.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=[...l.selectedShapeIds]),this._didPinch=!0,a.isPinching=!0,this.interrupt());return}case"pinch":{if(!a.isPinching)return;const{point:{z:d=1},delta:{x:p,y:f}}=r,{x:h,y}=v.SubXY(r.point,i.screenBounds.x,i.screenBounds.y);this.stopCameraAnimation(),i.followingUserId&&this.stopFollowingUser();const{x:m,y:w,z:b}=Hm(()=>this.getCamera()),{panSpeed:_,zoomSpeed:x}=c;this._setCamera(new v(m+p*_/b-h/b+h/(d*x),w+f*_/b-y/b+y/(d*x),d*x),{immediate:!0});return}case"pinch_end":{if(!a.isPinching)return this;a.isPinching=!1;const{_selectedShapeIdsAtPointerDown:d}=this;this.setSelectedShapes(this._selectedShapeIdsAtPointerDown),this._selectedShapeIdsAtPointerDown=[],this._didPinch&&(this._didPinch=!1,d.length>0&&this.once("tick",()=>{this._didPinch||this.setSelectedShapes(d)}));return}}}case"wheel":{if(c.isLocked)return;if(this._updateInputsFromEvent(r),!this.getIsMenuOpen()){const{panSpeed:d,zoomSpeed:p,wheelBehavior:f}=c;if(f!=="none"){this.stopCameraAnimation(),i.followingUserId&&this.stopFollowingUser();const{x:h,y,z:m}=Hm(()=>this.getCamera()),{x:w,y:b,z:_=0}=r.delta;let x=f;switch(a.ctrlKey&&(x=f==="pan"?"zoom":"pan"),x){case"zoom":{const{x:C,y:k}=this.inputs.currentScreenPoint;let F=_;f==="zoom"&&(Math.abs(b)>10?F=10*Math.sign(b)/100:F=b/100);const P=m+(F??0)*p*m;this._setCamera(new v(h+(C/P-C)-(C/m-C),y+(k/P-k)-(k/m-k),P),{immediate:!0}),this.maybeTrackPerformance("Zooming");return}case"pan":{this._setCamera(new v(h+w*d/m,y+b*d/m,m),{immediate:!0}),this.maybeTrackPerformance("Panning");return}}}}break}case"pointer":{if(a.isPinching)return;this._updateInputsFromEvent(r);const{isPen:d}=r,{isPenMode:p}=i;switch(r.name){case"pointer_down":{if(p&&!d)return;if(this.clearOpenMenus(),this.inputs.isPanning||(this._longPressTimeout=this.timers.setTimeout(()=>{this.dispatch({...r,point:this.inputs.currentScreenPoint,name:"long_press"})},this.options.longPressDurationMs)),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),r.button===f6&&(this.capturedPointerId=r.pointerId),a.buttons.add(r.button),a.isPointing=!0,a.isDragging=!1,!p&&d&&this.updateInstanceState({isPenMode:!0}),r.button===h6?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):r.button===$u&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,clearTimeout(this._longPressTimeout)),this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing",rotation:0}),this;break}case"pointer_move":{if(!d&&p)return;const{x:f,y:h,z:y}=Hm(()=>this.getCamera());if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:m,previousScreenPoint:w}=this.inputs,{panSpeed:b}=c,_=v.Sub(m,w);this.setCamera(new v(f+_.x*b/y,h+_.y*b/y,y),{immediate:!0}),this.maybeTrackPerformance("Panning");return}a.isPointing&&!a.isDragging&&v.Dist2(n,o)*this.getZoomLevel()>(i.isCoarsePointer?this.options.coarseDragDistanceSquared:this.options.dragDistanceSquared)/y&&(a.isDragging=!0,clearTimeout(this._longPressTimeout));break}case"pointer_up":{if(a.isDragging=!1,a.isPointing=!1,clearTimeout(this._longPressTimeout),a.buttons.delete(r.button),this.getIsMenuOpen()||i.isPenMode&&!d)return;if(this.capturedPointerId===r.pointerId&&(this.capturedPointerId=null,r.button=0),a.isPanning){a.keys.has("Space")||(a.isPanning=!1);const f=this.inputs.pointerVelocity,h=Math.min(2,f.len());switch(r.button){case f6:{this.setCursor({type:"grab",rotation:0});break}case $u:this.inputs.keys.has(" ")?this.setCursor({type:"grab",rotation:0}):this.setCursor({type:this._prevCursor,rotation:0})}h>0&&this.slideCamera({speed:h,direction:f})}else r.button===h6&&(this.complete(),this.setCurrentTool(this._restoreToolId));break}}break}case"keyboard":{switch(r.key==="ShiftRight"&&(r.key="ShiftLeft"),r.key==="AltRight"&&(r.key="AltLeft"),r.code==="ControlRight"&&(r.code="ControlLeft"),r.name){case"key_down":{a.keys.add(r.code),r.code==="Space"&&!r.ctrlKey&&(this.inputs.isPanning||(this._prevCursor=i.cursor.type),this.inputs.isPanning=!0,clearTimeout(this._longPressTimeout),this.setCursor({type:this.inputs.isPointing?"grabbing":"grab",rotation:0}));break}case"key_up":{a.keys.delete(r.code),r.code==="Space"&&(this.inputs.buttons.has($u)||(this.inputs.isPanning=!1,this.setCursor({type:this._prevCursor,rotation:0})));break}}break}}if(r.type==="pointer"){r.button===$u?r.name="middle_click":r.button===W_&&(r.name="right_click");const{isPenMode:d}=this.store.unsafeGetWithoutCapture(ur);if(r.isPen===d){const p=this._clickManager.handlePointerEvent(r);if(r.name!==p.name){this.root.handleEvent(r),this.emit("event",r),this.root.handleEvent(p),this.emit("event",p);return}}}return this.root.handleEvent(r),this.emit("event",r),this});this.options={...uG,...f},this.store=r,this.history=new EG({store:r,annotateError:j=>{this.annotateError(j,{origin:"history.batch",willCrashApp:!0}),this.crash(j)}}),this.snaps=new pg(this),this.timers=new lN,this.disposables.add(this.timers.dispose.bind(this.timers)),this._cameraOptions.set({...u6,...l}),this.user=new Ga(a??MS(),p??!1),this.getContainer=i??(()=>document.body),this.textMeasure=new VG(this),this._tickManager=new YG(this);class h extends zp{}g(h,"initial",c??""),this.root=new h(this),this.root.children={};const y=US(s),m={},w={},b=new Map;for(const j of y){const A=new j(this);m[j.type]=A;const D=px(j.props??{});w[j.type]=D;for(const z of D.keys())if(!b.has(z.id))b.set(z.id,z);else if(b.get(z.id)!==z)throw Error(`Multiple style props with id "${z.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=m,this.styleProps=w;const _=qS(n),x={};for(const j of _){const A=new j(this);x[j.type]=A}this.bindingUtils=x;for(const j of[...o]){if(cs(this.root.children,j.id))throw Error(`Can't override tool with id "${j.id}"`);this.root.children[j.id]=new j(this,this.root)}this.environment=new IG(this),this.scribbles=new MG(this);const C=(j,A)=>{let D=null;const z=j.selectedShapeIds.filter(L=>!A.has(L));z.length!==j.selectedShapeIds.length&&(D||(D={...j}),D.selectedShapeIds=z);const T=j.erasingShapeIds.filter(L=>!A.has(L));T.length!==j.erasingShapeIds.length&&(D||(D={...j}),D.erasingShapeIds=T),j.hoveredShapeId&&A.has(j.hoveredShapeId)&&(D||(D={...j}),D.hoveredShapeId=null),j.editingShapeId&&A.has(j.editingShapeId)&&(D||(D={...j}),D.editingShapeId=null);const M=j.hintingShapeIds.filter(L=>!A.has(L));return M.length!==j.hintingShapeIds.length&&(D||(D={...j}),D.hintingShapeIds=M),j.focusedGroupId&&A.has(j.focusedGroupId)&&(D||(D={...j}),D.focusedGroupId=null),D};this.sideEffects=this.store.sideEffects;let k=new Map;const F=new Set,P=new Set;let I=new Set;if(this.disposables.add(this.sideEffects.registerOperationCompleteHandler(()=>{var j,A,D,z;F.clear();for(const T of P){P.delete(T);const M=this.getShape(T);if(!M)continue;const L=this.getShapeUtil(M),G=(j=L.onChildrenChange)==null?void 0:j.call(L,M);G!=null&&G.length&&this.updateShapes(G)}if(I.size){const T=I;I=new Set;for(const M of T){const L=this.getBindingUtil(M);(A=L.onOperationComplete)==null||A.call(L)}}if(k.size){const T=k;k=new Map;for(const M of T.values())(z=(D=this.getBindingUtil(M.binding)).onAfterDelete)==null||z.call(D,M)}this.emit("update")})),this.disposables.add(this.sideEffects.register({shape:{afterChange:(j,A)=>{var D,z,T,M;for(const L of this.getBindingsInvolvingShape(A))I.add(L.type),L.fromId===A.id&&((z=(D=this.getBindingUtil(L)).onAfterChangeFromShape)==null||z.call(D,{binding:L,shapeBefore:j,shapeAfter:A})),L.toId===A.id&&((M=(T=this.getBindingUtil(L)).onAfterChangeToShape)==null||M.call(T,{binding:L,shapeBefore:j,shapeAfter:A}));if(j.parentId!==A.parentId){const L=G=>{var O,$,U,X;const W=this.getShape(G);if(W)for(const ne of this.getBindingsInvolvingShape(W))I.add(ne.type),ne.fromId===W.id&&(($=(O=this.getBindingUtil(ne)).onAfterChangeFromShape)==null||$.call(O,{binding:ne,shapeBefore:W,shapeAfter:W})),ne.toId===W.id&&((X=(U=this.getBindingUtil(ne)).onAfterChangeToShape)==null||X.call(U,{binding:ne,shapeBefore:W,shapeAfter:W}))};L(A.id),this.visitDescendants(A.id,L)}if(j.parentId!==A.parentId&&Sr(A.parentId)){const L=new Set([j.id]);this.visitDescendants(j.id,G=>{L.add(G)});for(const G of this.getPageStates()){if(G.pageId===A.parentId)continue;const W=C(G,L);W&&this.store.put([W])}}j.parentId&&Kr(j.parentId)&&P.add(j.parentId),A.parentId!==j.parentId&&Kr(A.parentId)&&P.add(A.parentId)},beforeDelete:j=>{var T,M,L,G;if(F.has(j.id))return;j.parentId&&Kr(j.parentId)&&P.add(j.parentId),F.add(j.id);const A=[];for(const W of this.getBindingsInvolvingShape(j)){I.add(W.type),A.push(W.id);const O=this.getBindingUtil(W);W.fromId===j.id?((T=O.onBeforeIsolateToShape)==null||T.call(O,{binding:W,removedShape:j}),(M=O.onBeforeDeleteFromShape)==null||M.call(O,{binding:W,shape:j})):((L=O.onBeforeIsolateFromShape)==null||L.call(O,{binding:W,removedShape:j}),(G=O.onBeforeDeleteToShape)==null||G.call(O,{binding:W,shape:j}))}A.length&&this.deleteBindings(A);const D=new Set([j.id]),z=ge(this.getPageStates().map(W=>C(W,D)));z.length&&this.store.put(z)}},binding:{beforeCreate:j=>{var D,z;const A=(z=(D=this.getBindingUtil(j)).onBeforeCreate)==null?void 0:z.call(D,{binding:j});return A||j},afterCreate:j=>{var A,D;I.add(j.type),(D=(A=this.getBindingUtil(j)).onAfterCreate)==null||D.call(A,{binding:j})},beforeChange:(j,A)=>{var z,T;const D=(T=(z=this.getBindingUtil(A)).onBeforeChange)==null?void 0:T.call(z,{bindingBefore:j,bindingAfter:A});return D||A},afterChange:(j,A)=>{var D,z;I.add(A.type),(z=(D=this.getBindingUtil(A)).onAfterChange)==null||z.call(D,{bindingBefore:j,bindingAfter:A})},beforeDelete:j=>{var A,D;(D=(A=this.getBindingUtil(j)).onBeforeDelete)==null||D.call(A,{binding:j})},afterDelete:j=>{var A,D;(D=(A=this.getBindingUtil(j)).onAfterDelete)==null||D.call(A,{binding:j}),I.add(j.type)}},page:{afterCreate:j=>{const A=ns.createId(j.id),D=La.createId(j.id);this.store.has(A)||this.store.put([ns.create({id:A})]),this.store.has(D)||this.store.put([La.create({id:D,pageId:j.id})])},afterDelete:(j,A)=>{var T,M;if(((T=this.getInstanceState())==null?void 0:T.currentPageId)===j.id){const L=(M=this.getPages().find(G=>G.id!==j.id))==null?void 0:M.id;L?this.store.put([{...this.getInstanceState(),currentPageId:L}]):A==="user"&&this.store.ensureStoreIsUsable()}const D=ns.createId(j.id),z=La.createId(j.id);this.store.remove([D,z])}},instance:{afterChange:(j,A,D)=>{var z;if(!this.store.has(A.currentPageId)){const T=this.store.has(j.currentPageId)?j.currentPageId:(z=this.getPages()[0])==null?void 0:z.id;T?this.store.update(A.id,M=>({...M,currentPageId:T})):D==="user"&&this.store.ensureStoreIsUsable()}}},instance_page_state:{afterChange:(j,A)=>{if((j==null?void 0:j.selectedShapeIds)!==(A==null?void 0:A.selectedShapeIds)){const D=A.selectedShapeIds.filter(T=>{var L,G;let M=(L=this.getShape(T))==null?void 0:L.parentId;for(;Kr(M);){if(A.selectedShapeIds.includes(M))return!1;M=(G=this.getShape(M))==null?void 0:G.parentId}return!0});let z=null;if(D.length>0){const T=this.findCommonAncestor(ge(D.map(M=>this.getShape(M))),M=>this.isShapeOfType(M,"group"));T&&(z=T)}else A!=null&&A.focusedGroupId&&(z=A.focusedGroupId);(D.length!==A.selectedShapeIds.length||z!==A.focusedGroupId)&&this.store.put([{...A,selectedShapeIds:D,focusedGroupId:z??null}])}}}})),this._currentPageShapeIds=SG(this.store,()=>this.getCurrentPageId()),this._parentIdsToChildIds=xG(this.store),this.disposables.add(this.store.listen(j=>{this.emit("change",j)})),this.disposables.add(this.history.dispose),this.history.ignore(()=>{this.store.ensureStoreIsUsable(),this._updateCurrentPageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]})}),c&&this.root.children[c]===void 0)throw Error(`No state found for initialState "${c}".`);this.root.enter(void 0,"initial"),this.focusManager=new AG(this,d),this.disposables.add(this.focusManager.dispose.bind(this.focusManager)),this.getInstanceState().followingUserId&&this.stopFollowingUser(),this.on("tick",this._flushEventsForTick),this.timers.requestAnimationFrame(()=>{this._tickManager.start()}),this.performanceTracker=new Bv}dispose(){this.disposables.forEach(r=>r()),this.disposables.clear()}getShapeUtil(r){const a=typeof r=="string"?r:r.type,s=jr(this.shapeUtils,a);return at(s,`No shape util found for type "${a}"`),s}getBindingUtil(r){const a=typeof r=="string"?r:r.type,s=jr(this.bindingUtils,a);return at(s,`No binding util found for type "${a}"`),s}undo(){return this._flushEventsForTick(0),this.complete(),this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this._flushEventsForTick(0),this.complete(),this.history.redo(),this}getCanRedo(){return this.history.getNumRedos()>0}mark(r){return this.history.mark(r),this}bail(){return this.history.bail(),this}bailToMark(r){return this.history.bailToMark(r),this}batch(r,a){return this.history.batch(r,a),this}annotateError(r,{origin:a,willCrashApp:s,tags:n,extras:o}){const i=this.createErrorAnnotations(a,s);return F_(r,{tags:{...i.tags,...n},extras:{...i.extras,...o}}),s&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(r,a){try{const s=this.getEditingShapeId();return{tags:{origin:r,willCrashApp:a},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes(),editingShape:s?this.getShape(s):void 0,inputs:this.inputs}}}catch{return{tags:{origin:r,willCrashApp:a},extras:{}}}}getCrashingError(){return this._crashingError}crash(r){return this._crashingError=r,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:r}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(r){const a=r.split(".").reverse();let s=this.root;for(;a.length>0;){const n=a.pop();if(!n)return!0;const o=s.getCurrent();if((o==null?void 0:o.id)===n){if(a.length===0)return!0;s=o;continue}else return!1}return!1}isInAny(...r){return r.some(a=>this.isIn(a))}setCurrentTool(r,a={}){return this.root.transition(r,a),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){const r=this.getCurrentTool();return r?r.getCurrentToolIdMask()??r.id:""}getStateDescendant(r){var n;const a=r.split(".").reverse();let s=this.root;for(;a.length>0;){const o=a.pop();if(!o)return s;const i=(n=s.children)==null?void 0:n[o];if(!i)return;s=i}return s}getDocumentSettings(){return this.store.get(xb)}updateDocumentSettings(r){return this.history.ignore(()=>{this.store.put([{...this.getDocumentSettings(),...r}])}),this}getInstanceState(){return this.store.get(ur)}updateInstanceState(r,a){return this._updateInstanceState(r,{history:"ignore",...a}),r.isChangingStyle!==void 0&&(clearTimeout(this._isChangingStyleTimeout),r.isChangingStyle===!0&&(this._isChangingStyleTimeout=this.timers.setTimeout(()=>{this._updateInstanceState({isChangingStyle:!1},{history:"ignore"})},2e3))),this}getOpenMenus(){return this.getInstanceState().openMenus}addOpenMenu(r){const a=new Set(this.getOpenMenus());return a.has(r)||(a.add(r),this.updateInstanceState({openMenus:[...a]})),this}deleteOpenMenu(r){const a=new Set(this.getOpenMenus());return a.has(r)&&(a.delete(r),this.updateInstanceState({openMenus:[...a]})),this}clearOpenMenus(){return this.getOpenMenus().length&&this.updateInstanceState({openMenus:[]}),this}getIsMenuOpen(){return this.getOpenMenus().length>0}getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return La.createId(this.getCurrentPageId())}updateCurrentPageState(r,a){return this._updateCurrentPageState(r,a),this}getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){const{selectedShapeIds:r}=this.getCurrentPageState();return ge(r.map(a=>this.store.get(a)))}setSelectedShapes(r){return this.batch(()=>{const a=r.map(o=>typeof o=="string"?o:o.id),{selectedShapeIds:s}=this.getCurrentPageState(),n=new Set(s);if(a.length===n.size&&a.every(o=>n.has(o)))return null;this.store.put([{...this.getCurrentPageState(),selectedShapeIds:a}])},{history:"record-preserveRedoStack"})}isAncestorSelected(r){const a=typeof r=="string"?r:(r==null?void 0:r.id)??null,s=this.getShape(a);if(!s)return!1;const n=this.getSelectedShapeIds();return!!this.findShapeAncestor(s,o=>n.includes(o.id))}select(...r){const a=typeof r[0]=="string"?r:r.map(s=>s.id);return this.setSelectedShapes(a),this}deselect(...r){const a=typeof r[0]=="string"?r:r.map(n=>n.id),s=this.getSelectedShapeIds();return s.length>0&&a.length>0&&this.setSelectedShapes(s.filter(n=>!a.includes(n))),this}selectAll(){const r=this.getSortedChildIdsForParent(this.getCurrentPageId());return r.length<=0?this:(this.setSelectedShapes(this._getUnlockedShapeIds(r)),this)}selectNone(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}getOnlySelectedShapeId(){var r;return((r=this.getOnlySelectedShape())==null?void 0:r.id)??null}getOnlySelectedShape(){const r=this.getSelectedShapes();return r.length===1?r[0]:null}getSelectionPageBounds(){const r=this.getCurrentPageState().selectedShapeIds;return r.length===0?null:Z.Common(ge(r.map(a=>this.getShapePageBounds(a))))}getSelectionRotation(){const r=this.getSelectedShapeIds();let a=!1,s=0;for(let n=0,o=r.length;n<o;n++){const i=this.getShapePageTransform(r[n]);if(i)if(a){if(i.rotation()!==s)return 0}else a=!0,s=i.rotation()}return s}getSelectionRotatedPageBounds(){const r=this.getSelectedShapeIds();if(r.length===0)return;const a=this.getSelectionRotation();if(a===0)return this.getSelectionPageBounds();if(r.length===1){const n=this.getShapeGeometry(r[0]).bounds.clone(),o=this.getShapePageTransform(r[0]);return n.point=o.applyToPoint(n.point),n}const s=Z.FromPoints(this.getSelectedShapeIds().flatMap(n=>{const o=this.getShapePageTransform(n);return o?o.applyToPoints(this.getShapeGeometry(n).bounds.corners):[]}).map(n=>n.rot(-a)));return s.point=s.point.rot(a),s}getSelectionRotatedScreenBounds(){const r=this.getSelectionRotatedPageBounds();if(!r)return;const{x:a,y:s}=this.pageToScreen(r.point),n=this.getZoomLevel();return new Z(a,s,r.width*n,r.height*n)}getFocusedGroupId(){return this.getCurrentPageState().focusedGroupId??this.getCurrentPageId()}getFocusedGroup(){const r=this.getFocusedGroupId();return r?this.getShape(r):void 0}setFocusedGroup(r){const a=typeof r=="string"?r:(r==null?void 0:r.id)??null;if(a!==null){const s=this.getShape(a);if(!s)throw Error(`Editor.setFocusedGroup: Shape with id ${a} does not exist`);if(!this.isShapeOfType(s,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${s.type}`)}return a===this.getFocusedGroupId()?this:this.batch(()=>{this.store.update(this.getCurrentPageState().id,s=>({...s,focusedGroupId:a}))},{history:"record-preserveRedoStack"})}popFocusedGroupId(){const r=this.getFocusedGroup();if(r){const a=this.findShapeAncestor(r,s=>this.isShapeOfType(s,"group"));this.setFocusedGroup((a==null?void 0:a.id)??null),this.select(r.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const r=this.getEditingShapeId();return r?this.getShape(r):void 0}setEditingShape(r){const a=typeof r=="string"?r:(r==null?void 0:r.id)??null;if(a!==this.getEditingShapeId()){if(a){const s=this.getShape(a);if(s&&this.getShapeUtil(s).canEdit(s))return this._updateCurrentPageState({editingShapeId:a}),this}this._updateCurrentPageState({editingShapeId:null})}return this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const r=this.getHoveredShapeId();return r?this.getShape(r):void 0}setHoveredShape(r){const a=typeof r=="string"?r:(r==null?void 0:r.id)??null;return a===this.getHoveredShapeId()?this:(this.updateCurrentPageState({hoveredShapeId:a},{history:"ignore"}),this)}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){const r=this.getHintingShapeIds();return ge(r.map(a=>this.getShape(a)))}setHintingShapes(r){const a=typeof r[0]=="string"?r:r.map(s=>s.id);return this.updateCurrentPageState({hintingShapeIds:k_(a)},{history:"ignore"}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){const r=this.getErasingShapeIds();return ge(r.map(a=>this.getShape(a)))}setErasingShapes(r){const a=typeof r[0]=="string"?r:r.map(n=>n.id);a.sort();const s=this.getErasingShapeIds();return this.history.ignore(()=>{if(a.length===s.length){for(let n=0;n<a.length;n++)if(a[n]!==s[n]){this._updateCurrentPageState({erasingShapeIds:a});break}}else this._updateCurrentPageState({erasingShapeIds:a})}),this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(r){const a=typeof r=="string"?r:(r==null?void 0:r.id)??null;if(a!==this.getCroppingShapeId())if(!a)this.updateCurrentPageState({croppingShapeId:null});else{const s=this.getShape(a),n=this.getShapeUtil(s);s&&n.canCrop(s)&&this.updateCurrentPageState({croppingShapeId:a})}return this}getCameraId(){return ns.createId(this.getCurrentPageId())}getCamera(){const r=this.store.get(this.getCameraId());if(this._isLockedOnFollowingUser.get()){const a=this.getCameraForFollowing();if(a)return{...r,...a}}return r}getViewportPageBoundsForFollowing(){const r=this.getInstanceState().followingUserId;if(!r)return null;const a=this.getCollaborators().find(f=>f.userId===r);if(!a)return null;const{w:s,h:n}=a.screenBounds,{x:o,y:i,z:l}=a.camera,c=new Z(-o,-i,s/l,n/l),d=this.getViewportScreenBounds().clone(),p=d.width/d.height;return d.width=c.width,d.height=d.width/p,d.height<c.height&&(d.height=c.height,d.width=d.height*p),d.center=c.center,d}getCameraForFollowing(){const r=this.getViewportPageBoundsForFollowing();return r?{x:-r.x,y:-r.y,z:this.getViewportScreenBounds().w/r.width}:null}getZoomLevel(){return this.getCamera().z}getInitialZoom(){const r=this.getCameraOptions();if(!r.constraints||r.constraints.initialZoom==="default")return 1;const{zx:a,zy:s}=W6(this,r);switch(r.constraints.initialZoom){case"fit-min":return Math.max(a,s);case"fit-max":return Math.min(a,s);case"fit-x":return a;case"fit-y":return s;case"fit-min-100":return Math.min(1,Math.max(a,s));case"fit-max-100":return Math.min(1,Math.min(a,s));case"fit-x-100":return Math.min(1,a);case"fit-y-100":return Math.min(1,s);default:throw tr(r.constraints.initialZoom)}}getBaseZoom(){const r=this.getCameraOptions();if(!r.constraints||r.constraints.baseZoom==="default")return 1;const{zx:a,zy:s}=W6(this,r);switch(r.constraints.baseZoom){case"fit-min":return Math.max(a,s);case"fit-max":return Math.min(a,s);case"fit-x":return a;case"fit-y":return s;case"fit-min-100":return Math.min(1,Math.max(a,s));case"fit-max-100":return Math.min(1,Math.min(a,s));case"fit-x-100":return Math.min(1,a);case"fit-y-100":return Math.min(1,s);default:throw tr(r.constraints.baseZoom)}}getCameraOptions(){return this._cameraOptions.get()}setCameraOptions(r){var s;const a=mt({...this._cameraOptions.__unsafe__getWithoutCapture(),...r});return((s=a.zoomSteps)==null?void 0:s.length)<1&&(a.zoomSteps=[1]),this._cameraOptions.set(a),this}getConstrainedCamera(r,a){const s=this.getCamera();let{x:n,y:o,z:i=s.z}=r;if(!(a!=null&&a.force)){const l=this.getCameraOptions(),c=l.zoomSteps[0],d=Lt(l.zoomSteps),p=this.getViewportScreenBounds();if(l.constraints){const{constraints:f}=l,h=Math.min(f.padding.y,p.w/2),y=Math.min(f.padding.x,p.h/2),m=Z.From(l.constraints.bounds),w=(p.w-y*2)/m.w,b=(p.h-h*2)/m.h,_=this.getBaseZoom(),x=d*_,C=c*_;if(a!=null&&a.reset&&(i=this.getInitialZoom()),i<C||i>x){const{x:T,y:M,z:L}=s,G=-T+p.w/L/2,W=-M+p.h/L/2;i=Pt(i,C,x);const O=-T+p.w/i/2,$=-M+p.h/i/2;n=T+O-G,o=M+$-W}const k=y/i-m.x,F=h/i-m.y,P=(p.w-y*2)/i-m.w,I=(p.h-h*2)/i-m.h,j=k+P*f.origin.x,A=F+I*f.origin.y,D=typeof f.behavior=="string"?f.behavior:f.behavior.x,z=typeof f.behavior=="string"?f.behavior:f.behavior.y;if(a!=null&&a.reset)n=j,o=A;else{switch(D){case"fixed":{n=j;break}case"contain":{i<w?n=j:n=Pt(n,k+P,k);break}case"inside":{i<w?n=Pt(n,k,(p.w-y)/i-m.w):n=Pt(n,k+P,k);break}case"outside":{n=Pt(n,y/i-m.w,(p.w-y)/i);break}case"free":break;default:throw tr(D)}switch(z){case"fixed":{o=A;break}case"contain":{i<b?o=A:o=Pt(o,F+I,F);break}case"inside":{i<b?o=Pt(o,F,(p.h-h)/i-m.h):o=Pt(o,F+I,F);break}case"outside":{o=Pt(o,h/i-m.h,(p.h-h)/i);break}case"free":break;default:throw tr(z)}}}else if(i>d||i<c){const{x:f,y:h,z:y}=s;i=Pt(i,c,d),n=f+(-f+p.w/i/2)-(-f+p.w/y/2),o=h+(-h+p.h/i/2)-(-h+p.h/y/2)}}return{x:n,y:o,z:i}}_setCamera(r,a){const s=this.getCamera(),{x:n,y:o,z:i}=this.getConstrainedCamera(r,a);return s.x===n&&s.y===o&&s.z===i?this:(this.batch(()=>{const l={...s,x:n,y:o,z:i};this.history.ignore(()=>{this.store.put([l])});const{currentScreenPoint:c,currentPagePoint:d}=this.inputs,{screenBounds:p}=this.store.unsafeGetWithoutCapture(ur);if(c.x/i-n!==d.x||c.y/i-o!==d.y){const f={type:"pointer",target:"canvas",name:"pointer_move",point:v.AddXY(c,p.x,p.y),pointerId:p6.CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,button:0,isPen:this.getInstanceState().isPenMode??!1};a!=null&&a.immediate?this._flushEventForTick(f):this.dispatch(f)}this._tickCameraState()}),this)}setCamera(r,a){const{isLocked:s}=this._cameraOptions.__unsafe__getWithoutCapture();if(s&&!(a!=null&&a.force))return this;this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser();const n=v.Cast(r);Number.isFinite(n.x)||(n.x=0),Number.isFinite(n.y)||(n.y=0),(n.z===void 0||!Number.isFinite(n.z))&&(r.z=this.getZoomLevel());const o=this.getConstrainedCamera(n,a);if(a!=null&&a.animation){const{width:i,height:l}=this.getViewportScreenBounds();this._animateToViewport(new Z(-o.x,-o.y,i/o.z,l/o.z),a)}else this._setCamera(o,{...a,force:!0});return this}centerOnPoint(r,a){if(this.getCameraOptions().isLocked)return this;const{width:s,height:n}=this.getViewportPageBounds();return this.setCamera(new v(-(r.x-s/2),-(r.y-n/2),this.getCamera().z),a),this}zoomToFit(r){const a=[...this.getCurrentPageShapeIds()];if(a.length<=0)return this;const s=Z.Common(ge(a.map(n=>this.getShapePageBounds(n))));return this.zoomToBounds(s,r),this}resetZoom(r=this.getViewportScreenCenter(),a){const{isLocked:s,constraints:n}=this.getCameraOptions();if(s)return this;const o=this.getCamera(),{x:i,y:l,z:c}=o,{x:d,y:p}=r;let f=1;if(n){const h=this.getInitialZoom();c!==h&&(f=h)}return this.setCamera(new v(i+(d/f-d)-(d/c-d),l+(p/f-p)-(p/c-p),f),a),this}zoomIn(r=this.getViewportScreenCenter(),a){if(this.getCameraOptions().isLocked)return this;const{x:s,y:n,z:o}=this.getCamera(),{zoomSteps:i}=this.getCameraOptions();if(i!==null&&i.length>1){const l=this.getBaseZoom();let c=Lt(i)*l;for(let d=1;d<i.length;d++){const p=i[d-1]*l,f=i[d]*l;if(!(f-o<=(f-p)/2)){c=f;break}}this.setCamera(new v(s+(r.x/c-r.x)-(r.x/o-r.x),n+(r.y/c-r.y)-(r.y/o-r.y),c),a)}return this}zoomOut(r=this.getViewportScreenCenter(),a){if(this.getCameraOptions().isLocked)return this;const{zoomSteps:s}=this.getCameraOptions();if(s!==null&&s.length>1){const n=this.getBaseZoom(),{x:o,y:i,z:l}=this.getCamera();let c=s[0]*n;for(let d=s.length-1;d>0;d--){const p=s[d-1]*n,f=s[d]*n;if(!(f-l>=(f-p)/2)){c=p;break}}this.setCamera(new v(o+(r.x/c-r.x)-(r.x/l-r.x),i+(r.y/c-r.y)-(r.y/l-r.y),c),a)}return this}zoomToSelection(r){if(this.getCameraOptions().isLocked)return this;const a=this.getSelectionPageBounds();return a&&this.zoomToBounds(a,{targetZoom:Math.max(1,this.getZoomLevel()),...r}),this}zoomToBounds(r,a){const s=this._cameraOptions.__unsafe__getWithoutCapture();if(s.isLocked)return this;const n=this.getViewportScreenBounds(),o=(a==null?void 0:a.inset)??Math.min(u$,n.width*.28),i=this.getBaseZoom(),l=s.zoomSteps[0],c=Lt(s.zoomSteps);let d=Pt(Math.min((n.width-o)/r.w,(n.height-o)/r.h),l*i,c*i);return(a==null?void 0:a.targetZoom)!==void 0&&(d=Math.min(a.targetZoom,d)),this.setCamera(new v(-r.x+(n.width-r.w*d)/2/d,-r.y+(n.height-r.h*d)/2/d,d),a),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(r){if(!this._viewportAnimation)return;this._viewportAnimation.elapsed+=r;const{elapsed:a,easing:s,duration:n,start:o,end:i}=this._viewportAnimation;if(a>n){this.off("tick",this._animateViewport),this._viewportAnimation=null,this._setCamera(new v(-i.x,-i.y,this.getViewportScreenBounds().width/i.width));return}const l=n-a,c=s(1-l/n),d=o.minX+(i.minX-o.minX)*c,p=o.minY+(i.minY-o.minY)*c,f=o.maxX+(i.maxX-o.maxX)*c;this._setCamera(new v(-d,-p,this.getViewportScreenBounds().width/(f-d)),{force:!0})}_animateToViewport(r,a={animation:Jm}){const{animation:s,...n}=a;if(!s)return;const{duration:o=0,easing:i=ar.easeInOutCubic}=s,l=this.user.getAnimationSpeed(),c=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),o===0||l===0?this._setCamera(new v(-r.x,-r.y,this.getViewportScreenBounds().width/r.width),{...n}):(this._viewportAnimation={elapsed:0,duration:o/l,easing:i,start:c.clone(),end:r.clone()},this.once("stop-camera-animation",()=>{this.off("tick",this._animateViewport),this._viewportAnimation=null}),this.on("tick",this._animateViewport),this)}slideCamera(r={}){if(this.getCameraOptions().isLocked)return this;if(this.user.getAnimationSpeed()===0)return this;this.stopCameraAnimation();const{speed:s,friction:n=this.options.cameraSlideFriction,direction:o,speedThreshold:i=.01}=r;let l=Math.min(s,1);const c=()=>{this.off("tick",d),this.off("stop-camera-animation",c)};this.once("stop-camera-animation",c);const d=p=>{const{x:f,y:h,z:y}=this.getCamera(),m=v.Mul(o,l*p/y);l*=1-n,l<i?c():this._setCamera(new v(f+m.x,h+m.y,y))};return this.on("tick",d),this}zoomToUser(r,a={animation:{duration:500}}){const s=this.getCollaborators().find(n=>n.userId===r);return s?(this.batch(()=>{this.getInstanceState().followingUserId!==null&&this.stopFollowingUser();const n=s.currentPageId===this.getCurrentPageId();n||this.setCurrentPage(s.currentPageId),a&&a.animation&&!n&&(a.animation=void 0),this.centerOnPoint(s.cursor,a);const{highlightedUserIds:o}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...o,r]}),this.timers.setTimeout(()=>{const i=[...this.getInstanceState().highlightedUserIds],l=i.indexOf(r);l<0||(i.splice(l,1),this.updateInstanceState({highlightedUserIds:i}))},this.options.collaboratorIdleTimeoutMs)}),this):this}updateViewportScreenBounds(r,a=!1){r.width=Math.max(r.width,1),r.height=Math.max(r.height,1);const s=[r.minY!==0,document.body.scrollWidth!==r.maxX,document.body.scrollHeight!==r.maxY,r.minX!==0],{screenBounds:n,insets:o}=this.getInstanceState();if(r.equals(n)&&s.every((l,c)=>l===o[c]))return this;const{_willSetInitialBounds:i}=this;if(this._willSetInitialBounds=!1,i)this.updateInstanceState({screenBounds:r.toJson(),insets:s}),this.setCamera(this.getCamera());else if(a&&!this.getInstanceState().followingUserId){const l=this.getViewportPageBounds().center;this.updateInstanceState({screenBounds:r.toJson(),insets:s}),this.centerOnPoint(l)}else this.updateInstanceState({screenBounds:r.toJson(),insets:s}),this._setCamera(v.From({...this.getCamera()}));return this._tickCameraState(),this}getViewportScreenBounds(){const{x:r,y:a,w:s,h:n}=this.getInstanceState().screenBounds;return new Z(r,a,s,n)}getViewportScreenCenter(){const r=this.getViewportScreenBounds();return new v(r.midX-r.minX,r.midY-r.minY)}getViewportPageBounds(){const{w:r,h:a}=this.getViewportScreenBounds(),{x:s,y:n,z:o}=this.getCamera();return new Z(-s,-n,r/o,a/o)}screenToPage(r){const{screenBounds:a}=this.store.unsafeGetWithoutCapture(ur),{x:s,y:n,z:o=1}=this.getCamera();return new v((r.x-a.x)/o-s,(r.y-a.y)/o-n,r.z??.5)}pageToScreen(r){const{screenBounds:a}=this.store.unsafeGetWithoutCapture(ur),{x:s,y:n,z:o=1}=this.getCamera();return new v((r.x+s)*o+a.x,(r.y+n)*o+a.y,r.z??.5)}pageToViewport(r){const{x:a,y:s,z:n=1}=this.getCamera();return new v((r.x+a)*n,(r.y+s)*n,r.z??.5)}_getCollaboratorsQuery(){return this.store.query.records("instance_presence",()=>({userId:{neq:this.user.getId()}}))}getCollaborators(){const r=this._getCollaboratorsQuery().get();return r.length?[...new Set(r.map(s=>s.userId))].sort().map(s=>r.filter(o=>o.userId===s).sort((o,i)=>i.lastActivityTimestamp-o.lastActivityTimestamp)[0]):zs}getCollaboratorsOnCurrentPage(){const r=this.getCurrentPageId();return this.getCollaborators().filter(a=>a.currentPageId===r)}startFollowingUser(r){this.stopFollowingUser();const a=this._getCollaboratorsQuery().get().filter(o=>o.userId===r);if(!a.length)return console.warn("User not found"),this;const s=this.user.getId();if(s||console.warn("You should set the userId for the current instance before following a user"),a.some(o=>o.followingUserId===s))return this;const n=K("latestLeaderPresence",()=>this.getCollaborators().find(o=>o.userId===r));return Ao(()=>{this.updateInstanceState({followingUserId:r},{history:"ignore"});const o=Jo("update current page",()=>{const c=n.get();if(!c){this.stopFollowingUser();return}c.currentPageId!==this.getCurrentPageId()&&this.getPage(c.currentPageId)&&this.history.ignore(()=>{this.store.put([{...this.getInstanceState(),currentPageId:c.currentPageId}]),this._isLockedOnFollowingUser.set(!0)})}),i=()=>{o(),this._isLockedOnFollowingUser.set(!1),this.off("frame",l),this.off("stop-following",i)},l=()=>{if(!n.get()){this.stopFollowingUser();return}if(this._isLockedOnFollowingUser.get())return;const d=this.user.getAnimationSpeed();if(d===0){this._isLockedOnFollowingUser.set(!0);return}const p=this.getViewportPageBoundsForFollowing();if(!p){this.stopFollowingUser();return}const f=this.getViewportPageBounds(),h=Math.abs(p.minX-f.minX)+Math.abs(p.maxX-f.maxX),y=Math.abs(p.minY-f.minY)+Math.abs(p.maxY-f.maxY);if(h<this.options.followChaseViewportSnap&&y<this.options.followChaseViewportSnap){this._isLockedOnFollowingUser.set(!0);return}const m=Pt(d*.5,.1,.8),w=new Z(Lu(f.minX,p.minX,m),Lu(f.minY,p.minY,m),Lu(f.width,p.width,m),Lu(f.height,p.height,m)),b=new v(-w.x,-w.y,this.getViewportScreenBounds().width/w.width);this.stopCameraAnimation(),this._setCamera(b)};this.once("stop-following",i),this.addListener("frame",l),l()}),this}stopFollowingUser(){return this.history.ignore(()=>{this.store.put([this.getCamera()]),this._isLockedOnFollowingUser.set(!1),this.updateInstanceState({followingUserId:null}),this.emit("stop-following")}),this}getUnorderedRenderingShapes(r){const a=[];let s=this.options.maxShapesPerPage*2,n=this.options.maxShapesPerPage;const o=this.getErasingShapeIds(),i=(c,d,p)=>{const f=this.getShape(c);if(!f)return;d*=f.opacity;let h=!1;const y=this.getShapeUtil(f);r&&(h=!p&&o.includes(c),h&&(d*=.32)),a.push({id:c,shape:f,util:y,index:s,backgroundIndex:n,opacity:d}),s+=1,n+=1;const m=this.getSortedChildIdsForParent(c);if(!m.length)return;let w=null;y.providesBackgroundForChildren(f)&&(w=n,n=s,s+=this.options.maxShapesPerPage);for(const b of m)i(b,d,p||h);w!==null&&(n=w)},l=r?[this.getCurrentPage()]:this.getPages();for(const c of l)for(const d of this.getSortedChildIdsForParent(c.id))i(d,1,!1);return a}getCameraState(){return this._cameraState.get()}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(rN)}_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return this._getAllPagesQuery().get().sort(Qt)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(r){return this.store.get(typeof r=="string"?r:r.id)}getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getCurrentPageShapeIdsSorted(){return Array.from(this.getCurrentPageShapeIds()).sort()}getPageShapeIds(r){const a=typeof r=="string"?r:r.id,s=this.store.query.exec("shape",{parentId:{eq:a}});return this.getShapeAndDescendantIds(s.map(n=>n.id))}setCurrentPage(r){const a=typeof r=="string"?r:r.id;return this.store.has(a)?(this.stopFollowingUser(),this.complete(),this.batch(()=>this.store.put([{...this.getInstanceState(),currentPageId:a}]),{history:"record-preserveRedoStack"})):(console.error("Tried to set the current page id to a page that doesn't exist."),this)}updatePage(r){return this.getInstanceState().isReadonly?this:this.getPage(r.id)?this.batch(()=>this.store.update(r.id,s=>({...s,...r}))):this}createPage(r){return this.history.batch(()=>{if(this.getInstanceState().isReadonly||this.getPages().length>=this.options.maxPages)return;const a=this.getPages(),s=hG(r.name??"Page 1",a.map(i=>i.name));let n=r.index;(!n||a.some(i=>i.index===n))&&(n=Ms(a[a.length-1].index));const o=Vs.create({meta:{},...r,name:s,index:n});this.store.put([o])}),this}deletePage(r){const a=typeof r=="string"?r:r.id;return this.batch(()=>{if(this.getInstanceState().isReadonly)return;const s=this.getPages();if(s.length===1)return;const n=this.getPage(a);if(n){if(a===this.getCurrentPageId()){const o=s.findIndex(l=>l.id===a),i=s[o-1]??s[o+1];this.setCurrentPage(i.id)}this.store.remove([n.id])}}),this}duplicatePage(r,a=Vs.createId()){if(this.getPages().length>=this.options.maxPages)return this;const s=typeof r=="string"?r:r.id,n=this.getPage(s);if(!n)return this;const o={...this.getCamera()},i=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(n.id));return this.batch(()=>{var d;const l=this.getPages(),c=dd(n.index,(d=l[l.indexOf(n)+1])==null?void 0:d.index);if(this.createPage({name:n.name+" Copy",id:a,index:c}),this.setCurrentPage(a),this.setCamera(o),i)return this.putContentOntoCurrentPage(i)}),this}renamePage(r,a){const s=typeof r=="string"?r:r.id;return this.getInstanceState().isReadonly?this:(this.updatePage({id:s,name:a}),this)}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(r){return this.getInstanceState().isReadonly?this:r.length<=0?this:(this.history.ignore(()=>this.store.put(r)),this)}updateAssets(r){return this.getInstanceState().isReadonly?this:r.length<=0?this:(this.history.ignore(()=>{this.store.put(r.map(a=>({...this.store.get(a.id),...a})))}),this)}deleteAssets(r){if(this.getInstanceState().isReadonly)return this;const a=typeof r[0]=="string"?r:r.map(s=>s.id);return a.length<=0?this:(this.history.ignore(()=>this.store.remove(a)),this)}getAsset(r){return this.store.get(typeof r=="string"?r:r.id)}_getShapeGeometryCache(){return this.store.createComputedCache("bounds",r=>this.getShapeUtil(r).getGeometry(r),(r,a)=>r.props===a.props)}getShapeGeometry(r){return this._getShapeGeometryCache().get(typeof r=="string"?r:r.id)}_getShapeHandlesCache(){return this.store.createComputedCache("handles",r=>{var a,s;return(s=(a=this.getShapeUtil(r)).getHandles)==null?void 0:s.call(a,r)})}getShapeHandles(r){return this._getShapeHandlesCache().get(typeof r=="string"?r:r.id)}getShapeLocalTransform(r){const a=typeof r=="string"?r:r.id,s=this.getShape(a);if(!s)throw Error("Editor.getTransform: shape not found");return ae.Identity().translate(s.x,s.y).rotate(s.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",r=>{if(Sr(r.parentId))return this.getShapeLocalTransform(r);const a=this._getShapePageTransformCache().get(r.parentId)??ae.Identity();return ae.Compose(a,this.getShapeLocalTransform(r))})}getShapeParentTransform(r){const a=typeof r=="string"?r:r.id,s=this.getShape(a);return!s||Sr(s.parentId)?ae.Identity():this._getShapePageTransformCache().get(s.parentId)??ae.Identity()}getShapePageTransform(r){const a=typeof r=="string"?r:r.id;return this._getShapePageTransformCache().get(a)??ae.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",r=>{const a=this._getShapePageTransformCache().get(r.id);return a?Z.FromPoints(ae.applyToPoints(a,this.getShapeGeometry(r).vertices)):new Z})}getShapePageBounds(r){return this._getShapePageBoundsCache().get(typeof r=="string"?r:r.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",r=>{const a=this._getShapeMaskCache().get(r.id);if(!a)return;if(a.length===0)return"polygon(0px 0px, 0px 0px, 0px 0px)";const s=this._getShapePageTransformCache().get(r.id);return s?`polygon(${ae.applyToPoints(ae.Inverse(s),a).map(o=>`${o.x}px ${o.y}px`).join(",")})`:void 0})}getShapeClipPath(r){return this._getShapeClipPathCache().get(typeof r=="string"?r:r.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",r=>{if(Sr(r.parentId))return;const a=this.getShapeAncestors(r.id).filter(n=>this.isShapeOfType(n,"frame"));return a.length===0?void 0:a.map(n=>this._getShapePageTransformCache().get(n.id).applyToPoints(this.getShapeGeometry(n).vertices)).reduce((n,o)=>{if(!(o&&n))return;const i=L6(n,o);return i?i.map(v.Cast):[]})})}getShapeMask(r){return this._getShapeMaskCache().get(typeof r=="string"?r:r.id)}getShapeMaskedPageBounds(r){return typeof r!="string"&&(r=r.id),this._getShapeMaskedPageBoundsCache().get(r)}_getShapeMaskedPageBoundsCache(){return this.store.createComputedCache("shapeMaskedPageBoundsCache",r=>{const a=this._getShapePageBoundsCache().get(r.id);if(!a)return;const s=this._getShapeMaskCache().get(r.id);if(s){if(s.length===0)return;const{corners:n}=a;if(n.every((i,l)=>i&&v.Equals(i,s[l])))return a.clone();const o=L6(s,n);return o?Z.FromPoints(o):void 0}return a})}getShapeAncestors(r,a=[]){const s=typeof r=="string"?r:r.id,n=this.getShape(s);if(!n)return a;const o=n.parentId;if(Sr(o))return a.reverse(),a;const i=this.store.get(o);return i?(a.push(i),this.getShapeAncestors(i,a)):a}findShapeAncestor(r,a){const s=typeof r=="string"?r:r.id,n=this.getShape(s);if(!n)return;const o=n.parentId;if(Sr(o))return;const i=this.getShape(o);if(i)return a(i)?i:this.findShapeAncestor(i,a)}hasAncestor(r,a){const s=typeof r=="string"?r:r==null?void 0:r.id,n=s&&this.getShape(s);return n?n.parentId===a?!0:this.hasAncestor(this.getShapeParent(n),a):!1}findCommonAncestor(r,a){var c;if(r.length===0)return;const s=typeof r[0]=="string"?r:r.map(d=>d.id),n=ge(s.map(d=>this.getShape(d)));if(n.length===1){const d=n[0].parentId;return Sr(d)?void 0:a?(c=this.findShapeAncestor(n[0],a))==null?void 0:c.id:d}const[o,...i]=n;let l=this.getShapeParent(o);for(;l;){if(a&&!a(l)){l=this.getShapeParent(l);continue}if(i.every(d=>this.hasAncestor(d,l.id)))return l.id;l=this.getShapeParent(l)}}isShapeOrAncestorLocked(r){const a=typeof r=="string"?this.getShape(r):r;return a===void 0?!1:a.isLocked?!0:this.isShapeOrAncestorLocked(this.getShapeParent(a))}_notVisibleShapes(){return vG(this)}getCulledShapes(){const r=this._notVisibleShapes().get(),a=this.getSelectedShapeIds(),s=this.getEditingShapeId(),n=new Set(r);return s&&n.delete(s),a.forEach(o=>{n.delete(o)}),n}getCurrentPageBounds(){let r;return this.getCurrentPageShapeIdsSorted().forEach(a=>{const s=this.getShapeMaskedPageBounds(a);s&&(r?r=r.expand(s):r=s.clone())}),r}getSelectedShapeAtPoint(r){const a=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter(s=>s.type!=="group"&&a.includes(s.id)).reverse().find(s=>this.isPointInShape(s,r,{hitInside:!0,margin:0}))}getShapeAtPoint(r,a={}){const s=this.getZoomLevel(),n=this.getViewportPageBounds(),{filter:o,margin:i=0,hitLocked:l=!1,hitLabels:c=!1,hitInside:d=!1,hitFrameInside:p=!1}=a;let f=1/0,h=null,y=1/0,m=null;const w=(a.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter(b=>{if(b.isLocked&&!l||this.isShapeOfType(b,"group"))return!1;const _=this.getShapeMask(b);return _&&!ta(r,_)?!1:o?o(b):!0});for(let b=w.length-1;b>=0;b--){const _=w[b],x=this.getShapeGeometry(_),C=x instanceof $a,k=this.getPointInShapeSpace(_,r);if((this.isShapeOfType(_,"arrow")||this.isShapeOfType(_,"geo")&&_.props.fill==="none")&&_.props.text.trim()){for(const P of x.children)if(P.isLabel&&P.isPointInBounds(k))return _}if(this.isShapeOfType(_,"frame")){const P=x.distanceToPoint(k,d);if(Math.abs(P)<=i)return m||_;if(x.hitTestPoint(k,0,!0))return m||h||(p?_:void 0);continue}let F;if(C){let P=1/0;for(const I of x.children){if(I.isLabel&&!c)continue;const j=I.distanceToPoint(k,d);j<P&&(P=j)}F=P}else i===0&&(x.bounds.w<1||x.bounds.h<1)||x.bounds.containsPoint(k,i)?F=x.distanceToPoint(k,d):F=1/0;if(x.isClosed){if(F<=i){if(x.isFilled||C&&x.children[0].isFilled)return m||_;if(this.getShapePageBounds(_).contains(n))continue;if(Math.abs(F)<i)Math.abs(F)<y&&(y=Math.abs(F),m=_);else if(!m){const{area:P}=x;P<f&&(f=P,h=_)}}}else if(F<this.options.hitTestMargin/s)return _}return m||h||void 0}getShapesAtPoint(r,a={}){return this.getCurrentPageShapes().filter(s=>this.isPointInShape(s,r,a))}isPointInShape(r,a,s={}){const{hitInside:n=!1,margin:o=0}=s,i=typeof r=="string"?r:r.id,l=this.getShapeMask(i);return l&&!ta(a,l)?!1:this.getShapeGeometry(i).hitTestPoint(this.getPointInShapeSpace(r,a),o,n)}getPointInShapeSpace(r,a){const s=typeof r=="string"?r:r.id;return this._getShapePageTransformCache().get(s).clone().invert().applyToPoint(a)}getPointInParentSpace(r,a){const s=typeof r=="string"?r:r.id,n=this.getShape(s);if(!n)return new v(0,0);if(Sr(n.parentId))return v.From(a);const o=this.getShapePageTransform(n.parentId);return o?o.clone().invert().applyToPoint(a):v.From(a)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),r=>this.store.get(r))}getCurrentPageShapesSorted(){const r=[],a=this.getSortedChildIdsForParent(this.getCurrentPageId());for(let s=0,n=a.length;s<n;s++)VS(this,a[s],r);return r}getCurrentPageRenderingShapesSorted(){const r=this.getCulledShapes();return this.getCurrentPageShapesSorted().filter(({id:a})=>!r.has(a))}isShapeOfType(r,a){const s=typeof r=="string"?this.getShape(r):r;return s?s.type===a:!1}getShape(r){const a=typeof r=="string"?r:r.id;if(Kr(a))return this.store.get(a)}getShapeParent(r){const a=typeof r=="string"?r:r==null?void 0:r.id;if(!a)return;const s=this.getShape(a);if(!(s===void 0||!Kr(s.parentId)))return this.store.get(s.parentId)}getShapeNearestSibling(r,a){return a?a.parentId===r.parentId?a:this.findShapeAncestor(a,n=>n.parentId===r.parentId):void 0}isShapeInPage(r,a=this.getCurrentPageId()){const s=typeof r=="string"?r:r.id,n=this.getShape(s);if(!n)return!1;let o=!1;if(n.parentId===a)o=!0;else{let i=this.getShape(n.parentId);e:for(;i;){if(i.parentId===a){o=!0;break e}i=this.getShape(i.parentId)}}return o}getAncestorPageId(r){const a=typeof r=="string"?r:r==null?void 0:r.id,s=a&&this.getShape(a);if(s)return Sr(s.parentId)?s.parentId:this.getAncestorPageId(this.getShape(s.parentId))}reparentShapes(r,a,s){const n=typeof r[0]=="string"?r:r.map(y=>y.id);if(n.length===0)return this;const o=[],i=Sr(a)?ae.Identity():this.getShapePageTransform(a),l=i.rotation();let c=[];const d=ge(this.getSortedChildIdsForParent(a).map(y=>this.getShape(y)));if(s){const y=d.find(m=>m.index===s);if(y){const m=d[d.indexOf(y)+1];m?c=ul(s,m.index,n.length):c=Um(s,n.length)}else{const m=d.sort(Qt).find(w=>w.index>s);m?c=ul(s,m.index,n.length):c=Um(s,n.length)}}else{const y=d.length&&d[d.length-1];c=y?Um(y.index,n.length):ud(n.length)}const p=i.clone().invert(),f=ge(n.map(y=>this.getShape(y))),h=f.filter(y=>y.isLocked);h.length&&this.updateShapes(h.map(({id:y,type:m})=>({id:y,type:m,isLocked:!1})));for(let y=0;y<f.length;y++){const m=f[y],w=this.getShapePageTransform(m);if(!w)continue;const b=w.point();if(!b)continue;const _=p.applyToPoint(b),x=w.rotation()-l;o.push({id:m.id,type:m.type,parentId:a,x:_.x,y:_.y,rotation:x,index:c[y],isLocked:m.isLocked})}return this.updateShapes(o),this}getHighestIndexForParent(r){const a=typeof r=="string"?r:r.id,s=this._parentIdsToChildIds.get()[a];if(!s||s.length===0)return"a1";const n=this.getShape(s[s.length-1]);return Ms(n.index)}getSortedChildIdsForParent(r){const a=typeof r=="string"?r:r.id,s=this._parentIdsToChildIds.get()[a];return s||zs}visitDescendants(r,a){const s=typeof r=="string"?r:r.id,n=this.getSortedChildIdsForParent(s);for(const o of n)a(o)!==!1&&this.visitDescendants(o,a);return this}getShapeAndDescendantIds(r){const a=new Set;for(const s of r.map(n=>this.getShape(n)).sort(Qt))a.add(s.id),this.visitDescendants(s,n=>{a.add(n)});return a}getDroppingOverShape(r,a=[]){const s=this.getCurrentPageShapesSorted();for(let n=s.length-1;n>=0;n--){const o=s[n];if(this.getSelectedShapeIds().includes(o.id)||!this.getShapeUtil(o).canDropShapes(o,a)||a.find(l=>l.id===o.id||this.hasAncestor(o,l.id)))continue;const i=this.getShapeMaskedPageBounds(o.id);if(i&&i.containsPoint(r)&&this.getShapeGeometry(o).hitTestPoint(this.getPointInShapeSpace(o,r),0,!0))return o}}getOutermostSelectableShape(r,a){const s=typeof r=="string"?r:r.id,n=this.getShape(s);let o=n,i=n;const l=this.getFocusedGroup();for(;i;){if(this.isShapeOfType(i,"group")&&(l==null?void 0:l.id)!==i.id&&!this.hasAncestor(l,i.id)&&((a==null?void 0:a(i))??!0))o=i;else if((l==null?void 0:l.id)===i.id)break;i=this.getShapeParent(i)}return o}_getBindingsIndexCache(){const r=_G(this);return this.store.createComputedCache("bindingsIndex",a=>r.get().get(a.id))}getBinding(r){return this.store.get(r)}getBindingsFromShape(r,a){const s=typeof r=="string"?r:r.id;return this.getBindingsInvolvingShape(s).filter(n=>n.fromId===s&&n.type===a)}getBindingsToShape(r,a){const s=typeof r=="string"?r:r.id;return this.getBindingsInvolvingShape(s).filter(n=>n.toId===s&&n.type===a)}getBindingsInvolvingShape(r,a){const s=typeof r=="string"?r:r.id,n=this._getBindingsIndexCache().get(s)??zs;return a?n.filter(o=>o.type===a):n}createBindings(r){const a=[];for(const s of r){const n=this.getShape(s.fromId),o=this.getShape(s.toId);if(!n||!o||!this.canBindShapes({fromShape:n,toShape:o,binding:s}))continue;const l=this.getBindingUtil(s.type).getDefaultProps(),c=this.store.schema.types.binding.create({...s,id:s.id??jo(),props:{...l,...s.props}});a.push(c)}return this.store.put(a),this}createBinding(r){return this.createBindings([r])}updateBindings(r){const a=[];for(const s of r){if(!s)continue;const n=this.getBinding(s.id);if(!n)continue;const o=As(n,s);if(o===n)continue;const i=this.getShape(o.fromId),l=this.getShape(o.toId);!i||!l||this.canBindShapes({fromShape:i,toShape:l,binding:o})&&a.push(o)}return this.store.put(a),this}updateBinding(r){return this.updateBindings([r])}deleteBindings(r,{isolateShapes:a=!1}={}){const s=r.map(n=>typeof n=="string"?n:n.id);return a?this.store.atomic(()=>{var n,o;for(const i of s){const l=this.getBinding(i);if(!l)continue;const c=this.getBindingUtil(l);(n=c.onBeforeIsolateFromShape)==null||n.call(c,{binding:l,removedShape:this.getShape(l.toId)}),(o=c.onBeforeIsolateToShape)==null||o.call(c,{binding:l,removedShape:this.getShape(l.fromId)}),this.store.remove([i])}}):this.store.remove(s),this}deleteBinding(r,a){return this.deleteBindings([r],a)}canBindShapes({fromShape:r,toShape:a,binding:s}){const n=typeof r=="string"?r:r.type,o=typeof a=="string"?a:a.type,i=typeof s=="string"?s:s.type,l={fromShapeType:n,toShapeType:o,bindingType:i};return n===o?this.getShapeUtil(n).canBind(l):this.getShapeUtil(n).canBind(l)&&this.getShapeUtil(o).canBind(l)}rotateShapesBy(r,a){if((typeof r[0]=="string"?r:r.map(o=>o.id)).length<=0)return this;const n=WS({editor:this});return n?(Op({delta:a,snapshot:n,editor:this,stage:"one-off"}),this):this}getChangesToTranslateShape(r,a){var o,i,l;let s=r;const n=this.getShapeUtil(r);return s=As(s,((o=n.onTranslateStart)==null?void 0:o.call(n,s))??void 0),s=As(s,{id:r.id,type:r.type,x:a.x,y:a.y}),s=As(s,((i=n.onTranslate)==null?void 0:i.call(n,r,s))??void 0),s=As(s,((l=n.onTranslateEnd)==null?void 0:l.call(n,r,s))??void 0),s}nudgeShapes(r,a){const s=typeof r[0]=="string"?r:r.map(o=>o.id);if(s.length<=0)return this;const n=[];for(const o of s){const i=this.getShape(o),l=v.From(a),c=this.getShapeParentTransform(i);c&&l.rot(-c.rotation()),n.push(this.getChangesToTranslateShape(i,l.add(i)))}return this.updateShapes(n),this}duplicateShapes(r,a){return this.history.batch(()=>{const s=typeof r[0]=="string"?r:r.map(f=>f.id);if(s.length<=0)return this;const n=new Set(s),o=this.getShapeAndDescendantIds(s),i=[...o].reverse(),l=new Map;for(const f of o)l.set(f,Ne());const{shapesToCreate:c,bindingsToCreate:d}=U6(this,o,f=>{const h=[];for(const m of f){const w=this.getBinding(m);if(!w)continue;const b=jo();h.push({...w,id:b,fromId:Vr(l.get(w.fromId)),toId:Vr(l.get(w.toId))})}const y=[];for(const m of i){const w=Vr(l.get(m)),b=this.getShape(m);if(!b)continue;let _=0,x=0;if(a&&n.has(m)){const A=this.getShapeParentTransform(b),D=new v(a.x,a.y).rot(-A.rotation());_=D.x,x=D.y}const C=b.parentId,k=this.getSortedChildIdsForParent(C),F=k.indexOf(b.id),P=k[F+1],I=P?this.getShape(P):null,j=I?dd(b.index,I.index):Ms(b.index);y.push({...b,id:w,x:b.x+_,y:b.y+x,index:j,parentId:l.get(b.parentId)??b.parentId})}return{shapesToCreate:y,bindingsToCreate:h}});if(c.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage){Gu(this);return}if(this.createShapes(c),this.createBindings(d),this.setSelectedShapes(ge(s.map(f=>l.get(f)))),a!==void 0){const f=this.getSelectionPageBounds(),h=this.getViewportPageBounds();f&&!h.contains(f)&&this.centerOnPoint(f.center,{animation:{duration:this.options.animationMediumMs}})}}),this}moveShapesToPage(r,a){const s=typeof r[0]=="string"?r:r.map(l=>l.id);if(s.length===0)return this;if(this.getInstanceState().isReadonly)return this;const n=this.getCurrentPageId();if(a===n)return this;if(!this.store.has(a))return this;const o=this.getContentFromCurrentPage(s);if(!o)return this;if(this.getPageShapeIds(a).size+o.shapes.length>this.options.maxShapesPerPage)return Gu(this,a),this;const i=this.getCamera().z;return this.history.batch(()=>{this.deleteShapes(s),this.setCurrentPage(a),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(o,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:i}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)}),this}toggleLock(r){const a=typeof r[0]=="string"?r:r.map(i=>i.id);if(this.getInstanceState().isReadonly||a.length===0)return this;let s=!0,n=!0;const o=[];for(const i of a){const l=this.getShape(i);l&&(o.push(l),l.isLocked?n=!1:s=!1)}return this.batch(()=>{n?(this.updateShapes(o.map(i=>({id:i.id,type:i.type,isLocked:!0}))),this.setSelectedShapes([])):s?this.updateShapes(o.map(i=>({id:i.id,type:i.type,isLocked:!1}))):this.updateShapes(o.map(i=>({id:i.id,type:i.type,isLocked:!0})))}),this}sendToBack(r){const a=typeof r[0]=="string"?r:r.map(n=>n.id),s=Hu(this,"toBack",a);return s&&this.updateShapes(s),this}sendBackward(r){const a=typeof r[0]=="string"?r:r.map(n=>n.id),s=Hu(this,"backward",a);return s&&this.updateShapes(s),this}bringForward(r){const a=typeof r[0]=="string"?r:r.map(n=>n.id),s=Hu(this,"forward",a);return s&&this.updateShapes(s),this}bringToFront(r){const a=typeof r[0]=="string"?r:r.map(n=>n.id),s=Hu(this,"toFront",a);return s&&this.updateShapes(s),this}flipShapes(r,a){const s=typeof r[0]=="string"?r:r.map(i=>i.id);if(this.getInstanceState().isReadonly)return this;let n=ge(s.map(i=>this.getShape(i)));if(!n.length)return this;n=ge(n.map(i=>this.isShapeOfType(i,"group")?this.getSortedChildIdsForParent(i.id).map(l=>this.getShape(l)):i).flat());const o=Z.Common(ge(n.map(i=>this.getShapePageBounds(i)))).center;return this.batch(()=>{for(const i of n){const l=this.getShapeGeometry(i).bounds,c=this.getShapePageTransform(i.id);c&&this.resizeShape(i.id,{x:a==="horizontal"?-1:1,y:a==="vertical"?-1:1},{initialBounds:l,initialPageTransform:c,initialShape:i,mode:"scale_shape",isAspectRatioLocked:this.getShapeUtil(i).isAspectRatioLocked(i),scaleOrigin:o,scaleAxisRotation:0})}}),this}stackShapes(r,a,s){const n=typeof r[0]=="string"?r:r.map(w=>w.id);if(this.getInstanceState().isReadonly)return this;const o=n.map(w=>this.getShape(w)).filter(w=>w?this.getShapeUtil(w).canBeLaidOut(w):!1),i=o.length;if(s===0&&i<3||i<2)return this;const l=Object.fromEntries(o.map(w=>[w.id,this.getShapePageBounds(w)]));let c,d,p,f;a==="horizontal"?(c="x",d="minX",p="maxX",f="width"):(c="y",d="minY",p="maxY",f="height");let h;if(s===0){const w=[];o.sort((_,x)=>l[_.id][d]-l[x.id][d]);for(let _=0;_<i-1;_++){const x=o[_],C=o[_+1],k=l[x.id],P=l[C.id][d]-k[p],I=w.find(j=>j.gap===P);I?I.count++:w.push({gap:P,count:1})}let b=0;w.forEach(_=>{_.count>b&&(b=_.count,h=_.gap)}),b===1&&(h=Math.max(0,w.reduce((_,x)=>_+x.gap*x.count,0)/(i-1)))}else h=s;const y=[];let m=l[o[0].id][p];return o.forEach((w,b)=>{var F,P;if(b===0)return;const _={x:0,y:0};_[c]=m+h-l[w.id][c];const x=this.getShapeParent(w),C=x?v.Rot(_,-this.getShapePageTransform(x).decompose().rotation):_,k=(P=(F=this.getShapeUtil(w)).onTranslateStart)==null?void 0:P.call(F,w);y.push(k?{...k,[c]:w[c]+C[c]}:{id:w.id,type:w.type,[c]:w[c]+C[c]}),m+=l[w.id][f]+h}),this.updateShapes(y),this}packShapes(r,a){var P,I;const s=typeof r[0]=="string"?r:r.map(j=>j.id);if(this.getInstanceState().isReadonly)return this;if(s.length<2)return this;const n=s.map(j=>this.getShape(j)).filter(j=>j?this.getShapeUtil(j).canBeLaidOut(j):!1),o={},i={};let l,c,d=0;for(let j=0;j<n.length;j++)l=n[j],c=this.getShapePageBounds(l),o[l.id]=c,i[l.id]=c.clone(),d+=c.width*c.height;const p=Z.Common(ge(Object.values(o))),f=p.width;n.sort((j,A)=>o[A.id].height-o[j.id].height);const h=Math.max(Math.ceil(Math.sqrt(d/.95)),f),y=[new Z(p.x,p.y,h,1/0)];let m=0,w=0,b,_;for(let j=0;j<n.length;j++){l=n[j],c=i[l.id];for(let A=y.length-1;A>=0;A--)if(b=y[A],!(c.width>b.width||c.height>b.height)){c.x=b.x,c.y=b.y,w=Math.max(w,c.maxY),m=Math.max(m,c.maxX),c.width===b.width&&c.height===b.height?(_=y.pop(),A<y.length&&(y[A]=_)):c.height===b.height?(b.x+=c.width+a,b.width-=c.width+a):c.width===b.width?(b.y+=c.height+a,b.height-=c.height+a):(y.push(new Z(b.x+(c.width+a),b.y,b.width-(c.width+a),c.height)),b.y+=c.height+a,b.height-=c.height+a);break}}const x=Z.Common(Object.values(i)),C=v.Sub(p.center,x.center);let k;const F=[];for(let j=0;j<n.length;j++){l=n[j],c=o[l.id],k=i[l.id];const A=v.Sub(k.point,c.point).add(C),D=this.getShapeParentTransform(l);D&&A.rot(-D.rotation());const z={id:l.id,type:l.type,x:l.x+A.x,y:l.y+A.y},T=(I=(P=this.getShapeUtil(l)).onTranslateStart)==null?void 0:I.call(P,{...l,...z});T?F.push({...z,...T}):F.push(z)}return F.length&&this.updateShapes(F),this}alignShapes(r,a){const s=typeof r[0]=="string"?r:r.map(c=>c.id);if(this.getInstanceState().isReadonly)return this;if(s.length<2)return this;const n=ge(s.map(c=>this.getShape(c))),o=Object.fromEntries(n.map(c=>[c.id,this.getShapePageBounds(c)])),i=Z.Common(ge(Object.values(o))),l=[];return n.forEach(c=>{const d=o[c.id];if(!d)return;const p={x:0,y:0};switch(a){case"top":{p.y=i.minY-d.minY;break}case"center-vertical":{p.y=i.midY-d.minY-d.height/2;break}case"bottom":{p.y=i.maxY-d.minY-d.height;break}case"left":{p.x=i.minX-d.minX;break}case"center-horizontal":{p.x=i.midX-d.minX-d.width/2;break}case"right":{p.x=i.maxX-d.minX-d.width;break}}const f=this.getShapeParent(c),h=f?v.Rot(p,-this.getShapePageTransform(f).decompose().rotation):p;l.push(this.getChangesToTranslateShape(c,v.Add(c,h)))}),this.updateShapes(l),this}distributeShapes(r,a){const s=typeof r[0]=="string"?r:r.map(x=>x.id);if(this.getInstanceState().isReadonly)return this;if(s.length<3)return this;const n=s.length,o=ge(s.map(x=>this.getShape(x))),i=Object.fromEntries(o.map(x=>[x.id,this.getShapePageBounds(x)]));let l,c,d,p,f;a==="horizontal"?(l="x",c="minX",d="maxX",p="midX",f="width"):(l="y",c="minY",d="maxY",p="midY",f="height");const h=[],y=o.sort((x,C)=>i[x.id][c]-i[C.id][c])[0],m=o.sort((x,C)=>i[C.id][d]-i[x.id][d])[0],w=i[y.id][p],b=(i[m.id][p]-w)/(n-1),_=w+b;return o.filter(x=>x!==y&&x!==m).sort((x,C)=>i[x.id][p]-i[C.id][p]).forEach((x,C)=>{const k={x:0,y:0};k[l]=_+b*C-i[x.id][f]/2-i[x.id][l];const F=this.getShapeParent(x),P=F?v.Rot(k,-this.getShapePageTransform(F).rotation()):k;h.push(this.getChangesToTranslateShape(x,v.Add(x,P)))}),this.updateShapes(h),this}stretchShapes(r,a){const s=typeof r[0]=="string"?r:r.map(c=>c.id);if(this.getInstanceState().isReadonly)return this;if(s.length<2)return this;const n=ge(s.map(c=>this.getShape(c))),o=Object.fromEntries(s.map(c=>[c,this.getShapeGeometry(c).bounds])),i=Object.fromEntries(s.map(c=>[c,this.getShapePageBounds(c)])),l=Z.Common(ge(Object.values(i)));switch(a){case"vertical":{this.batch(()=>{for(const c of n){if(this.getShapePageTransform(c).rotation()%Be)continue;const p=o[c.id],f=i[c.id],h=new v(0,l.minY-f.minY),y=this.getShapeParentTransform(c);y&&h.rot(-y.rotation());const{x:m,y:w}=v.Add(h,c);this.updateShapes([{id:c.id,type:c.type,x:m,y:w}]);const b=new v(1,l.height/f.height);this.resizeShape(c.id,b,{initialBounds:p,scaleOrigin:new v(f.center.x,l.minY),isAspectRatioLocked:this.getShapeUtil(c).isAspectRatioLocked(c),scaleAxisRotation:0})}});break}case"horizontal":{this.batch(()=>{for(const c of n){const d=o[c.id],p=i[c.id];if(this.getShapePageTransform(c).rotation()%Be)continue;const h=new v(l.minX-p.minX,0),y=this.getShapeParentTransform(c);y&&h.rot(-y.rotation());const{x:m,y:w}=v.Add(h,c);this.updateShapes([{id:c.id,type:c.type,x:m,y:w}]);const b=new v(l.width/p.width,1);this.resizeShape(c.id,b,{initialBounds:d,scaleOrigin:new v(l.minX,p.center.y),isAspectRatioLocked:this.getShapeUtil(c).isAspectRatioLocked(c),scaleAxisRotation:0})}});break}}return this}resizeShape(r,a,s={}){var y,m,w;const n=typeof r=="string"?r:r.id;if(this.getInstanceState().isReadonly)return this;Number.isFinite(a.x)||(a=new v(1,a.y)),Number.isFinite(a.y)||(a=new v(a.x,1));const o=s.initialShape??this.getShape(n);if(!o)return this;const i=s.scaleOrigin??((y=this.getShapePageBounds(n))==null?void 0:y.center);if(!i)return this;const l=s.initialPageTransform?ae.Cast(s.initialPageTransform):this.getShapePageTransform(n);if(!l)return this;const c=l.rotation();if(c==null)return this;const d=s.scaleAxisRotation??c,p=s.initialBounds??this.getShapeGeometry(n).bounds;if(!p)return this;const f=s.isAspectRatioLocked??this.getShapeUtil(o).isAspectRatioLocked(o);if(!eS(c,d))return this._resizeUnalignedShape(n,a,{...s,initialBounds:p,scaleOrigin:i,scaleAxisRotation:d,initialPageTransform:l,isAspectRatioLocked:f,initialShape:o});const h=this.getShapeUtil(o);if(f&&(Math.abs(a.x)>Math.abs(a.y)?a=new v(a.x,Math.sign(a.y)*Math.abs(a.x)):a=new v(Math.sign(a.x)*Math.abs(a.y),a.y)),h.onResize&&h.canResize(o)){const b=this._scalePagePoint(ae.applyToPoint(l,new v(0,0)),i,a,d),_=this.getPointInParentSpace(o.id,b),x=new v(a.x,a.y),C=Zi((c-d)%Math.PI,0);x.x=C?a.x:a.y,x.y=C?a.y:a.x;const k=ae.applyToPoint(l,new v),{x:F,y:P}=this.getPointInParentSpace(o.id,k);let I=o;s.skipStartAndEndCallbacks||(I=As(o,((m=h.onResizeStart)==null?void 0:m.call(h,o))??void 0)),I=As(I,{id:n,type:o.type,x:_.x,y:_.y,...h.onResize({...o,x:F,y:P},{newPoint:_,handle:s.dragHandle??"bottom_right",mode:s.mode??"scale_shape",scaleX:x.x,scaleY:x.y,initialBounds:p,initialShape:o})}),s.skipStartAndEndCallbacks||(I=As(I,((w=h.onResizeEnd)==null?void 0:w.call(h,o,I))??void 0)),this.updateShapes([I])}else{const b=ae.applyToPoint(l,p.center),_=this._scalePagePoint(b,i,a,d),x=this.getPointInParentSpace(o.id,b),C=this.getPointInParentSpace(o.id,_),k=v.Sub(C,x);this.updateShapes([{id:n,type:o.type,x:o.x+k.x,y:o.y+k.y}])}return this}_scalePagePoint(r,a,s,n){const o=v.RotWith(r,a,-n).sub(a),i=v.MulV(o,s);return v.Add(i,a).rotWith(a,n)}_resizeUnalignedShape(r,a,s){const{type:n}=s.initialShape,o=new v(a.x,a.y);if(Math.abs(a.x)>Math.abs(a.y)?o.x=Math.sign(a.x)*Math.abs(a.y):o.y=Math.sign(a.y)*Math.abs(a.x),this.resizeShape(r,o,{initialShape:s.initialShape,initialBounds:s.initialBounds,isAspectRatioLocked:s.isAspectRatioLocked}),Math.sign(a.x)*Math.sign(a.y)<0){let{rotation:b}=ae.Decompose(s.initialPageTransform);b-=2*b,this.updateShapes([{id:r,type:n,rotation:b}])}const i=ae.applyToPoint(s.initialPageTransform,s.initialBounds.center),l=this._scalePagePoint(i,s.scaleOrigin,a,s.scaleAxisRotation),c=this.getShapePageBounds(r),d=this.getShapePageTransform(r),p=c.center,f=d.point();if(!p||!f)return this;const h=v.Sub(l,p),y=v.Add(f,h),{x:m,y:w}=this.getPointInParentSpace(r,y);return this.updateShapes([{id:r,type:n,x:m,y:w}]),this}getInitialMetaForShape(r){return{}}createShape(r){return this.createShapes([r]),this}createShapes(r){if(!Array.isArray(r))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");if(this.getInstanceState().isReadonly)return this;if(r.length<=0)return this;const a=this.getCurrentPageShapeIds();if(r.length+a.size>this.options.maxShapesPerPage)return Gu(this),this;const n=this.getFocusedGroupId();return this.batch(()=>{var p,f;const o=this.getCurrentPageShapesSorted(),i=r.map(h=>{if(h.id||(h={id:Ne(),...h}),!h.parentId||!(this.store.has(h.parentId)||r.some(y=>y.id===h.parentId))){let y=this.getFocusedGroupId();for(let w=o.length-1;w>=0;w--){const b=o[w];if(this.getShapeUtil(b).canReceiveNewChildrenOfType(b,h.type)&&this.isPointInShape(b,{x:h.x??0,y:h.y??0},{margin:0,hitInside:!0})){y=b.id;break}}const m=h.parentId;if(y===h.id&&(y=n),y!==m&&(h={...h},h.parentId=y,Kr(y))){const w=this.getPointInShapeSpace(this.getShape(y),{x:h.x??0,y:h.y??0});h.x=w.x,h.y=w.y,h.rotation=-this.getShapePageTransform(y).rotation()+(h.rotation??0)}}return h}),l=new Map,c=[],{opacityForNextShape:d}=this.getInstanceState();for(const h of i){const y=this.getShapeUtil(h);let m=h.index;if(!m){const x=h.parentId??n;l.has(x)||l.set(x,this.getHighestIndexForParent(x)),m=l.get(x),l.set(x,Ms(m))}const w=y.getDefaultProps();for(const[x,C]of this.styleProps[h.type])w[C]=this.getStyleForNextShape(x);let b=this.store.schema.types.shape.create({...h,index:m,opacity:h.opacity??d,parentId:h.parentId??n,props:"props"in h?{...w,...h.props}:w});if(b.index===void 0)throw Error("no index!");const _=(f=(p=this.getShapeUtil(b)).onBeforeCreate)==null?void 0:f.call(p,b);_&&(b=_),c.push(b)}c.forEach(h=>{h.meta={...this.getInitialMetaForShape(h),...h.meta}}),this.store.put(c)})}animateShape(r,a={animation:Jm}){return this.animateShapes([r],a)}animateShapes(r,a={animation:Jm}){if(!a.animation)return this;const{duration:s=500,easing:n=ar.linear}=a.animation,o=rt();let i=s,l;const c=[];let d,p;for(let y=0,m=r.length;y<m;y++){if(d=r[y],!d)continue;p={partial:d,values:[]};const w=this.getShape(d.id);if(w){for(const b of["x","y","rotation"])d[b]!==void 0&&w[b]!==d[b]&&p.values.push({prop:b,from:w[b],to:d[b]});c.push(p),this.animatingShapes.set(w.id,o)}}let f;const h=y=>{if(i-=y,i<0){const{animatingShapes:_}=this,x=r.filter(C=>C&&_.get(C.id)===o);x.length&&this.updateShapes(x),this.off("tick",h);return}l=n(1-i/s);const{animatingShapes:m}=this,w=[];let b;for(let _=0,x=c.length;_<x;_++)f=c[_],b=m.get(f.partial.id),b===o&&w.push({id:f.partial.id,type:f.partial.type,...f.values.reduce((C,{prop:k,from:F,to:P})=>(C[k]=F+(P-F)*l,C),{})});this._updateShapes(w)};return this.on("tick",h),this}groupShapes(r,a={}){var m;const{groupId:s=Ne(),select:n=!0}=a;if(!Array.isArray(r))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getInstanceState().isReadonly)return this;const o=typeof r[0]=="string"?r:r.map(w=>w.id);if(o.length<=1)return this;const i=ge(this._getUnlockedShapeIds(o).map(w=>this.getShape(w))),l=i.sort(Qt).map(w=>w.id),c=Z.Common(ge(i.map(w=>this.getShapePageBounds(w)))),{x:d,y:p}=c.point,f=this.findCommonAncestor(i)??this.getCurrentPageId();if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const h=i.filter(w=>w.parentId===f).sort(Qt),y=(m=h[h.length-1])==null?void 0:m.index;return this.batch(()=>{this.createShapes([{id:s,type:"group",parentId:f,index:y,x:d,y:p,opacity:1,props:{}}]),this.reparentShapes(l,s),n&&this.select(s)}),this}ungroupShapes(r,a={}){const{select:s=!0}=a,n=typeof r[0]=="string"?r:r.map(l=>l.id);if(this.getInstanceState().isReadonly)return this;if(n.length===0)return this;if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const o=new Set,i=[];return ge(n.map(l=>this.getShape(l))).forEach(l=>{this.isShapeOfType(l,"group")?i.push(l):o.add(l.id)}),i.length===0?this:(this.batch(()=>{let l;for(let c=0,d=i.length;c<d;c++){l=i[c];const p=this.getSortedChildIdsForParent(l.id);for(let f=0,h=p.length;f<h;f++)o.add(p[f]);this.reparentShapes(p,l.parentId,l.index)}this.deleteShapes(i.map(c=>c.id)),s&&this.select(...o)}),this)}updateShape(r){return this.updateShapes([r]),this}updateShapes(r){const a=Array(r.length);for(let s=0,n=r.length;s<n;s++){const o=r[s];if(!o)continue;const i=this.getShape(o.id);i&&(this.isShapeOrAncestorLocked(i)&&!Object.hasOwn(o,"isLocked")||(this.animatingShapes.delete(o.id),a.push(o)))}return this._updateShapes(a),this}_getUnlockedShapeIds(r){return r.filter(a=>{var s;return!((s=this.getShape(a))!=null&&s.isLocked)})}deleteShapes(r){if(!Array.isArray(r))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");const a=this._getUnlockedShapeIds(typeof r[0]=="string"?r:r.map(o=>o.id));if(this.getInstanceState().isReadonly)return this;if(a.length===0)return this;const s=new Set(a);for(const o of a)this.visitDescendants(o,i=>{s.add(i)});const n=[...s];return this.batch(()=>this.store.remove(n))}deleteShape(r){return this.deleteShapes([typeof r=="string"?r:r.id]),this}_extractSharedStyles(r,a){if(this.isShapeOfType(r,"group")){const s=this._parentIdsToChildIds.get()[r.id];if(!s)return;for(let n=0,o=s.length;n<o;n++)this._extractSharedStyles(this.getShape(s[n]),a)}else for(const[s,n]of this.styleProps[r.type])a.applyValue(s,jr(r.props,n))}_getSelectionSharedStyles(){const r=this.getSelectedShapes(),a=new Ab;for(const s of r)this._extractSharedStyles(s,a);return a}getStyleForNextShape(r){const a=this.getInstanceState().stylesForNextShape[r.id];return a===void 0?r.defaultValue:a}getShapeStyleIfExists(r,a){const s=this.styleProps[r.type].get(a);if(s!==void 0)return jr(r.props,s)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();const r=this.root.getCurrent(),a=new Ab;if(!r)return a;if(r.shapeType)for(const s of this.styleProps[r.shapeType].keys())a.applyValue(s,this.getStyleForNextShape(s));return a}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const r=[],a=n=>{const o=this.getShape(n);if(o)if(this.isShapeOfType(o,"group"))for(const i of this.getSortedChildIdsForParent(o.id))a(i);else r.push(o)};for(const n of this.getSelectedShapeIds())a(n);let s=null;for(const n of r)if(s===null)s=n.opacity;else if(s!==n.opacity)return{type:"mixed"};if(s!==null)return{type:"shared",value:s}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(r,a){return this.updateInstanceState({opacityForNextShape:r},a),this}setOpacityForSelectedShapes(r){const a=this.getSelectedShapes();if(a.length>0){const s=[],n=o=>{if(this.isShapeOfType(o,"group")){const i=this.getSortedChildIdsForParent(o);for(const l of i)n(this.getShape(l))}else s.push(o)};for(const o of a)n(o);this.updateShapes(s.map(o=>({id:o.id,type:o.type,opacity:r})))}return this}setStyleForNextShapes(r,a,s){const n=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...n,[r.id]:a}},s),this}setStyleForSelectedShapes(r,a){const s=this.getSelectedShapes();if(s.length>0){const n=[],o=i=>{if(this.isShapeOfType(i,"group")){const l=this.getSortedChildIdsForParent(i.id);for(const c of l)o(this.getShape(c))}else{const l=this.getShapeUtil(i),c=this.styleProps[i.type].get(r);if(c){const d={id:i.id,type:i.type,props:{[c]:a}};n.push({util:l,originalShape:i,updatePartial:d})}}};for(const i of s)o(i);this.updateShapes(n.map(({updatePartial:i})=>i))}return this}registerExternalAssetHandler(r,a){return this.externalAssetContentHandlers[r]=a,this}async getAssetForExternalContent(r){var a,s;return await((s=(a=this.externalAssetContentHandlers)[r.type])==null?void 0:s.call(a,r))}registerExternalContentHandler(r,a){return this.externalContentHandlers[r]=a,this}async putExternalContent(r){var a,s;return(s=(a=this.externalContentHandlers)[r.type])==null?void 0:s.call(a,r)}getContentFromCurrentPage(r){const a=typeof r[0]=="string"?r:r.map(n=>n.id);if(!a||a.length===0)return;const s=this.getShapeAndDescendantIds(a);return U6(this,s,n=>{const o=[];for(const p of n){const f=this.getBinding(p);f&&o.push(f)}const i=[],l=[];for(const p of s){const f=this.getShape(p);if(!f)continue;if(!s.has(f.parentId)){const y=this.getShapePageTransform(f.id),m=y.point();l.push({...f,x:m.x,y:m.y,rotation:y.rotation(),parentId:this.getCurrentPageId()}),i.push(f.id)}else l.push(f)}const c=[],d=new Set;for(const p of l){if(!("assetId"in p.props))continue;const f=p.props.assetId;if(!f||d.has(f))continue;d.add(f);const h=this.getAsset(f);h&&c.push(h)}return{schema:this.store.schema.serialize(),shapes:l,rootShapeIds:i,bindings:o,assets:c}})}putContentOntoCurrentPage(r,a={}){var D,z;if(this.getInstanceState().isReadonly)return this;if(!r.schema)throw Error(`Could not put content:
content is missing a schema.`);const{select:s=!1,preserveIds:n=!1,preservePosition:o=!1}=a;let{point:i=void 0}=a;const l=this.getCurrentPageId(),{rootShapeIds:c}=r,d=[],p=[],f=[],h={store:{...Object.fromEntries(r.assets.map(T=>[T.id,T])),...Object.fromEntries(r.shapes.map(T=>[T.id,T])),...Object.fromEntries(((D=r.bindings)==null?void 0:D.map(T=>[T.id,T]))??[])},schema:r.schema},y=this.store.schema.migrateStoreSnapshot(h);if(y.type==="error")throw Error("Could not put content: could not migrate content");for(const T of Object.values(y.value))switch(T.typeName){case"asset":{d.push(T);break}case"shape":{p.push(T);break}case"binding":{f.push(T);break}}const m=new Map(n?p.map(T=>[T.id,T.id]):p.map(T=>[T.id,Ne()])),w=new Map(n?f.map(T=>[T.id,T.id]):f.map(T=>[T.id,jo()]));let b=this.getCurrentPageId(),_=1/0,x=[];for(const T of this.getSelectedShapes()){if(_===0)break;const M=this.isShapeOfType(T,"frame"),L=this.getShapeAncestors(T);M&&L.push(T);const G=M?L.length+1:L.length;if(G<_)_=G,x=L,b=M?T.id:T.parentId;else if(G===_){if(x.length!==L.length)throw Error(`Ancestors: ${x.length} !== ${L.length}`);if(x.length===0){b=l;break}else{b=l;for(let W=0;W<x.length&&L[W]===x[W];W++)b=L[W].id}}}let C=!1;if(!Sr(b)){const T=this.getShape(b);if(T){if(!this.getViewportPageBounds().includes(this.getShapePageBounds(T)))b=l;else if(c.length===1){const M=p.find(L=>L.id===c[0]);this.isShapeOfType(T,"frame")&&this.isShapeOfType(M,"frame")&&M.props.w===(T==null?void 0:T.props.w)&&M.props.h===(T==null?void 0:T.props.h)&&(C=!0)}}else b=l}C||(C=m.has(b)),C&&(b=this.getShape(b).parentId);let k=this.getHighestIndexForParent(b);const F=[],P=p.map(T=>{const M=m.get(T.id),L={...T,id:M};return c.includes(T.id)&&(L.parentId=l,F.push(L)),m.has(L.parentId)?L.parentId=m.get(T.parentId):(c.push(L.id),L.index=k,k=Ms(k)),L});if(P.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage)return Gu(this),this;const I=f.map(T=>({...T,id:Vr(w.get(T.id)),fromId:Vr(m.get(T.fromId)),toId:Vr(m.get(T.toId))})),j=[],A=[];for(const T of d)this.store.has(T.id)||((T.type==="image"||T.type==="video")&&((z=T.props.src)!=null&&z.startsWith("data:image"))&&(A.push(mt(T)),T.props.src=null),j.push(T));return Promise.allSettled(A.map(async T=>{const M=await fG(T.props.src,T.props.name,T.props.mimeType??"image/png"),L=await this.getAssetForExternalContent({type:"file",file:M});if(!L){this.deleteAssets([T.id]);return}this.updateAssets([{...L,id:T.id}])})),this.batch(()=>{j.length>0&&this.createAssets(j),this.createShapes(P),this.createBindings(I),s&&this.select(...F.map(W=>W.id)),b!==l&&this.reparentShapes(F.map(W=>W.id),b);const T=P.map(W=>this.getShape(W.id)),M=Z.Common(T.map(W=>this.getShapePageBounds(W)));if(i===void 0)if(Sr(b)){const W=this.getViewportPageBounds();o||W.includes(Z.From(M))?i=M.center:i=W.center}else{const W=this.getShape(b);i=ae.applyToPoint(this.getShapePageTransform(W),this.getShapeGeometry(W).bounds.center)}if(F.length===1){const W=F[0];if(this.isShapeOfType(W,"frame"))for(;this.getShapesAtPoint(i).some(O=>this.isShapeOfType(O,"frame")&&O.props.w===W.props.w&&O.props.h===W.props.h);)i.x+=M.w+16}const L=Z.Common(ge(F.map(({id:W})=>this.getShapePageBounds(W)))).center,G=v.Sub(i,L);this.updateShapes(F.map(({id:W})=>{const O=this.getShape(W),$=this.getShapeParentTransform(W).decompose().rotation,U=v.Rot(G,-$);return{id:O.id,type:O.type,x:O.x+U.x,y:O.y+U.y}}))}),this}async getSvgElement(r,a={}){const s=await FG(this,r,a);if(!s)return;const n=document.createDocumentFragment(),o=O5(n);Fl.flushSync(()=>{o.render(s.jsx)});const i=n.firstElementChild;return at(i instanceof SVGSVGElement,"Expected an SVG element"),o.unmount(),{svg:i,width:s.width,height:s.height}}async getSvgString(r,a={}){const s=await this.getSvgElement(r,a);return s?{svg:new XMLSerializer().serializeToString(s.svg),width:s.width,height:s.height}:void 0}async getSvg(r,a={}){const s=await this.getSvgElement(r,a);if(s)return s.svg}_updateInputsFromEvent(r){const{pointerVelocity:a,previousScreenPoint:s,previousPagePoint:n,currentScreenPoint:o,currentPagePoint:i}=this.inputs,{screenBounds:l}=this.store.unsafeGetWithoutCapture(ur),{x:c,y:d,z:p}=this.store.unsafeGetWithoutCapture(this.getCameraId()),f=r.point.x-l.x,h=r.point.y-l.y,y=r.point.z??.5;s.setTo(o),n.setTo(i),o.set(f,h);const m=f/p-c,w=h/p-d;isFinite(m)&&isFinite(w)&&i.set(m,w,y),this.inputs.isPen=r.type==="pointer"&&r.isPen,(r.name==="pointer_down"||this.inputs.isPinching)&&(a.set(0,0),this.inputs.originScreenPoint.setTo(o),this.inputs.originPagePoint.setTo(i)),this.history.ignore(()=>{var b;this.store.put([{id:ch,typeName:"pointer",x:i.x,y:i.y,lastActivityTimestamp:r.type==="pointer"&&r.pointerId===p6.CAMERA_MOVE?((b=this.store.unsafeGetWithoutCapture(ch))==null?void 0:b.lastActivityTimestamp)??this._tickManager.now:this._tickManager.now,meta:{}}])})}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}focus({focusContainer:r=!0}={}){return r&&this.focusManager.focus(),this.updateInstanceState({isFocused:!0}),this}blur({blurContainer:r=!0}={}){return this.getIsFocused()?(r?this.focusManager.blur():this.complete(),this.updateInstanceState({isFocused:!1}),this):this}getIsFocused(){return this.getInstanceState().isFocused}getSnapshot(){return sG(this.store)}loadSnapshot(r){return NS(this.store,r),this}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_flushEventsForTick(r){this.batch(()=>{if(this._pendingEventsForNextTick.length>0){const a=[...this._pendingEventsForNextTick];this._pendingEventsForNextTick.length=0;for(const s of a)this._flushEventForTick(s)}r>0&&this.root.handleEvent({type:"misc",name:"tick",elapsed:r}),this.scribbles.tick(r)})}maybeTrackPerformance(r){vt.measurePerformance.get()&&(this.performanceTracker.isStarted()?clearTimeout(this.performanceTrackerTimeout):this.performanceTracker.start(r),this.performanceTrackerTimeout=this.timers.setTimeout(()=>{this.performanceTracker.stop()},50))}}te([K],J.prototype,"getCanUndo",1);te([K],J.prototype,"getCanRedo",1);te([K],J.prototype,"getPath",1);te([K],J.prototype,"getCurrentTool",1);te([K],J.prototype,"getCurrentToolId",1);te([K],J.prototype,"getDocumentSettings",1);te([K],J.prototype,"getInstanceState",1);te([K],J.prototype,"getOpenMenus",1);te([K],J.prototype,"getIsMenuOpen",1);te([K],J.prototype,"getPageStates",1);te([K],J.prototype,"_getPageStatesQuery",1);te([K],J.prototype,"getCurrentPageState",1);te([K],J.prototype,"_getCurrentPageStateId",1);te([K],J.prototype,"getSelectedShapeIds",1);te([K],J.prototype,"getSelectedShapes",1);te([K],J.prototype,"getOnlySelectedShapeId",1);te([K],J.prototype,"getOnlySelectedShape",1);te([K],J.prototype,"getSelectionPageBounds",1);te([K],J.prototype,"getSelectionRotation",1);te([K],J.prototype,"getSelectionRotatedPageBounds",1);te([K],J.prototype,"getSelectionRotatedScreenBounds",1);te([K],J.prototype,"getFocusedGroupId",1);te([K],J.prototype,"getFocusedGroup",1);te([K],J.prototype,"getEditingShapeId",1);te([K],J.prototype,"getEditingShape",1);te([K],J.prototype,"getHoveredShapeId",1);te([K],J.prototype,"getHoveredShape",1);te([K],J.prototype,"getHintingShapeIds",1);te([K],J.prototype,"getHintingShape",1);te([K],J.prototype,"getErasingShapeIds",1);te([K],J.prototype,"getErasingShapes",1);te([K],J.prototype,"getCameraId",1);te([K],J.prototype,"getCamera",1);te([K],J.prototype,"getViewportPageBoundsForFollowing",1);te([K],J.prototype,"getCameraForFollowing",1);te([K],J.prototype,"getZoomLevel",1);te([K],J.prototype,"getViewportScreenBounds",1);te([K],J.prototype,"getViewportScreenCenter",1);te([K],J.prototype,"getViewportPageBounds",1);te([K],J.prototype,"_getCollaboratorsQuery",1);te([K],J.prototype,"getCollaborators",1);te([K],J.prototype,"getCollaboratorsOnCurrentPage",1);te([K],J.prototype,"getRenderingShapes",1);te([K],J.prototype,"_getAllPagesQuery",1);te([K],J.prototype,"getPages",1);te([K],J.prototype,"getCurrentPageId",1);te([K],J.prototype,"getCurrentPageShapeIdsSorted",1);te([K],J.prototype,"_getAllAssetsQuery",1);te([K],J.prototype,"_getShapeGeometryCache",1);te([K],J.prototype,"_getShapeHandlesCache",1);te([K],J.prototype,"_getShapePageTransformCache",1);te([K],J.prototype,"_getShapePageBoundsCache",1);te([K],J.prototype,"_getShapeClipPathCache",1);te([K],J.prototype,"_getShapeMaskCache",1);te([K],J.prototype,"_getShapeMaskedPageBoundsCache",1);te([K],J.prototype,"_notVisibleShapes",1);te([K],J.prototype,"getCulledShapes",1);te([K],J.prototype,"getCurrentPageBounds",1);te([K],J.prototype,"getCurrentPageShapes",1);te([K],J.prototype,"getCurrentPageShapesSorted",1);te([K],J.prototype,"getCurrentPageRenderingShapesSorted",1);te([K],J.prototype,"_getBindingsIndexCache",1);te([K],J.prototype,"_getSelectionSharedStyles",1);te([K({isEqual:(e,t)=>e.equals(t)})],J.prototype,"getSharedStyles",1);te([K],J.prototype,"getSharedOpacity",1);te([K],J.prototype,"getIsFocused",1);function Gu(e,t=e.getCurrentPageId()){const r=e.getPage(t).name;e.emit("max-shapes",{name:r,pageId:t,count:e.options.maxShapesPerPage})}function As(e,t){if(!t)return e;let r=null;const a=Object.entries(t);for(let s=0,n=a.length;s<n;s++){const[o,i]=a[s];if(i!==void 0&&!(o==="id"||o==="type"||o==="typeName")&&i!==e[o]){if(r||(r={...e}),o==="props"||o==="meta"){r[o]={...e[o]};for(const[l,c]of Object.entries(i))c!==void 0&&(r[o][l]=c);continue}r[o]=i}}return r||e}function VS(e,t,r){const a=e.getShape(t);if(!a)return;r.push(a);const s=e.getSortedChildIdsForParent(t);for(let n=0,o=s.length;n<o;n++)VS(e,s[n],r)}function U6(e,t,r){let a;if(e.history.ignore(()=>{const s=e.store.extractingChanges(()=>{const n=new Set,o=new Set;for(const i of t)if(e.getShape(i))for(const c of e.getBindingsInvolvingShape(i)){const d=t.has(c.fromId),p=t.has(c.toId);if(d&&p){n.add(c.id);continue}(!d||!p)&&o.add(c.id)}e.deleteBindings([...o],{isolateShapes:!0});try{a=Rn.ok(r(n))}catch(i){a=Rn.err(i)}});e.store.applyDiff(yb(s))}),a.ok)return a.value;throw a.error}function W6(e,t){if(!t.constraints)throw Error("Should have constraints here");const{padding:{x:r,y:a}}=t.constraints,s=e.getViewportScreenBounds(),n=Z.From(t.constraints.bounds),o=(s.w-r*2)/n.w,i=(s.h-a*2)/n.h;return{zx:o,zy:i}}function Vd(){const e=N(),t=GS();return H("isDarkMode",()=>(t==null?void 0:t.isDarkMode)??e.user.getIsDarkMode(),[t,e])}const H6="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",G6="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",Ku='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function hn(e,t,r,a,s,n=16,o=16){const i=(-r-t)*(Ce/180),l=Math.sin(i),c=Math.cos(i),d=1*c-1*l,p=1*l+1*c;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${s};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${d}' dy='${p}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${t+r} 16 16)${a?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+e.replaceAll('"',"'")+`</g></svg>") ${n} ${o}, pointer`}const rK=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],aK={none:()=>"none","ew-resize":(e,t,r)=>hn(G6,e,0,t,r),"ns-resize":(e,t,r)=>hn(G6,e,90,t,r),"nesw-resize":(e,t,r)=>hn(H6,e,0,t,r),"nwse-resize":(e,t,r)=>hn(H6,e,90,t,r),"nwse-rotate":(e,t,r)=>hn(Ku,e,0,t,r),"nesw-rotate":(e,t,r)=>hn(Ku,e,90,t,r),"senw-rotate":(e,t,r)=>hn(Ku,e,180,t,r),"swne-rotate":(e,t,r)=>hn(Ku,e,270,t,r)};function Wr(e,t=0,r="black"){return aK[e](i$(t),!1,r)}function sK(){const e=N(),t=or(),r=Vd();On("useCursor",()=>{const{type:a,rotation:s}=e.getInstanceState().cursor;if(rK.includes(a)){t.style.setProperty("--tl-cursor",`var(--tl-cursor-${a})`);return}t.style.setProperty("--tl-cursor",Wr(a,s,r?"white":"black"))},[e,t,r])}function nK(){const e=N(),t=or(),r=Vd(),a=H(vt.forceSrgb);_e.useEffect(()=>{r?(t.setAttribute("data-color-mode","dark"),t.classList.remove("tl-theme__light"),t.classList.add("tl-theme__dark")):(t.setAttribute("data-color-mode","light"),t.classList.remove("tl-theme__dark"),t.classList.add("tl-theme__light")),a?t.classList.add("tl-theme__force-sRGB"):t.classList.remove("tl-theme__force-sRGB")},[e,t,a,r])}function n0(e){const t=S.useRef();return S.useLayoutEffect(()=>{t.current=e}),S.useDebugValue(e),S.useCallback((...r)=>{const a=t.current;return at(a,"fn does not exist"),a(...r)},[])}function oK(){const[e,t]=S.useState(0);S.useEffect(()=>t(r=>r+1),[])}function iK(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
• If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
• If your hard disk is full, try clearing up some space and then reload the page.`)}function lK(){window.alert(`Oops! We could not access your browser's storage—and the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
• If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)}const cK=(e,t)=>t.some(r=>e instanceof r);let K6,V6;function dK(){return K6||(K6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uK(){return V6||(V6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YS=new WeakMap,jb=new WeakMap,XS=new WeakMap,l2=new WeakMap,o0=new WeakMap;function pK(e){const t=new Promise((r,a)=>{const s=()=>{e.removeEventListener("success",n),e.removeEventListener("error",o)},n=()=>{r(Ns(e.result)),s()},o=()=>{a(e.error),s()};e.addEventListener("success",n),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&YS.set(r,e)}).catch(()=>{}),o0.set(t,e),t}function fK(e){if(jb.has(e))return;const t=new Promise((r,a)=>{const s=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",o),e.removeEventListener("abort",o)},n=()=>{r(),s()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",n),e.addEventListener("error",o),e.addEventListener("abort",o)});jb.set(e,t)}let Eb={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return jb.get(e);if(t==="objectStoreNames")return e.objectStoreNames||XS.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ns(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function hK(e){Eb=e(Eb)}function gK(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=e.call(c2(this),t,...r);return XS.set(a,t.sort?t.sort():[t]),Ns(a)}:uK().includes(e)?function(...t){return e.apply(c2(this),t),Ns(YS.get(this))}:function(...t){return Ns(e.apply(c2(this),t))}}function mK(e){return typeof e=="function"?gK(e):(e instanceof IDBTransaction&&fK(e),cK(e,dK())?new Proxy(e,Eb):e)}function Ns(e){if(e instanceof IDBRequest)return pK(e);if(l2.has(e))return l2.get(e);const t=mK(e);return t!==e&&(l2.set(e,t),o0.set(t,e)),t}const c2=e=>o0.get(e);function bK(e,t,{blocked:r,upgrade:a,blocking:s,terminated:n}={}){const o=indexedDB.open(e,t),i=Ns(o);return a&&o.addEventListener("upgradeneeded",l=>{a(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),i.then(l=>{n&&l.addEventListener("close",()=>n()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),i}function yK(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",a=>t(a.oldVersion,a)),Ns(r).then(()=>{})}const _K=["get","getKey","getAll","getAllKeys","count"],wK=["put","add","delete","clear"],d2=new Map;function Y6(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(d2.get(t))return d2.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,s=wK.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(s||_K.includes(r)))return;const n=async function(o,...i){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return a&&(c=c.index(i.shift())),(await Promise.all([c[r](...i),s&&l.done]))[0]};return d2.set(t,n),n}hK(e=>({...e,get:(t,r,a)=>Y6(t,r)||e.get(t,r,a),has:(t,r)=>!!Y6(t,r)||e.has(t,r)}));const fg="TLDRAW_DOCUMENT_v2",ZS="TLDRAW_DB_NAME_INDEX_v2",Le={Records:"records",Schema:"schema",SessionState:"session_state"};async function hg(e,t){FK(e);const r=await bK(e,3,{upgrade(a){a.objectStoreNames.contains(Le.Records)||a.createObjectStore(Le.Records),a.objectStoreNames.contains(Le.Schema)||a.createObjectStore(Le.Schema),a.objectStoreNames.contains(Le.SessionState)||a.createObjectStore(Le.SessionState)}});try{return await t(r)}finally{r.close()}}async function vK({persistenceKey:e,sessionId:t,didCancel:r}){const a=fg+e;if(i0().includes(a))return await kK({persistenceKey:e,didCancel:r}),await hg(a,async s=>{var p,f;if(r!=null&&r())return;const n=s.transaction([Le.Records,Le.Schema,Le.SessionState],"readonly"),o=n.objectStore(Le.Records),i=n.objectStore(Le.Schema),l=n.objectStore(Le.SessionState);let c=t?(p=await l.get(t))==null?void 0:p.snapshot:null;c||(c=(f=(await l.getAll()).sort((y,m)=>y.updatedAt-m.updatedAt).pop())==null?void 0:f.snapshot);const d={records:await o.getAll(),schema:await i.get(Le.Schema),sessionStateSnapshot:c};if(r!=null&&r()){n.abort();return}return await n.done,d})}async function xK({persistenceKey:e,schema:t,changes:r,sessionId:a,sessionStateSnapshot:s,didCancel:n}){const o=fg+e;await hg(o,async i=>{const l=i.transaction([Le.Records,Le.Schema,Le.SessionState],"readwrite"),c=l.objectStore(Le.Records),d=l.objectStore(Le.Schema),p=l.objectStore(Le.SessionState);for(const[f,h]of Object.entries(r.added))await c.put(h,f);for(const[f,h]of Object.values(r.updated))await c.put(h,h.id);for(const f of Object.keys(r.removed))await c.delete(f);if(d.put(t.serialize(),Le.Schema),s&&a?p.put({snapshot:s,updatedAt:Date.now(),id:a},a):(s||a)&&console.error("sessionStateSnapshot and instanceId must be provided together"),n!=null&&n())return l.abort();await l.done})}async function SK({persistenceKey:e,schema:t,snapshot:r,sessionId:a,sessionStateSnapshot:s,didCancel:n}){const o=fg+e;await hg(o,async i=>{const l=i.transaction([Le.Records,Le.Schema,Le.SessionState],"readwrite"),c=l.objectStore(Le.Records),d=l.objectStore(Le.Schema),p=l.objectStore(Le.SessionState);await c.clear();for(const[f,h]of Object.entries(r))await c.put(h,f);if(d.put(t.serialize(),Le.Schema),s&&a?p.put({snapshot:s,updatedAt:Date.now(),id:a},a):(s||a)&&console.error("sessionStateSnapshot and instanceId must be provided together"),n!=null&&n())return l.abort();await l.done})}async function kK({persistenceKey:e,didCancel:t}){await hg(fg+e,async r=>{const a=r.transaction([Le.SessionState],"readwrite"),s=a.objectStore(Le.SessionState),n=(await s.getAll()).sort((i,l)=>i.updatedAt-l.updatedAt);if(n.length<10){await a.done;return}const o=n.slice(0,n.length-10);for(const{id:i}of o)await s.delete(i);if(t!=null&&t())return a.abort();await a.done})}function i0(){const e=JSON.parse(P_(ZS)||"[]")??[];return Array.isArray(e)?e:[]}function FK(e){const t=new Set(i0());t.add(e),I_(ZS,JSON.stringify([...t]))}const CK=350,PK=1e4,X6=Symbol("UPDATE_INSTANCE_STATE"),IK=e=>e;class AK{constructor(t){g(this,"onmessage")}postMessage(t){}close(){}}const jK=typeof BroadcastChannel>"u"?AK:BroadcastChannel;class EK{constructor(t,{persistenceKey:r,sessionId:a=yh,onLoad:s,onLoadError:n},o=new jK(`tldraw-tab-sync-${r}`)){g(this,"disposables",new Set);g(this,"diffQueue",[]);g(this,"didDispose",!1);g(this,"shouldDoFullDBWrite",!0);g(this,"isReloading",!1);g(this,"persistenceKey");g(this,"sessionId");g(this,"serializedSchema");g(this,"isDebugging",!1);g(this,"documentTypes");g(this,"$sessionStateSnapshot");g(this,"initTime",Date.now());g(this,"isPersisting",!1);g(this,"didLastWriteError",!1);g(this,"scheduledPersistTimeout",null);this.store=t,this.channel=o,typeof window<"u"&&(window.tlsync=this),this.persistenceKey=r,this.sessionId=a,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=OS(this.store),this.disposables.add(t.listen(({changes:i})=>{this.diffQueue.push(i),this.channel.postMessage(IK({type:"diff",storeId:this.store.id,changes:i,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(t.listen(()=>{this.diffQueue.push(X6),this.schedulePersist()},{scope:"session"})),this.connect(s,n),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(i=>i.scope==="document").map(i=>i.typeName))}debug(...t){this.isDebugging&&console.debug(...t)}async connect(t,r){this.debug("connecting");let a;try{a=await vK({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:()=>this.didDispose})}catch(s){r(s),lK(),typeof window<"u"&&window.location.reload();return}if(this.debug("loaded data from store",a,"didDispose",this.didDispose),!this.didDispose)try{if(a){const s=Object.fromEntries(a.records.map(i=>[i.id,i])),n=a.sessionStateSnapshot??rG(s),o=this.store.schema.migrateStoreSnapshot({store:s,schema:a.schema??this.store.schema.serializeEarliestVersion()});if(o.type==="error"){console.error("failed to migrate store",o),r(new Error(`Failed to migrate store: ${o.reason}`));return}this.store.mergeRemoteChanges(()=>{this.store.put(Object.values(o.value).filter(i=>this.documentTypes.has(i.typeName)),"initialize")}),n&&zS(this.store,n)}this.channel.onmessage=({data:s})=>{var i,l;this.debug("got message",s);const n=s,o=this.store.schema.getMigrationsSince(n.schema);if(o.ok){if(o.value.length>0){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}}else{if(Date.now()-this.initTime<5e3){r(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,(l=(i=window==null?void 0:window.location)==null?void 0:i.reload)==null||l.call(i);return}n.type==="diff"&&(this.debug("applying diff"),Ao(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(n.changes),this.store.ensureStoreIsUsable()})}))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),t(this)}catch(s){if(this.debug("error loading data from store",s),this.didDispose)return;r(s);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(t=>t())}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),!this.scheduledPersistTimeout&&(this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?PK:CK))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),!this.isPersisting&&(this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist())}async doPersist(){at(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start");const t=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await SK({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const r=j_(t.filter(a=>a!==X6));await xK({persistenceKey:this.persistenceKey,changes:r,schema:this.store.schema,didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(r){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",r),iK(),typeof window<"u"&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function DK({initialData:e,defaultName:t="",id:r,...a}={}){const s="schema"in a&&a.schema?a.schema:Zq({shapes:"shapeUtils"in a&&a.shapeUtils?Z6(US(a.shapeUtils)):void 0,bindings:"bindingUtils"in a&&a.bindingUtils?Z6(qS(a.bindingUtils)):void 0,migrations:"migrations"in a?a.migrations:void 0});return new M_({id:r,schema:s,initialData:e,props:{defaultName:t}})}function Z6(e){return Object.fromEntries(e.map(t=>[t.type,{props:t.props,migrations:t.migrations}]))}function J6(e){const t=DK(e);return e.snapshot&&NS(t,e.snapshot),{store:t,opts:e}}function JS(e){const[t,r]=S.useState(()=>J6(e));if(!$v(t.opts,e)){const a=J6(e);return r(a),a.store}return t.store}function TK({persistenceKey:e,sessionId:t,...r}){const[a,s]=S.useState(null),n=JS(r);return S.useEffect(()=>{const o=rt();if(!e){s({id:o,storeWithStatus:{status:"not-synced",store:n}});return}s({id:o,storeWithStatus:{status:"loading"}});const i=c=>{s(d=>(d==null?void 0:d.id)===o?{id:o,storeWithStatus:c}:d)},l=new EK(n,{sessionId:t,persistenceKey:e,onLoad(){i({store:n,status:"synced-local"})},onLoadError(c){i({status:"error",error:c})}});return()=>{s(c=>(c==null?void 0:c.id)===o?null:c),l.close()}},[e,n,t]),(a==null?void 0:a.storeWithStatus)??{status:"loading"}}function MK(){const e=N(),t=or();S.useEffect(()=>{const r=n=>t.style.setProperty("--tl-zoom",n.toString()),a=Rv(r,100),s=new jl("useZoomCss",()=>{e.getCurrentPageShapeIds().size<300?r(e.getZoomLevel()):a(e.getZoomLevel())});return s.attach(),s.execute(),()=>{s.detach()}},[e,t])}const BK=[],LK=[],RK=[],OK=S.memo(function({store:t,components:r,className:a,user:s,...n}){const[o,i]=_e.useState(null),l=S.useMemo(()=>s??MS(),[s]),c=(r==null?void 0:r.ErrorFallback)===void 0?PS:r==null?void 0:r.ErrorFallback,d={...n,shapeUtils:n.shapeUtils??BK,bindingUtils:n.bindingUtils??LK,tools:n.tools??RK,components:r};return u.jsx("div",{ref:i,draggable:!1,className:le("tl-container tl-theme__light",a),onPointerDown:qt,tabIndex:-1,children:u.jsx(hd,{fallback:c,onError:p=>F_(p,{tags:{origin:"react.tldraw-before-app"}}),children:o&&u.jsx(y$,{container:o,children:u.jsx(zH,{overrides:r,children:t?t instanceof M_?u.jsx(ek,{...d,store:t,user:l}):u.jsx(QS,{...d,store:t,user:l}):u.jsx(zK,{...d,store:t,user:l})})})})})});function zK(e){const{defaultName:t,snapshot:r,initialData:a,shapeUtils:s,bindingUtils:n,persistenceKey:o,sessionId:i,user:l}=e,c=TK({shapeUtils:s,bindingUtils:n,initialData:a,persistenceKey:o,sessionId:i,defaultName:t,snapshot:r});return u.jsx(QS,{...e,store:c,user:l})}const QS=S.memo(function({store:t,user:r,...a}){const s=or();S.useLayoutEffect(()=>{r.userPreferences.get().isDarkMode&&(s.classList.remove("tl-theme__light"),s.classList.add("tl-theme__dark"))},[s,r]);const{LoadingScreen:n}=st();switch(t.status){case"error":throw t.error;case"loading":return n?u.jsx(n,{}):null}return u.jsx(ek,{...a,store:t.store,user:r})});function ek({onMount:e,children:t,store:r,tools:a,shapeUtils:s,bindingUtils:n,user:o,initialState:i,autoFocus:l=!0,inferDarkMode:c,cameraOptions:d,options:p}){const{ErrorFallback:f}=st(),h=or(),[y,m]=S.useState(null),[w]=S.useState(l);S.useLayoutEffect(()=>{const x=new J({store:r,shapeUtils:s,bindingUtils:n,tools:a,getContainer:()=>h,user:o,initialState:i,autoFocus:w,inferDarkMode:c,cameraOptions:d,options:p});return m(x),()=>{x.dispose()}},[h,s,n,a,r,o,i,w,c,d,p]);const b=S.useSyncExternalStore(S.useCallback(x=>y?(y.on("crash",x),()=>y.off("crash",x)):()=>{},[y]),()=>(y==null?void 0:y.getCrashingError())??null),{Canvas:_}=st();return y?u.jsx(hd,{fallback:f,onError:x=>y.annotateError(x,{origin:"react.tldraw",willCrashApp:!0}),children:b?u.jsx(qK,{crashingError:b}):u.jsx(ig.Provider,{value:y,children:u.jsx(NK,{onMount:e,children:t??(_?u.jsx(_,{}):null)})})}):null}function NK({children:e,onMount:t}){return MK(),sK(),nK(),oK(),$K(t),u.jsx(u.Fragment,{children:e})}function qK({crashingError:e}){throw e}function l0({children:e}){return u.jsx("div",{className:"tl-loading",children:e})}function tk({children:e}){return u.jsx("div",{className:"tl-loading",children:e})}function $K(e){const t=N(),r=n0(a=>{let s;return a.history.ignore(()=>{s=e==null?void 0:e(a),a.emit("mount")}),window.tldrawReady=!0,s});_e.useLayoutEffect(()=>{if(t)return r==null?void 0:r(t)},[t,r])}function qo({children:e,className:t="",...r}){return u.jsx("div",{...r,className:le("tl-html-container",t),children:e})}class Np{constructor(t){this.editor=t}}g(Np,"props"),g(Np,"migrations"),g(Np,"type");function rk(e,t,r={}){const{newPoint:a,handle:s,scaleX:n,scaleY:o}=t,{minWidth:i=1,maxWidth:l=1/0,minHeight:c=1,maxHeight:d=1/0}=r;let p=e.props.w*n,f=e.props.h*o;const h=new v(0,0);if(p>0){if(p<i){switch(s){case"top_left":case"left":case"bottom_left":{h.x=p-i;break}case"top":case"bottom":{h.x=(p-i)/2;break}default:h.x=0}p=i}}else if(h.x=p,p=-p,p<i){switch(s){case"top_left":case"left":case"bottom_left":{h.x=-p;break}default:h.x=-i}p=i}if(f>0){if(f<c){switch(s){case"top_left":case"top":case"top_right":{h.y=f-c;break}case"right":case"left":{h.y=(f-c)/2;break}default:h.y=0}f=c}}else if(h.y=f,f=-f,f<c){switch(s){case"top_left":case"top":case"top_right":{h.y=-f;break}default:h.y=-c}f=c}const{x:y,y:m}=h.rot(e.rotation).add(a);return{x:y,y:m,props:{w:Math.min(l,p),h:Math.min(d,f)}}}class Bl extends za{constructor(){super(...arguments);g(this,"onResize",(r,a)=>rk(r,a))}getGeometry(r){return new Ys({width:r.props.w,height:r.props.h,isFilled:!0})}getHandleSnapGeometry(r){return{points:this.getGeometry(r).bounds.cornersAndCenter}}}var q2;let UK=(q2=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(q2,"id","idle"),q2);var $2;let WK=($2=class extends se{constructor(){super(...arguments);g(this,"markId","");g(this,"wasFocusedOnEnter",!1);g(this,"onEnter",()=>{this.wasFocusedOnEnter=!this.editor.getIsMenuOpen()});g(this,"onPointerMove",r=>{if(this.editor.inputs.isDragging){const{originPagePoint:a}=this.editor.inputs,s=this.parent.shapeType,n=Ne();this.markId=`creating:${n}`,this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:s,x:a.x,y:a.y,props:{w:1,h:1}}]).select(n),this.editor.setCurrentTool("select.resizing",{...r,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:this.parent.onCreate})}});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.cancel()})}complete(){const{originPagePoint:r}=this.editor.inputs;if(!this.wasFocusedOnEnter)return;this.editor.mark(this.markId);const a=this.parent.shapeType,s=Ne();this.editor.mark(this.markId),this.editor.createShapes([{id:s,type:a,x:r.x,y:r.y}]);const n=this.editor.getShape(s),{w:o,h:i}=this.editor.getShapeUtil(n).getDefaultProps(),l=new v(o/2,i/2),c=this.editor.getShapeParentTransform(n);c&&l.rot(-c.rotation()),this.editor.updateShapes([{id:s,type:a,x:n.x-l.x,y:n.y-l.y}]),this.editor.setSelectedShapes([s]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}},g($2,"id","pointing"),$2);class qp extends se{constructor(){super(...arguments);g(this,"onCreate")}}g(qp,"id","box"),g(qp,"initial","idle"),g(qp,"children",()=>[UK,WK]);function gg(e){const t=N();return H("isEditing",()=>t.getEditingShapeId()===e,[t,e])}function HK(){return S.useId().replace(/:/g,"_")}function es(e){const t=N();return S.useMemo(function(){const s=c=>{if(c.isKilled)return;if(c.button===W_){t.dispatch({type:"pointer",target:"selection",handle:e,name:"right_click",...Er(c)});return}if(c.button!==0)return;const d=hh(c.currentTarget);function p(){d.removeEventListener("pointerup",p),Ud(d,c)}$d(d,c),d.addEventListener("pointerup",p),t.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:e,...Er(c)}),qt(c)};let n,o;function i(c){c.isKilled||c.button===0&&(c.clientX===n&&c.clientY===o||(n=c.clientX,o=c.clientY,t.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:e,...Er(c)})))}return{onPointerDown:s,onPointerMove:i,onPointerUp:c=>{c.isKilled||c.button===0&&t.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:e,...Er(c)})}}},[t,e])}const GK=20,KK=8;function c0(e,t=GK){return Math.max(KK,Math.ceil(e/t))}class Ri extends ro{constructor(r){super({...r,isFilled:!1,isClosed:!1});g(this,"_center");g(this,"radius");g(this,"start");g(this,"end");g(this,"largeArcFlag");g(this,"sweepFlag");g(this,"measure");g(this,"angleStart");g(this,"angleEnd");const{center:a,sweepFlag:s,largeArcFlag:n,start:o,end:i}=r;if(o.equals(i))throw Error("Arc must have different start and end points.");this.angleStart=v.Angle(a,o),this.angleEnd=v.Angle(a,i),this.radius=v.Dist(a,o),this.measure=l$(this.angleStart,this.angleEnd,s,n),this.start=o,this.end=i,this.sweepFlag=s,this.largeArcFlag=n,this._center=a}nearestPoint(r){const{_center:a,measure:s,radius:n,angleEnd:o,angleStart:i,start:l,end:c}=this,d=Fb(s,i,o,a.angle(r));if(d<=0)return l;if(d>=1)return c;const p=a.clone().add(r.clone().sub(a).uni().mul(n));let f,h=1/0,y;for(const m of[l,c,p])y=v.Dist2(r,m),y<h&&(f=m,h=y);if(!f)throw Error("nearest point not found");return f}hitTestLineSegment(r,a){const{_center:s,radius:n,measure:o,angleStart:i,angleEnd:l}=this,c=Gd(r,a,s,n);return c===null?!1:c.some(d=>{const p=Fb(o,i,l,s.angle(d));return p>=0&&p<=1})}getVertices(){const{_center:r,measure:a,length:s,radius:n,angleStart:o}=this,i=[];for(let l=0,c=c0(Math.abs(s));l<c+1;l++){const d=l/c*a,p=o+d;i.push(zo(r,n,p))}return i}getSvgPathData(r=!0){const{start:a,end:s,radius:n,largeArcFlag:o,sweepFlag:i}=this;return`${r?`M${a.toFixed()}`:""} A${n} ${n} 0 ${o} ${i} ${s.toFixed()}`}getLength(){return this.measure*this.radius}}class d0 extends ro{constructor(r){super({isClosed:!0,...r});g(this,"_center");g(this,"radius");g(this,"x");g(this,"y");this.config=r;const{x:a=0,y:s=0,radius:n}=r;this.x=a,this.y=s,this._center=new v(n+a,n+s),this.radius=n}getBounds(){return new Z(this.x,this.y,this.radius*2,this.radius*2)}getVertices(){const{_center:r,radius:a}=this,s=Be*a,n=[];for(let o=0,i=c0(s);o<i;o++){const l=o/i*Be;n.push(zo(r,a,l))}return n}nearestPoint(r){const{_center:a,radius:s}=this;return a.equals(r)?v.AddXY(a,s,0):a.clone().add(r.clone().sub(a).uni().mul(s))}hitTestLineSegment(r,a,s=0){const{_center:n,radius:o}=this;return Gd(r,a,n,o+s)!==null}getSvgPathData(){const{_center:r,radius:a}=this;return`M${r.x+a},${r.y} a${a},${a} 0 1,0 ${a*2},0a${a},${a} 0 1,0 -${a*2},0`}}class Zt extends Ml{constructor(r){const{start:a,cp1:s,cp2:n,end:o}=r;super({...r,points:[a,o]});g(this,"a");g(this,"b");g(this,"c");g(this,"d");this.a=a,this.b=s,this.c=n,this.d=o}getVertices(){const r=[],{a,b:s,c:n,d:o}=this;for(let i=0,l=10;i<=l;i++){const c=i/l;r.push(new v((1-c)*(1-c)*(1-c)*a.x+3*((1-c)*(1-c))*c*s.x+3*(1-c)*(c*c)*n.x+c*c*c*o.x,(1-c)*(1-c)*(1-c)*a.y+3*((1-c)*(1-c))*c*s.y+3*(1-c)*(c*c)*n.y+c*c*c*o.y))}return r}midPoint(){return Zt.GetAtT(this,.5)}nearestPoint(r){let a,s=1/0,n,o;for(const i of this.segments)o=i.nearestPoint(r),n=v.Dist2(o,r),n<s&&(a=o,s=n);if(!a)throw Error("nearest point not found");return a}getSvgPathData(r=!0){const{a,b:s,c:n,d:o}=this;return`${r?`M ${a.toFixed()} `:""} C${s.toFixed()} ${n.toFixed()} ${o.toFixed()}`}static GetAtT(r,a){const{a:s,b:n,c:o,d:i}=r;return new v((1-a)*(1-a)*(1-a)*s.x+3*((1-a)*(1-a))*a*n.x+3*(1-a)*(a*a)*o.x+a*a*a*i.x,(1-a)*(1-a)*(1-a)*s.y+3*((1-a)*(1-a))*a*n.y+3*(1-a)*(a*a)*o.y+a*a*a*i.y)}getLength(r=32){let a,s=this.a,n=0;for(let o=1;o<=r;o++)a=Zt.GetAtT(this,o/r),n+=v.Dist(s,a),s=a;return n}}class VK extends ro{constructor(r){super({...r,isClosed:!1,isFilled:!1});g(this,"points");g(this,"_segments");const{points:a}=r;this.points=a}get segments(){if(!this._segments){this._segments=[];const{points:r}=this,a=r.length,s=a-2,n=1.25;for(let o=0;o<a-1;o++){const i=o===0?r[0]:r[o-1],l=r[o],c=r[o+1],d=o===s?c:r[o+2],p=l,f=o===0?i:new v(l.x+(c.x-i.x)/6*n,l.y+(c.y-i.y)/6*n),h=o===s?c:new v(c.x-(d.x-l.x)/6*n,c.y-(d.y-l.y)/6*n),y=c;this._segments.push(new Zt({start:p,cp1:f,cp2:h,end:y}))}}return this._segments}getLength(){return this.segments.reduce((r,a)=>r+a.length,0)}getVertices(){const r=this.segments.reduce((a,s)=>a.concat(s.vertices),[]);return r.push(this.points[this.points.length-1]),r}nearestPoint(r){let a,s=1/0,n,o;for(const i of this.segments)o=i.nearestPoint(r),n=v.Dist2(o,r),n<s&&(a=o,s=n);if(!a)throw Error("nearest point not found");return a}hitTestLineSegment(r,a){return this.segments.some(s=>s.hitTestLineSegment(r,a))}getSvgPathData(){let r=this.segments.reduce((a,s,n)=>a+s.getSvgPathData(n===0),"");return this.isClosed&&(r+="Z"),r}}class YK extends ro{constructor(r){super({...r,isClosed:!0});g(this,"w");g(this,"h");g(this,"_edges");this.config=r;const{width:a,height:s}=r;this.w=a,this.h=s}get edges(){if(!this._edges){const{vertices:r}=this;this._edges=[];for(let a=0,s=r.length;a<s;a++){const n=r[a],o=r[(a+1)%s];this._edges.push(new Rs({start:n,end:o}))}}return this._edges}getVertices(){const r=Math.max(1,this.w),a=Math.max(1,this.h),s=r/2,n=a/2,o=Math.pow(s-n,2)/Math.pow(s+n,2),i=Ce*(s+n)*(1+3*o/(10+Math.sqrt(4-3*o))),l=c0(i),c=Be/l,d=Math.cos(c),p=Math.sin(c);let f=0,h=1,y=0,m=1;const w=Array(l);for(let b=0;b<l;b++)w[b]=new v(s+s*h,n+n*f),y=p*h+d*f,m=d*h-p*f,f=y,h=m;return w}nearestPoint(r){let a,s=1/0,n,o;for(const i of this.edges)o=i.nearestPoint(r),n=v.Dist2(o,r),n<s&&(a=o,s=n);if(!a)throw Error("nearest point not found");return a}hitTestLineSegment(r,a){return this.edges.some(s=>s.hitTestLineSegment(r,a))}getBounds(){return new Z(0,0,this.w,this.h)}getLength(){const{w:r,h:a}=this,s=r/2,n=a/2,o=Math.max(0,s),i=Math.max(0,n);return Jx(o,i)}getSvgPathData(r=!1){const{w:a,h:s}=this,n=a/2,o=s/2,i=Math.max(0,n),l=Math.max(0,o);return`${r?`M${n-i},${o}`:""} a${i},${l},0,1,1,${i*2},0a${i},${l},0,1,1,-${i*2},0`}}class XK extends ro{constructor(r){super({...r,isClosed:!0});g(this,"w");g(this,"h");g(this,"a");g(this,"b");g(this,"c");g(this,"d");this.config=r;const{width:a,height:s}=r;if(this.w=a,this.h=s,s>a){const n=a/2;this.a=new Ri({start:new v(0,n),end:new v(a,n),center:new v(a/2,n),sweepFlag:1,largeArcFlag:1}),this.b=new Rs({start:new v(a,n),end:new v(a,s-n)}),this.c=new Ri({start:new v(a,s-n),end:new v(0,s-n),center:new v(a/2,s-n),sweepFlag:1,largeArcFlag:1}),this.d=new Rs({start:new v(0,s-n),end:new v(0,n)})}else{const n=s/2;this.a=new Ri({start:new v(n,s),end:new v(n,0),center:new v(n,n),sweepFlag:1,largeArcFlag:1}),this.b=new Rs({start:new v(n,0),end:new v(a-n,0)}),this.c=new Ri({start:new v(a-n,0),end:new v(a-n,s),center:new v(a-n,n),sweepFlag:1,largeArcFlag:1}),this.d=new Rs({start:new v(a-n,s),end:new v(n,s)})}}nearestPoint(r){let a,s=1/0,n,o;const{a:i,b:l,c,d}=this;for(const p of[i,l,c,d])o=p.nearestPoint(r),n=v.Dist2(o,r),n<s&&(a=o,s=n);if(!a)throw Error("nearest point not found");return a}hitTestLineSegment(r,a){const{a:s,b:n,c:o,d:i}=this;return[s,n,o,i].some(l=>l.hitTestLineSegment(r,a))}getVertices(){const{a:r,b:a,c:s,d:n}=this;return[r,a,s,n].reduce((o,i)=>(o.push(...i.vertices),o),[])}getBounds(){return new Z(0,0,this.w,this.h)}getLength(){const{h:r,w:a}=this;return r>a?(Ce*(a/2)+(r-a))*2:(Ce*(r/2)+(a-r))*2}getSvgPathData(){const{a:r,b:a,c:s,d:n}=this;return[r,a,s,n].map((o,i)=>o.getSvgPathData(i===0)).join(" ")+" Z"}}function Q6(e,t,r,a,s,n){const o=e.options.edgeScrollDistance,i=a?e.options.coarsePointerWidth:0,l=t-i,c=t+i,d=s?0:o,p=n?r:r-o;return l<d?Math.min(1,(d-l)/o):c>p?-Math.min(1,(c-p)/o):0}function u0(e){if(!e.inputs.isDragging||e.inputs.isPanning||e.getCameraOptions().isLocked)return;const{inputs:{currentScreenPoint:{x:t,y:r}}}=e,a=e.getZoomLevel(),s=e.getViewportScreenBounds(),n=s.w<1e3?.612:1,o=s.h<1e3?.612:1,{isCoarsePointer:i,insets:[l,c,d,p]}=e.getInstanceState(),f=Q6(e,t,s.w,i,p,c),h=Q6(e,r,s.h,i,l,d);if(f===0&&h===0)return;const y=e.user.getEdgeScrollSpeed()*e.options.edgeScrollSpeed,m=y*f*n/a,w=y*h*o/a,b=e.getCamera();e.setCamera(new v(b.x+m,b.y+w,b.z))}async function ZK({shouldReload:e=!0}={}){sN(),await Promise.all(i0().map(t=>yK(t))),aN(),e&&window.location.reload()}typeof window<"u"&&(window.__tldraw__hardReset=ZK);function JK(e,t="_blank"){J_.openWindow(e,t)}function QK({children:e}){const t=N();return H("shouldDisplayHandles",()=>{if(t.isInAny("select.idle","select.pointing_handle","select.pointing_shape"))return!0;if(t.isInAny("select.editing_shape")){const a=t.getOnlySelectedShape();return a&&t.isShapeOfType(a,"note")}return!1},[t])?u.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:e}):null}const{PI:eV}=Math,el=eV+1e-4;function ak(e,t={}){const{size:r=16,smoothing:a=.5}=t;if(e.length===0||r<=0)return{left:[],right:[]};const s=e[0],n=e[e.length-1],o=n.runningLength,i=Math.pow(r*a,2),l=[],c=[];let d=e[0].vector,p=e[0].point,f=p,h=p,y=f,m=!1,w;for(let b=0;b<e.length;b++){w=e[b];const{point:_,vector:x}=e[b],C=w.vector.dpr(d),k=(b<e.length-1?e[b+1]:e[b]).vector,F=b<e.length-1?k.dpr(w.vector):1,P=C<0&&!m,I=F!==null&&F<.2;if(P||I){if(F>-.62&&o-w.runningLength>w.radius){const A=d.clone().mul(w.radius);d.clone().cpr(k)<0?(h=v.Add(_,A),y=v.Sub(_,A)):(h=v.Sub(_,A),y=v.Add(_,A)),l.push(h),c.push(y)}else{const A=d.clone().mul(w.radius).per(),D=v.Sub(w.input,A);for(let z=1/13,T=0;T<1;T+=z)h=v.RotWith(D,w.input,el*T),l.push(h),y=v.RotWith(D,w.input,el+el*-T),c.push(y)}p=h,f=y,I&&(m=!0);continue}if(m=!1,w===s||w===n){const A=v.Per(x).mul(w.radius);l.push(v.Sub(_,A)),c.push(v.Add(_,A));continue}const j=v.Lrp(k,x,F).per().mul(w.radius);h=v.Sub(_,j),(b<=1||v.Dist2(p,h)>i)&&(l.push(h),p=h),y=v.Add(_,j),(b<=1||v.Dist2(f,y)>i)&&(c.push(y),f=y),d=x}return{left:l,right:c}}function p0(e,t={}){const{size:r=16,start:a={},end:s={},last:n=!1}=t,{cap:o=!0}=a,{cap:i=!0}=s;if(e.length===0||r<=0)return[];const l=e[0],c=e[e.length-1],d=c.runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(r,d):a.taper,f=s.taper===!1?0:s.taper===!0?Math.max(r,d):s.taper,{left:h,right:y}=ak(e,t),m=l.point,w=e.length>1?e[e.length-1].point:v.AddXY(l.point,1,1);if(e.length===1&&(!(p||f)||n)){const C=v.Add(m,v.Sub(m,w).uni().per().mul(-l.radius)),k=[];for(let F=1/13,P=F;P<=1;P+=F)k.push(v.RotWith(C,m,el*2*P));return k}const b=[];if(!(p||f&&e.length===1))if(o)for(let C=1/8,k=C;k<=1;k+=C){const F=v.RotWith(y[0],m,el*k);b.push(F)}else{const C=v.Sub(h[0],y[0]),k=v.Mul(C,.5),F=v.Mul(C,.51);b.push(v.Sub(m,k),v.Sub(m,F),v.Add(m,F),v.Add(m,k))}const _=[],x=c.vector.clone().per().neg();if(f||p&&e.length===1)_.push(w);else if(i){const C=v.Add(w,v.Mul(x,c.radius));for(let k=1/29,F=k;F<1;F+=k)_.push(v.RotWith(C,w,el*3*F))}else _.push(v.Add(w,v.Mul(x,c.radius)),v.Add(w,v.Mul(x,c.radius*.99)),v.Sub(w,v.Mul(x,c.radius*.99)),v.Sub(w,v.Mul(x,c.radius)));return h.concat(_,y.reverse(),b)}const tV=.025,rV=.01;function bs(e,t={}){var w;const{streamline:r=.5,size:a=16,simulatePressure:s=!1}=t;if(e.length===0)return[];const n=.15+(1-r)*.85;let o=e.map(v.From),i=0;if(!s){let b=o[0];for(;b&&!(b.z>=tV);)o.shift(),b=o[0]}if(!s){let b=o[o.length-1];for(;b&&!(b.z>=rV);)o.pop(),b=o[o.length-1]}if(o.length===0)return[{point:v.From(e[0]),input:v.From(e[0]),pressure:s?.5:.15,vector:new v(1,1),distance:0,runningLength:0,radius:1}];let l=o[1];for(;l&&!(v.Dist2(l,o[0])>(a/3)**2);)o[0].z=Math.max(o[0].z,l.z),o.splice(1,1),l=o[1];const c=o.pop();for(l=o[o.length-1];l&&!(v.Dist2(l,c)>(a/3)**2);)o.pop(),l=o[o.length-1],i++;o.push(c);const d=t.last||!t.simulatePressure||o.length>1&&v.Dist2(o[o.length-1],o[o.length-2])<a**2||i>0;if(o.length===2&&t.simulatePressure){const b=o[1];o=o.slice(0,-1);for(let _=1;_<5;_++){const x=v.Lrp(o[0],b,_/4);x.z=(o[0].z+(b.z-o[0].z))*_/4,o.push(x)}}const p=[{point:o[0],input:o[0],pressure:s?.5:o[0].z,vector:new v(1,1),distance:0,runningLength:0,radius:1}];let f=0,h=p[0],y,m;d&&r>0&&o.push(o[o.length-1].clone());for(let b=1,_=o.length;b<_;b++)y=!n||t.last&&b===_-1?o[b].clone():o[b].clone().lrp(h.point,1-n),!h.point.equals(y)&&(m=v.Dist(y,h.point),f+=m,!(b<4&&f<a)&&(h={input:o[b],point:y,pressure:s?.5:o[b].z,vector:v.Sub(h.point,y).uni(),distance:m,runningLength:f,radius:1},p.push(h)));if((w=p[1])!=null&&w.vector&&(p[0].vector=p[1].vector.clone()),f<1){const b=Math.max(.5,...p.map(_=>_.pressure));p.forEach(_=>_.pressure=b)}return p}const{min:gn}=Math,u2=.275;function mg(e,t){const{size:r=16,thinning:a=.5,simulatePressure:s=!0,easing:n=w=>w,start:o={},end:i={}}=t,{easing:l=ar.easeOutQuad}=o,{easing:c=ar.easeOutCubic}=i,d=e[e.length-1].runningLength;let p,f=e[0].pressure,h;if(!s&&d<r){const w=e.reduce((b,_)=>Math.max(b,_.pressure),.5);return e.forEach(b=>{b.pressure=w,b.radius=r*n(.5-a*(.5-b.pressure))}),e}else{let w;for(let b=0,_=e.length;b<_&&(h=e[b],!(h.runningLength>r*5));b++){const x=gn(1,h.distance/r);if(s){const C=gn(1,1-x);w=gn(1,f+(C-f)*(x*u2))}else w=gn(1,f+(h.pressure-f)*.5);f=f+(w-f)*.5}for(let b=0;b<e.length;b++){if(h=e[b],a){let{pressure:_}=h;const x=gn(1,h.distance/r);if(s){const C=gn(1,1-x);_=gn(1,f+(C-f)*(x*u2))}else _=gn(1,f+(_-f)*(x*u2));h.radius=r*n(.5-a*(.5-_)),f=_}else h.radius=r/2;p===void 0&&(p=h.radius)}}const y=o.taper===!1?0:o.taper===!0?Math.max(r,d):o.taper,m=i.taper===!1?0:i.taper===!0?Math.max(r,d):i.taper;if(y||m)for(let w=0;w<e.length;w++){h=e[w];const{runningLength:b}=h,_=b<y?l(b/y):1,x=d-b<m?c((d-b)/m):1;h.radius=Math.max(.01,h.radius*Math.min(_,x))}return e}function aV(e,t={}){return p0(mg(bs(e,t),t),t)}function e9({scribble:e,zoom:t,color:r,opacity:a,className:s}){if(!e.points.length)return null;const n=aV(e.points,{size:e.size/t,start:{taper:e.taper,easing:ar.linear},last:e.state==="stopping",simulatePressure:!1,streamline:.32});let o;if(n.length<4){const i=e.size/t/2,{x:l,y:c}=e.points[e.points.length-1];o=`M ${l-i},${c} a ${i},${i} 0 1,0 ${i*2},0 a ${i},${i} 0 1,0 ${-i*2},0`}else o=X_(n);return u.jsx("svg",{className:s&&le("tl-overlays__item",s),children:u.jsx("path",{className:"tl-scribble",d:o,fill:r??`var(--color-${e.color})`,opacity:a??e.opacity})})}const sV=({bounds:e,rotation:t})=>{const r=N();return H("should display",()=>r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing"),[r])?u.jsx(SS,{bounds:e,rotation:t}):null};function sn(){const e=N();return H("isReadonlyMode",()=>e.getInstanceState().isReadonly,[e])}function nV({size:e,width:t,height:r,hideAlternateHandles:a}){const s=R(e/3),n=s/2;return u.jsxs("svg",{className:"tl-overlays__item",children:[u.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${R(0-n)},${R(e)} 
						${R(0-n)},${R(0-n)} 
						${R(e)},${R(0-n)}`,strokeWidth:s,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),u.jsx("line",{className:le("tl-corner-crop-edge-handle",{"tl-hidden":a}),x1:R(t/2-e),y1:R(0-n),x2:R(t/2+e),y2:R(0-n),strokeWidth:s,"data-testid":"selection.crop.top","aria-label":"top handle"}),u.jsx("polyline",{className:le("tl-corner-crop-handle",{"tl-hidden":a}),points:`
						${R(t-e)},${R(0-n)} 
						${R(t+n)},${R(0-n)} 
						${R(t+n)},${R(e)}`,strokeWidth:s,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),u.jsx("line",{className:le("tl-corner-crop-edge-handle",{"tl-hidden":a}),x1:R(t+n),y1:R(r/2-e),x2:R(t+n),y2:R(r/2+e),strokeWidth:s,"data-testid":"selection.crop.right","aria-label":"right handle"}),u.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${R(t+n)},${R(r-e)} 
						${R(t+n)},${R(r+n)}
						${R(t-e)},${R(r+n)}`,strokeWidth:s,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),u.jsx("line",{className:le("tl-corner-crop-edge-handle",{"tl-hidden":a}),x1:R(t/2-e),y1:R(r+n),x2:R(t/2+e),y2:R(r+n),strokeWidth:s,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),u.jsx("polyline",{className:le("tl-corner-crop-handle",{"tl-hidden":a}),points:`
						${R(0+e)},${R(r+n)} 
						${R(0-n)},${R(r+n)}
						${R(0-n)},${R(r-e)}`,strokeWidth:s,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),u.jsx("line",{className:le("tl-corner-crop-edge-handle",{"tl-hidden":a}),x1:R(0-n),y1:R(r/2-e),x2:R(0-n),y2:R(r/2+e),strokeWidth:s,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}const oV=la(function({bounds:t,rotation:r}){const a=N(),s=S.useRef(null),n=sn(),o=es("top"),i=es("right"),l=es("bottom"),c=es("left"),d=es("top_left"),p=es("top_right"),f=es("bottom_right"),h=es("bottom_left"),y=!a.getIsMenuOpen()&&a.getInstanceState().cursor.type==="default",m=a.getInstanceState().isCoarsePointer,w=a.getOnlySelectedShape(),b=w&&a.isShapeOrAncestorLocked(w),_=w?a.getShapeUtil(w).expandSelectionOutlinePx(w):0;if(El(s,t==null?void 0:t.x,t==null?void 0:t.y,1,a.getSelectionRotation(),{x:-_,y:-_}),!t)return null;t=t.clone().expandBy(_).zeroFix();const x=a.getZoomLevel(),C=a.getInstanceState().isChangingStyle,k=t.width,F=t.height,P=8/x,I=k<P*2,j=F<P*2,A=k<P*4,D=F<P*4,z=k<P*5,T=F<P*5,M=m?1.75:1,L=6/x*M,G=(A?L/2:L)*(M*.75),W=(D?L/2:L)*(M*.75),O=(w?!a.getShapeUtil(w).hideSelectionBoundsFg(w):!0)&&!C;let $=O&&a.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle","select.pointing_resize_handle")||O&&a.isIn("select.resizing")&&w&&a.isShapeOfType(w,"text");w&&$&&a.environment.isFirefox&&a.isShapeOfType(w,"embed")&&($=!1);const U=a.isInAny("select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle")&&!C&&!n,X=a.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!C&&!n,ne=!m&&!(I||j)&&(X||U)&&(w?!a.getShapeUtil(w).hideRotateHandle(w):!0)&&!b,Ae=m&&(!A||!D)&&(X||U)&&(w?!a.getShapeUtil(w).hideRotateHandle(w):!0)&&!b,je=X&&(w?a.getShapeUtil(w).canResize(w)&&!a.getShapeUtil(w).hideResizeHandles(w):!0)&&!U&&!b,ie=I||j,qe=I&&j,De=z||T,Je=je||U,Ee=!ne,nt=!X||!Ae,Oe=!X||!Je,$r=!X||!Je||ie,Dt=!X||!Je||ie,vr=!X||!Je||qe&&!U;let yt=!0,Ht=!0;if(U)yt=De,Ht=De;else if(je){yt=ie||qe||m;const ln=m&&w&&w.type==="text";Ht=yt&&!ln}const Cs=Math.min(24/x,F-W*3),zl=X&&m&&w&&a.isShapeOfType(w,"text")&&Cs*x>=4;return u.jsx("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:u.jsxs("g",{ref:s,children:[$&&u.jsx("rect",{className:"tl-selection__fg__outline",width:R(k),height:R(F)}),u.jsx(Vu,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:L,corner:"top_left_rotate",cursor:y?Wr("nwse-rotate",r):void 0,isHidden:Ee}),u.jsx(Vu,{"data-testid":"selection.rotate.top-right",cx:k+L*3,cy:0,targetSize:L,corner:"top_right_rotate",cursor:y?Wr("nesw-rotate",r):void 0,isHidden:Ee}),u.jsx(Vu,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:F+L*3,targetSize:L,corner:"bottom_left_rotate",cursor:y?Wr("swne-rotate",r):void 0,isHidden:Ee}),u.jsx(Vu,{"data-testid":"selection.rotate.bottom-right",cx:k+L*3,cy:F+L*3,targetSize:L,corner:"bottom_right_rotate",cursor:y?Wr("senw-rotate",r):void 0,isHidden:Ee}),u.jsx(lV,{"data-testid":"selection.rotate.mobile",cx:A?-L*1.5:k/2,cy:A?F/2:-L*1.5,size:P,isHidden:nt}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":yt}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:R(0-(D?W*2:W)),width:R(k),height:R(Math.max(1,W*2)),style:y?{cursor:Wr("ns-resize",r)}:void 0,...o}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":Ht}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:R(k-(A?0:G)),y:0,height:R(F),width:R(Math.max(1,G*2)),style:y?{cursor:Wr("ew-resize",r)}:void 0,...i}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":yt}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:R(F-(D?0:W)),width:R(k),height:R(Math.max(1,W*2)),style:y?{cursor:Wr("ns-resize",r)}:void 0,...l}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":Ht}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:R(0-(A?G*2:G)),y:0,height:R(F),width:R(Math.max(1,G*2)),style:y?{cursor:Wr("ew-resize",r)}:void 0,...c}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":Oe}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:R(0-(A?G*2:G*1.5)),y:R(0-(D?W*2:W*1.5)),width:R(G*3),height:R(W*3),style:y?{cursor:Wr("nwse-resize",r)}:void 0,...d}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":$r}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:R(k-(A?0:G*1.5)),y:R(0-(D?W*2:W*1.5)),width:R(G*3),height:R(W*3),style:y?{cursor:Wr("nesw-resize",r)}:void 0,...p}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":vr}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:R(k-(A?G:G*1.5)),y:R(F-(D?W:W*1.5)),width:R(G*3),height:R(W*3),style:y?{cursor:Wr("nwse-resize",r)}:void 0,...f}),u.jsx("rect",{className:le("tl-transparent",{"tl-hidden":Dt}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:R(0-(A?G*3:G*1.5)),y:R(F-(D?0:W*1.5)),width:R(G*3),height:R(W*3),style:y?{cursor:Wr("nesw-resize",r)}:void 0,...h}),je&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{"data-testid":"selection.resize.top-left",className:le("tl-corner-handle",{"tl-hidden":Oe}),"aria-label":"top_left handle",x:R(0-P/2),y:R(0-P/2),width:R(P),height:R(P)}),u.jsx("rect",{"data-testid":"selection.resize.top-right",className:le("tl-corner-handle",{"tl-hidden":$r}),"aria-label":"top_right handle",x:R(k-P/2),y:R(0-P/2),width:R(P),height:R(P)}),u.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:le("tl-corner-handle",{"tl-hidden":vr}),"aria-label":"bottom_right handle",x:R(k-P/2),y:R(F-P/2),width:R(P),height:R(P)}),u.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:le("tl-corner-handle",{"tl-hidden":Dt}),"aria-label":"bottom_left handle",x:R(0-P/2),y:R(F-P/2),width:R(P),height:R(P)})]}),zl&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:R(0-P/4),y:R(F/2-Cs/2),rx:P/4,width:R(P/2),height:R(Cs)}),u.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:P/4,x:R(k-P/4),y:R(F/2-Cs/2),width:R(P/2),height:R(Cs)})]}),U&&u.jsx(nV,{size:P,width:k,height:F,hideAlternateHandles:De})]})})}),Vu=function({cx:t,cy:r,targetSize:a,corner:s,cursor:n,isHidden:o,"data-testid":i}){const l=es(s);return u.jsx("rect",{className:le("tl-transparent","tl-rotate-corner",{"tl-hidden":o}),"data-testid":i,"aria-label":`${s} target`,pointerEvents:"all",x:R(t-a*3),y:R(r-a*3),width:R(Math.max(1,a*3)),height:R(Math.max(1,a*3)),cursor:n,...l})},iV=Math.sqrt(Math.PI),lV=function({cx:t,cy:r,size:a,isHidden:s,"data-testid":n}){const o=es("mobile_rotate"),i=N(),l=H("zoom level",()=>i.getZoomLevel(),[i]),c=Math.max(14*(1/l),20/Math.max(1,l));return u.jsxs("g",{children:[u.jsx("circle",{"data-testid":n,pointerEvents:"all",className:le("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":s}),cx:t,cy:r,r:c,...o}),u.jsx("circle",{className:le("tl-mobile-rotate__fg",{"tl-hidden":s}),cx:t,cy:r,r:a/iV})]})};function Db(e,t,r){const{arrowheadStart:a,arrowheadEnd:s}=t.props,n=Oi(e,t,r),o=n.start.clone(),i=n.end.clone(),l=v.Med(o,i);if(v.Equals(o,i))return{bindings:r,isStraight:!0,start:{handle:o,point:o,arrowhead:t.props.arrowheadStart},end:{handle:i,point:i,arrowhead:t.props.arrowheadEnd},middle:l,isValid:!1,length:0};const c=v.Sub(i,o).uni(),d=wh(e,t,"start"),p=wh(e,t,"end"),f=e.getShapePageTransform(t);t9(i,n.start,f,p),t9(o,n.end,f,d);let h=0,y=0,m=0,w=0,b=zi;const _=d&&p&&d.shape===p.shape,x=d&&p?f0(e,d.shape.id,p.shape.id):"safe";x==="safe"&&d&&p&&!_&&!d.isExact&&!p.isExact&&(p.didIntersect&&!d.didIntersect?d.isClosed&&o.setTo(i.clone().add(c.clone().mul(zi))):p.didIntersect||p.isClosed&&i.setTo(o.clone().sub(c.clone().mul(zi))));const C=v.Sub(i,o),k=v.Len(C)?C.uni():v.From(C),F=!v.Equals(k,c);_||(x!=="start-contains-end"&&d&&a!=="none"&&!d.isExact&&(m=Pn[t.props.size]/2+("size"in d.shape.props?Pn[d.shape.props.size]/2:0),h=vh+m,b+=m),x!=="end-contains-start"&&p&&s!=="none"&&!p.isExact&&(w=Pn[t.props.size]/2+("size"in p.shape.props?Pn[p.shape.props.size]/2:0),y=vh+w,b+=w));const P=o.clone().add(k.clone().mul(h*(F?-1:1))),I=i.clone().sub(k.clone().mul(y*(F?-1:1)));v.DistMin(P,I,b)&&(h!==0&&y!==0?(h*=-1.5,y*=-1.5):h!==0?h*=-1:y!==0&&(y*=-1)),o.add(k.clone().mul(h*(F?-1:1))),i.sub(k.clone().mul(y*(F?-1:1))),F?(d&&p&&i.setTo(v.Add(o,k.clone().mul(-zi))),l.setTo(v.Med(n.start,n.end))):l.setTo(v.Med(o,i));const j=v.Dist(o,i);return{bindings:r,isStraight:!0,start:{handle:n.start,point:o,arrowhead:t.props.arrowheadStart},end:{handle:n.end,point:i,arrowhead:t.props.arrowheadEnd},middle:l,isValid:j>0,length:j}}function t9(e,t,r,a){if(a===void 0||a.isExact)return;const s=ae.applyToPoint(r,t),n=ae.applyToPoint(r,e),o=ae.applyToPoint(ae.Inverse(a.transform),s),i=ae.applyToPoint(ae.Inverse(a.transform),n),l=a.isClosed,d=(l?t0:nG)(o,i,a.outline);let p;if(d!==null&&(p=d.sort((y,m)=>v.Dist2(y,o)-v.Dist2(m,o))[0]??(l?void 0:i)),p===void 0)return;const f=ae.applyToPoint(a.transform,p),h=ae.applyToPoint(ae.Inverse(r),f);e.setTo(h),a.didIntersect=!0}function cV(e,t,r){const{arrowheadEnd:a,arrowheadStart:s}=t.props,n=t.props.bend;if(Math.abs(n)>Math.abs(t.props.bend*fV))return Db(e,t,r);const o=Oi(e,t,r),i=v.Med(o.start,o.end),l=v.Sub(o.end,o.start),c=v.Len(l)?l.uni():v.From(l),d=v.Add(i,c.per().mul(-n)),p=wh(e,t,"start"),f=wh(e,t,"end"),h=o.start.clone(),y=o.end.clone(),m=d.clone();if(v.Equals(h,y))return{bindings:r,isStraight:!0,start:{handle:h,point:h,arrowhead:t.props.arrowheadStart},end:{handle:y,point:y,arrowhead:t.props.arrowheadEnd},middle:m,isValid:!1,length:0};const w=t.props.bend<0,b=w?qd:Qx,_=r9(h,y,m),x=v.Angle(_.center,h),C=v.Angle(_.center,y),k=b(x,C);if(_.length===0||_.size===0||!d6(_.length)||!d6(_.size))return Db(e,t,r);const F=h.clone(),P=y.clone(),I=m.clone(),j=e.getShapePageTransform(t);let A=0,D=0,z=zi;if(p&&!p.isExact){const U=ae.applyToPoint(j,F),X=ae.applyToPoint(j,_.center),ne=ae.applyToPoint(j,P),Ae=ae.Inverse(p.transform),je=ae.applyToPoint(Ae,U),ie=ae.applyToPoint(Ae,X),qe=ae.applyToPoint(Ae,ne),{isClosed:De}=p,Je=De?Ib:B6;let Ee,nt=Je(ie,_.radius,p.outline);if(nt){const Oe=ie.angle(je),$r=ie.angle(qe),Dt=b(Oe,$r);nt=nt.filter(yt=>b(Oe,ie.angle(yt))<=Dt);const vr=Dt*.25;nt.sort(De?(yt,Ht)=>Math.abs(b(Oe,ie.angle(yt))-vr)<Math.abs(b(Oe,ie.angle(Ht))-vr)?-1:1:(yt,Ht)=>b(Oe,ie.angle(yt))<b(Oe,ie.angle(Ht))?-1:1),Ee=nt[0]??(De?void 0:je)}else Ee=De?void 0:je;if(Ee&&(F.setTo(e.getPointInShapeSpace(t,ae.applyToPoint(p.transform,Ee))),p.didIntersect=!0,s!=="none")){const Oe=Pn[t.props.size]/2+("size"in p.shape.props?Pn[p.shape.props.size]/2:0);A=vh+Oe,z+=Oe}}if(f&&!f.isExact){const U=ae.applyToPoint(j,F),X=ae.applyToPoint(j,P),ne=ae.applyToPoint(j,_.center),Ae=ae.Inverse(f.transform),je=ae.applyToPoint(Ae,U),ie=ae.applyToPoint(Ae,ne),qe=ae.applyToPoint(Ae,X),De=f.isClosed,Je=De?Ib:B6;let Ee,nt=Je(ie,_.radius,f.outline);if(nt){const Oe=ie.angle(je),$r=ie.angle(qe),Dt=b(Oe,$r),vr=Dt*.75;nt=nt.filter(yt=>b(Oe,ie.angle(yt))<=Dt),nt.sort(De?(yt,Ht)=>Math.abs(b(Oe,ie.angle(yt))-vr)<Math.abs(b(Oe,ie.angle(Ht))-vr)?-1:1:(yt,Ht)=>b(Oe,ie.angle(yt))<b(Oe,ie.angle(Ht))?-1:1),nt[0]?Ee=nt[0]:Ee=De?void 0:qe}else Ee=De?void 0:qe;if(Ee&&(P.setTo(e.getPointInShapeSpace(t,ae.applyToPoint(f.transform,Ee))),f.didIntersect=!0,a!=="none")){const Oe=Pn[t.props.size]/2+("size"in f.shape.props?Pn[f.shape.props.size]/2:0);D=vh+Oe,z+=Oe}}let T=v.Angle(_.center,F),M=v.Angle(_.center,P),L=b(T,M),G=L*_.radius;const W=F.clone(),O=P.clone();if(A!==0){const U=A/G*(w?1:-1),X=v.FromAngle(T+L*U);W.setTo(_.center).add(X.mul(_.radius))}if(D!==0){const U=D/G*(w?-1:1),X=v.FromAngle(M+L*U);O.setTo(_.center).add(X.mul(_.radius))}if(v.DistMin(W,O,z)&&(A!==0&&D!==0?(A*=-1.5,D*=-1.5):A!==0?A*=-2:D!==0&&(D*=-2)),A!==0){const U=A/G*(w?1:-1),X=v.FromAngle(T+L*U);F.setTo(_.center).add(X.mul(_.radius))}if(D!==0){const U=D/G*(w?-1:1),X=v.FromAngle(M+L*U);P.setTo(_.center).add(X.mul(_.radius))}if(p&&f&&!p.isExact&&!f.isExact){T=v.Angle(_.center,F),M=v.Angle(_.center,P),L=b(T,M),G=L*_.radius;const U=f0(e,p.shape.id,f.shape.id);if(U==="double-bound"&&G<30)F.setTo(h),P.setTo(y),I.setTo(m);else if(U==="safe"&&(p&&!p.didIntersect&&F.setTo(h),f&&!f.didIntersect||b(x,T)>b(x,M))){const X=Math.min(.9,zi/G)*(w?1:-1),ne=v.FromAngle(T+L*X);P.setTo(_.center).add(ne.mul(_.radius))}}dV(_.center,_.radius,F,P,I,k,w),F.equals(P)&&(F.setTo(I.clone().addXY(1,1)),P.setTo(I.clone().subXY(1,1))),h.setTo(F),y.setTo(P),m.setTo(I);const $=r9(h,y,m);return{bindings:r,isStraight:!1,start:{point:h,handle:o.start,arrowhead:t.props.arrowheadStart},end:{point:y,handle:o.end,arrowhead:t.props.arrowheadEnd},middle:m,handleArc:_,bodyArc:$,isValid:$.length!==0&&isFinite($.center.x)&&isFinite($.center.y)}}function r9(e,t,r){const a=U_(e,t,r),s=v.Dist(a,e),n=+v.Clockwise(e,r,t),o=((e.y-t.y)**2+(e.x-t.x)**2)**.5,i=((t.y-r.y)**2+(t.x-r.x)**2)**.5,l=((r.y-e.y)**2+(r.x-e.x)**2)**.5,c=Math.acos((i*i+l*l-o*o)/(2*i*l))*2,d=+(Ce>c),p=(Be-c)*(n?1:-1),f=p*s;return{center:a,radius:s,size:p,length:f,largeArcFlag:d,sweepFlag:n}}function dV(e,t,r,a,s,n,o){const i=v.Angle(e,r),l=v.Angle(e,a);let c=qd(i,l);o||(c=Be-c);const d=.5*(o?1:-1),p=v.FromAngle(i+c*d);if(s.setTo(e).add(p.mul(t)),c>n){s.rotWith(e,Ce);const f=a.clone();a.setTo(r),r.setTo(f)}}function uV(e){return Math.abs(e.props.bend)<8}function wh(e,t,r){const a=e.getBindingsFromShape(t,"arrow").find(l=>l.props.terminal===r);if(!a)return;const s=e.getShape(a.toId);if(!s)return;const n=e.getShapePageTransform(s),o=e.getShapeGeometry(s),i=o instanceof $a?o.children[0].vertices:o.vertices;return{shape:s,transform:n,isClosed:o.isClosed,isExact:a.props.isExact,didIntersect:!1,outline:i}}function a9(e,t,r,a){const s=e.getShape(r.toId);if(s){const{point:n,size:o}=e.getShapeGeometry(s).bounds,i=v.Add(n,v.MulV(r.props.isPrecise||a?r.props.normalizedAnchor:{x:.5,y:.5},o)),l=ae.applyToPoint(e.getShapePageTransform(s),i);return ae.applyToPoint(ae.Inverse(t),l)}else return new v(0,0)}function Ir(e,t){const r=e.getBindingsFromShape(t,"arrow");return{start:r.find(a=>a.props.terminal==="start"),end:r.find(a=>a.props.terminal==="end")}}const pV=NN("arrow info",(e,t)=>{const r=Ir(e,t);return uV(t)?Db(e,t,r):cV(e,t,r)});function os(e,t){const r=typeof t=="string"?t:t.id;return pV.get(e,r)}function Oi(e,t,r){var i,l;const a=e.getShapePageTransform(t),s=f0(e,(i=r.start)==null?void 0:i.toId,(l=r.end)==null?void 0:l.toId),n=r.start?a9(e,a,r.start,s==="double-bound"||s==="start-contains-end"):v.From(t.props.start),o=r.end?a9(e,a,r.end,s==="double-bound"||s==="end-contains-start"):v.From(t.props.end);return{start:n,end:o}}function oc(e,t,r,a){const s=typeof t=="string"?t:t.id,n=typeof r=="string"?r:r.id,o=e.getBindingsFromShape(s,"arrow").filter(l=>l.props.terminal===a.terminal);o.length>1&&e.deleteBindings(o.slice(1));const i=o[0];i?e.updateBinding({...i,toId:n,props:a}):e.createBinding({type:"arrow",fromId:s,toId:n,props:a})}function $p(e,t,r){const a=e.getBindingsFromShape(t,"arrow").filter(s=>s.props.terminal===r);e.deleteBindings(a)}const zi=10,vh=10,fV=10,Pn={s:2,m:3.5,l:5,xl:10};function f0(e,t,r){if(!t||!r)return"safe";if(t===r)return"double-bound";const a=e.getShapePageBounds(t),s=e.getShapePageBounds(r);if(a&&s){if(a.contains(s))return"start-contains-end";if(s.contains(a))return"end-contains-start"}return"safe"}class Up extends Np{getDefaultProps(){return{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5,y:.5}}}onAfterCreate({binding:t}){p2(this.editor,this.editor.getShape(t.fromId))}onAfterChange({bindingAfter:t}){p2(this.editor,this.editor.getShape(t.fromId))}onAfterChangeFromShape({shapeAfter:t}){p2(this.editor,t)}onAfterChangeToShape({binding:t}){sk(this.editor,t.fromId)}onBeforeIsolateFromShape({binding:t}){const r=this.editor.getShape(t.fromId);r&&xh({editor:this.editor,arrow:r,terminal:t.props.terminal})}}g(Up,"type","arrow"),g(Up,"props",wx),g(Up,"migrations",vx);function sk(e,t){var w;const r=e.getShape(t);if(!r)return;const a=Ir(e,r),{start:s,end:n}=a,o=s?e.getShape(s.toId):void 0,i=n?e.getShape(n.toId):void 0,l=e.getAncestorPageId(r);if(!l)return;let c;if(o&&i)c=e.findCommonAncestor([o,i])??l;else if(o||i){const b=(w=o||i)==null?void 0:w.parentId;b&&b===r.parentId?c=r.parentId:c=l}else return;c&&c!==r.parentId&&e.reparentShapes([t],c);const d=e.getShape(t);if(!d)throw Error("no reparented arrow");const p=e.getShapeNearestSibling(d,o),f=e.getShapeNearestSibling(d,i);let h;if(p&&f)h=p.index>f.index?p:f;else if(p&&!f)h=p;else if(f&&!p)h=f;else return;let y;const m=e.getSortedChildIdsForParent(h.parentId).map(b=>e.getShape(b)).filter(b=>b.index>h.index);if(m.length){const b=m.find(_=>_.type!=="arrow");if(d.index>h.index&&(!b||d.index<b.index))return;y=dd(h.index,m[0].index)}else y=Ms(h.index);y!==d.index&&e.updateShapes([{id:t,type:"arrow",index:y}])}function p2(e,t){const r=Ir(e,t);for(const a of["start","end"]){const s=r[a];if(!s)continue;const n=e.getShape(s.toId),o=e.getAncestorPageId(t)===e.getAncestorPageId(n);(!n||!o)&&xh({editor:e,arrow:t,terminal:a,unbind:!0})}sk(e,t.id)}function xh({editor:e,arrow:t,terminal:r,unbind:a=!1,useHandle:s=!1}){const n=os(e,t);if(!n)throw new Error("expected arrow info");const o=s?n.start.handle:n.start.point,i=s?n.end.handle:n.end.point,l=r==="start"?o:i,c={id:t.id,type:"arrow",props:{[r]:{x:l.x,y:l.y},bend:t.props.bend}};if(!n.isStraight){const d=r==="start"?o:n.start.handle,p=r==="end"?i:n.end.handle,f=v.Med(d,p),h=v.Sub(d,p).per().uni().mul(n.handleArc.radius*2*Math.sign(t.props.bend)),y=Gd(n.handleArc.center,v.Add(f,h),n.handleArc.center,n.handleArc.radius);at((y==null?void 0:y.length)===1);const m=v.Dist(f,y[0])*Math.sign(t.props.bend);Zi(m,c.props.bend)||(c.props.bend=m)}e.updateShape(c),a&&$p(e,t,r)}const nk=[Up],$t={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},At={s:2,m:3.5,l:5,xl:10},hl={s:18,m:24,l:36,xl:44},qs={s:18,m:22,l:26,xl:32},_o={s:18,m:20,l:24,xl:28},fs={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},hV=20,gV=4.25,Ta=16;/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function mV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,n,o,i=[],l=!0,c=!1;try{if(n=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=n.call(r)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return i}}function s9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s9(Object(r),!0).forEach(function(a){bV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s9(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bV(e,t,r){return t=CV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yV(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,n;for(n=0;n<a.length;n++)s=a[n],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function _V(e,t){if(e==null)return{};var r=yV(e,t),a,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function n9(e,t){return vV(e)||mV(e,t)||ok(e,t)||kV()}function Yu(e){return wV(e)||xV(e)||ok(e)||SV()}function wV(e){if(Array.isArray(e))return Tb(e)}function vV(e){if(Array.isArray(e))return e}function xV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ok(e,t){if(e){if(typeof e=="string")return Tb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tb(e,t)}}function Tb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function SV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FV(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CV(e){var t=FV(e,"string");return typeof t=="symbol"?t:String(t)}function Uc(e){var t=e.sizes.shift(),r=Math.max(Math.ceil(t[0]),1),a=Math.max(Math.ceil(t[1]),1),s=[r-1,a-1,1,1],n=Date.now(),o=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,i,l;o?(i=new OffscreenCanvas(1,1),l=new OffscreenCanvas(r,a)):(i=document.createElement("canvas"),i.width=1,i.height=1,l=document.createElement("canvas"),l.width=r,l.height=a);var c=i.getContext("2d"),d=l.getContext("2d");d&&(d.fillRect.apply(d,s),c.drawImage(l,r-1,a-1,1,1,0,0,1,1));var p=c&&c.getImageData(0,0,1,1).data[3]!==0,f=Date.now()-n;return[i,l].forEach(function(h){h.height=0,h.width=0}),o?(postMessage({width:r,height:a,benchmark:f,isTestPass:p}),!p&&e.sizes.length&&Uc(e)):p?e.onSuccess(r,a,f):(e.onError(r,a,f),e.sizes.length&&Uc(e)),p}var f2={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},PV=["onError","onSuccess"],Ni={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},ic={};function h2(e){var t=e.width===e.height,r=e.height===1,a=e.width===1,s=[];if(!e.width||!e.height)e.sizes.forEach(function(d){var p=t||r?d:1,f=t||a?d:1;s.push([p,f])});else for(var n=e.min||Ni.min,o=e.step||Ni.step,i=Math.max(e.width,e.height);i>=n;){var l=t||r?i:1,c=t||a?i:1;s.push([l,c]),i-=o}return s}function Xu(e){var t=window&&"HTMLCanvasElement"in window,r=window&&"OffscreenCanvas"in window,a=Date.now(),s=e.onError,n=e.onSuccess,o=_V(e,PV),i=null;if(!t)return!1;if(e.useWorker&&r){var l=`
            var canvasTest = `.concat(Uc.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),c=new Blob([l],{type:"application/javascript"}),d=URL.createObjectURL(c);i=new Worker(d),URL.revokeObjectURL(d),i.onmessage=function(p){var f=p.data,h=f.width,y=f.height,m=f.benchmark,w=f.isTestPass;w?(ic[a].onSuccess(h,y,m),delete ic[a]):ic[a].onError(h,y,m)}}if(e.usePromise)return new Promise(function(p,f){var h=Hr(Hr({},e),{},{onError:function(b,_,x){var C;if(e.sizes.length===0)C=!0;else{var k=e.sizes.slice(-1),F=n9(k,1),P=n9(F[0],2),I=P[0],j=P[1];C=b===I&&_===j}s(b,_,x),C&&f({width:b,height:_,benchmark:x})},onSuccess:function(b,_,x){n(b,_,x),p({width:b,height:_,benchmark:x})}});if(i){var y=h.onError,m=h.onSuccess;ic[a]={onError:y,onSuccess:m},i.postMessage(o)}else Uc(h)});if(i)ic[a]={onError:s,onSuccess:n},i.postMessage(o);else return Uc(e)}var g2={maxArea:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=h2({width:t.max,height:t.max,min:t.min,step:t.step,sizes:Yu(f2.area)}),a=Hr(Hr(Hr({},Ni),t),{},{sizes:r});return Xu(a)},maxHeight:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=h2({width:1,height:t.max,min:t.min,step:t.step,sizes:Yu(f2.height)}),a=Hr(Hr(Hr({},Ni),t),{},{sizes:r});return Xu(a)},maxWidth:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=h2({width:t.max,height:1,min:t.min,step:t.step,sizes:Yu(f2.width)}),a=Hr(Hr(Hr({},Ni),t),{},{sizes:r});return Xu(a)},test:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Hr(Hr({},Ni),t);return r.sizes=Yu(r.sizes),r.width&&r.height&&(r.sizes=[[r.width,r.height]]),Xu(r)}};let m2=null;function IV(){return m2||(m2=AV()),m2}async function AV(){const e=await g2.maxWidth({usePromise:!0}),t=await g2.maxHeight({usePromise:!0}),r=await g2.maxArea({usePromise:!0});return{maxWidth:e.width,maxHeight:t.height,maxArea:r.width*r.height}}const o9=8192,jV=4096*4096;async function ik(e,t){if(e<=o9&&t<=o9&&e*t<=jV)return[e,t];const{maxWidth:r,maxHeight:a,maxArea:s}=await IV(),n=e/t;if(e>r&&(e=r,t=e/n),t>a&&(t=a,e=t*n),e*t>s){const o=Math.sqrt(s/(e*t));e*=o,t*=o}return[e,t]}function EV(e,t){const r=e.w/t.w,a=e.h/t.h;return r<=1&&a<=1?e:r>a?{w:e.w/r,h:e.h/r}:{w:e.w/a,h:e.h/a}}async function DV(e,t,r,a={}){const s=await Xr.usingObjectURL(e,Xr.loadImage),{type:n=e.type,quality:o=.92}=a,[i,l]=await ik(Math.min(t*2,s.naturalWidth),Math.min(r*2,s.naturalHeight)),c=document.createElement("canvas");c.width=i,c.height=l;const d=Vr(c.getContext("2d",{willReadFrequently:!0}),"Could not get canvas context");return d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(s,0,0,i,l),new Promise((p,f)=>{c.toBlob(h=>{h?p(h):f(new Error("Could not resize image"))},n,o)})}function TV(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function MV(e){const t=new URL(e).host.replace("www.","");for(const r of Nd)if(lk(r.hostnames,t)){const a=r.fromEmbedUrl(e);if(a)return{definition:r,url:a,embedUrl:e}}}const BV=e=>e.split("*").map(t=>TV(t)).join(".+"),lk=(e,t)=>!!e.find(r=>{const a=new RegExp(BV(r));return t.match(a)});function LV(e){const t=new URL(e).host.replace("www.","");for(const r of Nd)if(lk(r.hostnames,t)){const a=r.toEmbedUrl(e);if(a)return{definition:r,embedUrl:a,url:e}}}function ck(e){return LV(e)??MV(e)}function In(e){try{return ck(e)}catch(t){console.error(t)}}/*!
 * MIT License
 * Adapted (mostly copied) the work of https://github.com/fregante/text-field-edit
 * Copyright (c) Federico Brigante <opensource@bfred.it> (bfred.it)
 */const qi="  ",cr=class cr{static insertTextFirefox(t,r){t.setRangeText(r,t.selectionStart||0,t.selectionEnd||0,"end"),t.dispatchEvent(new InputEvent("input",{data:r,inputType:"insertText",isComposing:!1}))}static insert(t,r){const a=t.ownerDocument,s=a.activeElement;s!==t&&t.focus(),a.execCommand("insertText",!1,r)||cr.insertTextFirefox(t,r),s===a.body?t.blur():s instanceof HTMLElement&&s!==t&&s.focus()}static set(t,r){t.select(),cr.insert(t,r)}static getSelection(t){const{selectionStart:r,selectionEnd:a}=t;return t.value.slice(r||void 0,a||void 0)}static wrapSelection(t,r,a){const{selectionStart:s,selectionEnd:n}=t,o=cr.getSelection(t);cr.insert(t,r+o+(a??r)),t.selectionStart=(s||0)+r.length,t.selectionEnd=(n||0)+r.length}static replace(t,r,a){let s=0;t.value.replace(r,(...n)=>{const o=s+n[n.length-2],i=n[0].length;t.selectionStart=o,t.selectionEnd=o+i;const l=typeof a=="string"?a:a(...n);return cr.insert(t,l),t.selectionStart=o,s+=l.length-i,l})}static findLineEnd(t,r){const a=t.lastIndexOf(`
`,r-1)+1;return t.charAt(a)!=="	"?r:a+1}static indent(t){var i;const{selectionStart:r,selectionEnd:a,value:s}=t,n=s.slice(r,a),o=(i=/\n/g.exec(n))==null?void 0:i.length;if(o&&o>0){const l=s.lastIndexOf(`
`,r-1)+1,c=t.value.slice(l,a-1),d=c.replace(/^|\n/g,`$&${qi}`),p=d.length-c.length;t.setSelectionRange(l,a-1),cr.insert(t,d),t.setSelectionRange(r+1,a+p)}else cr.insert(t,qi)}static unindent(t){const{selectionStart:r,selectionEnd:a,value:s}=t,n=s.lastIndexOf(`
`,r-1)+1,o=cr.findLineEnd(s,a),i=t.value.slice(n,o),l=i.replace(/(^|\n)(\t| {1,2})/g,"$1"),c=i.length-l.length;t.setSelectionRange(n,o),cr.insert(t,l);const d=/\t| {1,2}/.exec(s.slice(n,r)),p=d?d[0].length:0,f=r-p;t.setSelectionRange(r-p,Math.max(f,a-c))}static indentCE(t){var l;const r=window.getSelection(),a=t.innerText,s=Zu(t)??0,n=Zu(t)??0,o=a.slice(s,n),i=(l=/\n/g.exec(o))==null?void 0:l.length;if(i&&i>0){const c=a.lastIndexOf(`
`,s-1)+1,d=a.slice(c,n-1),f=d.replace(/^|\n/g,`$&${qi}`).length-d.length;r&&r.setBaseAndExtent(t,s+1,t,n+f)}else{const c=window.getSelection();t.innerText=a.slice(0,s)+qi+a.slice(s),c==null||c.setBaseAndExtent(t,s+1,t,s+2)}}static unindentCE(t){const r=window.getSelection(),a=t.innerText,s=Zu(t)??0,n=Zu(t)??0,o=a.lastIndexOf(`
`,s-1)+1,i=cr.findLineEnd(a,n),l=a.slice(o,i),c=l.replace(/(^|\n)(\t| {1,2})/g,"$1"),d=l.length-c.length;if(r){r.setBaseAndExtent(t,o,t,i);const p=/\t| {1,2}/.exec(a.slice(o,s)),f=p?p[0].length:0,h=s-f;r.setBaseAndExtent(t,s-f,t,Math.max(h,n-d))}}static normalizeText(t){return t.replace(cr.fixNewLines,`
`)}static normalizeTextForDom(t){return t.replace(cr.fixNewLines,`
`).split(`
`).map(r=>r||" ").join(`
`)}};g(cr,"fixNewLines",/\r?\n|\r/g);let gl=cr;function Zu(e){if(typeof window.getSelection>"u")return;const t=window.getSelection();if(!t)return;let r=0;if(t.rangeCount!==0){const a=t.getRangeAt(0),s=a.cloneRange();s.selectNodeContents(e),s.setEnd(a.endContainer,a.endOffset),r=s.toString().length}return r}const RV=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function dk(e){return RV.test(e)}function OV(e){return e.replace(/\t/g,qi)}function zV(e){const t=e.split(`
`);for(;t[0]&&t[0].trim().length===0;)t.shift();let r=1/0;for(const a of t)if(a.trim().length>0){const s=a.length-a.trimStart().length;r=Math.min(r,s)}return t.map(a=>a.slice(r)).join(`
`)}function NV(e){return e.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function qV(e){return NV(zV(OV(e)))}function $V(e,{maxImageDimension:t,maxAssetSize:r,acceptedImageMimeTypes:a,acceptedVideoMimeTypes:s},{toasts:n,msg:o}){e.registerExternalAssetHandler("file",async({file:i})=>{const l=i.name;let c=i;const d=a.includes(c.type),p=s.includes(c.type);at(d||p,`File type not allowed: ${c.type}`),at(c.size<=r,`File size too big: ${(c.size/1024).toFixed()}kb > ${(r/1024).toFixed()}kb`),c.type==="video/quicktime"&&(c=new Blob([c],{type:"video/mp4"}));let f=d?await Xr.getImageSize(c):await Xr.getVideoSize(c);const h=await Xr.isAnimated(c)||p,y=await $z(await c.arrayBuffer());if(isFinite(t)){const b=EV(f,{w:t,h:t});f!==b&&Xr.isStaticImageType(c.type)&&(f=b)}!h&&Xr.isStaticImageType(c.type)&&(c=await DV(c,f.w,f.h,{type:c.type,quality:.92}));const m=So.createId(y);return So.create({id:m,type:d?"image":"video",typeName:"asset",props:{name:l,src:await Yi.blobToDataUrl(c),w:f.w,h:f.h,mimeType:c.type,isAnimated:h}})}),e.registerExternalAssetHandler("url",async({url:i})=>{var c,d,p,f,h;let l;try{const m=await(await fetch(i,{method:"GET",mode:"no-cors",referrerPolicy:"strict-origin-when-cross-origin"})).text(),w=new DOMParser().parseFromString(m,"text/html");l={image:((c=w.head.querySelector('meta[property="og:image"]'))==null?void 0:c.getAttribute("content"))??"",favicon:((d=w.head.querySelector('link[rel="apple-touch-icon"]'))==null?void 0:d.getAttribute("href"))??((p=w.head.querySelector('link[rel="icon"]'))==null?void 0:p.getAttribute("href"))??"",title:((f=w.head.querySelector('meta[property="og:title"]'))==null?void 0:f.getAttribute("content"))??i,description:((h=w.head.querySelector('meta[property="og:description"]'))==null?void 0:h.getAttribute("content"))??""},l.image.startsWith("/")&&(l.image=new URL(l.image,i).href),l.favicon.startsWith("/")&&(l.favicon=new URL(l.favicon,i).href)}catch(y){console.error(y),n.addToast({title:o("assets.url.failed"),severity:"error"}),l={image:"",favicon:"",title:"",description:""}}return{id:So.createId(hb(i)),typeName:"asset",type:"bookmark",props:{src:i,description:l.description,image:l.image,favicon:l.favicon,title:l.title},meta:{}}}),e.registerExternalContentHandler("svg-text",async({point:i,text:l})=>{const c=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center),d=new DOMParser().parseFromString(l,"image/svg+xml").querySelector("svg");if(!d)throw new Error("No <svg/> element present");let p=parseFloat(d.getAttribute("width")||"0"),f=parseFloat(d.getAttribute("height")||"0");if(!(p&&f)){document.body.appendChild(d);const y=d.getBoundingClientRect();document.body.removeChild(d),p=y.width,f=y.height}const h=await e.getAssetForExternalContent({type:"file",file:new File([l],"asset.svg",{type:"image/svg+xml"})});if(!h)throw Error("Could not create an asset");i9(e,[h],c)}),e.registerExternalContentHandler("embed",({point:i,url:l,embed:c})=>{const d=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center),{width:p,height:f}=c,h=Ne(),y={id:h,type:"embed",x:d.x-(p||450)/2,y:d.y-(f||450)/2,props:{w:p,h:f,url:l}};e.createShapes([y]).select(h)}),e.registerExternalContentHandler("files",async({point:i,files:l})=>{const c=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center),d=new v(c.x,c.y),p=[];await Promise.all(l.map(async(f,h)=>{if(f.size>r)return console.warn(`File size too big: ${(f.size/1024).toFixed()}kb > ${(r/1024).toFixed()}kb`),null;if(!f.type)throw new Error("No mime type");if(!a.concat(s).includes(f.type))return console.warn(`${f.name} not loaded - Extension not allowed.`),null;try{const y=await e.getAssetForExternalContent({type:"file",file:f});if(!y)throw Error("Could not create an asset");p[h]=y}catch(y){return n.addToast({title:o("assets.files.upload-failed"),severity:"error"}),console.error(y),null}})),i9(e,ge(p),d)}),e.registerExternalContentHandler("text",async({point:i,text:l})=>{const c=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center),d=e.getShapeUtil("text").getDefaultProps(),p=qV(l),f=e.getOnlySelectedShape();if(f&&"text"in f.props){e.updateShapes([{id:f.id,type:f.type,props:{text:p}}]);return}let h,y,m,w="middle";const b=p.split(`
`).length>1,_=dk(p);b&&(w=b?_?"end":"start":"middle");const x=e.textMeasure.measureText(p,{...$t,fontFamily:fs[d.font],fontSize:hl[d.size],maxWidth:null}),C=Math.min(b?e.getViewportPageBounds().width*.9:920,Math.max(200,e.getViewportPageBounds().width*.9));if(x.w>C){const k=e.textMeasure.measureText(p,{...$t,fontFamily:fs[d.font],fontSize:hl[d.size],maxWidth:C});h=k.w,y=k.h,m=!1,w=_?"end":"start"}else h=x.w,y=x.h,m=!0;c.y-y/2<e.getViewportPageBounds().minY+40&&(c.y=e.getViewportPageBounds().minY+40+y/2),e.createShapes([{id:Ne(),type:"text",x:c.x-h/2,y:c.y-y/2,props:{text:p,textAlign:w,autoSize:m,w:h}}])}),e.registerExternalContentHandler("url",async({point:i,url:l})=>{const c=In(l);if(c)return e.putExternalContent({type:"embed",url:c.url,point:i,embed:c.definition});const d=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center),p=So.createId(hb(l)),f=UV(e,l,d);let h=e.getAsset(p),y=!1;if(!h){y=!0;try{const m=await e.getAssetForExternalContent({type:"url",url:l});if(!m)throw Error("Could not create an asset");h=m}catch{n.addToast({title:o("assets.url.failed"),severity:"error"});return}}e.batch(()=>{y&&e.createAssets([h]),e.updateShapes([{id:f.id,type:f.type,props:{assetId:h.id}}])})})}async function i9(e,t,r){if(!t.length)return[];const a=v.From(r),s=[];for(const n of t)switch(n.type){case"bookmark":{s.push({id:Ne(),type:"bookmark",x:a.x-150,y:a.y-160,opacity:1,props:{assetId:n.id,url:n.props.src}}),a.x+=300;break}case"image":{s.push({id:Ne(),type:"image",x:a.x-n.props.w/2,y:a.y-n.props.h/2,opacity:1,props:{assetId:n.id,w:n.props.w,h:n.props.h}}),a.x+=n.props.w;break}case"video":s.push({id:Ne(),type:"video",x:a.x-n.props.w/2,y:a.y-n.props.h/2,opacity:1,props:{assetId:n.id,w:n.props.w,h:n.props.h}}),a.x+=n.props.w}return e.batch(()=>{const n=t.filter(o=>!e.getAsset(o.id));n.length&&e.createAssets(n),e.createShapes(s).select(...s.map(o=>o.id)),uk(e,r)}),s.map(n=>n.id)}function uk(e,t){const r=e.getViewportPageBounds();let a=e.getSelectionPageBounds();if(a){const s=a.center.sub(t);e.updateShapes(e.getSelectedShapes().map(n=>{const o=e.getShapeParentTransform(n).decompose().rotation,i=v.Rot(s,-o);return{id:n.id,type:n.type,x:n.x-i.x,y:n.y-i.y}}))}a=e.getSelectionPageBounds(),a&&!r.contains(a)&&e.zoomToSelection()}function UV(e,t,r){const a={id:Ne(),type:"bookmark",x:r.x-150,y:r.y-160,opacity:1,props:{assetId:null,url:t}};return e.batch(()=>{e.createShapes([a]).select(a.id),uk(e,r)}),e.getShape(a.id)}var U2;let WV=(U2=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")});g(this,"onKeyUp",r=>{var a;if(r.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const s=this.editor.getOnlySelectedShape();s&&this.editor.getShapeUtil(s).canEdit(s)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(s.id),(a=this.editor.root.getCurrent())==null||a.transition("editing_shape",{...r,target:"shape",shape:s}))}})}},g(U2,"id","idle"),U2);var W2;let HV=(W2=class extends se{constructor(){super(...arguments);g(this,"shape");g(this,"markId","");g(this,"onEnter",()=>{this.didTimeout=!1;const r=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:a=>!a.isLocked&&this.editor.canBindShapes({fromShape:"arrow",toShape:a,binding:"arrow"}),margin:0,hitInside:!0,renderingOnly:!0});r?this.editor.setHintingShapes([r.id]):this.createArrowShape(),this.startPreciseTimeout()});g(this,"onExit",()=>{this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()});g(this,"onPointerMove",()=>{if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:{id:"end",type:"vertex",index:"a3",x:0,y:0},isCreating:!0,onInteractionEnd:"arrow"})}});g(this,"onPointerUp",()=>{this.cancel()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()});g(this,"preciseTimeout",-1);g(this,"didTimeout",!1)}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle")}createArrowShape(){var d;const{originPagePoint:r}=this.editor.inputs,a=Ne();this.markId=`creating:${a}`,this.editor.mark(this.markId),this.editor.createShapes([{id:a,type:"arrow",x:r.x,y:r.y}]);const s=this.editor.getShape(a);if(!s)throw Error("expected shape");const n=this.editor.getShapeHandles(s);if(!n)throw Error("expected handles for arrow");const o=this.editor.getShapeUtil("arrow"),i=this.shape,l=n.find(p=>p.id==="start"),c=(d=o.onHandleDrag)==null?void 0:d.call(o,s,{handle:{...l,x:0,y:0},isPrecise:!0,initial:i});c&&this.editor.updateShapes([c]),this.shape=this.editor.getShape(a),this.editor.select(a)}updateArrowShapeEndHandle(){var s,n;const r=this.shape;if(!r)throw Error("expected shape");const a=this.editor.getShapeHandles(r);if(!a)throw Error("expected handles for arrow");{const o=this.editor.getShapeUtil("arrow"),i=this.shape,l=a.find(d=>d.id==="start"),c=(s=o.onHandleDrag)==null?void 0:s.call(o,r,{handle:{...l,x:0,y:0},isPrecise:this.didTimeout,initial:i});c&&this.editor.updateShapes([c])}{const o=this.editor.getShapeUtil("arrow"),i=this.shape,l=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint),c=a.find(p=>p.id==="end"),d=(n=o.onHandleDrag)==null?void 0:n.call(o,this.editor.getShape(r),{handle:{...c,x:l.x,y:l.y},isPrecise:!1,initial:i});d&&this.editor.updateShapes([d])}this.shape=this.editor.getShape(r.id)}startPreciseTimeout(){this.preciseTimeout=this.editor.timers.setTimeout(()=>{this.getIsActive()&&(this.didTimeout=!0)},320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}},g(W2,"id","pointing"),W2);class Wp extends se{constructor(){super(...arguments);g(this,"shapeType","arrow")}}g(Wp,"id","arrow"),g(Wp,"initial","idle"),g(Wp,"children",()=>[WV,HV]);class h0 extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"initialShape");g(this,"shapeType",this.parent.id==="highlight"?"highlight":"draw");g(this,"util",this.editor.getShapeUtil(this.shapeType));g(this,"isPen",!1);g(this,"isPenOrStylus",!1);g(this,"segmentMode","free");g(this,"didJustShiftClickToExtendPreviousShapeLine",!1);g(this,"pagePointWhereCurrentSegmentChanged",{});g(this,"pagePointWhereNextSegmentChanged",null);g(this,"lastRecordedPoint",{});g(this,"mergeNextPoint",!1);g(this,"currentLineLength",0);g(this,"canDraw",!1);g(this,"markId",null);g(this,"onEnter",r=>{this.markId=null,this.info=r,this.canDraw=!this.editor.getIsMenuOpen(),this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.canDraw&&this.startShape()});g(this,"onPointerMove",()=>{const{inputs:r}=this.editor;if(this.isPen&&!r.isPen){if(this.markId){this.editor.bailToMark(this.markId),this.startShape();return}}else!this.canDraw&&r.isDragging&&(this.startShape(),this.canDraw=!0);this.canDraw&&(this.isPenOrStylus?v.Dist(r.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=r.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateDrawingShape())});g(this,"onKeyDown",r=>{if(r.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateDrawingShape()});g(this,"onKeyUp",r=>{if(r.key==="Shift")switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateDrawingShape()});g(this,"onExit",()=>{this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())})}canClose(){return this.shapeType!=="highlight"}getIsClosed(r,a){if(!this.canClose())return!1;const s=At[a],n=r[0].points[0],o=r[r.length-1],i=o.points[o.points.length-1];return n!==i&&this.currentLineLength>s*4&&v.DistMin(n,i,s*2)}startShape(){const{inputs:{originPagePoint:r,isPen:a}}=this.editor;this.markId="draw start "+rt(),this.editor.mark(this.markId);const{z:s=.5}=this.info.point;this.isPen=a,this.isPenOrStylus=a||s>0&&s<.5||s>.5&&s<1;const n=this.isPenOrStylus?s*1.25:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=r.clone(),this.initialShape){const i=this.editor.getShape(this.initialShape.id);if(i&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const l=Lt(i.props.segments);if(!l)throw Error("Expected a previous segment!");const c=Lt(l.points);if(!c)throw Error("Expected a previous point!");const{x:d,y:p}=this.editor.getPointInShapeSpace(i,r).toFixed(),f={type:this.segmentMode,points:[{x:c.x,y:c.y,z:+n.toFixed(2)},{x:d,y:p,z:+n.toFixed(2)}]},h=ae.applyToPoint(this.editor.getShapePageTransform(i.id),c);this.pagePointWhereCurrentSegmentChanged=h,this.pagePointWhereNextSegmentChanged=null;const y=[...i.props.segments,f];this.currentLineLength<At[i.props.size]*4&&(this.currentLineLength=this.getLineLength(y));const m={id:i.id,type:this.shapeType,props:{segments:y}};this.canClose()&&(m.props.isClosed=this.getIsClosed(y,i.props.size)),this.editor.updateShapes([m]);return}}this.pagePointWhereCurrentSegmentChanged=r.clone();const o=Ne();this.editor.createShapes([{id:o,type:this.shapeType,x:r.x,y:r.y,props:{isPen:this.isPenOrStylus,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+n.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(o)}updateDrawingShape(){const{initialShape:r}=this,{inputs:a}=this.editor;if(!r)return;const{id:s,props:{size:n}}=r,o=this.editor.getShape(s);if(!o)return;const{segments:i}=o.props,{x:l,y:c,z:d}=this.editor.getPointInShapeSpace(o,a.currentPagePoint).toFixed(),p=this.isPenOrStylus?+(a.currentPagePoint.z*1.25).toFixed(2):.5,f={x:l,y:c,z:p};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:h}=this;if(h===null)throw Error("We should have a point where the segment changed");if(v.Dist2(h,a.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const m=Lt(i);if(!m)throw Error("Expected a previous segment!");const w=Lt(m.points);if(!w)throw Error("Expected a previous last point!");let b;const _=this.editor.getPointInShapeSpace(o,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(m.type==="straight"){this.currentLineLength+=v.Dist(w,_),b={type:"straight",points:[{...w},_]};const C=this.editor.getShapePageTransform(o);this.pagePointWhereCurrentSegmentChanged=ae.applyToPoint(C,w)}else b={type:"straight",points:[_,f]};const x={id:s,type:this.shapeType,props:{segments:[...i,b]}};this.canClose()&&(x.props.isClosed=this.getIsClosed(i,n)),this.editor.updateShapes([x])}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:h}=this;if(h===null)throw Error("We should have a point where the segment changed");if(v.Dist2(h,a.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const m=i.slice(),w=m[m.length-1],b=Lt(w.points);if(!b)throw Error("No previous point!");const _={type:"free",points:[...v.PointsBetween(b,f,6).map(k=>k.toFixed().toJson())]},x=[...m,_];this.currentLineLength<At[o.props.size]*4&&(this.currentLineLength=this.getLineLength(x));const C={id:s,type:this.shapeType,props:{segments:x}};this.canClose()&&(C.props.isClosed=this.getIsClosed(x,n)),this.editor.updateShapes([C])}break}case"straight":{const h=i.slice(),y=h[h.length-1],{pagePointWhereCurrentSegmentChanged:m}=this,{ctrlKey:w,currentPagePoint:b}=this.editor.inputs;if(!m)throw Error("We should have a point where the segment changed");let _,x=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(x=!w,this.didJustShiftClickToExtendPreviousShapeLine=!1):x=!w;let C=this.editor.getPointInShapeSpace(o,b).toFixed().toJson(),k=!1,F;if((this.editor.user.getIsSnapMode()?!w:w)&&h.length>2){let j,A=8/this.editor.getZoomLevel();for(let D=0,z=i.length-2;D<z;D++){const T=i[D];if(!T)break;if(T.type==="free")continue;const M=T.points[0],L=Lt(T.points);if(!(M&&L))continue;const G=v.NearestPointOnLineSegment(M,L,C);if(v.DistMin(G,C,A)){j=G.toFixed().toJson(),A=v.Dist(G,C),F=T;break}}j&&(k=!0,C=j)}if(k&&F){const j=this.editor.getShapePageTransform(o),A=F.points[0],D=Lt(F.points);if(!D)throw Error("Expected a last point!");const z=ae.applyToPoint(j,A),T=ae.applyToPoint(j,D),M=ae.applyToPoint(j,C);this.editor.snaps.setIndicators([{id:rt(),type:"points",points:[z,M,T]}])}else{if(this.editor.snaps.clearIndicators(),x){const j=v.Angle(m,b),D=fh(j,24)-j;_=v.RotWith(b,m,D)}else _=b;C=this.editor.getPointInShapeSpace(o,_).toFixed().toJson()}this.currentLineLength+=v.Dist(y.points[0],C),h[h.length-1]={...y,type:"straight",points:[y.points[0],C]};const I={id:s,type:this.shapeType,props:{segments:h}};this.canClose()&&(I.props.isClosed=this.getIsClosed(i,n)),this.editor.updateShapes([I]);break}case"free":{const h=i.slice(),y=h[h.length-1],m=[...y.points];if(m.length&&this.mergeNextPoint){const{z:b}=m[m.length-1];m[m.length-1]={x:f.x,y:f.y,z:b?Math.max(b,f.z):f.z}}else this.currentLineLength+=v.Dist(m[m.length-1],f),m.push(f);h[h.length-1]={...y,points:m},this.currentLineLength<At[o.props.size]*4&&(this.currentLineLength=this.getLineLength(h));const w={id:s,type:this.shapeType,props:{segments:h}};if(this.canClose()&&(w.props.isClosed=this.getIsClosed(h,n)),this.editor.updateShapes([w]),m.length>this.editor.options.maxPointsPerDrawShape){this.editor.updateShapes([{id:s,type:this.shapeType,props:{isComplete:!0}}]);const b=Ne();this.editor.createShapes([{id:b,type:this.shapeType,x:fl(a.currentPagePoint.x),y:fl(a.currentPagePoint.y),props:{isPen:this.isPenOrStylus,segments:[{type:"free",points:[{x:0,y:0,z:this.isPenOrStylus?+(d*1.25).toFixed():.5}]}]}}]),this.initialShape=mt(this.editor.getShape(b)),this.mergeNextPoint=!1,this.lastRecordedPoint=a.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(r){let a=0;for(const s of r)for(let n=0;n<s.points.length-1;n++){const o=s.points[n],i=s.points[n+1];a+=v.Dist2(i,o)}return Math.sqrt(a)}complete(){if(!this.canDraw){this.cancel();return}const{initialShape:r}=this;r&&(this.editor.updateShapes([{id:r.id,type:r.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}cancel(){this.parent.transition("idle",this.info)}}g(h0,"id","drawing");var H2;let pk=(H2=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("drawing",r)});g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(H2,"id","idle"),H2);class Hp extends se{constructor(){super(...arguments);g(this,"shapeType","draw");g(this,"onExit",()=>{const r=this.children.drawing;r.initialShape=void 0})}}g(Hp,"id","draw"),g(Hp,"initial","idle"),g(Hp,"children",()=>[pk,h0]);class Mb extends qp{constructor(){super(...arguments);g(this,"shapeType","frame");g(this,"onCreate",r=>{if(!r)return;const a=this.editor.getShapePageBounds(r),s=[],n=this.editor.getShapeAncestors(r).map(o=>o.id);this.editor.getSortedChildIdsForParent(r.parentId).map(o=>{const i=this.editor.getShape(o);if(!i||i.id===r.id||i.isLocked)return;const l=this.editor.getShapePageBounds(i);l&&a.contains(l)&&GV(i,n,r)&&s.push(i.id)}),this.editor.reparentShapes(s,r.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")})}}g(Mb,"id","frame"),g(Mb,"initial","idle");function GV(e,t,r){return t.includes(e.id)?!1:e.parentId===r.parentId}var G2;let KV=(G2=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});g(this,"onKeyUp",r=>{var a;if(r.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const s=this.editor.getOnlySelectedShape();s&&this.editor.getShapeUtil(s).canEdit(s)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(s.id),(a=this.editor.root.getCurrent())==null||a.transition("editing_shape",{...r,target:"shape",shape:s}))}});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(G2,"id","idle"),G2);var K2;let VV=(K2=class extends se{constructor(){super(...arguments);g(this,"markId","");g(this,"onPointerUp",()=>{this.complete()});g(this,"onPointerMove",r=>{if(this.editor.inputs.isDragging){const{originPagePoint:a}=this.editor.inputs,s=Ne();this.markId=`creating:${s}`,this.editor.mark(this.markId),this.editor.createShapes([{id:s,type:"geo",x:a.x,y:a.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(us)}}]).select(s).setCurrentTool("select.resizing",{...r,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.cancel()})}complete(){const{originPagePoint:r}=this.editor.inputs,a=Ne();this.markId=`creating:${a}`,this.editor.mark(this.markId),this.editor.createShapes([{id:a,type:"geo",x:r.x,y:r.y,props:{geo:this.editor.getStyleForNextShape(us),w:1,h:1}}]);const s=this.editor.getShape(a);if(!s)return;const n=s.props.geo==="star"?new Z(0,0,200,190):s.props.geo==="cloud"?new Z(0,0,300,180):new Z(0,0,200,200),o=n.center,i=this.editor.getShapeParentTransform(s);i&&o.rot(-i.rotation()),this.editor.select(a),this.editor.updateShapes([{id:s.id,type:"geo",x:s.x-o.x,y:s.y-o.y,props:{geo:this.editor.getStyleForNextShape(us),w:n.width,h:n.height}}]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}},g(K2,"id","pointing"),K2);class Gp extends se{constructor(){super(...arguments);g(this,"shapeType","geo")}}g(Gp,"id","geo"),g(Gp,"initial","idle"),g(Gp,"children",()=>[KV,VV]);class Kp extends se{constructor(){super(...arguments);g(this,"shapeType","highlight");g(this,"onExit",()=>{const r=this.children.drawing;r.initialShape=void 0})}}g(Kp,"id","highlight"),g(Kp,"initial","idle"),g(Kp,"children",()=>[pk,h0]);var V2;let YV=(V2=class extends se{constructor(){super(...arguments);g(this,"shapeId","");g(this,"onEnter",r=>{this.shapeId=r.shapeId,this.editor.setCursor({type:"cross",rotation:0})});g(this,"onPointerDown",()=>{this.parent.transition("pointing",{shapeId:this.shapeId})});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(V2,"id","idle"),V2);const l9=2;var Y2;let XV=(Y2=class extends se{constructor(){super(...arguments);g(this,"shape",{});g(this,"markId");g(this,"onEnter",r=>{const{inputs:a}=this.editor,{currentPagePoint:s}=a;this.markId=void 0;const n=r.shapeId&&this.editor.getShape(r.shapeId);if(n&&a.shiftKey){this.markId=`creating:${n.id}`,this.editor.mark(this.markId),this.shape=n;const o=this.editor.getShapeHandles(this.shape);if(!o)return;const i=o.filter(h=>h.type==="vertex").sort(Qt),l=i[i.length-1],c=i[i.length-2],d=ae.applyToPoint(this.editor.getShapeParentTransform(this.shape),new v(this.shape.x,this.shape.y)),p=v.Sub(s,d).addXY(.1,.1),f=mt(this.shape.props.points);if(v.DistMin(l,c,l9)||v.DistMin(p,l,l9))f[l.id]={id:l.id,index:l.index,x:p.x,y:p.y};else{const h=Ms(l.index);f[h]={id:h,index:h,x:p.x,y:p.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:f}}])}else{const o=Ne();this.markId=`creating:${o}`,this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:"line",x:s.x,y:s.y}]),this.editor.select(o),this.shape=this.editor.getShape(o)}});g(this,"onPointerMove",()=>{if(this.shape&&this.editor.inputs.isDragging){const r=this.editor.getShapeHandles(this.shape);if(!r)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const a=Lt(r);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:{...a,x:a.x-.1,y:a.y-.1},onInteractionEnd:"line"})}});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators()})}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}},g(Y2,"id","pointing"),Y2);class Vp extends se{constructor(){super(...arguments);g(this,"shapeType","line")}}g(Vp,"id","line"),g(Vp,"initial","idle"),g(Vp,"children",()=>[YV,XV]);var X2;let ZV=(X2=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(X2,"id","idle"),X2);function We(e,t){var s;const r=new Set;for(const n of t){const o=e.getShape(n);if(!o)continue;e.getShapeUtil(o).onDragShapesOut&&r.add(o);const i=e.getShape(o.parentId);i&&e.getShapeUtil(i).onDragShapesOut&&r.add(i)}const a=new Map;for(const n of r){const o=fk(e,n);o.length&&a.set(n,o)}for(const[n,o]of a){const i=e.getShapeUtil(n),l=ge(o.map(c=>e.getShape(c)));(s=i.onDragShapesOut)==null||s.call(i,n,l)}}function fk(e,t){const r=e.getSortedChildIdsForParent(t.id);if(r.length===0)return[];const a=e.getShapePageBounds(t);if(!a)return[];let s,n,o;const i=[];for(const l of r){const c=e.getShapePageBounds(l);if(!c)continue;if(!a.includes(c)){i.push(l);continue}s??(s=e.getShapeGeometry(t)),n??(n=e.getShapePageTransform(t)),o??(o=n.applyToPoints(s.vertices));const d=e.getShapePageTransform(l).clone().invert().applyToPoints(o),{vertices:p,isClosed:f}=e.getShapeGeometry(l);if(!p.some(h=>ta(h,d))){if(f){if(_h(d,p))continue}else if(lG(d,p))continue;i.push(l)}}return i}function Sh(e,t,r=!1){e.select(t),e.setEditingShape(t),e.setCurrentTool("select.editing_shape",{target:"shape",shape:t}),r&&e.emit("select-all-text",{shapeId:t.id}),hk(e)}const JV=16;function hk(e){const t=e.getSelectionPageBounds(),r=e.getViewportPageBounds();if(t&&!r.contains(t)){const a=t.clone().expandBy(JV/e.getZoomLevel()).expand(r),s=r.clone().translate({x:(a.center.x-r.center.x)*2,y:(a.center.y-r.center.y)*2});e.zoomToBounds(s,{animation:{duration:e.options.animationMediumMs},inset:0})}}const $i=20,QV=0,Pe=200,g0={x:Pe/2,y:Pe/2},gk=10,eY={a1:new v(Pe*.5,Pe*-.5-$i),a2:new v(Pe*1.5+$i,Pe*.5),a3:new v(Pe*.5,Pe*1.5+$i),a4:new v(Pe*-.5-$i,Pe*.5)};function mk(e,t,r,a){return Object.fromEntries(Object.entries(eY).map(([s,n],o)=>{const i=n.clone();return o===0&&a?i.y-=a:o===2&&r&&(i.y+=r),[s,i.rot(t).add(e)]}))}function bk(e,t,r){const a=new Set(e.getSelectedShapeIds()),s=(Pe+$i+r)**2,n=new Map,o=[];for(const c of e.getCurrentPageShapes()){if(!e.isShapeOfType(c,"note")||a.has(c.id))continue;const d=e.getShapePageTransform(c.id);t===d.rotation()&&(n.set(c,e.getShapePageBounds(c).center),o.push(...Object.values(mk(d.point(),t,c.props.growY,r))))}const i=o.length;let l;for(const[c,d]of n)for(let p=0;p<i;p++)l=o[p],l&&(v.Dist2(d,l)>s||e.isPointInShape(c,l)&&(o[p]=void 0));return ge(o)}function yk(e,t,r,a,s=!1){let n;const o=e.getCurrentPageShapesSorted(),i=Pe+$i**2;for(let l=o.length-1;l>=0;l--){const c=o[l];if(c.type==="note"&&c.id!==t.id){const d=e.getShapePageBounds(c);if(d&&v.Dist2(d.center,r)<i&&e.isPointInShape(c,r)){n=c;break}}}if(e.complete(),!n||s){e.mark("creating note shape");const l=Ne();e.createShape({id:l,type:"note",x:r.x,y:r.y,rotation:a,opacity:t.opacity,props:{...t.props,text:"",growY:0,fontSizeAdjustment:0,url:""}});const c=e.getShape(l),d=e.getPointInParentSpace(c,v.Sub(r,v.Rot(g0,a)));e.updateShape({id:l,type:"note",x:d.x,y:d.y}),n=e.getShape(l)}return hk(e),n}var Z2;let tY=(Z2=class extends se{constructor(){super(...arguments);g(this,"dragged",!1);g(this,"info",{});g(this,"wasFocusedOnEnter",!1);g(this,"markId","");g(this,"shape",{});g(this,"onEnter",()=>{const{editor:r}=this;if(this.wasFocusedOnEnter=!r.getIsMenuOpen(),this.wasFocusedOnEnter){const a=Ne();this.markId=`creating:${a}`,r.mark(this.markId);const s=this.editor.inputs.originPagePoint.clone(),n=c9(this.editor,s);n&&s.sub(n),this.shape=d9(this.editor,a,s)}});g(this,"onPointerMove",r=>{if(this.editor.inputs.isDragging){if(!this.wasFocusedOnEnter){const a=Ne(),s=this.editor.inputs.originPagePoint.clone(),n=c9(this.editor,s);n&&s.sub(n),this.shape=d9(this.editor,a,s)}this.editor.setCurrentTool("select.translating",{...r,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}})}});g(this,"onPointerUp",()=>{this.complete()});g(this,"onInterrupt",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()})}complete(){this.wasFocusedOnEnter&&(this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape})))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}},g(Z2,"id","pointing"),Z2);function c9(e,t){let r=gk/e.getZoomLevel(),a;for(const s of bk(e,0,0)){const n=v.Sub(t,s),o=n.len();o<r&&(r=o,a=n)}return a}function d9(e,t,r){e.createShape({id:t,type:"note",x:r.x,y:r.y}).select(t);const a=e.getShape(t),s=e.getShapeGeometry(a).bounds;return e.updateShapes([{id:t,type:"note",x:a.x-s.width/2,y:a.y-s.height/2}]),e.getShape(t)}class Yp extends se{constructor(){super(...arguments);g(this,"shapeType","note")}}g(Yp,"id","note"),g(Yp,"initial","idle"),g(Yp,"children",()=>[ZV,tY]);function rY(e){const t=e.getShapeAtPoint(e.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:e.options.hitTestMargin/e.getZoomLevel(),renderingOnly:!0});if(!t)return e.setHoveredShape(null);let r;const a=e.getOutermostSelectableShape(t);return a===t||a.id===e.getFocusedGroupId()||e.getSelectedShapeIds().includes(a.id)?r=t:r=a,e.setHoveredShape(r.id)}const tl=qz(rY,32);var J2;let aY=(J2=class extends se{constructor(){super(...arguments);g(this,"onPointerMove",r=>{switch(r.target){case"shape":case"canvas":tl(this.editor)}});g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});g(this,"onKeyDown",r=>{var a;if(r.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const s=this.editor.getOnlySelectedShape();s&&this.editor.getShapeUtil(s).canEdit(s)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(s.id),(a=this.editor.root.getCurrent())==null||a.transition("editing_shape",{...r,target:"shape",shape:s}))}});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(J2,"id","idle"),J2);var Q2;let sY=(Q2=class extends se{constructor(){super(...arguments);g(this,"shape");g(this,"markId","");g(this,"onExit",()=>{this.editor.setHintingShapes([])});g(this,"onPointerMove",r=>{if(this.editor.inputs.isDragging){const{inputs:{originPagePoint:a}}=this.editor,s=Ne();if(this.markId=`creating:${s}`,this.editor.mark(this.markId),this.editor.createShapes([{id:s,type:"text",x:a.x,y:a.y,props:{text:"",autoSize:!1,w:20}}]),this.editor.select(s),this.shape=this.editor.getShape(s),!this.shape)return;const{shape:n}=this;this.editor.setCurrentTool("select.resizing",{...r,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:18,y:1},onInteractionEnd:"text",onCreate:()=>{this.editor.setEditingShape(n.id),this.editor.setCurrentTool("select.editing_shape")}})}});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.cancel()});g(this,"onCancel",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}complete(){var n;this.editor.mark("creating text shape");const r=Ne(),{x:a,y:s}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:r,type:"text",x:a,y:s,props:{text:"",autoSize:!0}}]).select(r),this.editor.setEditingShape(r),this.editor.setCurrentTool("select"),(n=this.editor.root.getCurrent())==null||n.transition("editing_shape")}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}},g(Q2,"id","pointing"),Q2);class Xp extends se{constructor(){super(...arguments);g(this,"shapeType","text")}}g(Xp,"id","text"),g(Xp,"initial","idle"),g(Xp,"children",()=>[aY,sY]);const nY=[Xp,Hp,Gp,Yp,Vp,Mb,Wp,Kp];function ml(e){return{key:`${gs.id}:${e}`,getElement:async()=>{const t=oY(e);if(!t)return null;const r=t.$$_url,a=t.$$_fontface;if(!r||!a)return null;const s=await(await fetch(r,{referrerPolicy:"strict-origin-when-cross-origin"})).blob(),n=await Yi.blobToDataUrl(s),o=a.replace(r,n);return u.jsx("style",{children:o})}}}function oY(e){const t=mx[e];for(const r of document.fonts)if(t.includes(r.family))return r;return null}function m0(e){return{key:`${gs.id}:${e}`,getElement:async()=>e!=="pattern"?null:u.jsx(iY,{})}}function iY(){const e=Fa(),t=8/12;return u.jsxs(u.Fragment,{children:[u.jsxs("mask",{id:"hash_pattern_mask",children:[u.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:"white"}),u.jsxs("g",{strokeLinecap:"round",stroke:"black",children:[u.jsx("line",{x1:t*1,y1:t*3,x2:t*3,y2:t*1}),u.jsx("line",{x1:t*5,y1:t*7,x2:t*7,y2:t*5}),u.jsx("line",{x1:t*9,y1:t*11,x2:t*11,y2:t*9})]})]}),u.jsx("pattern",{id:kh(1,e.id),width:"8",height:"8",patternUnits:"userSpaceOnUse",children:u.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:e.solid,mask:"url(#hash_pattern_mask)"})})]})}function b0(){return{key:`${gs.id}:pattern`,component:uY}}const Sc=8,u9=(e,t,r)=>new Promise((a,s)=>{const n=Sc*t*e,o=document.createElement("canvas");o.width=n,o.height=n;const i=o.getContext("2d");if(!i)return;i.fillStyle=r?oh.darkMode.solid:oh.lightMode.solid,i.fillRect(0,0,n,n),i.globalCompositeOperation="destination-out",i.lineCap="round",i.lineWidth=1.25*t*e;const l=8/12,c=d=>d*t*e;i.beginPath(),i.moveTo(c(l*1),c(l*3)),i.lineTo(c(l*3),c(l*1)),i.moveTo(c(l*5),c(l*7)),i.lineTo(c(l*7),c(l*5)),i.moveTo(c(l*9),c(l*11)),i.lineTo(c(l*11),c(l*9)),i.stroke(),o.toBlob(d=>{!d||vt.throwToBlob.get()?s():a(d)})}),p9=(e,t)=>{const r=document.createElement("canvas");r.width=e[0],r.height=e[1];const a=r.getContext("2d");return a?(t(a),r.toDataURL()):""};let b2=null;function lY(){return b2||(b2={white:p9([1,1],e=>{e.fillStyle="#f8f9fa",e.fillRect(0,0,1,1)}),black:p9([1,1],e=>{e.fillStyle="#212529",e.fillRect(0,0,1,1)})}),b2}function _k(e){return Math.ceil(Math.log2(Math.max(1,e)))}function kh(e,t){const r=_k(e);return`tldraw_hash_pattern_${t}_${r}`}function wk(e){const t=[],a=_k(e);for(let s=0;s<=a;s++)t.push(Math.pow(2,s));return t}function cY(e){const t=lY();return wk(e).flatMap(r=>[{zoom:r,url:t.white,theme:"light"},{zoom:r,url:t.black,theme:"dark"}])}function dY(){const e=N(),t=H("devicePixelRatio",()=>e.getInstanceState().devicePixelRatio,[e]),r=H("maxZoom",()=>Math.ceil(Lt(e.getCameraOptions().zoomSteps)),[e]),[a,s]=S.useState(!1),[n,o]=S.useState(()=>cY(r));return S.useEffect(()=>{const l=Promise.all(wk(r).flatMap(d=>[u9(t,d,!1).then(p=>({zoom:d,theme:"light",url:URL.createObjectURL(p)})),u9(t,d,!0).then(p=>({zoom:d,theme:"dark",url:URL.createObjectURL(p)}))]));let c=!1;return l.then(d=>{c||(o(d),s(!0))}),()=>{c=!0,s(!1),l.then(d=>{for(const{url:p}of d)URL.revokeObjectURL(p)})}},[t,r]),{defs:u.jsx(u.Fragment,{children:n.map(l=>{const c=kh(l.zoom,l.theme);return u.jsx("pattern",{id:c,width:Sc,height:Sc,patternUnits:"userSpaceOnUse",children:u.jsx("image",{href:l.url,width:Sc,height:Sc})},c)})}),isReady:a}}function uY(){const e=N(),t=S.useRef(null),{defs:r,isReady:a}=dY();return S.useEffect(()=>{if(a&&e.environment.isSafari){const s=vk(t.current);s&&e.timers.requestAnimationFrame(()=>{s.style.display="none",e.timers.requestAnimationFrame(()=>{s.style.display=""})})}},[e,a]),u.jsx("g",{ref:t,"data-testid":a?"ready-pattern-fill-defs":void 0,children:r})}function vk(e){return e.classList.contains("tl-html-layer")?e:e.parentElement?vk(e.parentElement):null}function Fa(){return an({isDarkMode:Vd()})}const ft=_e.memo(function({theme:t,d:r,color:a,fill:s}){switch(s){case"none":return null;case"solid":return u.jsx("path",{fill:t[a].semi,d:r});case"semi":return u.jsx("path",{fill:t.solid,d:r});case"pattern":return u.jsx(pY,{theme:t,color:a,fill:s,d:r})}});function pY({d:e,color:t,theme:r}){const a=N(),s=GS(),n=H("zoomLevel",()=>a.getZoomLevel(),[a]),o=a.getZoomLevel()<=.18;return u.jsxs(u.Fragment,{children:[u.jsx("path",{fill:r[t].pattern,d:e}),u.jsx("path",{fill:s?`url(#${kh(1,r.id)})`:o?r[t].semi:`url(#${kh(n,r.id)})`,d:e})]})}function fY(e){return e.replace(/\s/g," ")}function Bb(e,t,r){const{padding:a=0}=r;if(t.length===0)return null;const s=Z.From(t[0].box);for(const{box:c}of t)s.union(c);const n=a+(r.offsetX??0),o=(r.offsetY??0)+r.fontSize/2+(r.verticalTextAlign==="start"?a:r.verticalTextAlign==="end"?r.height-a-s.height:(Math.ceil(r.height)-s.height)/2);let i=null;const l=[];for(const{text:c,box:d}of t)i!==null&&d.y>i&&l.push(u.jsx("tspan",{alignmentBaseline:"mathematical",x:n,y:d.y+o,children:`
`},l.length)),l.push(u.jsx("tspan",{alignmentBaseline:"mathematical",x:d.x+n,y:d.y+o,unicodeBidi:"plaintext",children:fY(c)},l.length)),i=d.y;return u.jsx("text",{fontSize:r.fontSize,fontFamily:r.fontFamily,fontStyle:r.fontFamily,fontWeight:r.fontWeight,dominantBaseline:"mathematical",alignmentBaseline:"mathematical",stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,children:l})}function hY(e,t,r,a){if((e==="start-legacy"||e==="end-legacy")&&r.length!==0){const s=Z.From(r[0].box);for(const{box:n}of r)s.union(n);if(e==="start-legacy")return(a-2*t-s.width)/2;if(e==="end-legacy")return-(a-2*t-s.width)/2}}function gY(e){return e==="start-legacy"||e==="middle-legacy"||e==="end-legacy"}function bg({fontSize:e,font:t,align:r,verticalAlign:a,text:s,labelColor:n,bounds:o,padding:i=16,stroke:l=!0}){const c=N(),d=Fa(),p={fontSize:e,fontFamily:mx[t],textAlign:r,verticalTextAlign:a,width:Math.ceil(o.width),height:Math.ceil(o.height),padding:i,lineHeight:$t.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0,offsetY:0,fill:n,stroke:void 0,strokeWidth:void 0},f=c.textMeasure.measureTextSpans(s,p),h=hY(r,i,f,o.width);h&&(p.offsetX=h),p.offsetX+=o.x,p.offsetY+=o.y;const y=Bb(c,f,p);let m=null;return l&&(p.fill=d.background,p.stroke=d.background,p.strokeWidth=2,m=Bb(c,f,p)),u.jsxs(u.Fragment,{children:[m,y]})}function ts(e,t,r={}){const{closed:a=!1,snap:s=1,start:n="outset",end:o="outset",lengthRatio:i=2,style:l="dashed"}=r;let c=0,d=0,p=1,f=0,h=0;switch(l){case"dashed":{p=1,c=Math.min(t*i,e/4);break}case"dotted":{p=100,c=t/p;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return a||(n==="outset"?(e+=c/2,h+=c/2):n==="skip"&&(e-=c,h-=c),o==="outset"?e+=c/2:o==="skip"&&(e-=c)),d=Math.floor(e/c/(2*p)),d-=d%s,d<3&&l==="dashed"?e/t<4?(c=e,d=1,f=0):(c=e*(1/3),f=e*(1/3)):(c=e/d/(2*p),a?(h=c/2,f=(e-d*c)/d):f=(e-d*c)/Math.max(1,d-1)),{strokeDasharray:[c,f].join(" "),strokeDashoffset:h.toString()}}const f9=new WeakMap;function y0(e,t){const r=f9.get(t);if(r)return r;const a=os(e,t);let s=0,n=0;const o=a.isStraight?new Rs({start:v.From(a.start.point),end:v.From(a.end.point)}):new Ri({center:v.Cast(a.handleArc.center),start:v.Cast(a.start.point),end:v.Cast(a.end.point),sweepFlag:a.bodyArc.sweepFlag,largeArcFlag:a.bodyArc.largeArcFlag});if(t.props.text.trim()){const l=o.bounds,{w:c,h:d}=e.textMeasure.measureText(t.props.text,{...$t,fontFamily:fs[t.props.font],fontSize:_o[t.props.size],maxWidth:null});if(s=c,n=d,l.width>l.height){s=Math.max(Math.min(c,64),Math.min(l.width-64,c));const{w:p,h:f}=e.textMeasure.measureText(t.props.text,{...$t,fontFamily:fs[t.props.font],fontSize:_o[t.props.size],maxWidth:s});s=p,n=f}if(s>16*_o[t.props.size]){s=16*_o[t.props.size];const{w:p,h:f}=e.textMeasure.measureText(t.props.text,{...$t,fontFamily:fs[t.props.font],fontSize:_o[t.props.size],maxWidth:s});s=p,n=f}}const i=new v(s,n).addScalar(gV*2);return f9.set(t,i),i}function xk(e,t){const r=At[t.props.size];return hV+(r-At.s)*2+(r===At.xl?20:0)}function mY(e,t,r){const a=y0(e,t),s=xk(e,t),n=v.Nudge(r.start.point,r.end.point,s),o=v.Nudge(r.end.point,r.start.point,s),i=t0(n,o,Z.FromCenter(r.middle,a).corners);if(!i||i.length!==2)return{start:.5,end:.5};let[l,c]=i;v.Dist2(l,n)>v.Dist2(c,n)&&([c,l]=i);const d=n.add(v.Sub(r.middle,l)),p=o.add(v.Sub(r.middle,c)),f=v.Dist(r.start.point,d)/r.length,h=v.Dist(r.start.point,p)/r.length;return{start:f,end:h}}function bY(e,t,r){const a=y0(e,t),s=xk(e,t),n=Math.sign(t.props.bend),o=s/r.handleArc.radius*n,i=v.Angle(r.bodyArc.center,r.start.point)-o,l=v.Angle(r.bodyArc.center,r.end.point)+o,c=zo(r.bodyArc.center,r.bodyArc.radius,i),d=zo(r.bodyArc.center,r.bodyArc.radius,l),p=[],f=h9(r.bodyArc.center,r.bodyArc.radius,i,l,n,Z.FromCenter(c,a).corners);p.push(new _t({points:Z.FromCenter(c,a).corners,debugColor:"lime",isFilled:!1,ignore:!0}));const h=h9(r.bodyArc.center,r.bodyArc.radius,i,l,n,Z.FromCenter(d,a).corners);p.push(new _t({points:Z.FromCenter(d,a).corners,debugColor:"lime",isFilled:!1,ignore:!0}));for(const P of[...f??[],...h??[],c,d])p.push(new d0({x:P.x-3,y:P.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}));const y=(f&&g9(r.start.point,f))??r.middle,m=(h&&g9(r.end.point,h))??r.middle,w=v.Angle(r.bodyArc.center,r.start.point),b=v.Angle(r.bodyArc.center,r.end.point),_=v.Angle(r.bodyArc.center,y),x=v.Angle(r.bodyArc.center,m);if(xn(w,_,n)>xn(w,x,n))return{start:.5,end:.5,dbg:p};const C=xn(w,b,n),k=xn(w,_,n)/C,F=xn(w,x,n)/C;return{start:k,end:F,dbg:p}}function Zp(e,t){let r;const a=[],s=os(e,t),n=!!s.bindings.start,o=!!s.bindings.end,i=s.start.arrowhead!=="none",l=s.end.arrowhead!=="none";if(s.isStraight){const d=mY(e,t,s);let p=Pt(t.props.labelPosition,i||n?d.start:0,l||o?d.end:1);p=p>=.48&&p<=.52?.5:p,r=v.Lrp(s.start.point,s.end.point,p)}else{const d=bY(e,t,s);d.dbg&&a.push(...d.dbg);let p=Pt(t.props.labelPosition,i||n?d.start:0,l||o?d.end:1);p=p>=.48&&p<=.52?.5:p;const f=yY(v.Angle(s.bodyArc.center,s.start.point),v.Angle(s.bodyArc.center,s.end.point),Math.sign(t.props.bend),p);r=zo(s.bodyArc.center,s.bodyArc.radius,f)}const c=y0(e,t);return{box:Z.FromCenter(r,c),debugGeom:a}}function h9(e,t,r,a,s,n){const o=Ib(e,t,n),i=xn(r,a,s);return o==null?void 0:o.filter(l=>{const c=xn(r,v.Angle(e,l),s);return c>=0&&c<=i})}function g9(e,t){let r=null,a=-1/0;for(const s of t){const n=v.Dist2(e,s);n>a&&(r=s,a=n)}return r}function yY(e,t,r,a){const s=xn(e,t,r);return e+s*a*r*-1}function _Y(e,t,r){const a=t==="end"?e.end.point:e.start.point,s=t==="end"?e.start.point:e.end.point,n=e.isStraight?v.Dist(s,a):Math.abs(e.bodyArc.length),o=Math.max(Math.min(n/5,r*3),r);let i;if(e.isStraight)i=v.Nudge(a,s,o);else{const l=oG(a,o,e.handleArc.center,e.handleArc.radius);i=t==="end"?e.handleArc.sweepFlag?l[0]:l[1]:e.handleArc.sweepFlag?l[1]:l[0]}return v.IsNaN(i)&&(i=e.start.point),{point:a,int:i}}function wY({point:e,int:t}){const r=v.RotWith(t,e,Ce/6),a=v.RotWith(t,e,-Ce/6);return`M ${r.x} ${r.y} L ${e.x} ${e.y} L ${a.x} ${a.y}`}function vY({point:e,int:t}){const r=v.RotWith(t,e,Ce/6),a=v.RotWith(t,e,-Ce/6);return`M ${r.x} ${r.y} L ${e.x} ${e.y} L ${a.x} ${a.y} Z`}function xY({point:e,int:t}){const r=v.Sub(t,e).div(2),a=v.Add(e,v.Rot(r,Ge)),s=v.Sub(e,v.Rot(r,Ge));return`M ${a.x} ${a.y} L ${t.x} ${t.y} L ${s.x} ${s.y} Z`}function SY({point:e,int:t}){const r=v.Lrp(e,t,.45),a=v.Dist(r,e);return`M ${r.x-a},${r.y}
  a ${a},${a} 0 1,0 ${a*2},0
  a ${a},${a} 0 1,0 -${a*2},0 `}function kY({point:e,int:t}){const r=v.Lrp(e,t,.75),a=v.RotWith(r,e,Ce/4),s=v.RotWith(r,e,-Ce/4),n=v.Lrp(a,s,.5);return n.add(v.Sub(n,e)),`M ${n.x} ${n.y} L ${a.x} ${a.y} ${e.x} ${e.y} L ${s.x} ${s.y} Z`}function FY({int:e,point:t}){const r=v.Lrp(t,e,.85),a=v.Sub(r,t).div(2),s=v.Add(t,v.Rot(a,Ge)),n=v.Sub(t,v.Rot(a,Ge)),o=v.Add(r,v.Rot(a,Ge)),i=v.Sub(r,v.Rot(a,Ge));return`M ${s.x} ${s.y} L ${o.x} ${o.y} L ${i.x} ${i.y} L ${n.x} ${n.y} Z`}function CY({int:e,point:t}){const r=v.Sub(e,t).div(2),a=v.Add(t,v.Rot(r,Ge)),s=v.Sub(t,v.Rot(r,Ge));return`M ${a.x} ${a.y} L ${s.x} ${s.y}`}function Fh(e,t,r){const a=t==="end"?e.end.arrowhead:e.start.arrowhead;if(a==="none")return;const s=_Y(e,t,r);if(s){switch(a){case"bar":return CY(s);case"square":return FY(s);case"diamond":return kY(s);case"dot":return SY(s);case"inverted":return xY(s);case"arrow":return wY(s);case"triangle":return vY(s)}return""}}function PY(e){const{start:t,end:r,handleArc:{radius:a,largeArcFlag:s,sweepFlag:n}}=e;return`M${t.handle.x},${t.handle.y} A${a} ${a} 0 ${s} ${n} ${r.handle.x},${r.handle.y}`}function Sk(e){const{start:t,end:r,bodyArc:{radius:a,largeArcFlag:s,sweepFlag:n}}=e;return`M${t.point.x},${t.point.y} A${a} ${a} 0 ${s} ${n} ${r.point.x},${r.point.y}`}function kk(e,t){return`M${e.x},${e.y}L${t.x},${t.y}`}function IY(e){return kk(e.start.handle,e.end.handle)}function Fk(e){return kk(e.start.point,e.end.point)}const AY=S.forwardRef(function({isEditing:t,text:r,handleFocus:a,handleChange:s,handleKeyDown:n,handleBlur:o,handleInputPointerDown:i,handleDoubleClick:l},c){return u.jsx("textarea",{ref:c,className:"tl-text tl-text-input",name:"text",tabIndex:-1,readOnly:!t,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:a,onChange:s,onKeyDown:n,onBlur:o,onTouchEnd:qt,onContextMenu:t?qt:void 0,onPointerDown:i,onDoubleClick:l,onDragStart:ke})});function jY(e,t,r){const a=N(),s=S.useRef(null),n=H("isEditing",()=>a.getEditingShapeId()===e,[a]),o=H("isEditingAnything",()=>!!a.getEditingShapeId(),[a]);S.useEffect(()=>{function d({shapeId:p}){var f;p===e&&((f=s.current)==null||f.select())}return a.on("select-all-text",d),()=>{a.off("select-all-text",d)}},[a,e,n]),S.useEffect(()=>{var d,p,f,h;n&&(document.activeElement!==s.current&&((d=s.current)==null||d.focus()),a.getInstanceState().isCoarsePointer&&((p=s.current)==null||p.select()),a.environment.isSafari&&((f=s.current)==null||f.blur(),(h=s.current)==null||h.focus()))},[a,n]);const i=S.useCallback(d=>{if(a.getEditingShapeId()===e)switch(d.key){case"Enter":{(d.ctrlKey||d.metaKey)&&a.complete();break}}},[a,e]),l=S.useCallback(d=>{if(a.getEditingShapeId()!==e)return;let p=gl.normalizeText(d.currentTarget.value);const f=p.replace(/\t/g,qi);if(f!==p){const h=d.currentTarget.selectionStart;d.currentTarget.value=f,d.currentTarget.selectionStart=h+(f.length-p.length),d.currentTarget.selectionEnd=h+(f.length-p.length),p=f}a.updateShape({id:e,type:t,props:{text:p}})},[a,e,t]),c=S.useCallback(d=>{a.dispatch({...Er(d),type:"pointer",name:"pointer_down",target:"shape",shape:a.getShape(e)}),qt(d)},[a,e]);return{rInput:s,handleFocus:Yf,handleBlur:Yf,handleKeyDown:i,handleChange:l,handleInputPointerDown:c,handleDoubleClick:qt,isEmpty:r.trim().length===0,isEditing:n,isEditingAnything:o}}const yg=_e.memo(function({id:t,type:r,text:a,labelColor:s,font:n,fontSize:o,lineHeight:i,align:l,verticalAlign:c,wrap:d,isSelected:p,onKeyDown:f,classNamePrefix:h,style:y,textWidth:m,textHeight:w}){const{rInput:b,isEmpty:_,isEditing:x,isEditingAnything:C,...k}=jY(t,r,a),[F,P]=S.useState(a);S.useEffect(()=>{x||P(a)},[x,a]);const I=gl.normalizeTextForDom(a),j=I.length>0,A=gY(l);if(!x&&!j)return null;const D=h||"tl-text";return u.jsx("div",{className:`${D}-label tl-text-wrapper`,"data-font":n,"data-align":l,"data-hastext":!_,"data-isediting":x,"data-iseditinganything":C,"data-textwrap":!!d,"data-isselected":p,style:{justifyContent:l==="middle"||A?"center":l,alignItems:c==="middle"?"center":c,...y},children:u.jsxs("div",{className:`${D}-label__inner tl-text-content__wrapper`,style:{fontSize:o,lineHeight:Math.floor(o*i)+"px",minHeight:i+32,minWidth:Math.ceil(m||0),color:s,width:m?Math.ceil(m):void 0,height:w?Math.ceil(w):void 0},children:[u.jsx("div",{className:`${D} tl-text tl-text-content`,dir:"auto",children:I.split(`
`).map((z,T)=>u.jsx("div",{dir:"auto",children:z},T))}),(C||p)&&u.jsx(AY,{ref:b,text:a,isEditing:x,...k,handleKeyDown:f??k.handleKeyDown},F)]})})}),EY=S.memo(function({id:t,text:r,size:a,font:s,position:n,width:o,isSelected:i,labelColor:l}){const c=Fa();return u.jsx(yg,{id:t,classNamePrefix:"tl-arrow",type:"arrow",font:s,fontSize:_o[a],lineHeight:$t.lineHeight,align:"middle",verticalAlign:"middle",text:r,labelColor:c[l].solid,textWidth:o,isSelected:i,style:{transform:`translate(${n.x}px, ${n.y}px)`}})});let DY=0;class Jp extends za{constructor(){super(...arguments);g(this,"canEdit",()=>!0);g(this,"canSnap",()=>!1);g(this,"hideResizeHandles",()=>!0);g(this,"hideRotateHandle",()=>!0);g(this,"hideSelectionBoundsBg",()=>!0);g(this,"hideSelectionBoundsFg",()=>!0);g(this,"canBeLaidOut",r=>{const a=Ir(this.editor,r);return!a.start&&!a.end});g(this,"onHandleDrag",(r,{handle:a,isPrecise:s})=>{const n=a.id,o=Ir(this.editor,r);if(n==="middle"){const{start:F,end:P}=Oi(this.editor,r,o),I=v.Sub(P,F),j=v.Per(I),A=v.Med(P,F),D=v.Sub(A,j),z=v.Add(A,j),T=v.NearestPointOnLineSegment(D,z,a,!1);let M=v.Dist(T,A);return v.Clockwise(T,P,A)&&(M*=-1),{id:r.id,type:r.type,props:{bend:M}}}const i={id:r.id,type:"arrow",props:{}},l=o[n],d=o[n==="start"?"end":"start"];if(this.editor.inputs.ctrlKey)return $p(this.editor,r,n),i.props[n]={x:a.x,y:a.y},i;const p=this.editor.getShapePageTransform(r.id).applyToPoint(a),f=this.editor.getShapeAtPoint(p,{hitInside:!0,hitFrameInside:!0,margin:0,filter:F=>!F.isLocked&&this.editor.canBindShapes({fromShape:r,toShape:F,binding:"arrow"})});if(!f)return $p(this.editor,r,n),i.props[n]={x:a.x,y:a.y},i;const h=this.editor.getShapeGeometry(f),y=Z.ZeroFix(h.bounds),w=this.editor.getShapePageTransform(i.id).applyToPoint(a),b=this.editor.getPointInShapeSpace(f,w);let _=s;_||(!l||l&&f.id!==l.toId)&&(_=this.editor.inputs.pointerVelocity.len()<.5),s||(h.isClosed||(_=!0),d&&f.id===d.toId&&d.props.isPrecise&&(_=!0));const x={x:(b.x-y.minX)/y.width,y:(b.y-y.minY)/y.height};_&&v.Dist(b,y.center)<Math.max(4,Math.min(Math.min(y.width,y.height)*.15,16))/this.editor.getZoomLevel()&&(x.x=.5,x.y=.5);const C={terminal:n,normalizedAnchor:x,isPrecise:_,isExact:this.editor.inputs.altKey};oc(this.editor,r,f.id,C),this.editor.setHintingShapes([f.id]);const k=Ir(this.editor,r);return k.start&&k.end&&k.start.toId===k.end.toId&&v.Equals(k.start.props.normalizedAnchor,k.end.props.normalizedAnchor)&&oc(this.editor,r,k.end.toId,{...k.end.props,normalizedAnchor:{x:k.end.props.normalizedAnchor.x+.05,y:k.end.props.normalizedAnchor.y}}),i});g(this,"onTranslateStart",r=>{const a=Ir(this.editor,r),s=Oi(this.editor,r,a),n=this.editor.getShapePageTransform(r.id),o=this.editor.getSelectedShapeIds();if(!(a.start&&(o.includes(a.start.toId)||this.editor.isAncestorSelected(a.start.toId))||a.end&&(o.includes(a.end.toId)||this.editor.isAncestorSelected(a.end.toId)))){b9.set(r,{pagePosition:n.applyToPoint(r),terminalBindings:Od(s,(i,l)=>{const c=a[i];return c?{binding:c,shapePosition:l,pagePosition:n.applyToPoint(l)}:null})}),a.start&&(xh({editor:this.editor,arrow:r,terminal:"start",useHandle:!0}),r=this.editor.getShape(r.id)),a.end&&xh({editor:this.editor,arrow:r,terminal:"end",useHandle:!0});for(const i of["start","end"]){const l=a[i];l&&this.editor.updateBinding({...l,props:{...l.props,isPrecise:!0}})}}});g(this,"onTranslate",(r,a)=>{const s=b9.get(r);if(!s)return;const n=this.editor.getShapePageTransform(a.id),o=v.Sub(n.applyToPoint(a),s.pagePosition);for(const i of Object.values(s.terminalBindings)){if(!i)continue;const l=v.Add(i.pagePosition,v.Mul(o,.5)),c=this.editor.getShapeAtPoint(l,{hitInside:!0,hitFrameInside:!0,margin:0,filter:d=>!d.isLocked&&this.editor.canBindShapes({fromShape:a,toShape:d,binding:"arrow"})});if((c==null?void 0:c.id)===i.binding.toId){const d=Z.ZeroFix(this.editor.getShapeGeometry(c).bounds),p=this.editor.getPointInShapeSpace(c,l),f={x:(p.x-d.minX)/d.width,y:(p.y-d.minY)/d.height};oc(this.editor,a,c.id,{...i.binding.props,normalizedAnchor:f,isPrecise:!0})}else $p(this.editor,a,i.binding.props.terminal)}});g(this,"_resizeInitialBindings",new $n);g(this,"onResize",(r,a)=>{const{scaleX:s,scaleY:n}=a,o=this._resizeInitialBindings.get(r,()=>Ir(this.editor,r)),i=Oi(this.editor,r,o),{start:l,end:c}=mt(r.props);let{bend:d}=r.props;o.start||(l.x=i.start.x*s,l.y=i.start.y*n),o.end||(c.x=i.end.x*s,c.y=i.end.y*n);const p=Math.abs(s),f=Math.abs(n),h=o!=null&&o.start?v.From(o.start.props.normalizedAnchor):null,y=o!=null&&o.end?v.From(o.end.props.normalizedAnchor):null;return s<0&&n>=0?(d!==0&&(d*=-1,d*=Math.max(p,f)),h&&(h.x=1-h.x),y&&(y.x=1-y.x)):s>=0&&n<0?(d!==0&&(d*=-1,d*=Math.max(p,f)),h&&(h.y=1-h.y),y&&(y.y=1-y.y)):s>=0&&n>=0?d!==0&&(d*=Math.max(p,f)):s<0&&n<0&&(d!==0&&(d*=Math.max(p,f)),h&&(h.x=1-h.x,h.y=1-h.y),y&&(y.x=1-y.x,y.y=1-y.y)),o.start&&h&&oc(this.editor,r,o.start.toId,{...o.start.props,normalizedAnchor:h.toJson()}),o.end&&y&&oc(this.editor,r,o.end.toId,{...o.end.props,normalizedAnchor:y.toJson()}),{props:{start:l,end:c,bend:d}}});g(this,"onDoubleClickHandle",(r,a)=>{switch(a.id){case"start":return{id:r.id,type:r.type,props:{...r.props,arrowheadStart:r.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:r.id,type:r.type,props:{...r.props,arrowheadEnd:r.props.arrowheadEnd==="none"?"arrow":"none"}}}});g(this,"onEditEnd",r=>{const{id:a,type:s,props:{text:n}}=r;n.trimEnd()!==r.props.text&&this.editor.updateShapes([{id:a,type:s,props:{text:n.trimEnd()}}])})}canBind({toShapeType:r}){return r!=="arrow"}getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{x:0,y:0},end:{x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw"}}getGeometry(r){const a=os(this.editor,r),s=[],n=a.isStraight?new Rs({start:v.From(a.start.point),end:v.From(a.end.point)}):new Ri({center:v.Cast(a.handleArc.center),start:v.Cast(a.start.point),end:v.Cast(a.end.point),sweepFlag:a.bodyArc.sweepFlag,largeArcFlag:a.bodyArc.largeArcFlag});let o;if(r.props.text.trim()){const i=Zp(this.editor,r);s.push(...i.debugGeom),o=new Ys({x:i.box.x,y:i.box.y,width:i.box.w,height:i.box.h,isFilled:!0,isLabel:!0})}return new $a({children:[...o?[n,o]:[n],...s]})}getHandles(r){const a=os(this.editor,r);return[{id:"start",type:"vertex",index:"a0",x:a.start.handle.x,y:a.start.handle.y},{id:"middle",type:"virtual",index:"a2",x:a.middle.x,y:a.middle.y},{id:"end",type:"vertex",index:"a3",x:a.end.handle.x,y:a.end.handle.y}].filter(Boolean)}component(r){const a=this.editor.getOnlySelectedShape(),s=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getInstanceState().isReadonly,n=os(this.editor,r);if(!(n!=null&&n.isValid))return null;const o=Zp(this.editor,r),i=r.id===this.editor.getOnlySelectedShapeId(),c=this.editor.getEditingShapeId()===r.id||r.props.text;return u.jsxs(u.Fragment,{children:[u.jsx(Hn,{id:r.id,style:{minWidth:50,minHeight:50},children:u.jsx(m9,{shape:r,shouldDisplayHandles:s&&(a==null?void 0:a.id)===r.id})}),c&&u.jsx(EY,{id:r.id,text:r.props.text,font:r.props.font,size:r.props.size,position:o.box.center,width:o.box.w,isSelected:i,labelColor:r.props.labelColor})]})}indicator(r){const a=gg(r.id),s=os(this.editor,r);if(!s)return null;const{start:n,end:o}=Oi(this.editor,r,s==null?void 0:s.bindings),i=this.editor.getShapeGeometry(r),l=i.bounds,c=r.props.text.trim()?i.children[1]:null;if(v.Equals(n,o))return null;const d=At[r.props.size],p=s.start.arrowhead&&Fh(s,"start",d),f=s.end.arrowhead&&Fh(s,"end",d),h=s.isStraight?Fk(s):Sk(s),y=p&&s.start.arrowhead!=="arrow"||f&&s.end.arrowhead!=="arrow"||!!c,m=(r.id+"_clip").replace(":","_");return a&&c?u.jsx("rect",{x:R(c.x),y:R(c.y),width:c.w,height:c.h,rx:3.5,ry:3.5}):u.jsxs("g",{children:[y&&u.jsx("defs",{children:u.jsxs("mask",{id:m,children:[u.jsx("rect",{x:l.minX-100,y:l.minY-100,width:l.w+200,height:l.h+200,fill:"white"}),c&&u.jsx("rect",{x:R(c.x),y:R(c.y),width:c.w,height:c.h,fill:"black",rx:3.5,ry:3.5}),p&&u.jsx("path",{d:p,fill:s.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),f&&u.jsx("path",{d:f,fill:s.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),u.jsxs("g",{...y?{mask:`url(#${m})`}:void 0,children:[y&&u.jsx("rect",{x:l.minX-100,y:l.minY-100,width:l.width+200,height:l.height+200,opacity:0}),u.jsx("path",{d:h})]}),p&&u.jsx("path",{d:p}),f&&u.jsx("path",{d:f}),c&&u.jsx("rect",{x:R(c.x),y:R(c.y),width:c.w,height:c.h,rx:3.5,ry:3.5})]})}toSvg(r,a){a.addExportDef(m0(r.props.fill)),r.props.text&&a.addExportDef(ml(r.props.font));const s=an(a);return u.jsxs(u.Fragment,{children:[u.jsx(m9,{shape:r,shouldDisplayHandles:!1}),u.jsx(bg,{fontSize:_o[r.props.size],font:r.props.font,align:"middle",verticalAlign:"middle",text:r.props.text,labelColor:s[r.props.labelColor].solid,bounds:Zp(this.editor,r).box,padding:4})]})}getCanvasSvgDefs(){return[b0(),{key:"arrow:dot",component:MY},{key:"arrow:cross",component:BY}]}}g(Jp,"type","arrow"),g(Jp,"props",yx),g(Jp,"migrations",_x);function TY(e,t){const r=os(e,t);return r.isStraight?v.Dist(r.start.handle,r.end.handle):Math.abs(r.handleArc.length)}const m9=la(function({shape:t,shouldDisplayHandles:r}){const a=N(),s=Fa(),n=os(a,t),o=Z.ZeroFix(a.getShapeGeometry(t).bounds),i=Ir(a,t),l=_e.useMemo(()=>a.environment.isSafari?DY+=1:0,[t]);if(!(n!=null&&n.isValid))return null;const c=At[t.props.size],d=n.start.arrowhead&&Fh(n,"start",c),p=n.end.arrowhead&&Fh(n,"end",c),f=n.isStraight?Fk(n):Sk(n);let h=null;if(r){const{strokeDasharray:k,strokeDashoffset:F}=ts(TY(a,t),2,{end:"skip",start:"skip",lengthRatio:2.5});h=i.start||i.end?u.jsx("path",{className:"tl-arrow-hint",d:n.isStraight?IY(n):PY(n),strokeDasharray:k,strokeDashoffset:F,strokeWidth:2,markerStart:i.start?i.start.props.isExact?"":i.start.props.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:i.end?i.end.props.isExact?"":i.end.props.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}const{strokeDasharray:y,strokeDashoffset:m}=ts(n.isStraight?n.length:Math.abs(n.bodyArc.length),c,{style:t.props.dash}),w=Zp(a,t),b=!(n.start.arrowhead==="none"||n.start.arrowhead==="arrow"),_=!(n.end.arrowhead==="none"||n.end.arrowhead==="arrow"),x=(t.id+"_clip_"+l).replace(":","_");return u.jsxs(u.Fragment,{children:[u.jsx("defs",{children:u.jsxs("mask",{id:x,children:[u.jsx("rect",{x:R(-100+o.minX),y:R(-100+o.minY),width:R(o.width+200),height:R(o.height+200),fill:"white"}),t.props.text.trim()&&u.jsx("rect",{x:w.box.x,y:w.box.y,width:w.box.w,height:w.box.h,fill:"black",rx:4,ry:4}),d&&b&&u.jsx("path",{d,fill:n.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),p&&_&&u.jsx("path",{d:p,fill:n.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),u.jsxs("g",{fill:"none",stroke:s[t.props.color].solid,strokeWidth:c,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[h,u.jsxs("g",{mask:`url(#${x})`,children:[u.jsx("rect",{x:R(o.minX-100),y:R(o.minY-100),width:R(o.width+200),height:R(o.height+200),opacity:0}),u.jsx("path",{d:f,strokeDasharray:y,strokeDashoffset:m})]}),d&&b&&t.props.fill!=="none"&&u.jsx(ft,{theme:s,d,color:t.props.color,fill:t.props.fill}),p&&_&&t.props.fill!=="none"&&u.jsx(ft,{theme:s,d:p,color:t.props.color,fill:t.props.fill}),d&&u.jsx("path",{d}),p&&u.jsx("path",{d:p})]})]})}),b9=new WeakMap;function MY(){return u.jsx("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:u.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function BY(){return u.jsxs("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[u.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),u.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}const y9="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function bl({url:e,zoomLevel:t}){return u.jsx("a",{className:le("tl-hyperlink-button",{"tl-hyperlink-button__hidden":t<.32}),href:e,target:"_blank",rel:"noopener noreferrer",onPointerDown:qt,onPointerUp:qt,title:e,draggable:!1,children:u.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${y9}") center 100% / 100% no-repeat`,WebkitMask:`url("${y9}") center 100% / 100% no-repeat`}})})}const _9="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E",LY=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function _0(e){return LY.map(r=>{const{offsetX:a,offsetY:s,blur:n,spread:o,color:i}=r,l=new v(a,s),{x:c,y:d}=l.rot(-e);return`${c}px ${d}px ${n}px ${o}px ${i}`}).join(", ")}const RY=300,Ck=320,OY=46,zY=101;class Qp extends Bl{constructor(){super(...arguments);g(this,"canResize",()=>!1);g(this,"hideSelectionBoundsFg",()=>!0);g(this,"onBeforeCreate",r=>w9(this.editor,r));g(this,"onBeforeUpdate",(r,a)=>{if(r.props.url!==a.props.url)if(sa.isValid(a.props.url))qY(this.editor,a);else return{...a,props:{...a.props,url:r.props.url}};if(r.props.assetId!==a.props.assetId)return w9(this.editor,a)})}getDefaultProps(){return{url:"",w:RY,h:Ck,assetId:null}}component(r){const a=r.props.assetId?this.editor.getAsset(r.props.assetId):null,s=this.editor.getShapePageTransform(r).rotation(),n=NY(r);return u.jsx(qo,{children:u.jsxs("div",{className:"tl-bookmark__container",style:{boxShadow:_0(s)},children:[(!a||a.props.image)&&u.jsxs("div",{className:"tl-bookmark__image_container",children:[a?u.jsx("img",{className:"tl-bookmark__image",draggable:!1,referrerPolicy:"strict-origin-when-cross-origin",src:a==null?void 0:a.props.image,alt:(a==null?void 0:a.props.title)||""}):u.jsx("div",{className:"tl-bookmark__placeholder"}),(a==null?void 0:a.props.image)&&u.jsx(bl,{url:r.props.url,zoomLevel:this.editor.getZoomLevel()})]}),u.jsxs("div",{className:"tl-bookmark__copy_container",children:[a!=null&&a.props.title?u.jsx("h2",{className:"tl-bookmark__heading",children:a.props.title}):null,a!=null&&a.props.description&&(a!=null&&a.props.image)?u.jsx("p",{className:"tl-bookmark__description",children:a.props.description}):null,u.jsxs("a",{className:"tl-bookmark__link",href:r.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:qt,onPointerUp:qt,onClick:qt,children:[a!=null&&a.props.favicon?u.jsx("img",{className:"tl-bookmark__favicon",src:a==null?void 0:a.props.favicon,referrerPolicy:"strict-origin-when-cross-origin",alt:`favicon of ${n}`}):u.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${_9}") center 100% / 100% no-repeat`,WebkitMask:`url("${_9}") center 100% / 100% no-repeat`}}),u.jsx("span",{children:n})]})]})]})})}indicator(r){return u.jsx("rect",{width:R(r.props.w),height:R(r.props.h),rx:"6",ry:"6"})}}g(Qp,"type","bookmark"),g(Qp,"props",Fx),g(Qp,"migrations",Cx);function w9(e,t){const r=t.props.assetId?e.getAsset(t.props.assetId):null;let a=Ck;return r&&(r.props.image||(r.props.title?a=zY:a=OY)),{...t,props:{...t.props,h:a}}}const NY=e=>{try{return new URL(e.props.url).hostname.replace(/^www\./,"")}catch{return e.props.url}};function qY(e,t){const{url:r}=t.props,a=So.createId(hb(r));e.getAsset(a)?t.props.assetId!==a&&e.updateShapes([{id:t.id,type:t.type,props:{assetId:a}}]):(e.updateShapes([{id:t.id,type:t.type,props:{assetId:null}}]),$Y(e,t))}const $Y=Rv(async(e,t)=>{const{url:r}=t.props,a=await e.getAssetForExternalContent({type:"url",url:r});a&&e.batch(()=>{e.createAssets([a]),e.updateShapes([{id:t.id,type:t.type,props:{assetId:a.id}}])})},500);function $o(e,t=!1){const r=e.length;if(r<2)return"";let a=e[0].point,s=e[1].point;if(r===2)return`M${Se(a)}L${Se(s)}`;let n="";for(let o=2,i=r-1;o<i;o++)a=e[o].point,s=e[o+1].point,n+=Pr(a,s);return t?`M${Pr(e[0].point,e[1].point)}Q${Se(e[1].point)}${Pr(e[1].point,e[2].point)}T${n}${Pr(e[r-1].point,e[0].point)}${Pr(e[0].point,e[1].point)}Z`:`M${Se(e[0].point)}Q${Se(e[1].point)}${Pr(e[1].point,e[2].point)}${e.length>3?"T":""}${n}L${Se(e[r-1].point)}`}function UY(e,t={}){const{start:r={},end:a={}}=t,{cap:s=!0}=r,{cap:n=!0}=a;at(!r.taper&&!a.taper,"cap taper not supported here"),at(!r.easing&&!a.easing,"cap easing not supported here"),at(s&&n,"cap must be true");const o=bs(e,t);mg(o,t);const i=WY(o);let l="";for(const c of i)l+=GY(c,t);return l}function WY(e){if(e.length<=2)return[e];const t=[];let r=[e[0]],a=v.Sub(e[1].point,e[0].point).uni(),s,n,o,i,l;for(let c=1,d=e.length;c<d-1;c++){if(o=e[c-1],i=e[c],l=e[c+1],s=v.Sub(l.point,i.point).uni(),n=v.Dpr(a,s),a=s,n<-.8){const p={...i,point:i.input};r.push(p),t.push(y2(r)),r=[p];continue}if(r.push(i),!(n>.7)&&(v.Dist2(o.point,i.point)+v.Dist2(i.point,l.point))/((o.radius+i.radius+l.radius)/3)**2<1.5){r.push(i),t.push(y2(r)),r=[i];continue}}return r.push(e[e.length-1]),t.push(y2(r)),t}function y2(e){const t=e[0];let r;for(;e.length>2&&(r=e[1],v.Dist2(t.point,r.point)<((t.radius+r.radius)/2*.5)**2);)e.splice(1,1);const a=e[e.length-1];let s;for(;e.length>2&&(s=e[e.length-2],v.Dist2(a.point,s.point)<((a.radius+s.radius)/2*.5)**2);)e.splice(e.length-2,1);return e.length>1&&(e[0]={...e[0],vector:v.Sub(e[0].point,e[1].point).uni()},e[e.length-1]={...e[e.length-1],vector:v.Sub(e[e.length-2].point,e[e.length-1].point).uni()}),e}function HY(e,t,r){return"M "+e+" "+t+" m -"+r+", 0 a "+r+","+r+" 0 1,1 "+r*2+",0 a "+r+","+r+" 0 1,1 -"+r*2+",0"}function GY(e,t={}){if(e.length===0)return"";if(e.length===1)return HY(e[0].point.x,e[0].point.y,e[0].radius);const{left:r,right:a}=ak(e,t);a.reverse();let s=`M${Se(r[0])}T`;for(let n=1;n<r.length;n++)s+=Pr(r[n-1],r[n]);{const n=e[e.length-1],o=n.radius,i=n.vector.clone().per().neg(),l=v.Add(n.point,v.Mul(i,o)),c=v.Add(n.point,v.Mul(i,-o));s+=`${Se(l)}A${R(o)},${R(o)} 0 0 1 ${Se(c)}T`}for(let n=1;n<a.length;n++)s+=Pr(a[n-1],a[n]);{const n=e[0],o=n.radius,i=n.vector.clone().per(),l=v.Add(n.point,v.Mul(i,o)),c=v.Add(n.point,v.Mul(i,-o));s+=`${Se(l)}A${R(o)},${R(o)} 0 0 1 ${Se(c)}Z`}return s}function bd(){const e=N();return H("zoom",()=>e.getZoomLevel()<.35,[e])}const KY=e=>e*.65+n$(e*Ce/2)*.35,VY=e=>({size:1+e,thinning:.5,streamline:.62+(1+e)/8*.06,smoothing:.62,easing:ar.easeOutSine,simulatePressure:!0}),YY=e=>({size:1+e*1.2,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:KY}),v9=e=>({size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:ar.linear});function Lb({strokeWidth:e,showAsComplete:t}){return{size:1+e,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:ar.easeOutSine,last:t}}function Rb(e,t,r,a){return{...a?v9(t):e.dash==="draw"?e.isPen?YY(t):VY(t):v9(t),last:e.isComplete||r}}function yd(e){const t=[];for(const r of e)if(r.type==="free"||r.points.length<2)t.push(...r.points.map(v.Cast));else{const a=Math.max(4,Math.floor(v.Dist(r.points[0],r.points[1])/16));t.push(...v.PointsBetween(r.points[0],r.points[1],a))}return t}function XY(e,t){return{draw:"none",solid:"none",dotted:`0.1 ${t*2}`,dashed:`${t*2} ${t*2}`}[e.props.dash]}class ef extends za{constructor(){super(...arguments);g(this,"hideResizeHandles",r=>_2(r));g(this,"hideRotateHandle",r=>_2(r));g(this,"hideSelectionBoundsFg",r=>_2(r));g(this,"onResize",(r,a)=>{const{scaleX:s,scaleY:n}=a,o=[];for(const i of r.props.segments)o.push({...i,points:i.points.map(({x:l,y:c,z:d})=>({x:fl(s*l),y:fl(n*c),z:d}))});return{props:{segments:o}}})}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}getGeometry(r){const a=yd(r.props.segments),s=At[r.props.size];if(r.props.segments.length===1){const o=Z.FromPoints(a);if(o.width<s*2&&o.height<s*2)return new d0({x:-s,y:-s,radius:s,isFilled:!0})}const n=bs(a,Rb(r.props,s,!0,!0)).map(o=>o.point);return r.props.isClosed?new _t({points:n,isFilled:r.props.fill!=="none"}):new Ml({points:n})}component(r){return u.jsx(Hn,{id:r.id,children:u.jsx(x9,{shape:r,forceSolid:bd()})})}indicator(r){var p;const a=bd(),s=At[r.props.size],n=yd(r.props.segments);let o=s;!a&&!r.props.isPen&&r.props.dash==="draw"&&n.length===1&&(o+=Ha(r.id)()*(s/6));const i=r.props.isComplete||((p=Lt(r.props.segments))==null?void 0:p.type)==="straight",l=Rb(r.props,o,i,!0),c=bs(n,l),d=c.length>1?$o(c,r.props.isClosed):Pk(n[0],o);return u.jsx("path",{d})}toSvg(r,a){return a.addExportDef(m0(r.props.fill)),u.jsx(x9,{shape:r,forceSolid:!1})}getCanvasSvgDefs(){return[b0()]}expandSelectionOutlinePx(r){const a=r.props.dash==="draw"?1.6:1;return At[r.props.size]*a/2}}g(ef,"type","draw"),g(ef,"props",Ix),g(ef,"migrations",Ax);function Pk(e,t){const r=(t+1)*.5;return`M ${e.x} ${e.y} m -${r}, 0 a ${r},${r} 0 1,0 ${r*2},0 a ${r},${r} 0 1,0 -${r*2},0`}function _2(e){return e.props.segments.length===1&&e.props.segments[0].points.length<2}function x9({shape:e,forceSolid:t}){var p;const r=Fa(),a=At[e.props.size],s=yd(e.props.segments),n=e.props.isComplete||((p=Lt(e.props.segments))==null?void 0:p.type)==="straight";let o=a;!t&&!e.props.isPen&&e.props.dash==="draw"&&s.length===1&&(o+=Ha(e.id)()*(a/6));const i=Rb(e.props,o,n,t);if(!t&&e.props.dash==="draw")return u.jsxs(u.Fragment,{children:[e.props.isClosed&&e.props.fill&&s.length>1?u.jsx(ft,{theme:r,fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:$o(bs(s,i),e.props.isClosed)}):null,u.jsx("path",{d:UY(s,i),strokeLinecap:"round",fill:r[e.props.color].solid})]});const l=bs(s,i),c=l.length<2,d=c?Pk(s[0],0):$o(l,e.props.isClosed);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,color:e.props.color,fill:c||e.props.isClosed?e.props.fill:"none",d}),u.jsx("path",{d,strokeLinecap:"round",fill:c?r[e.props.color].solid:"none",stroke:r[e.props.color].solid,strokeWidth:a,strokeDasharray:c?"none":XY(e,a),strokeDashoffset:"0"})]})}function ZY(e,t,r={}){const{newPoint:a,handle:s,scaleX:n,scaleY:o}=t,{minWidth:i=1,maxWidth:l=1/0,minHeight:c=1,maxHeight:d=1/0}=r;let p=e.props.w*n,f=e.props.h*o;const h=new v(0,0);if(p>0){if(p<i){switch(s){case"top_left":case"left":case"bottom_left":{h.x=p-i;break}case"top":case"bottom":{h.x=(p-i)/2;break}default:h.x=0}p=i}}else if(h.x=p,p=-p,p<i){switch(s){case"top_left":case"left":case"bottom_left":{h.x=-p;break}default:h.x=-i}p=i}if(f>0){if(f<c){switch(s){case"top_left":case"top":case"top_right":{h.y=f-c;break}case"right":case"left":{h.y=(f-c)/2;break}default:h.y=0}f=c}}else if(h.y=f,f=-f,f<c){switch(s){case"top_left":case"top":case"top_right":{h.y=-f;break}default:h.y=-c}f=c}const{x:y,y:m}=h.rot(e.rotation).add(a);return{x:y,y:m,props:{w:Math.min(l,p),h:Math.min(d,f)}}}const JY=e=>Object.entries(e).filter(([t,r])=>r).map(([t])=>t).join(" ");class tf extends Bl{constructor(){super(...arguments);g(this,"hideSelectionBoundsFg",r=>!this.canResize(r));g(this,"canEdit",()=>!0);g(this,"canResize",r=>{var a,s;return!!((s=(a=In(r.props.url))==null?void 0:a.definition)!=null&&s.doesResize)});g(this,"canEditInReadOnly",()=>!0);g(this,"isAspectRatioLocked",r=>{const a=In(r.props.url);return(a==null?void 0:a.definition.isAspectRatioLocked)??!1});g(this,"onResize",(r,a)=>{const s=this.isAspectRatioLocked(r),n=In(r.props.url);let o=(n==null?void 0:n.definition.minWidth)??200,i=(n==null?void 0:n.definition.minHeight)??200;if(s){const l=r.props.w/r.props.h;l>1?o*=l:i/=l}return ZY(r,a,{minWidth:o,minHeight:i})})}getDefaultProps(){return{w:300,h:300,url:""}}component(r){const{w:a,h:s,url:n}=r.props,o=gg(r.id),i=S.useMemo(()=>ck(n),[n]),l=H("is hovering",()=>{const{editingShapeId:h,hoveredShapeId:y}=this.editor.getCurrentPageState();if(h&&y!==h){const m=this.editor.getShape(h);if(m&&this.editor.isShapeOfType(m,"embed"))return!0}return!1},[]),c=this.editor.getShapePageTransform(r).rotation(),d=o||l;if(typeof window<"u"&&(window!==window.top||window.self!==window.parent)&&(i==null?void 0:i.definition.type)==="tldraw")return null;if((i==null?void 0:i.definition.type)==="github_gist"){const h=i.url.split("/").pop();if(!h)throw Error("No gist id!");return u.jsx(qo,{className:"tl-embed-container",id:r.id,children:u.jsx(QY,{id:h,width:R(a),height:R(s),isInteractive:d,pageRotation:c})})}const f=JY({...Hq,...(i==null?void 0:i.definition.overridePermissions)??{}});return u.jsx(qo,{className:"tl-embed-container",id:r.id,children:i!=null&&i.definition?u.jsx("iframe",{className:"tl-embed",sandbox:f,src:i.embedUrl,width:R(a),height:R(s),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:d?"auto":"none",zIndex:d?"":"-1",boxShadow:_0(c),borderRadius:(i==null?void 0:i.definition.overrideOutlineRadius)??8,background:i==null?void 0:i.definition.backgroundColor}}):null})}indicator(r){const a=S.useMemo(()=>In(r.props.url),[r.props.url]);return u.jsx("rect",{width:R(r.props.w),height:R(r.props.h),rx:(a==null?void 0:a.definition.overrideOutlineRadius)??8,ry:(a==null?void 0:a.definition.overrideOutlineRadius)??8})}}g(tf,"type","embed"),g(tf,"props",jx),g(tf,"migrations",Ex);function QY({id:e,file:t,isInteractive:r,width:a,height:s,style:n,pageRotation:o}){return u.jsx("iframe",{className:"tl-embed",draggable:!1,width:R(a),height:R(s),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...n,pointerEvents:r?"all":"none",zIndex:r?"":"-1",boxShadow:_0(o)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${e}.js${t?`?file=${t}`:""}`}><\/script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})}const eX=S.forwardRef(({id:e,name:t,isEditing:r},a)=>{const s=N(),n=S.useCallback(l=>{l.key==="Enter"&&!l.nativeEvent.isComposing&&(qt(l),l.currentTarget.blur(),s.setEditingShape(null))},[s]),o=S.useCallback(l=>{const c=s.getShape(e);if(!c)return;const d=c.props.name,p=l.currentTarget.value.trim();d!==p&&s.updateShapes([{id:e,type:"frame",props:{name:p}}])},[e,s]),i=S.useCallback(l=>{const c=s.getShape(e);if(!c)return;const d=c.props.name,p=l.currentTarget.value;d!==p&&s.updateShapes([{id:e,type:"frame",props:{name:p}}])},[e,s]);return u.jsxs("div",{className:`tl-frame-label ${r?"tl-frame-label__editing":""}`,children:[u.jsx("input",{className:"tl-frame-name-input",ref:a,style:{display:r?void 0:"none"},value:t,autoFocus:!0,onKeyDown:n,onBlur:o,onChange:i}),Ik(t,"Frame")+String.fromCharCode(8203)]})}),tX=function({id:t,name:r,width:a,height:s}){const n=N(),o=H("shape rotation",()=>zn(n.getShapePageTransform(t).rotation()),[n,t]),i=gg(t),l=S.useRef(null),c=S.useCallback(y=>{const m=Er(y);n.getEditingShapeId()!==t&&(n.dispatch({type:"pointer",name:"pointer_down",target:"shape",shape:n.getShape(t),...m}),y.preventDefault())},[n,t]);S.useEffect(()=>{const y=l.current;y&&i&&(y.focus(),y.select())},[l,i]);const p=((o+Math.PI/4)*(2/Math.PI)+4)%4,f=["top","left","bottom","right"][Math.floor(p)];let h;switch(f){case"top":h="";break;case"right":h=`translate(${R(a)}px, 0px) rotate(90deg)`;break;case"bottom":h=`translate(${R(a)}px, ${R(s)}px) rotate(180deg)`;break;case"left":h=`translate(0px, ${R(s)}px) rotate(270deg)`;break}return u.jsx("div",{className:"tl-frame-heading",style:{overflow:i?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${Math.ceil(f==="top"||f==="bottom"?a:s)}px + var(--space-5))`,bottom:"100%",transform:`${h} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`},onPointerDown:c,children:u.jsx("div",{className:"tl-frame-heading-hit-area",children:u.jsx(eX,{ref:l,id:t,name:r,isEditing:i})})})};function Ik(e,t){return e.match(/^\s*$/)?t:e}class rf extends Bl{constructor(){super(...arguments);g(this,"canEdit",()=>!0);g(this,"canReceiveNewChildrenOfType",(r,a)=>!r.isLocked);g(this,"canDropShapes",(r,a)=>!r.isLocked);g(this,"onDragShapesOver",(r,a)=>{a.every(s=>s.parentId===r.id)||this.editor.reparentShapes(a,r.id)});g(this,"onDragShapesOut",(r,a)=>{const s=this.editor.getShape(r.parentId);s&&this.editor.isShapeOfType(s,"group")?this.editor.reparentShapes(a,s.id):this.editor.reparentShapes(a,this.editor.getCurrentPageId())});g(this,"onResize",(r,a)=>rk(r,a))}getDefaultProps(){return{w:160*2,h:90*2,name:""}}getGeometry(r){return new Ys({width:r.props.w,height:r.props.h,isFilled:!1})}component(r){const a=this.editor.getShapeGeometry(r).bounds,s=Fa(),n=H("is creating this shape",()=>{const o=this.editor.getStateDescendant("select.resizing");if(!o||!o.getIsActive())return!1;const i=o==null?void 0:o.info;return i?i.isCreating&&this.editor.getOnlySelectedShapeId()===r.id:!1},[r.id]);return u.jsxs(u.Fragment,{children:[u.jsx(Hn,{children:u.jsx("rect",{className:le("tl-frame__body",{"tl-frame__creating":n}),width:a.width,height:a.height,fill:s.solid,stroke:s.text})}),n?null:u.jsx(tX,{id:r.id,name:r.props.name,width:a.width,height:a.height})]})}toSvg(r,a){const s=an({isDarkMode:a.isDarkMode}),i=((zn(this.editor.getShapePageTransform(r.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4,l=Math.floor(i);let c;switch(l){case 0:c="";break;case 3:c=`translate(${R(r.props.w)}, 0) rotate(90)`;break;case 2:c=`translate(${R(r.props.w)}, ${R(r.props.h)}) rotate(180)`;break;case 1:c=`translate(0, ${R(r.props.h)}) rotate(270)`;break;default:throw Error("labelSide out of bounds")}const d={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:r.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},p=this.editor.textMeasure.measureTextSpans(Ik(r.props.name,"Frame")+String.fromCharCode(8203),d),f=p[0],h=Lt(p),y=h.box.w+h.box.x-f.box.x,m=Bb(this.editor,p,{offsetY:-d.height-2,...d});return u.jsxs(u.Fragment,{children:[u.jsx("rect",{width:r.props.w,height:r.props.h,fill:s.solid,stroke:s.black.solid,strokeWidth:1,rx:1,ry:1}),u.jsxs("g",{transform:c,children:[u.jsx("rect",{x:-8,y:-d.height-4,width:y+16,height:d.height,fill:s.background,rx:4,ry:4}),m]})]})}indicator(r){const a=this.editor.getShapeGeometry(r).bounds;return u.jsx("rect",{width:R(a.width),height:R(a.height),className:"tl-frame-indicator"})}providesBackgroundForChildren(){return!0}}g(rf,"type","frame"),g(rf,"props",Dx),g(rf,"migrations",Tx);function S9(e,t){return e>t?(Ce*(t/2)+(e-t))*2:(Ce*(e/2)+(t-e))*2}function Ak(e,t){return w0(e,t).map((r,a)=>r.getSvgPathData(a===0)).join(" ")+" Z"}function rX(e,t,r,a){const s=e/4,n=t/4,o=Ha(a),i=r*.75,l=_=>_.addXY(o()*i,o()*i),c=new v(e/2,t),d=new v(0,n*1.2),p=new v(e/2,n*.9),f=new v(e,n*1.2),h=l(new v(e/2,t)),y=l(new v(0,n*1.2)),m=l(new v(e/2,n*.9)),w=l(new v(e,n*1.2));return[new Zt({start:c,cp1:new v(s*1.5,n*3),cp2:new v(0,n*2.5),end:d}),new Zt({start:d,cp1:new v(0,-n*.32),cp2:new v(s*1.85,-n*.32),end:p}),new Zt({start:p,cp1:new v(s*2.15,-n*.32),cp2:new v(e,-n*.32),end:f}),new Zt({start:f,cp1:new v(e,n*2.5),cp2:new v(s*2.5,n*3),end:h}),new Zt({start:h,cp1:new v(s*1.5,n*3),cp2:new v(0,n*2.5),end:y}),new Zt({start:y,cp1:new v(0,-n*.32),cp2:new v(s*1.85,-n*.32),end:m}),new Zt({start:m,cp1:new v(s*2.15,-n*.32),cp2:new v(e,-n*.32),end:w}),new Zt({start:w,cp1:new v(e,n*2.5),cp2:new v(s*2.5,n*3),end:c})].map((_,x)=>_.getSvgPathData(x===0)).join(" ")+" Z"}function w0(e,t){const r=e/4,a=t/4;return[new Zt({start:new v(e/2,t),cp1:new v(r*1.5,a*3),cp2:new v(0,a*2.5),end:new v(0,a*1.2)}),new Zt({start:new v(0,a*1.2),cp1:new v(0,-a*.32),cp2:new v(r*1.85,-a*.32),end:new v(e/2,a*.9)}),new Zt({start:new v(e/2,a*.9),cp1:new v(r*2.15,-a*.32),cp2:new v(e,-a*.32),end:new v(e,a*1.2)}),new Zt({start:new v(e,a*1.2),cp1:new v(e,a*2.5),cp2:new v(r*2.5,a*3),end:new v(e/2,t)})]}function aX(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function sX(e,t,r,a){const s=Ha(e),n=t/2,o=r/2,i=Jx(n,o),l=[],c=Be*s(),d=Be+Ge/2+Math.abs(s())*Ge,p=Math.max(16,i/10);for(let f=0;f<p;f++){const h=f/(p-1),y=c+h*d,m=Math.cos(y),w=Math.sin(y);l.push(new v(n*m+t*.5+.05*s(),o*w+r/2+.05*s(),Math.min(1,.5+Math.abs(.5-(s()>0?ar.easeInOutSine(h):ar.easeInExpo(h)))/2)))}return bs(l,aX(a))}function nX(e,t,r,a){return $o(sX(e,t,r,a))}function Ob(e){let t="M";const r=e.length;let a,s,n;for(let o=0,i=r;o<i;o+=3)a=e[o],s=e[o+1],n=e[o+2],t+=`${Se(a)}L${Se(s)}Q${Se(n)}`;return t+=`${Se(e[0])}`,t}function zb(e,t,r,a,s){const n=[],o=Ha(e);let i=t[0],l;const c=t.length;for(let d=0,p=c*s;d<p;d++){l=v.AddXY(t[(d+1)%c],o()*r,o()*r);const f=v.Sub(l,i),h=v.Len(f),y=v.Div(f,h).mul(Math.min(h/4,a));n.push(v.Add(i,y),v.Add(l,y.neg()),l),i=l}return n}function oX(e,t,r){const a=Math.min(e,t)/2,s=Math.max(e,t)-a*2,o=(Math.PI*(a*2)+2*s)/r,i=e>t?[{type:"straight",start:new v(a,0),delta:new v(1,0)},{type:"arc",center:new v(e-a,a),startAngle:-Ce/2},{type:"straight",start:new v(e-a,t),delta:new v(-1,0)},{type:"arc",center:new v(a,a),startAngle:Ce/2}]:[{type:"straight",start:new v(e,a),delta:new v(0,1)},{type:"arc",center:new v(a,t-a),startAngle:0},{type:"straight",start:new v(0,t-a),delta:new v(0,-1)},{type:"arc",center:new v(a,a),startAngle:Ce}];let l=0;const c=[];for(let d=0;d<r;d++){const p=i[0];p.type==="straight"?c.push(v.Add(p.start,v.Mul(p.delta,l))):c.push(zo(p.center,a,p.startAngle+l/a)),l+=o;let f=p.type==="straight"?s:Ce*a;for(;l>f;)l-=f,i.push(i.shift()),f=i[0].type==="straight"?s:Ce*a}return c}const iX={s:50,m:70,l:100,xl:130},lX=.2;function _g(e,t,r,a){const s=Ha(r),n=S9(e,t),o=Math.max(Math.ceil(n/iX[a]),6,Math.ceil(n/Math.min(e,t))),i=n/o*lX,l=Math.max(e-i*2,1),c=Math.max(t-i*2,1),p=S9(l,c)/o,f=(e-l)/2,h=(t-c)/2,y=oX(l,c,o).map(x=>x.addXY(f,h)),m=e<20?0:i*.3,w=t<20?0:i*.3,b=y.slice(0);for(let x=0;x<Math.floor(o/2);x++)b[x]=v.AddXY(b[x],s()*m,s()*w),b[o-x-1]=v.AddXY(b[o-x-1],s()*m,s()*w);const _=[];for(let x=0;x<b.length;x++){const C=x===b.length-1?0:x+1,k=b[x],F=b[C],P=y[x],I=y[C],j=v.Dist(P,I),A=p-j,z=v.Dist(k,F)/j,T=(Math.max(f,h)+A)*z,M=v.Lrp(P,I,.5).add(v.Sub(I,P).uni().per().mul(T));M.x<0?M.x=0:M.x>e&&(M.x=e),M.y<0?M.y=0:M.y>t&&(M.y=t);const L=U_(k,F,M),G=v.Dist(L||v.Average([k,F]),k);_.push({leftPoint:k,rightPoint:F,arcPoint:M,center:L,radius:G})}return _}function cX(e,t,r,a){const s=[],n=_g(e,t,r,a);for(const{center:o,radius:i,leftPoint:l,rightPoint:c}of n)s.push(...c$(l,c,o,i,10));return s}function Nb(e,t,r,a){const s=_g(e,t,r,a);let n=`M${s[0].leftPoint.toFixed()}`;for(const{leftPoint:o,rightPoint:i,radius:l,center:c}of s){if(c===null){n+=` L${i.toFixed()}`;continue}const d=v.Clockwise(o,i,c)?"0":"1";n+=` A${R(l)},${R(l)} 0 ${d},1 ${i.toFixed()}`}return n+=" Z",n}const dX={s:.5,m:.7,l:.9,xl:1.6};function uX(e,t,r,a){const s=Ha(r),n=dX[a],o=_g(e,t,r,a),c=o.reduce((h,y)=>h+v.Dist2(y.leftPoint,y.rightPoint),0)/o.length>(n*15)**2?h=>h.addXY(s()*n*2,s()*n*2):h=>h;let d=`M${o[0].leftPoint.toFixed()}`,p=c(o[0].leftPoint),f=`M${p.toFixed()}`;for(const{leftPoint:h,center:y,rightPoint:m,radius:w,arcPoint:b}of o){if(y===null){d+=` L${m.toFixed()}`;const P=c(m);f+=` L${P.toFixed()}`,p=P;continue}const _=v.Clockwise(h,m,y)?"0":"1";d+=` A${R(w)},${R(w)} 0 ${_},1 ${m.toFixed()}`;const x=c(m),C=c(b),k=U_(p,x,C);if(!Number.isFinite(k.x)||!Number.isFinite(k.y)){f+=` L${x.toFixed()}`,p=x;continue}const F=Math.abs(v.Dist(k,p));f+=` A${R(F)},${R(F)} 0 ${_},1 ${x.toFixed()}`,p=x}return d+f+" Z"}function qb(e,t){switch(e.geo){case"x-box":return pX(e.w,e.h,t,e.dash);case"check-box":return fX(e.w,e.h);default:return}}function pX(e,t,r,a){const s=a==="draw"?.62:0;if(a==="dashed")return[[new v(0,0),new v(e/2,t/2)],[new v(e,t),new v(e/2,t/2)],[new v(0,t),new v(e/2,t/2)],[new v(e,0),new v(e/2,t/2)]];const n=i=>Math.max(0,Math.min(e,i)),o=i=>Math.max(0,Math.min(t,i));return[[new v(n(r*s),o(r*s)),new v(n(e-r*s),o(t-r*s))],[new v(n(r*s),o(t-r*s)),new v(n(e-r*s),o(r*s))]]}function fX(e,t){const r=Math.min(e,t)*.82,a=(e-r)/2,s=(t-r)/2,n=i=>Math.max(0,Math.min(e,i)),o=i=>Math.max(0,Math.min(t,i));return[[new v(n(a+r*.25),o(s+r*.52)),new v(n(a+r*.45),o(s+r*.82))],[new v(n(a+r*.45),o(s+r*.82)),new v(n(a+r*.82),o(s+r*.22))]]}function k9({shape:e}){const t=N(),r=Fa(),{id:a,props:s}=e,{w:n,color:o,fill:i,dash:l,growY:c,size:d}=s,p=At[d],f=s.h+c;switch(s.geo){case"cloud":if(l==="solid"){const h=Nb(n,f,a,d);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:h,color:o,fill:i}),u.jsx("path",{d:h,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}else if(l==="draw"){const h=uX(n,f,a,d);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:h,color:o,fill:i}),u.jsx("path",{d:h,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}else{const h=Nb(n,f,a,d),y=_g(n,f,a,d);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:h,color:o,fill:i}),u.jsx("g",{strokeWidth:p,stroke:r[o].solid,fill:"none",pointerEvents:"all",children:y.map(({leftPoint:m,rightPoint:w,center:b,radius:_},x)=>{const C=b?_*zn(zn(v.Angle(b,w))-zn(v.Angle(b,m))):v.Dist(m,w),{strokeDasharray:k,strokeDashoffset:F}=ts(C,p,{style:l,start:"outset",end:"outset"});return u.jsx("path",{d:b?`M${m.x},${m.y}A${_},${_},0,0,1,${w.x},${w.y}`:`M${m.x},${m.y}L${w.x},${w.y}`,strokeDasharray:k,strokeDashoffset:F},x)})})]})}case"ellipse":{const h=t.getShapeGeometry(e),y=h.getSvgPathData(!0);if(l==="dashed"||l==="dotted"){const m=h.length,{strokeDasharray:w,strokeDashoffset:b}=ts(m<64?m*2:m,p,{style:l,snap:4,closed:!0});return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:y,color:o,fill:i}),u.jsx("path",{d:y,strokeWidth:p,fill:"none",stroke:r[o].solid,strokeDasharray:w,strokeDashoffset:b})]})}else{const w=t.getShapeGeometry(e).getSvgPathData(!0);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:w,color:o,fill:i}),u.jsx("path",{d:w,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}}case"oval":{const h=t.getShapeGeometry(e),y=h.getSvgPathData(!0);if(l==="dashed"||l==="dotted"){const m=h.getLength(),{strokeDasharray:w,strokeDashoffset:b}=ts(m<64?m*2:m,p,{style:l,snap:4,start:"outset",end:"outset",closed:!0});return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:y,color:o,fill:i}),u.jsx("path",{d:y,strokeWidth:p,fill:"none",stroke:r[o].solid,strokeDasharray:w,strokeDashoffset:b})]})}else return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:y,color:o,fill:i}),u.jsx("path",{d:y,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}case"heart":if(l==="dashed"||l==="dotted"){const h=Ak(n,f),y=w0(n,f);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:h,color:o,fill:i}),y.map((m,w)=>{const{strokeDasharray:b,strokeDashoffset:_}=ts(m.length,p,{style:l,snap:1,start:"outset",end:"outset",closed:!0});return u.jsx("path",{d:m.getSvgPathData(),strokeWidth:p,fill:"none",stroke:r[o].solid,strokeDasharray:b,strokeDashoffset:_,pointerEvents:"all"},`curve_${w}`)})]})}else{const h=rX(n,f,p,e.id);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:h,color:o,fill:i,theme:r}),u.jsx("path",{d:h,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}default:{const h=t.getShapeGeometry(e),y=h instanceof $a?h.children[0].vertices:h.vertices,m=qb(e.props,p);if(l==="solid"){let w="M"+y[0]+"L"+y.slice(1)+"Z";if(m)for(const[b,_]of m)w+=`M${b.x},${b.y}L${_.x},${_.y}`;return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:w,color:o,fill:i}),u.jsx("path",{d:w,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}else if(l==="dashed"||l==="dotted"){const w="M"+y[0]+"L"+y.slice(1)+"Z";return u.jsxs(u.Fragment,{children:[u.jsx(ft,{theme:r,d:w,fill:i,color:o}),u.jsxs("g",{strokeWidth:p,stroke:r[o].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(y.length)).map((b,_)=>{const x=v.ToFixed(y[_]),C=v.ToFixed(y[(_+1)%y.length]),k=v.Dist(x,C),{strokeDasharray:F,strokeDashoffset:P}=ts(k,p,{style:l,start:"outset",end:"outset"});return u.jsx("line",{x1:x.x,y1:x.y,x2:C.x,y2:C.y,strokeDasharray:F,strokeDashoffset:P},_)}),m&&m.map(([b,_],x)=>{const C=v.Dist(b,_),{strokeDasharray:k,strokeDashoffset:F}=ts(C,p,{style:l,start:"skip",end:"skip",snap:l==="dotted"?4:void 0});return u.jsx("path",{d:`M${b.x},${b.y}L${_.x},${_.y}`,stroke:r[o].solid,strokeWidth:p,fill:"none",strokeDasharray:k,strokeDashoffset:F},`line_fg_${x}`)})]})]})}else if(l==="draw"){const w=zb(a,y,p/3,p*2,2);let b=Ob(w);if(m)for(const[C,k]of m)b+=`M${C.toFixed()}L${k.toFixed()}`;const _=zb(a,y,0,p*2,1),x=Ob(_);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:x,fill:i,color:o,theme:r}),u.jsx("path",{d:b,stroke:r[o].solid,strokeWidth:p,fill:"none"})]})}}}}const pa=17*3;class af extends Bl{constructor(){super(...arguments);g(this,"canEdit",()=>!0);g(this,"onEditEnd",r=>{const{id:a,type:s,props:{text:n}}=r;n.trimEnd()!==r.props.text&&this.editor.updateShapes([{id:a,type:s,props:{text:n.trimEnd()}}])});g(this,"onResize",(r,{handle:a,newPoint:s,scaleX:n,scaleY:o,initialShape:i})=>{let l=i.props.w*n,c=(i.props.h+i.props.growY)*o,d=0,p=0;if(r.props.text.trim()){let m=Math.max(Math.abs(l),pa),w=Math.max(Math.abs(c),pa);m<pa&&w===pa&&(m=pa),m===pa&&w<pa&&(w=pa);const b=Ju(this.editor,{...r,props:{...r.props,w:m,h:w}}),_=Math.max(Math.abs(l),b.w)*Math.sign(l),x=Math.max(Math.abs(c),b.h)*Math.sign(c);d=Math.abs(_)-Math.abs(l),p=Math.abs(x)-Math.abs(c),l=_,c=x}const f=new v(0,0);n<0&&(f.x+=l),(a==="left"||a==="top_left"||a==="bottom_left")&&(f.x+=n<0?d:-d),o<0&&(f.y+=c),(a==="top"||a==="top_left"||a==="top_right")&&(f.y+=o<0?p:-p);const{x:h,y}=f.rot(r.rotation).add(s);return{x:h,y,props:{w:Math.max(Math.abs(l),1),h:Math.max(Math.abs(c),1),growY:0}}});g(this,"onBeforeCreate",r=>{if(!r.props.text)return r.props.growY?{...r,props:{...r.props,growY:0}}:void 0;const a=r.props.h,s=Ju(this.editor,r).h;let n=null;if(s>a?n=s-a:r.props.growY&&(n=0),n!==null)return{...r,props:{...r.props,growY:n}}});g(this,"onBeforeUpdate",(r,a)=>{const s=r.props.text,n=a.props.text;if(s===n&&r.props.font===a.props.font&&r.props.size===a.props.size)return;if(s&&!n)return{...a,props:{...a.props,growY:0}};const o=r.props.w,i=r.props.h,l=Ju(this.editor,a),c=l.w,d=l.h;if(!s&&n&&n.length===1){let f=Math.max(o,c),h=Math.max(i,d);return r.props.w<pa&&r.props.h<pa&&(f=Math.max(f,pa),h=Math.max(h,pa),f=Math.max(f,h),h=Math.max(f,h)),{...a,props:{...a.props,w:f,h,growY:0}}}let p=null;if(d>i?p=d-i:r.props.growY&&(p=0),p!==null)return{...a,props:{...a.props,growY:p,w:Math.max(a.props.w,c)}};if(c>r.props.w)return{...a,props:{...a.props,w:c}}});g(this,"onDoubleClick",r=>{if(this.editor.inputs.altKey)switch(r.props.geo){case"rectangle":return{...r,props:{geo:"check-box"}};case"check-box":return{...r,props:{geo:"rectangle"}}}})}getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}getGeometry(r){const a=Math.max(1,r.props.w),s=Math.max(1,r.props.h+r.props.growY),n=a/2,o=s/2,i=At[r.props.size],l=r.props.fill!=="none";let c;switch(r.props.geo){case"cloud":{c=new _t({points:cX(a,s,r.id,r.props.size),isFilled:l});break}case"triangle":{c=new _t({points:[new v(n,0),new v(a,s),new v(0,s)],isFilled:l});break}case"diamond":{c=new _t({points:[new v(n,0),new v(a,o),new v(n,s),new v(0,o)],isFilled:l});break}case"pentagon":{c=new _t({points:Xm(a,s,5),isFilled:l});break}case"hexagon":{c=new _t({points:Xm(a,s,6),isFilled:l});break}case"octagon":{c=new _t({points:Xm(a,s,8),isFilled:l});break}case"ellipse":{c=new YK({width:a,height:s,isFilled:l});break}case"oval":{c=new XK({width:a,height:s,isFilled:l});break}case"star":{const _=Be/5/2,x=Math.floor(5/4)*2,C=5*2-x,k=0,F=Math.floor(5/2)*2,P=Math.cos(-Ge+x*_)*a/2,I=Math.cos(-Ge+C*_)*a/2,j=Math.sin(-Ge+k*_)*s/2,A=Math.sin(-Ge+F*_)*s/2,D=a-Math.abs(P-I),z=s-Math.abs(A-j),T=a/2+I-(a/2-P),M=s/2+j-(s/2-A),L=1,G=(a-T)/2,W=(s-M)/2,O=(a+D)/2,$=(s+z)/2,U=O*L/2,X=$*L/2;c=new _t({points:Array.from(Array(5*2)).map((ne,Ae)=>{const je=-Ge+Ae*_;return new v(G+(Ae%2?U:O)*Math.cos(je),W+(Ae%2?X:$)*Math.sin(je))}),isFilled:l});break}case"rhombus":{const b=Math.min(a*.38,s*.38);c=new _t({points:[new v(b,0),new v(a,0),new v(a-b,s),new v(0,s)],isFilled:l});break}case"rhombus-2":{const b=Math.min(a*.38,s*.38);c=new _t({points:[new v(0,0),new v(a-b,0),new v(a,s),new v(b,s)],isFilled:l});break}case"trapezoid":{const b=Math.min(a*.38,s*.38);c=new _t({points:[new v(b,0),new v(a-b,0),new v(a,s),new v(0,s)],isFilled:l});break}case"arrow-right":{const b=Math.min(a,s)*.38,_=s*.16;c=new _t({points:[new v(0,_),new v(a-b,_),new v(a-b,0),new v(a,s/2),new v(a-b,s),new v(a-b,s-_),new v(0,s-_)],isFilled:l});break}case"arrow-left":{const b=Math.min(a,s)*.38,_=s*.16;c=new _t({points:[new v(b,0),new v(b,_),new v(a,_),new v(a,s-_),new v(b,s-_),new v(b,s),new v(0,s/2)],isFilled:l});break}case"arrow-up":{const b=a*.16,_=Math.min(a,s)*.38;c=new _t({points:[new v(a/2,0),new v(a,_),new v(a-b,_),new v(a-b,s),new v(b,s),new v(b,_),new v(0,_)],isFilled:l});break}case"arrow-down":{const b=a*.16,_=Math.min(a,s)*.38;c=new _t({points:[new v(b,0),new v(a-b,0),new v(a-b,s-_),new v(a,s-_),new v(a/2,s),new v(0,s-_),new v(b,s-_)],isFilled:l});break}case"check-box":case"x-box":case"rectangle":{c=new Ys({width:a,height:s,isFilled:l});break}case"heart":{const _=w0(a,s).reduce((x,C)=>(x.push(...C.vertices),x),[]);c=new _t({points:_,isFilled:l});break}default:tr(r.props.geo)}const d=Ju(this.editor,r),p=Math.min(100,a/2),f=Math.min(a,Math.max(d.w,Math.min(p,Math.max(1,a-8)))),h=Math.min(qs[r.props.size]*$t.lineHeight+Ta*2,s/2),y=Math.min(s,Math.max(d.h,Math.min(h,Math.max(1,a-8)))),m=qb(r.props,i),w=m?m.map(b=>new Ml({points:b})):[];return new $a({children:[c,new Ys({x:r.props.align==="start"?0:r.props.align==="end"?a-f:(a-f)/2,y:r.props.verticalAlign==="start"?0:r.props.verticalAlign==="end"?s-y:(s-y)/2,width:f,height:y,isFilled:!0,isLabel:!0}),...w]})}getHandleSnapGeometry(r){const a=this.getGeometry(r),s=a.children[0];switch(r.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:s,points:[...s.getVertices(),a.bounds.center]};case"cloud":case"ellipse":case"heart":case"oval":return{outline:s,points:[a.bounds.center]};default:tr(r.props.geo)}}component(r){const{id:a,type:s,props:n}=r,{fill:o,font:i,align:l,verticalAlign:c,size:d,text:p}=n,f=r.id===this.editor.getOnlySelectedShapeId(),h=Fa(),m=this.editor.getEditingShapeId()!==null||r.props.text;return u.jsxs(u.Fragment,{children:[u.jsx(Hn,{id:a,children:u.jsx(k9,{shape:r})}),m&&u.jsx(qo,{style:{overflow:"hidden",width:r.props.w,height:r.props.h+n.growY},children:u.jsx(yg,{id:a,type:s,font:i,fontSize:qs[d],lineHeight:$t.lineHeight,fill:o,align:l,verticalAlign:c,text:p,isSelected:f,labelColor:h[n.labelColor].solid,wrap:!0})}),r.props.url&&u.jsx(bl,{url:r.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(r){const{id:a,props:s}=r,{w:n,size:o}=s,i=s.h+s.growY,l=At[o],c=this.editor.getShapeGeometry(r);switch(s.geo){case"ellipse":return s.dash==="draw"?u.jsx("path",{d:nX(a,n,i,l)}):u.jsx("path",{d:c.getSvgPathData(!0)});case"heart":return u.jsx("path",{d:Ak(n,i)});case"oval":return u.jsx("path",{d:c.getSvgPathData(!0)});case"cloud":return u.jsx("path",{d:Nb(n,i,a,o)});default:{const d=this.editor.getShapeGeometry(r),p=d instanceof $a?d.children[0].vertices:d.vertices;let f;if(s.dash==="draw"){const y=zb(a,p,0,l*2,1);f=Ob(y)}else f="M"+p[0]+"L"+p.slice(1)+"Z";const h=qb(r.props,l);if(h)for(const[y,m]of h)f+=`M${y.x},${y.y}L${m.x},${m.y}`;return u.jsx("path",{d:f})}}}toSvg(r,a){const{props:s}=r;a.addExportDef(m0(r.props.fill));let n;if(s.text){a.addExportDef(ml(r.props.font));const o=an(a),i=this.editor.getShapeGeometry(r).bounds;n=u.jsx(bg,{fontSize:qs[s.size],font:s.font,align:s.align,verticalAlign:s.verticalAlign,text:s.text,labelColor:o[s.labelColor].solid,bounds:i})}return u.jsxs(u.Fragment,{children:[u.jsx(k9,{shape:r}),n]})}getCanvasSvgDefs(){return[b0()]}}g(af,"type","geo"),g(af,"props",Mx),g(af,"migrations",Bx);function Ju(e,t){const r=t.props.text;if(!r)return{w:0,h:0};const a=e.textMeasure.measureText("w",{...$t,fontFamily:fs[t.props.font],fontSize:qs[t.props.size],maxWidth:100}),s={s:2,m:3.5,l:5,xl:10},n=e.textMeasure.measureText(r,{...$t,fontFamily:fs[t.props.font],fontSize:qs[t.props.size],minWidth:a.w,maxWidth:Math.max(0,Math.ceil(a.w+s[t.props.size]),Math.ceil(t.props.w-Ta*2))});return{w:n.w+Ta*2,h:n.h+Ta*2}}function hX(){const[e,t]=S.useState(!1);return S.useEffect(()=>{const a=CSS.supports("color","color(display-p3 1 1 1)"),s=matchMedia("(color-gamut: p3)");t(a&&s.matches);const n=()=>t(a&&s.matches);return s.addEventListener("change",n),()=>s.removeEventListener("change",n)},[]),H(vt.forceSrgb)||!e?"srgb":"p3"}const F9=.35,C9=.82;class sf extends za{constructor(){super(...arguments);g(this,"hideResizeHandles",r=>ep(r));g(this,"hideRotateHandle",r=>ep(r));g(this,"hideSelectionBoundsFg",r=>ep(r));g(this,"onResize",(r,a)=>{const{scaleX:s,scaleY:n}=a,o=[];for(const i of r.props.segments)o.push({...i,points:i.points.map(({x:l,y:c,z:d})=>({x:s*l,y:n*c,z:d}))});return{props:{segments:o}}})}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}getGeometry(r){const a=di(r);if(ep(r))return new d0({x:-a/2,y:-a/2,radius:a/2,isFilled:!0});const{strokePoints:s,sw:n}=jk(r,a,!0),o=Lb({strokeWidth:n,showAsComplete:!0});return mg(s,o),new _t({points:p0(s,o),isFilled:!0})}component(r){return u.jsx(Hn,{id:r.id,style:{opacity:F9},children:u.jsx(Qu,{strokeWidth:di(r),shape:r})})}backgroundComponent(r){return u.jsx(Hn,{id:r.id,style:{opacity:C9},children:u.jsx(Qu,{strokeWidth:di(r),shape:r})})}indicator(r){var p;const a=bd(),s=di(r),n=yd(r.props.segments);let o=s;!a&&!r.props.isPen&&n.length===1&&(o+=Ha(r.id)()*(s/6));const i=r.props.isComplete||((p=Lt(r.props.segments))==null?void 0:p.type)==="straight",l=Lb({strokeWidth:s,showAsComplete:i}),c=bs(n,l);let d;return c.length<2?d=mX(n[0],o):d=$o(c,!1),u.jsx("path",{d})}toSvg(r){return u.jsx(Qu,{strokeWidth:di(r),shape:r,opacity:F9})}toBackgroundSvg(r){return u.jsx(Qu,{strokeWidth:di(r),shape:r,opacity:C9})}}g(sf,"type","highlight"),g(sf,"props",Ox),g(sf,"migrations",zx);function gX(e){return`M ${e.x} ${e.y} m -${.1}, 0 a ${.1},${.1} 0 1,0 ${.1*2},0 a ${.1},${.1} 0 1,0 -${.1*2},0`}function mX(e,t){const r=t/2;return`M ${e.x} ${e.y} m -${r}, 0 a ${r},${r} 0 1,0 ${r*2},0 a ${r},${r} 0 1,0 -${r*2},0`}function jk(e,t,r){var l;const a=yd(e.props.segments),s=e.props.isComplete||((l=Lt(e.props.segments))==null?void 0:l.type)==="straight";let n=t;!r&&!e.props.isPen&&a.length===1&&(n+=Ha(e.id)()*(t/6));const o=Lb({strokeWidth:n,showAsComplete:s});return{strokePoints:bs(a,o),sw:n}}function bX(e,t,r){const{strokePoints:a,sw:s}=jk(e,t,r);return{solidStrokePath:a.length>1?$o(a,!1):gX(e.props.segments[0].points[0]),sw:s}}function Qu({strokeWidth:e,shape:t,opacity:r}){const a=Fa(),s=bd(),{solidStrokePath:n,sw:o}=bX(t,e,s),i=hX(),l=a[t.props.color].highlight[i];return u.jsx("path",{d:n,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:l,strokeWidth:o,opacity:r})}function di(e){return hl[e.props.size]*1.12}function ep(e){return e.props.segments.length===1&&e.props.segments[0].points.length<2}function Ek(){return u.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3,11 L3,3 11,3",strokeWidth:"2"}),u.jsx("path",{d:"M19,27 L27,27 L27,19",strokeWidth:"2"}),u.jsx("path",{d:"M27,3 L3,27",strokeWidth:"2"})]})}function Dk(){const[e,t]=S.useState(!1);return S.useEffect(()=>{const r=window.matchMedia("(prefers-reduced-motion: reduce)"),a=()=>{t(r.matches)};return a(),r.addEventListener("change",a),()=>r.removeEventListener("change",a)},[]),e}async function yX(e){const r=await(await fetch(e,{referrerPolicy:"strict-origin-when-cross-origin"})).blob();return Yi.blobToDataUrl(r)}class nf extends Bl{constructor(){super(...arguments);g(this,"isAspectRatioLocked",()=>!0);g(this,"canCrop",()=>!0);g(this,"onDoubleClick",r=>{const a=r.props.assetId?this.editor.getAsset(r.props.assetId):void 0;!a||!(a.props.src&&this.isAnimated(r))||this.editor.updateShapes([{type:"image",id:r.id,props:{playing:!r.props.playing}}])});g(this,"onDoubleClickEdge",r=>{const a=r.props;if(!a||this.editor.getCroppingShapeId()!==r.id)return;const s=mt(a.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},n=1/(s.bottomRight.x-s.topLeft.x)*r.props.w,o=1/(s.bottomRight.y-s.topLeft.y)*r.props.h,i=new v(s.topLeft.x*n,s.topLeft.y*o).rot(r.rotation),l={id:r.id,type:r.type,x:r.x-i.x,y:r.y-i.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:n,h:o}};this.editor.updateShapes([l])})}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}isAnimated(r){const a=r.props.assetId?this.editor.getAsset(r.props.assetId):void 0;return a?"mimeType"in a.props&&Xr.isAnimatedImageType(a==null?void 0:a.props.mimeType)||"isAnimated"in a.props&&a.props.isAnimated:!1}component(r){var f;const a=this.editor.getCroppingShapeId()===r.id,s=Dk(),[n,o]=S.useState(""),i=r.props.assetId?this.editor.getAsset(r.props.assetId):void 0,l=r.id===this.editor.getOnlySelectedShapeId();if(S.useEffect(()=>{if(i!=null&&i.props.src&&this.isAnimated(r)){let h=!1;const y=i.props.src;if(!y)return;const m=new Image;return m.onload=()=>{if(h)return;const w=document.createElement("canvas");w.width=m.width,w.height=m.height;const b=w.getContext("2d");b&&(b.drawImage(m,0,0),o(w.toDataURL()))},m.crossOrigin="anonymous",m.referrerPolicy="strict-origin-when-cross-origin",m.src=y,()=>{h=!0}}},[s,i==null?void 0:i.props,r]),(i==null?void 0:i.type)==="bookmark")throw Error("Bookmark assets can't be rendered as images");const c=l&&a&&this.editor.isIn("select.crop"),d=s&&(((f=i==null?void 0:i.props.mimeType)==null?void 0:f.includes("video"))||this.isAnimated(r)),p=P9(r);return i!=null&&i.props.src?u.jsxs(u.Fragment,{children:[c&&u.jsx("div",{style:p,children:u.jsx("div",{className:"tl-image",style:{opacity:.1,backgroundImage:`url(${!r.props.playing||d?n:i.props.src})`},draggable:!1})}),u.jsxs(qo,{id:r.id,style:{overflow:"hidden",width:r.props.w,height:r.props.h},children:[u.jsxs("div",{className:"tl-image-container",style:p,children:[u.jsx("div",{className:"tl-image",style:{backgroundImage:`url(${!r.props.playing||d?n:i.props.src})`},draggable:!1}),this.isAnimated(r)&&!r.props.playing&&u.jsx("div",{className:"tl-image__tg",children:"GIF"})]}),")",r.props.url&&u.jsx(bl,{url:r.props.url,zoomLevel:this.editor.getZoomLevel()})]})]}):u.jsxs(qo,{id:r.id,style:{overflow:"hidden",width:r.props.w,height:r.props.h,color:"var(--color-text-3)",backgroundColor:i?"transparent":"var(--color-low)",border:i?"none":"1px solid var(--color-low-border)"},children:[u.jsx("div",{className:"tl-image-container",style:p,children:i?null:u.jsx(Ek,{})}),")","url"in r.props&&r.props.url&&u.jsx(bl,{url:r.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(r){return this.editor.getCroppingShapeId()===r.id?null:u.jsx("rect",{width:R(r.props.w),height:R(r.props.h)})}async toSvg(r){const a=r.props.assetId?this.editor.getAsset(r.props.assetId):null;if(!a)return null;let s=(a==null?void 0:a.props.src)||"";(s.startsWith("http")||s.startsWith("/")||s.startsWith("./"))&&(s=await yX(s)||"");const n=P9(r),o=r.props.crop;if(n.transform&&o){const{transform:i,width:l,height:c}=n,d=(o.bottomRight.x-o.topLeft.x)*l,p=(o.bottomRight.y-o.topLeft.y)*c,f=[new v(0,0),new v(d,0),new v(d,p),new v(0,p)],h=`cropClipPath_${r.id.replace(":","_")}`;return u.jsxs(u.Fragment,{children:[u.jsx("defs",{children:u.jsx("clipPath",{id:h,children:u.jsx("polygon",{points:f.map(y=>`${y.x},${y.y}`).join(" ")})})}),u.jsx("g",{clipPath:`url(#${h})`,children:u.jsx("image",{href:s,width:l,height:c,style:{transform:i}})})]})}else return u.jsx("image",{href:s,width:r.props.w,height:r.props.h})}}g(nf,"type","image"),g(nf,"props",Nx),g(nf,"migrations",qx);function P9(e){const t=e.props.crop,r=t==null?void 0:t.topLeft;if(!r)return{width:e.props.w,height:e.props.h};const a=1/(t.bottomRight.x-t.topLeft.x)*e.props.w,s=1/(t.bottomRight.y-t.topLeft.y)*e.props.h,n=-r.x*a,o=-r.y*s;return{transform:`translate(${n}px, ${o}px)`,width:a,height:s}}function Tk(e){return{size:e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function Mk(e,t,r){const a=t.vertices,s=Tk(r);return bs(a,s)}function _X(e,t,r){const a=Tk(r);return p0(mg(Mk(e,t,r),a),a)}function wX(e,t,r){const a=_X(e,t,r);return X_(a)}function vX(e,t,r){if(e.props.dash==="draw"){const a=Mk(e,t,r);return $o(a)}return t.getSvgPathData()}function Bk(e,t,r){let a=`M ${Se(t[0])}L`,s=`M ${Se(t[0])}L`;const n=r/3,o=r*2,i=Ha(e);let l=t[0],c,d=t[0],p;const f=t.length;for(let h=0,y=f-1;h<y;h++){c=t[h+1],p=v.AddXY(t[h+1],i()*n,i()*n);const m=v.Sub(c,l),w=v.Len(m),b=v.Div(m,w).mul(Math.min(w/4,o)),_=v.Add(l,b),x=v.Add(c,b.neg()),C=v.Sub(p,d),k=v.Len(C),F=v.Div(C,k).mul(Math.min(k/4,o)),P=v.Add(d,F),I=v.Add(p,F.neg());h===y-1?(a+=`${Se(_)}L ${Se(c)}`,s+=`${Se(P)}L ${Se(p)}`):(a+=`${Se(_)}L ${Se(x)}Q ${Se(c)}`,s+=`${Se(P)}L ${Se(I)}Q ${Se(p)}`,l=c,d=p)}return[a,a+s]}const xX=new $n;class of extends za{constructor(){super(...arguments);g(this,"hideResizeHandles",()=>!0);g(this,"hideRotateHandle",()=>!0);g(this,"hideSelectionBoundsFg",()=>!0);g(this,"hideSelectionBoundsBg",()=>!0);g(this,"onResize",(r,a)=>{const{scaleX:s,scaleY:n}=a;return{props:{points:Od(r.props.points,(o,{id:i,index:l,x:c,y:d})=>({id:i,index:l,x:c*s,y:d*n}))}}});g(this,"onHandleDrag",(r,{handle:a})=>{if(a.type==="vertex")return{...r,props:{...r.props,points:{...r.props.points,[a.id]:{id:a.id,index:a.index,x:a.x,y:a.y}}}}})}getDefaultProps(){const[r,a]=ud(2);return{dash:"draw",size:"m",color:"black",spline:"line",points:{[r]:{id:r,index:r,x:0,y:0},[a]:{id:a,index:a,x:.1,y:.1}}}}getGeometry(r){return kc(r)}getHandles(r){return xX.get(r.props,()=>{const a=kc(r),s=$b(r),n=s.map(o=>({...o,id:o.index,type:"vertex",canSnap:!0}));for(let o=0;o<s.length-1;o++){const i=dd(s[o].index,s[o+1].index),c=a.segments[o].midPoint();n.push({id:i,type:"create",index:i,x:c.x,y:c.y,canSnap:!0})}return n.sort(Qt)})}component(r){return u.jsx(Hn,{id:r.id,children:u.jsx(I9,{shape:r})})}indicator(r){const a=At[r.props.size],s=kc(r),{dash:n}=r.props;let o;if(r.props.spline==="line"){const i=s.points;if(n==="solid"||n==="dotted"||n==="dashed")o="M"+i[0]+"L"+i.slice(1);else{const[l]=Bk(r.id,i,a);o=l}}else o=vX(r,s,a);return u.jsx("path",{d:o})}toSvg(r){return u.jsx(I9,{shape:r})}getHandleSnapGeometry(r){const a=$b(r);return{points:a,getSelfSnapPoints:s=>{const n=this.getHandles(r).filter(o=>o.type==="vertex").findIndex(o=>o.id===s.id);return a.filter((o,i)=>Math.abs(i-n)>1).map(v.From)},getSelfSnapOutline:s=>{const n=this.getHandles(r).filter(i=>i.type==="vertex").findIndex(i=>i.id===s.id),o=kc(r).segments.filter((i,l)=>l!==n-1&&l!==n);return o.length?new $a({children:o}):null}}}}g(of,"type","line"),g(of,"props",$x),g(of,"migrations",Ux);function $b(e){return Object.values(e.props.points).sort(Qt)}function kc(e){const t=$b(e).map(v.From);switch(e.props.spline){case"cubic":return new VK({points:t});case"line":return new Ml({points:t})}}function I9({shape:e}){const t=Fa(),r=kc(e),a=At[e.props.size],{dash:s,color:n}=e.props;if(e.props.spline==="line"){if(s==="solid"){const o=r.points,i="M"+o[0]+"L"+o.slice(1);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:i,fill:"none",color:n,theme:t}),u.jsx("path",{d:i,stroke:t[n].solid,strokeWidth:a,fill:"none"})]})}if(s==="dashed"||s==="dotted"){const o=r.points,i="M"+o[0]+"L"+o.slice(1);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:i,fill:"none",color:n,theme:t}),u.jsx("g",{stroke:t[n].solid,strokeWidth:a,children:r.segments.map((l,c)=>{const{strokeDasharray:d,strokeDashoffset:p}=ts(l.length,a,{style:s,start:c>0?"outset":"none",end:c<r.segments.length-1?"outset":"none"});return u.jsx("path",{strokeDasharray:d,strokeDashoffset:p,d:l.getSvgPathData(!0),fill:"none"},c)})})]})}if(s==="draw"){const o=r.points,[i,l]=Bk(e.id,o,a);return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:i,fill:"none",color:n,theme:t}),u.jsx("path",{d:l,stroke:t[n].solid,strokeWidth:a,fill:"none"})]})}}if(e.props.spline==="cubic"){const o=r.getSvgPathData();if(s==="solid")return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:o,fill:"none",color:n,theme:t}),u.jsx("path",{strokeWidth:a,stroke:t[n].solid,fill:"none",d:o})]});if(s==="dashed"||s==="dotted")return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:o,fill:"none",color:n,theme:t}),u.jsx("g",{stroke:t[n].solid,strokeWidth:a,children:r.segments.map((i,l)=>{const{strokeDasharray:c,strokeDashoffset:d}=ts(i.length,a,{style:s,start:l>0?"outset":"none",end:l<r.segments.length-1?"outset":"none"});return u.jsx("path",{strokeDasharray:c,strokeDashoffset:d,d:i.getSvgPathData(),fill:"none"},l)})})]});if(s==="draw")return u.jsxs(u.Fragment,{children:[u.jsx(ft,{d:o,fill:"none",color:n,theme:t}),u.jsx("path",{d:wX(e,r,a),strokeWidth:1,stroke:t[n].solid,fill:t[n].solid})]})}}const Lk=S.createContext(null);function SX({assetUrls:e,children:t}){return S.useEffect(()=>{for(const r of Object.values(e.icons)){const a=new Image;a.referrerPolicy="strict-origin-when-cross-origin",a.src=r,a.decode()}for(const r of Object.values(e.embedIcons)){const a=new Image;a.referrerPolicy="strict-origin-when-cross-origin",a.src=r,a.decode()}},[e]),u.jsx(Lk.Provider,{value:e,children:t})}function v0(){const e=S.useContext(Lk);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}const Ub={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-json.short":"JSON","action.export-all-as-json":"Export as JSON","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.fork-project-on-tldraw":"Fork project on tldraw","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle Select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.upload-failed":"Upload failed","assets.url.failed":"Couldn't load URL preview","color-style.white":"White","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy editor link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy viewer link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to access this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","share-menu.creating-project":"Creating the new project…","share-menu.copied":"Copied link","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},kX=new Set(["ar","fa","he","ur","ku"]),ui={locale:"en",label:"English",messages:Ub,dir:"ltr"};async function FX(e,t){if(!(await fetch(t.translations.en)).ok)return console.warn("No main translations found."),ui;if(e==="en")return ui;const a=fd.find(i=>i.locale===e);if(!a)return console.warn(`No translation found for locale ${e}`),ui;const n=await(await fetch(t.translations[a.locale])).json();if(!n)return console.warn(`No messages found for locale ${e}`),ui;const o=[];for(const i in ui.messages)n[i]||o.push(i);return o.length>0,{locale:e,label:a.label,dir:kX.has(a.locale)?"rtl":"ltr",messages:{...ui.messages,...n}}}const Rk=S.createContext(null);function Ok(){const e=S.useContext(Rk);if(!e)throw new Error("useCurrentTranslation must be used inside of <TldrawUiContextProvider />");return e}const CX=la(function({overrides:t,children:r}){const s=N().user.getLocale(),n=v0(),[o,i]=S.useState(()=>t&&t.en?{locale:"en",label:"English",dir:"ltr",messages:{...Ub,...t.en}}:{locale:"en",label:"English",dir:"ltr",messages:Ub});return S.useEffect(()=>{let l=!1;async function c(){const d=await FX(s,n);d&&!l&&(t&&t[s]?i({...d,messages:{...d.messages,...t[s]}}):i(d))}return c(),()=>{l=!0}},[n,s,t]),u.jsx(Rk.Provider,{value:o,children:r})});function Ie(){const e=Ok();return S.useCallback(function(r){return e.messages[r]??r},[e])}class lf extends za{constructor(){super(...arguments);g(this,"canEdit",()=>!0);g(this,"hideResizeHandles",()=>!0);g(this,"hideSelectionBoundsFg",()=>!1);g(this,"onBeforeCreate",r=>A9(this.editor,r));g(this,"onBeforeUpdate",(r,a)=>{if(!(r.props.text===a.props.text&&r.props.font===a.props.font&&r.props.size===a.props.size))return A9(this.editor,a)});g(this,"onEditEnd",r=>{const{id:a,type:s,props:{text:n}}=r;n.trimEnd()!==r.props.text&&this.editor.updateShapes([{id:a,type:s,props:{text:n.trimEnd()}}])})}getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,fontSizeAdjustment:0,url:""}}getGeometry(r){const a=tp(r),{labelHeight:s,labelWidth:n}=zk(this.editor,r);return new $a({children:[new Ys({width:Pe,height:a,isFilled:!0}),new Ys({x:r.props.align==="start"?0:r.props.align==="end"?Pe-n:(Pe-n)/2,y:r.props.verticalAlign==="start"?0:r.props.verticalAlign==="end"?a-s:(a-s)/2,width:n,height:s,isFilled:!0,isLabel:!0})]})}getHandles(r){const a=this.editor.getZoomLevel(),s=QV/a,n=tp(r),o=this.editor.getInstanceState().isCoarsePointer;return a<.25||o?[]:a<.5?[{id:"bottom",index:"a3",type:"clone",x:Pe/2,y:n+s}]:[{id:"top",index:"a1",type:"clone",x:Pe/2,y:-s},{id:"right",index:"a2",type:"clone",x:Pe+s,y:n/2},{id:"bottom",index:"a3",type:"clone",x:Pe/2,y:n+s},{id:"left",index:"a4",type:"clone",x:-s,y:n/2}]}component(r){const{id:a,type:s,props:{color:n,font:o,size:i,align:l,text:c,verticalAlign:d,fontSizeAdjustment:p}}=r,f=AX(a),h=Fa(),y=tp(r),m=H("shape rotation",()=>{var _;return((_=this.editor.getShapePageTransform(a))==null?void 0:_.rotation())??0},[this.editor]),w=bd(),b=r.id===this.editor.getOnlySelectedShapeId();return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:a,className:"tl-note__container",style:{width:Pe,height:y,backgroundColor:h[n].note.fill,borderBottom:w?"3px solid rgb(15, 23, 31, .2)":"none",boxShadow:w?"none":jX(r.id,m)},children:u.jsx(yg,{id:a,type:s,font:o,fontSize:p||qs[i],lineHeight:$t.lineHeight,align:l,verticalAlign:d,text:c,isNote:!0,isSelected:b,labelColor:h[n].note.text,wrap:!0,onKeyDown:f})}),"url"in r.props&&r.props.url&&u.jsx(bl,{url:r.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(r){return u.jsx("rect",{rx:"1",width:R(Pe),height:R(tp(r))})}toSvg(r,a){a.addExportDef(ml(r.props.font)),r.props.text&&a.addExportDef(ml(r.props.font));const s=an({isDarkMode:a.isDarkMode}),n=this.editor.getShapeGeometry(r).bounds;return u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:5,y:5,rx:1,width:Pe-10,height:n.h,fill:"rgba(0,0,0,.1)"}),u.jsx("rect",{rx:1,width:Pe,height:n.h,fill:s[r.props.color].note.fill}),u.jsx(bg,{fontSize:r.props.fontSizeAdjustment||qs[r.props.size],font:r.props.font,align:r.props.align,verticalAlign:r.props.verticalAlign,text:r.props.text,labelColor:s[r.props.color].note.text,bounds:n,stroke:!1})]})}}g(lf,"type","note"),g(lf,"props",Wx),g(lf,"migrations",Hx);function A9(e,t){const{labelHeight:r,fontSizeAdjustment:a}=zk(e,t),s=Math.max(0,r-Pe);if(s!==t.props.growY||a!==t.props.fontSizeAdjustment)return{...t,props:{...t.props,growY:s,fontSizeAdjustment:a}}}function PX(e,t){const r=t.props.text;if(!r)return{labelHeight:qs[t.props.size]*$t.lineHeight+Ta*2,labelWidth:100,fontSizeAdjustment:0};const a=qs[t.props.size];let s=0,n=0,o=Pe,i=Pe;const l=1;do{s=Math.min(a,a-n);const c=e.textMeasure.measureText(r,{...$t,fontFamily:fs[t.props.font],fontSize:s,maxWidth:Pe-Ta*2-l,disableOverflowWrapBreaking:!0});if(o=c.h+Ta*2,i=c.w+Ta*2,s<=14){const d=e.textMeasure.measureText(r,{...$t,fontFamily:fs[t.props.font],fontSize:s,maxWidth:Pe-Ta*2-l});o=d.h+Ta*2,i=d.w+Ta*2;break}if(c.scrollWidth.toFixed(0)===c.w.toFixed(0))break}while(n++<50);return{labelHeight:o,labelWidth:i,fontSizeAdjustment:s}}const IX=new $n;function zk(e,t){return IX.get(t,()=>PX(e,t))}function AX(e){const t=N(),r=Ok();return S.useCallback(a=>{const s=t.getShape(e);if(!s)return;const n=a.key==="Tab",o=(a.metaKey||a.ctrlKey)&&a.key==="Enter";if(n||o){a.preventDefault();const i=t.getShapePageTransform(e),l=i.rotation(),c=!!(r.dir==="rtl"||dk(s.props.text)),d=Pe+t.options.adjacentShapeMargin+(o&&!a.shiftKey?s.props.growY:0),p=new v(n?a.shiftKey!=c?-1:1:0,o?a.shiftKey?-1:1:0).mul(d).add(g0).rot(l).add(i.point()),f=yk(t,s,p,l);f&&(t.mark("editing adjacent shape"),Sh(t,f,!0))}},[e,t,r.dir])}function tp(e){return Pe+e.props.growY}function jX(e,t){const r=Ha(e),a=Math.abs(r())+.5,s=Math.cos(t);return`0px ${5-a}px 5px -5px rgba(15, 23, 31, .6),
	0px ${(4+a*7)*Math.max(0,s)}px ${6+a*7}px -${4+a*6}px rgba(15, 23, 31, ${(.3+a*.1).toFixed(2)}), 
	0px 48px 10px -10px inset rgba(15, 23, 44, ${((.022+r()*.005)*((1+s)/2)).toFixed(2)})`}function EX(e,{initialBounds:t,scaleX:r,scaleY:a,newPoint:s}){const n=Math.max(.01,Math.min(Math.abs(r),Math.abs(a))),o=new v(0,0);r<0&&(o.x=-(t.width*n)),a<0&&(o.y=-(t.height*n));const{x:i,y:l}=v.Add(s,o.rot(e.rotation));return{x:i,y:l,props:{scale:n*e.props.scale}}}const DX=new $n;class cf extends za{constructor(){super(...arguments);g(this,"canEdit",()=>!0);g(this,"isAspectRatioLocked",()=>!0);g(this,"onResize",(r,a)=>{const{newPoint:s,initialBounds:n,initialShape:o,scaleX:i,handle:l}=a;if(a.mode==="scale_shape"||l!=="right"&&l!=="left")return{id:r.id,type:r.type,...EX(r,a)};{const c=Math.max(1,Math.abs(n.width*i)),{x:d,y:p}=i<0?v.Sub(s,v.FromAngle(r.rotation).mul(c)):s;return{id:r.id,type:r.type,x:d,y:p,props:{w:c/o.props.scale,autoSize:!1}}}});g(this,"onBeforeCreate",r=>{if(!r.props.autoSize||r.props.text.trim())return;const a=this.getMinDimensions(r);return{...r,x:r.x-a.width/2,y:r.y-a.height/2}});g(this,"onEditEnd",r=>{const{id:a,type:s,props:{text:n}}=r,o=r.props.text.trimEnd();o.length===0?this.editor.deleteShapes([r.id]):o!==r.props.text&&this.editor.updateShapes([{id:a,type:s,props:{text:n.trimEnd()}}])});g(this,"onBeforeUpdate",(r,a)=>{if(!a.props.autoSize)return;const s=r.props.size!==a.props.size||r.props.textAlign!==a.props.textAlign||r.props.font!==a.props.font||r.props.scale!==1&&a.props.scale===1,n=r.props.text!==a.props.text;if(!s&&!n)return;const o=this.getMinDimensions(r),i=j9(this.editor,a.props),l=o.width*r.props.scale,c=o.height*r.props.scale,d=i.width*a.props.scale,p=i.height*a.props.scale;let f;switch(a.props.textAlign){case"middle":{f=new v((d-l)/2,n?0:(p-c)/2);break}case"end":{f=new v(d-l,n?0:(p-c)/2);break}default:{if(n)break;f=new v(0,(p-c)/2);break}}if(f){f.rot(a.rotation);const{x:h,y}=a;return{...a,x:h-f.x,y:y-f.y,props:{...a.props,w:d}}}else return{...a,props:{...a.props,w:d}}});g(this,"onDoubleClickEdge",r=>{if(!r.props.autoSize)return{id:r.id,type:r.type,props:{autoSize:!0}};if(r.props.scale!==1)return{id:r.id,type:r.type,props:{scale:1}}})}getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",textAlign:"start",autoSize:!0,scale:1}}getMinDimensions(r){return DX.get(r.props,a=>j9(this.editor,a))}getGeometry(r){const{scale:a}=r.props,{width:s,height:n}=this.getMinDimensions(r);return new Ys({width:s*a,height:n*a,isFilled:!0,isLabel:!0})}component(r){const{id:a,props:{font:s,size:n,text:o,color:i,scale:l,textAlign:c}}=r,{width:d,height:p}=this.getMinDimensions(r),f=r.id===this.editor.getOnlySelectedShapeId(),h=Fa(),y=TX(a);return u.jsx(yg,{id:a,classNamePrefix:"tl-text-shape",type:"text",font:s,fontSize:hl[n],lineHeight:$t.lineHeight,align:c,verticalAlign:"middle",text:o,labelColor:h[i].solid,isSelected:f,textWidth:d,textHeight:p,style:{transform:`scale(${l})`,transformOrigin:"top left"},wrap:!0,onKeyDown:y})}indicator(r){const a=this.editor.getShapeGeometry(r).bounds,s=N();return r.props.autoSize&&s.getEditingShapeId()===r.id?null:u.jsx("rect",{width:R(a.width),height:R(a.height)})}toSvg(r,a){a.addExportDef(ml(r.props.font)),r.props.text&&a.addExportDef(ml(r.props.font));const s=this.editor.getShapeGeometry(r).bounds,n=s.width/(r.props.scale??1),o=s.height/(r.props.scale??1),i=an(a);return u.jsx(bg,{fontSize:hl[r.props.size],font:r.props.font,align:r.props.textAlign,verticalAlign:"middle",text:r.props.text,labelColor:i[r.props.color].solid,bounds:new Z(0,0,n,o),padding:0})}}g(cf,"type","text"),g(cf,"props",Gx),g(cf,"migrations",Kx);function j9(e,t){const{font:r,text:a,autoSize:s,size:n,w:o}=t,i=s?16:Math.max(16,o),l=hl[n],c=s?null:Math.floor(Math.max(i,o)),d=e.textMeasure.measureText(a,{...$t,fontFamily:fs[r],fontSize:l,maxWidth:c});return s&&(d.w+=1),{width:Math.max(i,d.w),height:Math.max(l,d.h)}}function TX(e){const t=N();return S.useCallback(r=>{if(t.getEditingShapeId()===e)switch(r.key){case"Enter":{(r.ctrlKey||r.metaKey)&&t.complete();break}case"Tab":{ke(r),r.shiftKey?gl.unindent(r.currentTarget):gl.indent(r.currentTarget);break}}},[t,e])}class df extends Bl{constructor(){super(...arguments);g(this,"canEdit",()=>!0);g(this,"isAspectRatioLocked",()=>!0)}getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(r){const{editor:a}=this,s=a.getShapeGeometry(r).bounds.w*a.getZoomLevel()>=110,n=r.props.assetId?a.getAsset(r.props.assetId):null,{time:o,playing:i}=r.props,l=gg(r.id),c=Dk(),d=S.useRef(null),p=S.useCallback(b=>{const _=b.currentTarget;_&&a.updateShapes([{type:"video",id:r.id,props:{playing:!0,time:_.currentTime}}])},[r.id,a]),f=S.useCallback(b=>{const _=b.currentTarget;_&&a.updateShapes([{type:"video",id:r.id,props:{playing:!1,time:_.currentTime}}])},[r.id,a]),h=S.useCallback(b=>{const _=b.currentTarget;_&&l&&a.updateShapes([{type:"video",id:r.id,props:{time:_.currentTime}}])},[l,r.id,a]),[y,m]=S.useState(!1),w=S.useCallback(b=>{const _=b.currentTarget;_&&(o!==_.currentTime&&(_.currentTime=o),i||_.pause(),m(!0))},[i,o]);return S.useEffect(()=>{const b=d.current;b&&(y&&!l&&o!==b.currentTime&&(b.currentTime=o),l&&document.activeElement!==b&&b.focus())},[l,y,o]),S.useEffect(()=>{if(c){const b=d.current;if(!b)return;b.pause(),b.currentTime=0}},[d,c]),u.jsxs(u.Fragment,{children:[u.jsx(qo,{id:r.id,style:{color:"var(--color-text-3)",backgroundColor:n?"transparent":"var(--color-low)",border:n?"none":"1px solid var(--color-low-border)"},children:u.jsx("div",{className:"tl-counter-scaled",children:u.jsx("div",{className:"tl-video-container",children:n!=null&&n.props.src?u.jsx("video",{ref:d,style:l?{pointerEvents:"all"}:void 0,className:`tl-video tl-video-shape-${r.id.split(":")[1]}`,width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:l&&s,onPlay:p,onPause:f,onTimeUpdate:h,onLoadedData:w,hidden:!y,children:u.jsx("source",{src:n.props.src})}):u.jsx(Ek,{})})})}),"url"in r.props&&r.props.url&&u.jsx(bl,{url:r.props.url,zoomLevel:a.getZoomLevel()})]})}indicator(r){return u.jsx("rect",{width:R(r.props.w),height:R(r.props.h)})}toSvg(r){return u.jsx("image",{href:MX(r.id),width:r.props.w,height:r.props.h})}}g(df,"type","video"),g(df,"props",Vx),g(df,"migrations",Yx);function MX(e){const t=e.split(":")[1],r=document.querySelector(`.tl-video-shape-${t}`);if(r){const a=document.createElement("canvas");return a.width=r.videoWidth,a.height=r.videoHeight,a.getContext("2d").drawImage(r,0,0),a.toDataURL("image/png")}else throw new Error("Video with not found when attempting serialization.")}const Nk=[cf,Qp,ef,af,lf,of,rf,Jp,sf,tf,nf,df];function BX(e){return[e.sideEffects.registerAfterChangeHandler("instance_page_state",(t,r)=>{if(t.croppingShapeId!==r.croppingShapeId){const a=e.isIn("select.crop");!t.croppingShapeId&&r.croppingShapeId?a||e.setCurrentTool("select.crop.idle"):t.croppingShapeId&&!r.croppingShapeId&&a&&e.setCurrentTool("select.idle")}t.editingShapeId!==r.editingShapeId&&(!t.editingShapeId&&r.editingShapeId?e.isIn("select.editing_shape")||e.setCurrentTool("select.editing_shape"):t.editingShapeId&&!r.editingShapeId&&e.isIn("select.editing_shape")&&e.setCurrentTool("select.idle"))})]}class qk extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"scribbleId","id");g(this,"markId","");g(this,"excludedShapeIds",new Set);g(this,"onEnter",r=>{this.markId="erase scribble begin",this.editor.mark(this.markId),this.info=r;const{originPagePoint:a}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(n=>{if(this.editor.isShapeOrAncestorLocked(n))return!0;if(this.editor.isShapeOfType(n,"group")||this.editor.isShapeOfType(n,"frame")){const o=this.editor.getPointInShapeSpace(n,a);return this.editor.getShapeGeometry(n).bounds.containsPoint(o)}return!1}).map(n=>n.id));const s=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=s.id,this.update()});g(this,"pushPointToScribble",()=>{const{x:r,y:a}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,r,a)});g(this,"onExit",()=>{this.editor.scribbles.stop(this.scribbleId)});g(this,"onPointerMove",()=>{this.update()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()})}update(){const{editor:r,excludedShapeIds:a}=this,s=r.getErasingShapeIds(),n=r.getZoomLevel(),o=r.getCurrentPageShapes(),{inputs:{currentPagePoint:i,previousPagePoint:l}}=r;this.pushPointToScribble();const c=new Set(s),d=this.editor.options.hitTestMargin/n;for(const p of o){if(r.isShapeOfType(p,"group"))continue;const f=r.getShapeMask(p.id);if(f&&!ta(i,f))continue;const h=r.getShapeGeometry(p),y=r.getShapePageTransform(p);if(!h||!y)continue;const m=y.clone().invert(),w=m.applyToPoint(l),b=m.applyToPoint(i),{bounds:_}=h;_.minX-d>Math.max(w.x,b.x)||_.minY-d>Math.max(w.y,b.y)||_.maxX+d<Math.min(w.x,b.x)||_.maxY+d<Math.min(w.y,b.y)||h.hitTestLineSegment(w,b,d)&&c.add(r.getOutermostSelectableShape(p).id)}this.editor.setErasingShapes([...c].filter(p=>!a.has(p)))}complete(){const{editor:r}=this;r.deleteShapes(r.getCurrentPageState().erasingShapeIds),r.setErasingShapes([]),this.parent.transition("idle")}cancel(){const{editor:r}=this;r.setErasingShapes([]),r.bailToMark(this.markId),this.parent.transition("idle",this.info)}}g(qk,"id","erasing");var e1;let LX=(e1=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(e1,"id","idle"),e1);var t1;let RX=(t1=class extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{const r=this.editor.getZoomLevel(),a=this.editor.getCurrentPageShapesSorted(),{inputs:{currentPagePoint:s}}=this.editor,n=new Set,o=n.size;for(let i=a.length,l=i-1;l>=0;l--){const c=a[l];if(!(this.editor.isShapeOrAncestorLocked(c)||this.editor.isShapeOfType(c,"group"))&&this.editor.isPointInShape(c,s,{hitInside:!1,margin:this.editor.options.hitTestMargin/r})){const d=this.editor.getOutermostSelectableShape(c);if(this.editor.isShapeOfType(d,"frame")&&n.size>o)break;n.add(d.id)}}this.editor.setErasingShapes([...n])});g(this,"onLongPress",r=>{this.startErasing(r)});g(this,"onPointerMove",r=>{this.editor.inputs.isDragging&&this.startErasing(r)});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.cancel()})}startErasing(r){this.parent.transition("erasing",r)}complete(){const r=this.editor.getErasingShapeIds();r.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(r)),this.editor.setErasingShapes([]),this.parent.transition("idle")}cancel(){this.editor.setErasingShapes([]),this.parent.transition("idle")}},g(t1,"id","pointing"),t1);class uf extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})})}}g(uf,"id","eraser"),g(uf,"initial","idle"),g(uf,"children",()=>[LX,RX,qk]);class $k extends se{constructor(){super(...arguments);g(this,"initialCamera",new v);g(this,"onEnter",()=>{this.initialCamera=v.From(this.editor.getCamera()),this.update()});g(this,"onPointerMove",()=>{this.update()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.parent.transition("idle")});g(this,"onComplete",()=>{this.complete()})}update(){const{initialCamera:r,editor:a}=this,{currentScreenPoint:s,originScreenPoint:n}=a.inputs,o=v.Sub(s,n).div(a.getZoomLevel());o.len2()!==0&&a.setCamera(r.clone().add(o))}complete(){const{editor:r}=this,{pointerVelocity:a}=r.inputs,s=Math.min(a.len(),2);s>.1&&this.editor.slideCamera({speed:s,direction:a}),this.parent.transition("idle")}}g($k,"id","dragging");var r1;let OX=(r1=class extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{this.editor.setCursor({type:"grab",rotation:0})});g(this,"onPointerDown",r=>{this.parent.transition("pointing",r)});g(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},g(r1,"id","idle"),r1);var a1;let zX=(a1=class extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{this.editor.stopCameraAnimation(),this.editor.setCursor({type:"grabbing",rotation:0})});g(this,"onLongPress",()=>{this.startDragging()});g(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.startDragging()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.complete()})}startDragging(){this.parent.transition("dragging")}complete(){this.parent.transition("idle")}},g(a1,"id","pointing"),a1);class pf extends se{constructor(){super(...arguments);g(this,"onDoubleClick",r=>{if(r.phase==="settle"){const{currentScreenPoint:a}=this.editor.inputs;this.editor.zoomIn(a,{animation:{duration:220,easing:ar.easeOutQuint}})}});g(this,"onTripleClick",r=>{if(r.phase==="settle"){const{currentScreenPoint:a}=this.editor.inputs;this.editor.zoomOut(a,{animation:{duration:320,easing:ar.easeOutQuint}})}});g(this,"onQuadrupleClick",r=>{if(r.phase==="settle"){const a=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:s}}=this.editor;a===1?this.editor.zoomToFit({animation:{duration:400,easing:ar.easeOutQuint}}):this.editor.resetZoom(s,{animation:{duration:320,easing:ar.easeOutQuint}})}})}}g(pf,"id","hand"),g(pf,"initial","idle"),g(pf,"children",()=>[OX,zX,$k]);var s1;let NX=(s1=class extends se{constructor(){super(...arguments);g(this,"onPointerDown",r=>{this.parent.transition("lasering",r)})}},g(s1,"id","idle"),s1);class Uk extends se{constructor(){super(...arguments);g(this,"scribbleId","id");g(this,"onEnter",()=>{const r=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:1200,shrink:.05,taper:!0});this.scribbleId=r.id,this.pushPointToScribble()});g(this,"onExit",()=>{this.editor.scribbles.stop(this.scribbleId)});g(this,"onPointerMove",()=>{this.pushPointToScribble()});g(this,"onPointerUp",()=>{this.complete()});g(this,"pushPointToScribble",()=>{const{x:r,y:a}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,r,a)});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()})}complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}g(Uk,"id","lasering");class ff extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})})}}g(ff,"id","laser"),g(ff,"initial","idle"),g(ff,"children",()=>[NX,Uk]);class Wk extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"initialSelectedShapeIds",[]);g(this,"excludedShapeIds",new Set);g(this,"isWrapMode",!1);g(this,"initialStartShape",null);g(this,"onEnter",r=>{const{altKey:a,currentPagePoint:s}=this.editor.inputs;if(this.isWrapMode=this.editor.user.getIsWrapMode(),a){this.parent.transition("scribble_brushing",r);return}this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(n=>this.editor.isShapeOfType(n,"group")||this.editor.isShapeOrAncestorLocked(n)).map(n=>n.id)),this.info=r,this.initialSelectedShapeIds=this.editor.getSelectedShapeIds().slice(),this.initialStartShape=this.editor.getShapesAtPoint(s)[0],this.hitTestShapes()});g(this,"onExit",()=>{this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})});g(this,"onTick",()=>{u0(this.editor)});g(this,"onPointerMove",()=>{this.hitTestShapes()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",r=>{this.editor.setSelectedShapes(this.initialSelectedShapeIds),this.parent.transition("idle",r)});g(this,"onKeyDown",r=>{this.editor.inputs.altKey?this.parent.transition("scribble_brushing",r):this.hitTestShapes()});g(this,"onKeyUp",()=>{this.hitTestShapes()});g(this,"onInterrupt",()=>{this.editor.updateInstanceState({brush:null})})}complete(){this.hitTestShapes(),this.parent.transition("idle")}hitTestShapes(){const{editor:r,excludedShapeIds:a,isWrapMode:s}=this,{inputs:{originPagePoint:n,currentPagePoint:o,shiftKey:i,ctrlKey:l}}=r,c=new Set(i?this.initialSelectedShapeIds:[]),d=s?!l:l,p=Z.FromPoints([n,o]),{corners:f}=p;let h,y,m,w,b,_;const x=r.getCurrentPageShapes(),C=r.getCurrentPageId();e:for(let P=0,I=x.length;P<I;P++){if(m=x[P],a.has(m.id)||c.has(m.id)||(w=r.getShapePageBounds(m),!w))continue e;if(p.contains(w)){this.handleHit(m,o,C,c,f);continue e}if(d||r.isShapeOfType(m,"frame"))continue e;if(p.collides(w)){if(b=r.getShapePageTransform(m),!b)continue e;_=b.clone().invert().applyToPoints(f);const j=r.getShapeGeometry(m);t:for(let A=0;A<4;A++)if(h=_[A],y=_[(A+1)%4],j.hitTestLineSegment(h,y,0)){this.handleHit(m,o,C,c,f);break t}}}r.getInstanceState().isCoarsePointer;const k=r.getInstanceState().brush;(!k||!p.equals(k))&&r.updateInstanceState({brush:{...p.toJson()}});const F=r.getSelectedShapeIds();(F.length!==c.size||F.some(P=>!c.has(P)))&&r.setSelectedShapes(Array.from(c))}handleHit(r,a,s,n,o){if(r.parentId===s){n.add(r.id);return}const i=this.editor.getOutermostSelectableShape(r),l=this.editor.getShapeMask(i.id);l&&!_h(l,o)&&!ta(a,l)||n.add(i.id)}}g(Wk,"id","brushing");const yl={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class Hk extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r,this.updateCursor()});g(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.startResizing()});g(this,"onLongPress",()=>{this.startResizing()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){const r=this.editor.getSelectedShapes(),a=yl[this.info.handle];this.editor.setCursor({type:a,rotation:r.length===1?this.editor.getSelectionRotation():0})}startResizing(){this.editor.getInstanceState().isReadonly||this.parent.transition("resizing",this.info)}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}g(Hk,"id","pointing_resize_handle");const fa=8;class x0 extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"markId","");g(this,"snapshot",{});g(this,"onEnter",r=>{this.info=r,this.markId="cropping",this.editor.mark(this.markId),this.snapshot=this.createSnapshot(),this.updateShapes()});g(this,"onPointerMove",()=>{this.updateShapes()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"getDefaultCrop",()=>({topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}))}updateCursor(){if(!this.editor.getSelectedShapes()[0])return;const a=yl[this.info.handle];this.editor.setCursor({type:a,rotation:this.editor.getSelectionRotation()})}updateShapes(){const{shape:r,cursorHandleOffset:a}=this.snapshot;if(!r||!this.editor.getShapeUtil("image"))return;const n=r.props,o=this.editor.inputs.currentPagePoint.clone().sub(a),i=this.editor.inputs.originPagePoint.clone().sub(a),l=o.clone().sub(i).rot(-r.rotation),c=n.crop??this.getDefaultCrop(),d=mt(c),p=new v(r.x,r.y),f=new v(0,0),h=1/(c.bottomRight.x-c.topLeft.x)*n.w,y=1/(c.bottomRight.y-c.topLeft.y)*n.h;let m=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":{if(y<fa)break;m=!0,d.topLeft.y=d.topLeft.y+l.y/y,y*(d.bottomRight.y-d.topLeft.y)<fa?(d.topLeft.y=d.bottomRight.y-fa/y,f.y=(d.topLeft.y-c.topLeft.y)*y):d.topLeft.y<=0?(d.topLeft.y=0,f.y=(d.topLeft.y-c.topLeft.y)*y):f.y=l.y;break}case"bottom":case"bottom_left":case"bottom_right":{if(y<fa)break;m=!0,d.bottomRight.y=Math.min(1,d.bottomRight.y+l.y/y),y*(d.bottomRight.y-d.topLeft.y)<fa&&(d.bottomRight.y=d.topLeft.y+fa/y);break}}switch(this.info.handle){case"left":case"top_left":case"bottom_left":{if(h<fa)break;m=!0,d.topLeft.x=d.topLeft.x+l.x/h,h*(d.bottomRight.x-d.topLeft.x)<fa?(d.topLeft.x=d.bottomRight.x-fa/h,f.x=(d.topLeft.x-c.topLeft.x)*h):d.topLeft.x<=0?(d.topLeft.x=0,f.x=(d.topLeft.x-c.topLeft.x)*h):f.x=l.x;break}case"right":case"top_right":case"bottom_right":{if(h<fa)break;m=!0,d.bottomRight.x=Math.min(1,d.bottomRight.x+l.x/h),h*(d.bottomRight.x-d.topLeft.x)<fa&&(d.bottomRight.x=d.topLeft.x+fa/h);break}}if(!m)return;p.add(f.rot(r.rotation));const w={id:r.id,type:r.type,x:p.x,y:p.y,props:{crop:d,w:(d.bottomRight.x-d.topLeft.x)*h,h:(d.bottomRight.y-d.topLeft.y)*y}};this.editor.updateShapes([w]),this.updateCursor()}complete(){this.updateShapes(),We(this.editor,[this.snapshot.shape.id]),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}createSnapshot(){const r=this.editor.getSelectionRotation(),{inputs:{originPagePoint:a}}=this.editor,s=this.editor.getOnlySelectedShape(),n=this.editor.getSelectionRotatedPageBounds(),o=v.RotWith(n.getHandlePoint(this.info.handle),n.point,r),i=v.Sub(a,o);return{shape:s,cursorHandleOffset:i}}}g(x0,"id","cropping");function S0(e,t=!1){const r=e.getZoomLevel(),{inputs:{currentPagePoint:a}}=e;return e.getShapeAtPoint(a,{hitInside:!1,hitLabels:t,margin:e.options.hitTestMargin/r,renderingOnly:!0})??e.getSelectedShapeAtPoint(a)}function Gk(e,t,r){if(!t)throw Error("Needs to translate a cropped shape!");const{crop:a}=t.props;if(!a)return;const s=e.inputs.shiftKey?Math.abs(r.x)<Math.abs(r.y)?"x":"y":null;s==="x"?r.x=0:s==="y"&&(r.y=0),r.rot(-t.rotation);const n=1/(a.bottomRight.x-a.topLeft.x)*t.props.w,o=1/(a.bottomRight.y-a.topLeft.y)*t.props.h,i=a.bottomRight.y-a.topLeft.y,l=a.bottomRight.x-a.topLeft.x,c=mt(a);return c.topLeft.x=Math.min(1-l,Math.max(0,c.topLeft.x-r.x/n)),c.topLeft.y=Math.min(1-i,Math.max(0,c.topLeft.y-r.y/o)),c.bottomRight.x=c.topLeft.x+l,c.bottomRight.y=c.topLeft.y+i,{id:t.id,type:t.type,props:{crop:c}}}var n1;let qX=(n1=class extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{this.editor.setCursor({type:"default",rotation:0});const r=this.editor.getOnlySelectedShape();r&&this.editor.setCroppingShape(r.id)});g(this,"onExit",()=>{this.editor.setCursor({type:"default",rotation:0})});g(this,"onCancel",()=>{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})});g(this,"onPointerDown",r=>{var a;if(!this.editor.getIsMenuOpen()){if(r.ctrlKey){this.cancel(),this.editor.root.handleEvent(r);return}switch(r.target){case"canvas":{const s=S0(this.editor);if(s&&!this.editor.isShapeOfType(s,"group")){this.onPointerDown({...r,shape:s,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(r);break}case"shape":{if(r.shape.id===this.editor.getCroppingShapeId()){this.editor.setCurrentTool("select.crop.pointing_crop",r);return}else(a=this.editor.getShapeUtil(r.shape))!=null&&a.canCrop(r.shape)?(this.editor.setCroppingShape(r.shape.id),this.editor.setSelectedShapes([r.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",r)):(this.cancel(),this.editor.root.handleEvent(r));break}case"selection":{switch(r.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...r,onInteractionEnd:"select.crop.idle"});break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.crop.pointing_crop_handle",{...r,onInteractionEnd:"select.crop.idle"});break}default:this.cancel()}break}}}});g(this,"onDoubleClick",r=>{var o;if(this.editor.inputs.shiftKey||r.phase!=="up")return;const a=this.editor.getCroppingShapeId();if(!a)return;const s=this.editor.getShape(a);if(!s)return;const n=this.editor.getShapeUtil(s);if(n){if(r.target==="selection"){(o=n.onDoubleClickEdge)==null||o.call(n,s);return}this.cancel(),this.editor.root.handleEvent(r)}});g(this,"onKeyDown",()=>{this.nudgeCroppingImage(!1)});g(this,"onKeyRepeat",()=>{this.nudgeCroppingImage(!0)});g(this,"onKeyUp",r=>{switch(r.code){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}})}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(r=!1){const{editor:{inputs:{keys:a}}}=this,s=a.has("ShiftLeft"),n=new v(0,0);if(a.has("ArrowLeft")&&(n.x+=1),a.has("ArrowRight")&&(n.x-=1),a.has("ArrowUp")&&(n.y+=1),a.has("ArrowDown")&&(n.y-=1),n.equals(new v(0,0)))return;s&&n.mul(10);const o=this.editor.getShape(this.editor.getCroppingShapeId());if(!o)return;const i=Gk(this.editor,o,n);i&&(r||this.editor.mark("translate crop"),this.editor.updateShapes([i]))}},g(n1,"id","idle"),n1);class Kk extends se{constructor(){super(...arguments);g(this,"onCancel",()=>{this.editor.setCurrentTool("select.crop.idle",{})});g(this,"onPointerMove",r=>{this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",r)});g(this,"onPointerUp",r=>{this.editor.setCurrentTool("select.crop.idle",r)})}}g(Kk,"id","pointing_crop");class k0 extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r,this.parent.setCurrentToolIdMask(r.onInteractionEnd);const a=this.editor.getSelectedShapes()[0];if(!a)return;const s=yl[this.info.handle];this.editor.setCursor({type:s,rotation:this.editor.getSelectionRotation()}),this.editor.setCroppingShape(a.id)});g(this,"onExit",()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0)});g(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.startCropping()});g(this,"onLongPress",()=>{this.startCropping()});g(this,"onPointerUp",()=>{this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}startCropping(){this.editor.getInstanceState().isReadonly||this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}}g(k0,"id","pointing_crop_handle");class Vk extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"markId","translating crop");g(this,"snapshot",{});g(this,"onEnter",r=>{this.info=r,this.snapshot=this.createSnapshot(),this.editor.mark(this.markId),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()});g(this,"onExit",()=>{this.editor.setCursor({type:"default",rotation:0})});g(this,"onPointerMove",()=>{this.updateShapes()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onKeyDown",r=>{switch(r.key){case"Alt":case"Shift":{this.updateShapes();return}}});g(this,"onKeyUp",r=>{switch(r.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}})}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const r=this.snapshot.shape;if(!r)return;const{originPagePoint:a,currentPagePoint:s}=this.editor.inputs,n=s.clone().sub(a),o=Gk(this.editor,r,n);o&&this.editor.updateShapes([o])}}g(Vk,"id","translating_crop");class hf extends se{constructor(){super(...arguments);g(this,"markId","");g(this,"onEnter",()=>{this.didCancel=!1,this.markId=this.editor.history.mark()});g(this,"didCancel",!1);g(this,"onExit",()=>{this.didCancel?this.editor.bailToMark(this.markId):this.editor.history.squashToMark(this.markId)});g(this,"onCancel",()=>{this.didCancel=!0})}}g(hf,"id","crop"),g(hf,"initial","idle"),g(hf,"children",()=>[qX,Vk,Kk,k0,x0]);class Yk extends se{constructor(){super(...arguments);g(this,"shapeId","");g(this,"initialHandle",{});g(this,"initialAdjacentHandle",null);g(this,"initialPagePoint",{});g(this,"markId","");g(this,"initialPageTransform");g(this,"initialPageRotation");g(this,"info",{});g(this,"isPrecise",!1);g(this,"isPreciseId",null);g(this,"pointingId",null);g(this,"onEnter",r=>{const{shape:a,isCreating:s,handle:n}=r;if(this.info=r,this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.shapeId=a.id,this.markId=s?`creating:${a.id}`:"dragging handle",s||this.editor.mark(this.markId),this.initialHandle=mt(n),this.editor.isShapeOfType(a,"line")&&this.initialHandle.type==="create"){this.editor.updateShape({...a,props:{points:{...a.props.points,[n.index]:{id:n.index,index:n.index,x:n.x,y:n.y}}}});const c=this.editor.getShapeHandles(a).find(d=>d.index===n.index);this.initialHandle=mt(c)}this.initialPageTransform=this.editor.getShapePageTransform(a),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.setCursor({type:s?"cross":"grabbing",rotation:0});const o=this.editor.getShapeHandles(a).sort(Qt),i=o.findIndex(l=>l.id===r.handle.id);this.initialAdjacentHandle=null;for(let l=i+1;l<o.length;l++){const c=o[l];if(c.type==="vertex"&&c.id!=="middle"&&c.id!==r.handle.id){this.initialAdjacentHandle=c;break}}if(!this.initialAdjacentHandle)for(let l=o.length-1;l>=0;l--){const c=o[l];if(c.type==="vertex"&&c.id!=="middle"&&c.id!==r.handle.id){this.initialAdjacentHandle=c;break}}if(this.editor.isShapeOfType(a,"arrow")){const l=Ir(this.editor,a)[r.handle.id];this.isPrecise=!1,l?(this.editor.setHintingShapes([l.toId]),this.isPrecise=l.props.isPrecise,this.isPrecise?this.isPreciseId=l.toId:this.resetExactTimeout()):this.editor.setHintingShapes([])}this.update(),this.editor.select(this.shapeId)});g(this,"exactTimeout",-1);g(this,"onPointerMove",()=>{this.update()});g(this,"onKeyDown",()=>{this.update()});g(this,"onKeyUp",()=>{this.update()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.update(),this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setHintingShapes([]),this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0})})}resetExactTimeout(){this.exactTimeout!==-1&&this.clearExactTimeout(),this.exactTimeout=this.editor.timers.setTimeout(()=>{this.getIsActive()&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1},750)}clearExactTimeout(){this.exactTimeout!==-1&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}complete(){this.editor.snaps.clearIndicators(),We(this.editor,[this.shapeId]);const{onInteractionEnd:r}=this.info;if(this.editor.getInstanceState().isToolLocked&&r){this.editor.setCurrentTool(r,{shapeId:this.shapeId});return}this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();const{onInteractionEnd:r}=this.info;if(r){this.editor.setCurrentTool(r,{shapeId:this.shapeId});return}this.parent.transition("idle")}update(){var P;const{editor:r,shapeId:a,initialPagePoint:s}=this,{initialHandle:n,initialPageRotation:o,initialAdjacentHandle:i}=this,l=this.editor.getHintingShapeIds(),c=this.editor.user.getIsSnapMode(),{snaps:d,inputs:{currentPagePoint:p,shiftKey:f,ctrlKey:h,altKey:y,pointerVelocity:m}}=r,w=this.info.shape,b=r.getShape(a);if(!b)return;const _=r.getShapeUtil(b);let x=p.clone().sub(s).rot(-o).add(n);if(f&&i&&n.id!=="middle"){const I=v.Angle(i,x),A=fh(I,24)-I;x=v.RotWith(x,i,A)}r.snaps.clearIndicators();let C={...n,x:x.x,y:x.y};if(n.canSnap&&(c?!h:h)){if(!r.getShapePageTransform(b.id))throw Error("Expected a page transform");const j=d.handles.snapHandle({currentShapeId:a,handle:C});j&&(j.nudge.rot(-r.getShapeParentTransform(b).rotation()),x.add(j.nudge),C={...n,x:x.x,y:x.y})}const k=(P=_.onHandleDrag)==null?void 0:P.call(_,b,{handle:C,isPrecise:this.isPrecise||y,initial:w}),F={id:b.id,type:b.type,...k};if(n.type==="vertex"&&this.editor.isShapeOfType(b,"arrow")){const I=Ir(r,b)[n.id];I?l[0]!==I.toId&&(r.setHintingShapes([I.toId]),this.pointingId=I.toId,this.isPrecise=m.len()<.5||y,this.isPreciseId=this.isPrecise?I.toId:null,this.resetExactTimeout()):l.length>0&&(r.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}k&&r.updateShapes([F])}}g(Yk,"id","dragging_handle");function Xk(e){return e.isLabel?[e]:e instanceof $a?e.children.filter(t=>t.isLabel):[]}class Zk extends se{constructor(){super(...arguments);g(this,"hitShapeForPointerUp",null);g(this,"onEnter",()=>{const r=this.editor.getEditingShape();if(!r)throw Error("Entered editing state without an editing shape");this.hitShapeForPointerUp=null,tl(this.editor),this.editor.select(r)});g(this,"onExit",()=>{var n;const{editingShapeId:r}=this.editor.getCurrentPageState();if(!r)return;this.editor.setEditingShape(null);const a=this.editor.getShape(r),s=this.editor.getShapeUtil(a);(n=s.onEditEnd)==null||n.call(s,a)});g(this,"onPointerMove",r=>{if(this.hitShapeForPointerUp&&this.editor.inputs.isDragging){if(this.editor.getInstanceState().isReadonly)return;this.editor.select(this.hitShapeForPointerUp),this.parent.transition("translating",r),this.hitShapeForPointerUp=null;return}switch(r.target){case"shape":case"canvas":{tl(this.editor);return}}});g(this,"onPointerDown",r=>{switch(this.hitShapeForPointerUp=null,r.target){case"canvas":{const a=S0(this.editor,!0);if(a){this.onPointerDown({...r,shape:a,target:"shape"});return}break}case"shape":{const{shape:a}=r,s=this.editor.getEditingShape();if(!s)throw Error("Expected an editing shape!");const n=this.editor.getShapeUtil(a).getGeometry(a),o=Xk(n),i=o.length===1?o[0]:void 0,l=this.editor.isShapeOfType(s,"text")&&s.props.text.trim()==="";if(i&&!l){const c=this.editor.getPointInShapeSpace(a,this.editor.inputs.currentPagePoint);if(i.bounds.containsPoint(c,0)&&i.hitTestPoint(c)){if(a.id===s.id)return;this.hitShapeForPointerUp=a,this.editor.mark("editing on pointer up"),this.editor.select(a.id);return}}else{if(a.id===s.id)this.editor.isShapeOfType(a,"frame")&&this.editor.setEditingShape(null);else{this.parent.transition("pointing_shape",r);return}return}break}}this.parent.transition("idle",r),this.editor.root.handleEvent(r)});g(this,"onPointerUp",r=>{const a=this.hitShapeForPointerUp;if(!a)return;this.hitShapeForPointerUp=null;const s=this.editor.getShapeUtil(a);if(this.editor.getInstanceState().isReadonly&&!s.canEditInReadOnly(a)){this.parent.transition("pointing_shape",r);return}this.editor.select(a.id),this.editor.setEditingShape(a.id),tl(this.editor)});g(this,"onComplete",r=>{this.parent.transition("idle",r)});g(this,"onCancel",r=>{this.parent.transition("idle",r)})}}g(Zk,"id","editing_shape");function E9(e){const t=e.getOnlySelectedShape();return!!(t&&!e.isShapeOrAncestorLocked(t)&&e.getShapeUtil(t).canCrop(t))}function Ch(e){const t=e.getSelectedShapeIds(),{shiftKey:r,altKey:a,currentPagePoint:s}=e.inputs,n=e.getShapeAtPoint(s,{hitInside:!1,margin:e.options.hitTestMargin/e.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:o=>!o.isLocked});if(n){const o=e.getOutermostSelectableShape(n);if(r&&!a)e.cancelDoubleClick(),t.includes(o.id)?(e.mark("deselecting shape"),e.deselect(o)):(e.mark("shift selecting shape"),e.setSelectedShapes([...t,o.id]));else{let i;o===n||o.id===e.getFocusedGroupId()||t.includes(o.id)?i=n:i=o,i&&!t.includes(i.id)&&(e.mark("selecting shape"),e.select(i.id))}}else{if(r)return;{t.length>0&&(e.mark("selecting none"),e.selectNone());const o=e.getFocusedGroupId();if(Kr(o)){const i=e.getShape(o);e.isPointInShape(i,s,{margin:0,hitInside:!0})||e.setFocusedGroup(null)}}}}const $X=["Delete","Backspace","[","]","Enter"," ","Shift","Tab"];var o1;let UX=(o1=class extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{this.parent.setCurrentToolIdMask(void 0),tl(this.editor),this.editor.setCursor({type:"default",rotation:0})});g(this,"onPointerMove",()=>{tl(this.editor)});g(this,"onPointerDown",r=>{if(this.editor.getIsMenuOpen())return;const a=r.ctrlKey&&E9(this.editor);if(r.ctrlKey&&!a){if(r.target==="shape"&&this.isDarwin&&this.editor.inputs.keys.has("ControlLeft")&&!this.editor.isShapeOrAncestorLocked(r.shape)){this.parent.transition("pointing_shape",r);return}this.parent.transition("brushing",r);return}switch(r.target){case"canvas":{const s=S0(this.editor);if(s&&!s.isLocked){this.onPointerDown({...r,shape:s,target:"shape"});return}const n=this.editor.getSelectedShapeIds(),o=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:i}}=this.editor;if((n.length>1||o&&!this.editor.getShapeUtil(o).hideSelectionBoundsBg(o))&&D9(this.editor,i)){this.onPointerDown({...r,target:"selection"});return}this.parent.transition("pointing_canvas",r);break}case"shape":{const{shape:s}=r;if(this.isOverArrowLabelTest(s)){this.parent.transition("pointing_arrow_label",r);break}if(this.editor.isShapeOrAncestorLocked(s)){this.parent.transition("pointing_canvas",r);break}this.parent.transition("pointing_shape",r);break}case"handle":{if(this.editor.getInstanceState().isReadonly)break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",r):this.parent.transition("pointing_handle",r);break}case"selection":{switch(r.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.parent.transition("pointing_rotate_handle",r);break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{a?this.parent.transition("crop.pointing_crop_handle",r):this.parent.transition("pointing_resize_handle",r);break}default:{const s=this.editor.getHoveredShape();if(s&&!this.editor.getSelectedShapeIds().includes(s.id)&&!s.isLocked){this.onPointerDown({...r,shape:s,target:"shape"});return}this.parent.transition("pointing_selection",r)}}break}}});g(this,"onDoubleClick",r=>{var a,s,n,o;if(!(this.editor.inputs.shiftKey||r.phase!=="up"))switch(r.target){case"canvas":{const i=this.editor.getHoveredShape(),l=i&&!this.editor.isShapeOfType(i,"group")?i:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1}),c=this.editor.getFocusedGroupId();if(l){if(this.editor.isShapeOfType(l,"group")){Ch(this.editor);return}else{const d=this.editor.getShape(l.parentId);if(d&&this.editor.isShapeOfType(d,"group")&&!(c&&d.id===c)){Ch(this.editor);return}}this.onDoubleClick({...r,shape:l,target:"shape"});return}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(r);break}case"selection":{if(this.editor.getInstanceState().isReadonly)break;const i=this.editor.getOnlySelectedShape();if(i){const l=this.editor.getShapeUtil(i);if(!this.canInteractWithShapeInReadOnly(i))return;if(r.handle==="right"||r.handle==="left"||r.handle==="top"||r.handle==="bottom"){const c=(a=l.onDoubleClickEdge)==null?void 0:a.call(l,i);if(c){this.editor.mark("double click edge"),this.editor.updateShapes([c]),We(this.editor,[i.id]);return}}if(l.canCrop(i)&&!this.editor.isShapeOrAncestorLocked(i)){this.parent.transition("crop",r);return}this.shouldStartEditingShape(i)&&this.startEditingShape(i,r,!0)}break}case"shape":{const{shape:i}=r,l=this.editor.getShapeUtil(i);if(i.type!=="video"&&i.type!=="embed"&&this.editor.getInstanceState().isReadonly)break;if(l.onDoubleClick){const c=(s=l.onDoubleClick)==null?void 0:s.call(l,i);if(c){this.editor.updateShapes([c]);return}else if(l.canCrop(i)&&!this.editor.isShapeOrAncestorLocked(i)){this.editor.mark("select and crop"),this.editor.select((n=r.shape)==null?void 0:n.id),this.parent.transition("crop",r);return}}this.shouldStartEditingShape(i)?this.startEditingShape(i,r,!0):this.handleDoubleClickOnCanvas(r);break}case"handle":{if(this.editor.getInstanceState().isReadonly)break;const{shape:i,handle:l}=r,c=this.editor.getShapeUtil(i),d=(o=c.onDoubleClickHandle)==null?void 0:o.call(c,i,l);d?this.editor.updateShapes([d]):this.shouldStartEditingShape(i)&&this.startEditingShape(i,r,!0)}}});g(this,"onRightClick",r=>{switch(r.target){case"canvas":{const a=this.editor.getHoveredShape(),s=a&&!this.editor.isShapeOfType(a,"group")?a:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitLocked:!0,hitFrameInside:!1,renderingOnly:!0});if(s){this.onRightClick({...r,shape:s,target:"shape"});return}const n=this.editor.getSelectedShapeIds(),o=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:i}}=this.editor;if((n.length>1||o&&!this.editor.getShapeUtil(o).hideSelectionBoundsBg(o))&&D9(this.editor,i)){this.onRightClick({...r,target:"selection"});return}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:a}=this.editor.getCurrentPageState(),{shape:s}=r,n=this.editor.getOutermostSelectableShape(s,o=>!a.includes(o.id));a.includes(n.id)||(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([n.id]));break}}});g(this,"onCancel",()=>{this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.mark("clearing selection"),this.editor.selectNone())});g(this,"onKeyDown",r=>{switch(r.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!1);return}}if(vt.editOnType.get()&&!$X.includes(r.key)&&!r.altKey&&!r.ctrlKey){const a=this.editor.getOnlySelectedShape();if(a&&this.editor.isShapeOfType(a,"note")&&this.shouldStartEditingShape(a)){this.startEditingShape(a,{...r,target:"shape",shape:a},!0);return}}});g(this,"onKeyRepeat",r=>{switch(r.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!0);break}}});g(this,"onKeyUp",r=>{switch(r.code){case"Enter":{const a=this.editor.getSelectedShapes();if(a.every(n=>this.editor.isShapeOfType(n,"group"))){this.editor.setSelectedShapes(a.flatMap(n=>this.editor.getSortedChildIdsForParent(n.id)));return}const s=this.editor.getOnlySelectedShape();if(s&&this.shouldStartEditingShape(s)){this.startEditingShape(s,{...r,target:"shape",shape:s},!0);return}E9(this.editor)&&this.parent.transition("crop",r);break}}});g(this,"isDarwin",window.navigator.userAgent.toLowerCase().indexOf("mac")>-1)}shouldStartEditingShape(r=this.editor.getOnlySelectedShape()){return!r||this.editor.isShapeOrAncestorLocked(r)&&r.type!=="embed"||!this.canInteractWithShapeInReadOnly(r)?!1:this.editor.getShapeUtil(r).canEdit(r)}startEditingShape(r,a,s){this.editor.isShapeOrAncestorLocked(r)&&r.type!=="embed"||(this.editor.mark("editing shape"),Sh(this.editor,r,s),this.parent.transition("editing_shape",a))}isOverArrowLabelTest(r){if(!r)return!1;const a=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint);if(this.editor.isShapeOfType(r,"arrow")){const s=this.editor.getShapeGeometry(r).children[1];if(s&&ta(a,s.vertices))return!0}return!1}handleDoubleClickOnCanvas(r){if(this.editor.getInstanceState().isReadonly)return;this.editor.mark("creating text shape");const a=Ne(),{x:s,y:n}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:a,type:"text",x:s,y:n,props:{text:"",autoSize:!0}}]);const o=this.editor.getShape(a);if(!o)return;const i=this.editor.getShapeUtil(o);this.editor.getInstanceState().isReadonly&&!i.canEditInReadOnly(o)||(this.editor.setEditingShape(a),this.editor.select(a),this.parent.transition("editing_shape",r))}nudgeSelectedShapes(r=!1){const{editor:{inputs:{keys:a}}}=this,s=a.has("ShiftLeft"),n=new v(0,0);if(a.has("ArrowLeft")&&(n.x-=1),a.has("ArrowRight")&&(n.x+=1),a.has("ArrowUp")&&(n.y-=1),a.has("ArrowDown")&&(n.y+=1),n.equals(new v(0,0)))return;r||this.editor.mark("nudge shapes");const{gridSize:o}=this.editor.getDocumentSettings(),i=this.editor.getInstanceState().isGridMode?s?o*GX:o:s?WX:HX,l=this.editor.getSelectedShapeIds();this.editor.nudgeShapes(l,n.mul(i)),We(this.editor,l)}canInteractWithShapeInReadOnly(r){return!!(!this.editor.getInstanceState().isReadonly||this.editor.getShapeUtil(r).canEditInReadOnly(r))}},g(o1,"id","idle"),o1);const WX=10,HX=1,GX=5;function D9(e,t){const r=e.getSelectionRotatedPageBounds();if(!r)return!1;const a=e.getSelectionRotation();return a?ta(t,r.corners.map(s=>v.RotWith(s,r.point,a))):r.containsPoint(t)}class Jk extends se{constructor(){super(...arguments);g(this,"shapeId","");g(this,"markId","");g(this,"wasAlreadySelected",!1);g(this,"didDrag",!1);g(this,"info",{});g(this,"onEnter",r=>{const{shape:a}=r;this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.info=r,this.shapeId=a.id,this.didDrag=!1,this.wasAlreadySelected=this.editor.getOnlySelectedShapeId()===a.id,this.updateCursor();const n=this.editor.getShapeGeometry(a).children[1];if(!n)throw Error(`Expected to find an arrow label geometry for shape: ${a.id}`);const{currentPagePoint:o}=this.editor.inputs,i=this.editor.getPointInShapeSpace(a,o);this._labelDragOffset=v.Sub(n.center,i),this.markId="label-drag start",this.editor.mark(this.markId),this.editor.setSelectedShapes([this.shapeId])});g(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})});g(this,"_labelDragOffset",new v(0,0));g(this,"onPointerMove",()=>{const{isDragging:r}=this.editor.inputs;if(!r)return;const a=this.editor.getShape(this.shapeId);if(!a)return;const s=os(this.editor,a),n=this.editor.getShapeGeometry(a),o=n.children[0],i=this.editor.getPointInShapeSpace(a,this.editor.inputs.currentPagePoint),l=o.nearestPoint(v.Add(i,this._labelDragOffset));let c;if(s.isStraight){const d=v.Dist(s.start.point,s.end.point);c=1-v.Dist(s.end.point,l)/d}else{const{_center:d,measure:p,angleEnd:f,angleStart:h}=n.children[0];c=Fb(p,h,f,d.angle(l))}isNaN(c)&&(c=.5),this.didDrag=!0,this.editor.updateShape({id:a.id,type:a.type,props:{labelPosition:c}})});g(this,"onPointerUp",()=>{const r=this.editor.getShape(this.shapeId);r&&(this.didDrag||!this.wasAlreadySelected?this.complete():(this.editor.setEditingShape(r.id),this.editor.setCurrentTool("select.editing_shape")))});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){this.editor.setCursor({type:"grabbing",rotation:0})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}g(Jk,"id","pointing_arrow_label");class Qk extends se{constructor(){super(...arguments);g(this,"onEnter",()=>{const{inputs:r}=this.editor;r.shiftKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.mark("selecting none"),this.editor.selectNone())});g(this,"onPointerMove",r=>{this.editor.inputs.isDragging&&this.parent.transition("brushing",r)});g(this,"onPointerUp",()=>{Ch(this.editor),this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onInterrupt",()=>{this.parent.transition("idle")})}complete(){this.parent.transition("idle")}}g(Qk,"id","pointing_canvas");class eF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r;const{shape:a}=r;if(this.editor.isShapeOfType(a,"arrow")){const s=Ir(this.editor,a)[r.handle.id];s&&this.editor.setHintingShapes([s.toId])}this.editor.setCursor({type:"grabbing",rotation:0})});g(this,"onExit",()=>{this.editor.setHintingShapes([]),this.editor.setCursor({type:"default",rotation:0})});g(this,"onPointerUp",()=>{const{shape:r,handle:a}=this.info;if(this.editor.isShapeOfType(r,"note")){const{editor:s}=this,n=T9(s,r,a,!1);if(n){Sh(s,n,!0);return}}this.parent.transition("idle",this.info)});g(this,"onPointerMove",()=>{const{editor:r}=this;r.inputs.isDragging&&this.startDraggingHandle()});g(this,"onLongPress",()=>{this.startDraggingHandle()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}startDraggingHandle(){const{editor:r}=this;if(r.getInstanceState().isReadonly)return;const{shape:a,handle:s}=this.info;if(r.isShapeOfType(a,"note")){const n=T9(r,a,s,!0);if(n){const o=r.getPointInParentSpace(n,r.inputs.originPagePoint).sub(v.Rot(g0,n.rotation));r.updateShape({...n,x:o.x,y:o.y}),r.setHoveredShape(n.id).select(n.id).setCurrentTool("select.translating",{...this.info,target:"shape",shape:r.getShape(n),onInteractionEnd:"note",isCreating:!0,onCreate:()=>{Sh(r,n,!0)}});return}}this.parent.transition("dragging_handle",this.info)}cancel(){this.parent.transition("idle")}}g(eF,"id","pointing_handle");function T9(e,t,r,a){const s=e.getShapePageTransform(t.id),n=s.point(),o=s.rotation(),l=mk(n,o,t.props.growY,0)[r.index];if(l)return yk(e,t,l,o,a)}class tF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.info=r,this.updateCursor()});g(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})});g(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.startRotating()});g(this,"onLongPress",()=>{this.startRotating()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){this.editor.setCursor({type:yl[this.info.handle],rotation:this.editor.getSelectionRotation()})}startRotating(){this.editor.getInstanceState().isReadonly||this.parent.transition("rotating",this.info)}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}g(tF,"id","pointing_rotate_handle");class rF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r});g(this,"onPointerUp",r=>{Ch(this.editor),this.parent.transition("idle",r)});g(this,"onPointerMove",r=>{this.editor.inputs.isDragging&&this.startTranslating(r)});g(this,"onLongPress",r=>{this.startTranslating(r)});g(this,"onDoubleClick",r=>{var n,o;const a=this.editor.getHoveredShape(),s=a&&!this.editor.isShapeOfType(a,"group")?a:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(s){this.parent.transition("idle"),(o=(n=this.parent).onDoubleClick)==null||o.call(n,{...r,target:"shape",shape:this.editor.getShape(s)});return}});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}startTranslating(r){this.editor.getInstanceState().isReadonly||this.parent.transition("translating",r)}cancel(){this.parent.transition("idle")}}g(rF,"id","pointing_selection");class aF extends se{constructor(){super(...arguments);g(this,"hitShape",{});g(this,"hitShapeForPointerUp",{});g(this,"isDoubleClick",!1);g(this,"didSelectOnEnter",!1);g(this,"onEnter",r=>{const a=this.editor.getSelectedShapeIds(),s=this.editor.getSelectionRotatedPageBounds(),n=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:o,shiftKey:i,altKey:l}}=this.editor;this.hitShape=r.shape,this.isDoubleClick=!1;const c=this.editor.getOutermostSelectableShape(r.shape),d=this.editor.findShapeAncestor(c,p=>a.includes(p.id));if(this.editor.getShapeUtil(r.shape).onClick||c.id===n||a.includes(c.id)||d||a.length>1&&(s!=null&&s.containsPoint(o))){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=c;return}this.didSelectOnEnter=!0,i&&!l?(this.editor.cancelDoubleClick(),a.includes(c.id)||(this.editor.mark("shift selecting shape"),this.editor.setSelectedShapes([...a,c.id]))):(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([c.id]))});g(this,"onPointerUp",r=>{var d;const a=this.editor.getSelectedShapeIds(),s=this.editor.getFocusedGroupId(),n=this.editor.getZoomLevel(),{inputs:{currentPagePoint:o,shiftKey:i}}=this.editor,l=this.editor.getShapeAtPoint(o,{margin:this.editor.options.hitTestMargin/n,hitInside:!0,renderingOnly:!0})??this.hitShape,c=l?this.editor.getOutermostSelectableShape(l):this.hitShapeForPointerUp;if(c){const p=this.editor.getShapeUtil(c);if(p.onClick){const f=(d=p.onClick)==null?void 0:d.call(p,c);if(f){this.editor.mark("shape on click"),this.editor.updateShapes([f]),this.parent.transition("idle",r);return}}if(c.id===s){a.length>0?(this.editor.mark("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),this.parent.transition("idle",r);return}}if(!this.didSelectOnEnter){const p=this.editor.getOutermostSelectableShape(l,f=>!a.includes(f.id));if(a.includes(p.id))if(i)this.editor.mark("deselecting on pointer up"),this.editor.deselect(c);else if(a.includes(c.id)){if(a.length===1){const f=this.editor.getShapeUtil(c).getGeometry(c),h=Xk(f),y=h.length===1?h[0]:void 0;if(y){const m=this.editor.getPointInShapeSpace(c,o);if(y.bounds.containsPoint(m,0)&&y.hitTestPoint(m)){this.editor.batch(()=>{this.editor.mark("editing on pointer up"),this.editor.select(c.id);const w=this.editor.getShapeUtil(c);this.editor.getInstanceState().isReadonly&&!w.canEditInReadOnly(c)||(this.editor.setEditingShape(c.id),this.editor.setCurrentTool("select.editing_shape"),this.isDoubleClick&&this.editor.emit("select-all-text",{shapeId:c.id}))});return}}}this.editor.mark("selecting on pointer up"),this.editor.select(c.id)}else this.editor.mark("selecting on pointer up"),this.editor.select(c);else if(i){const f=this.editor.getShapeAncestors(p);this.editor.mark("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter(h=>!f.find(y=>y.id===h)),p.id])}else this.editor.mark("selecting on pointer up"),this.editor.setSelectedShapes([p.id])}this.parent.transition("idle",r)});g(this,"onDoubleClick",()=>{this.isDoubleClick=!0});g(this,"onPointerMove",r=>{this.editor.inputs.isDragging&&this.startTranslating(r)});g(this,"onLongPress",r=>{this.startTranslating(r)});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.cancel()});g(this,"onInterrupt",()=>{this.cancel()})}startTranslating(r){this.editor.getInstanceState().isReadonly||(this.editor.focus(),this.parent.transition("translating",r))}cancel(){this.parent.transition("idle")}}g(aF,"id","pointing_shape");class sF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"markId","");g(this,"didHoldCommand",!1);g(this,"creationCursorOffset",{x:0,y:0});g(this,"snapshot",{});g(this,"onEnter",r=>{const{isCreating:a=!1,creationCursorOffset:s={x:0,y:0}}=r;this.info=r,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.creationCursorOffset=s,this.snapshot=this._createSnapshot(),a?(this.markId=`creating:${this.editor.getOnlySelectedShape().id}`,this.editor.setCursor({type:"cross",rotation:0})):(this.markId="starting resizing",this.editor.mark(this.markId)),this.handleResizeStart(),this.updateShapes()});g(this,"onTick",()=>{u0(this.editor)});g(this,"onPointerMove",()=>{this.updateShapes()});g(this,"onKeyDown",()=>{this.updateShapes()});g(this,"onKeyUp",()=>{this.updateShapes()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0}),this.editor.snaps.clearIndicators()});g(this,"_createSnapshot",()=>{const r=this.editor.getSelectedShapeIds(),a=this.editor.getSelectionRotation(),{inputs:{originPagePoint:s}}=this.editor,n=this.editor.getSelectionRotatedPageBounds(),o=v.RotWith(n.getHandlePoint(this.info.handle),n.point,a),i=v.Sub(s,o),l=new Map,c=[];r.forEach(p=>{const f=this.editor.getShape(p);if(f){if(f.type==="frame"&&c.push({id:p,children:ge(this.editor.getSortedChildIdsForParent(f).map(h=>this.editor.getShape(h)))}),l.set(f.id,this._createShapeSnapshot(f)),this.editor.isShapeOfType(f,"frame")&&r.length===1)return;this.editor.visitDescendants(f.id,h=>{const y=this.editor.getShape(h);if(y&&(l.set(y.id,this._createShapeSnapshot(y)),this.editor.isShapeOfType(y,"frame")))return!1})}});const d=![...l.values()].some(p=>!eS(p.pageRotation,a)||p.isAspectRatioLocked);return{shapeSnapshots:l,selectionBounds:n,cursorHandleOffset:i,selectionRotation:a,selectedShapeIds:r,canShapesDeform:d,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:c}});g(this,"_createShapeSnapshot",r=>{const a=this.editor.getShapePageTransform(r),s=this.editor.getShapeUtil(r);return{shape:r,bounds:this.editor.getShapeGeometry(r).bounds,pageTransform:a,pageRotation:ae.Decompose(a).rotation,isAspectRatioLocked:s.isAspectRatioLocked(r)}})}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}complete(){var r,a;if(We(this.editor,this.snapshot.selectedShapeIds),this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate){(a=(r=this.info).onCreate)==null||a.call(r,this.editor.getOnlySelectedShape());return}if(this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd){this.editor.setCurrentTool(this.info.onInteractionEnd,{});return}this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:r}=this.snapshot,a=[];r.forEach(({shape:s})=>{var i;const n=this.editor.getShapeUtil(s),o=(i=n.onResizeStart)==null?void 0:i.call(n,s);o&&a.push(o)}),a.length>0&&this.editor.updateShapes(a)}handleResizeEnd(){const{shapeSnapshots:r}=this.snapshot,a=[];r.forEach(({shape:s})=>{var l;const n=this.editor.getShape(s.id),o=this.editor.getShapeUtil(s),i=(l=o.onResizeEnd)==null?void 0:l.call(o,s,n);i&&a.push(i)}),a.length>0&&this.editor.updateShapes(a)}updateShapes(){const{altKey:r,shiftKey:a}=this.editor.inputs,{frames:s,shapeSnapshots:n,selectionBounds:o,cursorHandleOffset:i,selectedShapeIds:l,selectionRotation:c,canShapesDeform:d}=this.snapshot;let p=a||!d;if(n.size===1){const I=[...n.values()][0];this.editor.isShapeOfType(I.shape,"text")&&(p=!(this.info.handle==="left"||this.info.handle==="right"))}const{ctrlKey:f}=this.editor.inputs,h=this.editor.inputs.currentPagePoint.clone().sub(i).sub(this.creationCursorOffset),y=this.editor.inputs.originPagePoint.clone().sub(i);if(this.editor.getInstanceState().isGridMode&&!f){const{gridSize:I}=this.editor.getDocumentSettings();h.snapToGrid(I)}const m=this.info.handle,w=M9(m,Math.PI);if(this.editor.snaps.clearIndicators(),(this.editor.user.getIsSnapMode()?!f:f)&&c%Ge===0){const{nudge:I}=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:v.Sub(h,y),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:M9(m,c),isAspectRatioLocked:p,isResizingFromCenter:r});h.add(I)}const _=v.RotWith(r?o.center:o.getHandlePoint(w),o.point,c),x=v.Sub(h,_).rot(-c),C=v.Sub(y,_).rot(-c),k=v.DivV(x,C);Number.isFinite(k.x)||(k.x=1),Number.isFinite(k.y)||(k.y=1);const F=m==="top"||m==="bottom",P=m==="left"||m==="right";p?P?k.y=Math.abs(k.x):F?k.x=Math.abs(k.y):Math.abs(k.x)>Math.abs(k.y)?k.y=Math.abs(k.x)*(k.y<0?-1:1):k.x=Math.abs(k.y)*(k.x<0?-1:1):(F&&(k.x=1),P&&(k.y=1)),this.info.isCreating||this.updateCursor({dragHandle:m,isFlippedX:k.x<0,isFlippedY:k.y<0,rotation:c});for(const I of n.keys()){const j=n.get(I);this.editor.resizeShape(I,k,{initialShape:j.shape,initialBounds:j.bounds,initialPageTransform:j.pageTransform,dragHandle:m,mode:l.length===1&&I===l[0]?"resize_bounds":"scale_shape",scaleOrigin:_,isAspectRatioLocked:p,scaleAxisRotation:c,skipStartAndEndCallbacks:!0})}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;for(const{id:I,children:j}of s){if(!j.length)continue;const A=n.get(I).shape,D=this.editor.getShape(I);if(!(A&&D))continue;const z=D.x-A.x,T=D.y-A.y,M=new v(z,T).rot(-A.rotation);if(M.x!==0||M.y!==0)for(const L of j)this.editor.updateShape({id:L.id,type:L.type,x:L.x-M.x,y:L.y-M.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(const{children:I}of s)if(I.length)for(const j of I)this.editor.updateShape({id:j.id,type:j.type,x:j.x,y:j.y})}}updateCursor({dragHandle:r,isFlippedX:a,isFlippedY:s,rotation:n}){const o={...this.editor.getInstanceState().cursor};switch(r){case"top_left":case"bottom_right":{o.type="nwse-resize",a!==s&&(o.type="nesw-resize");break}case"top_right":case"bottom_left":{o.type="nesw-resize",a!==s&&(o.type="nwse-resize");break}}o.rotation=n,this.editor.setCursor(o)}}g(sF,"id","resizing");const w2=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function M9(e,t){t=t%Be;const r=Math.round(t/(Ce/4)),a=w2.indexOf(e);return w2[(a+r)%w2.length]}const B9=Math.PI/180;class nF extends se{constructor(){super(...arguments);g(this,"snapshot",{});g(this,"info",{});g(this,"markId","");g(this,"onEnter",r=>{this.info=r,this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.markId="rotate start",this.editor.mark(this.markId);const a=WS({editor:this.editor});if(!a)return this.parent.transition("idle",this.info);this.snapshot=a;const s=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Op({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:yl[this.info.handle],rotation:s+this.snapshot.initialSelectionRotation})});g(this,"onExit",()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}});g(this,"onPointerMove",()=>{this.update()});g(this,"onKeyDown",()=>{this.update()});g(this,"onKeyUp",()=>{this.update()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"update",()=>{const r=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Op({editor:this.editor,delta:r,snapshot:this.snapshot,stage:"update"}),this.editor.setCursor({type:yl[this.info.handle],rotation:r+this.snapshot.initialSelectionRotation})});g(this,"cancel",()=>{this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)});g(this,"complete",()=>{Op({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),We(this.editor,this.snapshot.shapeSnapshots.map(r=>r.shape.id)),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)})}_getRotationFromPointerPosition({snapToNearestDegree:r}){const a=this.editor.getSelectionRotation(),s=this.editor.getSelectionRotatedPageBounds(),{inputs:{shiftKey:n,currentPagePoint:o}}=this.editor,{initialCursorAngle:i,initialSelectionRotation:l}=this.snapshot;if(!s)return l;const d=s.center.clone().rotWith(s.point,a).angle(o)-i;let p=l+d;if(n)p=fh(p,24);else if(r&&(p=Math.round(p/B9)*B9,this.editor.getInstanceState().isCoarsePointer)){const f=fh(p,4),h=Bp(p,f);Math.abs(h)<o$(5)&&(p=f)}return p-l}}g(nF,"id","rotating");class oF extends se{constructor(){super(...arguments);g(this,"hits",new Set);g(this,"size",0);g(this,"scribbleId","id");g(this,"initialSelectedShapeIds",new Set);g(this,"newlySelectedShapeIds",new Set);g(this,"onEnter",()=>{this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const r=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=r.id,this.updateScribbleSelection(!0),this.editor.updateInstanceState({brush:null})});g(this,"onExit",()=>{this.editor.scribbles.stop(this.scribbleId)});g(this,"onPointerMove",()=>{this.updateScribbleSelection(!0)});g(this,"onPointerUp",()=>{this.complete()});g(this,"onKeyDown",()=>{this.updateScribbleSelection(!1)});g(this,"onKeyUp",()=>{this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")});g(this,"onCancel",()=>{this.cancel()});g(this,"onComplete",()=>{this.complete()});g(this,"pushPointToScribble",()=>{const{x:r,y:a}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,r,a)})}updateScribbleSelection(r){const{editor:a}=this,s=this.editor.getCurrentPageShapes(),{inputs:{shiftKey:n,originPagePoint:o,previousPagePoint:i,currentPagePoint:l}}=this.editor,{newlySelectedShapeIds:c,initialSelectedShapeIds:d}=this;r&&this.pushPointToScribble();const p=s;let f,h,y,m;const w=0;for(let x=0,C=p.length;x<C;x++){if(f=p[x],a.isShapeOfType(f,"group")||c.has(f.id)||a.isShapeOrAncestorLocked(f)||(h=a.getShapeGeometry(f),a.isShapeOfType(f,"frame")&&h.bounds.containsPoint(a.getPointInShapeSpace(f,o))))continue;const k=a.getShapePageTransform(f);if(!h||!k)continue;const F=k.clone().invert();y=F.applyToPoint(i),m=F.applyToPoint(l);const{bounds:P}=h;if(!(P.minX-w>Math.max(y.x,m.x)||P.minY-w>Math.max(y.y,m.y)||P.maxX+w<Math.min(y.x,m.x)||P.maxY+w<Math.min(y.y,m.y))&&h.hitTestLineSegment(y,m,w)){const I=this.editor.getOutermostSelectableShape(f),j=this.editor.getShapeMask(I.id);if(j&&t0(i,l,j)!==null&&!ta(l,j))continue;c.add(I.id)}}const b=a.getSelectedShapeIds(),_=new Set(n?[...c,...d]:[...c]);(b.length!==_.size||b.some(x=>!_.has(x)))&&this.editor.setSelectedShapes(Array.from(_))}complete(){this.updateScribbleSelection(!0),this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds]),this.parent.transition("idle")}}g(oF,"id","scribble_brushing");const KX=20,VX=100;class YX{constructor(t){g(this,"prevDroppingShapeId",null);g(this,"droppingNodeTimer",null);g(this,"first",!0);g(this,"dispose",()=>{this.clear()});this.editor=t,t.disposables.add(this.dispose)}updateDroppingNode(t,r){var a;this.first&&(this.editor.setHintingShapes(t.map(s=>this.editor.findShapeAncestor(s,n=>n.type!=="group")).filter(s=>s)),this.prevDroppingShapeId=((a=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,t))==null?void 0:a.id)??null,this.first=!1),this.droppingNodeTimer===null?this.setDragTimer(t,KX,r):this.editor.inputs.pointerVelocity.len()>.5&&(clearTimeout(this.droppingNodeTimer),this.setDragTimer(t,VX,r))}setDragTimer(t,r,a){this.droppingNodeTimer=this.editor.timers.setTimeout(()=>{this.editor.batch(()=>{this.handleDrag(this.editor.inputs.currentPagePoint,t,a)}),this.droppingNodeTimer=null},r)}handleDrag(t,r,a){var l,c,d,p,f;r=ge(r.map(h=>this.editor.getShape(h.id)));const s=((l=this.editor.getDroppingOverShape(t,r))==null?void 0:l.id)??null;if(s===this.prevDroppingShapeId){this.hintParents(r);return}const{prevDroppingShapeId:n}=this,o=n&&this.editor.getShape(n),i=s&&this.editor.getShape(s);o&&((d=(c=this.editor.getShapeUtil(o)).onDragShapesOut)==null||d.call(c,o,r)),i&&((f=(p=this.editor.getShapeUtil(i)).onDragShapesOver)==null||f.call(p,i,r)),this.hintParents(r),a==null||a(),this.prevDroppingShapeId=s}hintParents(t){const r=new Map;for(const s of t){const n=this.editor.findShapeAncestor(s,o=>o.type!=="group");n&&(r.has(n.id)||r.set(n.id,[]),r.get(n.id).push(s.id))}const a=[];for(const[s,n]of r){const o=this.editor.getShape(s);o&&fk(this.editor,o).length<n.length&&a.push(o.id)}this.editor.setHintingShapes(a)}dropShapes(t){var a,s;const{prevDroppingShapeId:r}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,t),r){const n=this.editor.getShape(r);if(!n)return;(s=(a=this.editor.getShapeUtil(n)).onDropShapesOver)==null||s.call(a,n,t)}}clear(){this.prevDroppingShapeId=null,this.droppingNodeTimer!==null&&clearTimeout(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}}class iF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"selectionSnapshot",{});g(this,"snapshot",{});g(this,"markId","");g(this,"isCloning",!1);g(this,"isCreating",!1);g(this,"onCreate",()=>{});g(this,"dragAndDropManager",new YX(this.editor));g(this,"onEnter",r=>{var n;const{isCreating:a=!1,onCreate:s=()=>{}}=r;if(!((n=this.editor.getSelectedShapeIds())!=null&&n.length)){this.parent.transition("idle");return}if(this.info=r,this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.isCreating=a,this.onCreate=s,a?this.markId=`creating:${this.editor.getOnlySelectedShape().id}`:(this.markId="translating",this.editor.mark(this.markId)),this.isCloning=!1,this.info=r,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=L9(this.editor),!this.isCreating&&this.editor.inputs.altKey){this.startCloning();return}this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()});g(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0}),this.dragAndDropManager.clear()});g(this,"onTick",()=>{this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),u0(this.editor)});g(this,"onPointerMove",()=>{this.updateShapes()});g(this,"onKeyDown",()=>{if(this.editor.inputs.altKey&&!this.isCloning){this.startCloning();return}this.updateShapes()});g(this,"onKeyUp",()=>{if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onComplete",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()});g(this,"updateParentTransforms",()=>{const{editor:r,snapshot:{shapeSnapshots:a}}=this;a.forEach(s=>{const n=r.getShape(s.shape.id);if(!n)return null;const o=Sr(n.parentId)?null:ae.Inverse(r.getShapePageTransform(n.parentId));s.parentTransform=o})})}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=L9(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){var r;this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),We(this.editor,this.snapshot.movingShapes.map(a=>a.id)),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.isCreating?(r=this.onCreate)==null||r.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:r}=this.snapshot,a=[];r.forEach(s=>{var i;const n=this.editor.getShapeUtil(s),o=(i=n.onTranslateStart)==null?void 0:i.call(n,s);o&&a.push(o)}),a.length>0&&this.editor.updateShapes(a),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:r}=this.snapshot;if(this.isCloning&&r.length>0){const s=v.Average(r.map(o=>this.editor.getShapePageTransform(o.id).point())),n=v.Sub(s,this.selectionSnapshot.averagePagePoint);v.IsNaN(n)||this.editor.updateInstanceState({duplicateProps:{shapeIds:r.map(o=>o.id),offset:{x:n.x,y:n.y}}})}const a=[];r.forEach(s=>{var l;const n=this.editor.getShape(s.id),o=this.editor.getShapeUtil(s),i=(l=o.onTranslateEnd)==null?void 0:l.call(o,s,n);i&&a.push(i)}),a.length>0&&this.editor.updateShapes(a)}updateShapes(){const{snapshot:r}=this;this.dragAndDropManager.updateDroppingNode(r.movingShapes,this.updateParentTransforms),XX({editor:this.editor,snapshot:r});const{movingShapes:a}=r,s=[];a.forEach(n=>{var c;const o=this.editor.getShape(n.id),i=this.editor.getShapeUtil(n),l=(c=i.onTranslate)==null?void 0:c.call(i,n,o);l&&s.push(l)}),s.length>0&&this.editor.updateShapes(s)}}g(iF,"id","translating");function L9(e){var p;const t=[],r=[],a=e.getSelectedShapeIds(),s=ge(a.map(f=>{const h=e.getShape(f);if(!h)return null;t.push(h);const y=e.getShapePageTransform(f),m=y.point(),w=y.rotation();r.push(m);const b=Vs.isId(h.parentId)?null:ae.Inverse(e.getShapePageTransform(h.parentId));return{shape:h,pagePoint:m,pageRotation:w,parentTransform:b}})),n=e.getOnlySelectedShape();let o=[];if(n)o=e.snaps.shapeBounds.getSnapPoints(n.id);else{const f=e.getSelectionPageBounds();f&&(o=f.cornersAndCenter.map((h,y)=>({id:"selection:"+y,x:h.x,y:h.y})))}let i,l;const{originPagePoint:c}=e.inputs,d=s.filter(f=>e.isShapeOfType(f.shape,"note")&&e.isPointInShape(f.shape,c));if(d.length!==0)if(d.length===1)l=d[0];else{const f=e.getCurrentPageShapesSorted();l=(p=d.map(h=>({snapshot:h,index:f.findIndex(y=>y.id===h.shape.id)})).sort((h,y)=>y.index-h.index)[0])==null?void 0:p.snapshot}return l&&(i=bk(e,l.pageRotation,l.shape.props.growY??0)),{averagePagePoint:v.Average(r),movingShapes:t,shapeSnapshots:s,initialPageBounds:e.getSelectionPageBounds(),initialSnapPoints:o,noteAdjacentPositions:i,noteSnapshot:l}}function XX({editor:e,snapshot:t}){const{inputs:r}=e,{noteSnapshot:a,noteAdjacentPositions:s,initialPageBounds:n,initialSnapPoints:o,shapeSnapshots:i,averagePagePoint:l}=t,c=e.getInstanceState().isGridMode,d=e.getDocumentSettings().gridSize,p=v.Sub(r.currentPagePoint,r.originPagePoint),f=e.inputs.shiftKey?Math.abs(p.x)<Math.abs(p.y)?"x":"y":null;if(f==="x"?p.x=0:f==="y"&&(p.y=0),e.snaps.clearIndicators(),(e.user.getIsSnapMode()?!r.ctrlKey:r.ctrlKey)&&e.inputs.pointerVelocity.len()<.5){const{nudge:w}=e.snaps.shapeBounds.snapTranslateShapes({dragDelta:p,initialSelectionPageBounds:n,lockedAxis:f,initialSelectionSnapPoints:o});p.add(w)}else if(a&&s){let w=gk/e.getZoomLevel(),b=new v(0,0);const _=v.Add(v.Add(a.pagePoint,p),new v(Pe/2,Pe/2).rot(a.pageRotation));for(const x of s){const C=v.Sub(_,x),k=C.len();k<w&&(w=k,b=C)}p.sub(b)}const y=v.Add(l,p);c&&!r.ctrlKey&&y.snapToGrid(d);const m=v.Sub(y,l);e.updateShapes(ge(i.map(({shape:w,pagePoint:b,parentTransform:_})=>{const x=v.Add(b,m),C=_?ae.applyToPoint(_,x):x;return{id:w.id,type:w.type,x:C.x,y:C.y}})))}class gf extends se{constructor(){super(...arguments);g(this,"reactor");g(this,"cleanUpDuplicateProps",()=>{const r=this.editor.getSelectedShapeIds(),a=this.editor.getInstanceState();if(!a.duplicateProps)return;const s=new Set(a.duplicateProps.shapeIds);r.length===s.size&&r.every(n=>s.has(n))||this.editor.updateInstanceState({duplicateProps:null})});g(this,"onEnter",()=>{this.reactor=Jo("clean duplicate props",()=>{try{this.cleanUpDuplicateProps()}catch(r){typeof process<"u",console.error(r)}})});g(this,"onExit",()=>{var r;(r=this.reactor)==null||r.call(this),this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)})}}g(gf,"id","select"),g(gf,"initial","idle"),g(gf,"children",()=>[hf,x0,UX,Qk,aF,iF,Wk,oF,k0,rF,Hk,Zk,sF,nF,tF,Jk,eF,Yk]);class lF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r});g(this,"onPointerDown",()=>{this.parent.transition("pointing",this.info)})}}g(lF,"id","idle");class cF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r});g(this,"onPointerUp",()=>{this.complete()});g(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)});g(this,"onCancel",()=>{this.cancel()})}complete(){const{currentScreenPoint:r}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(r,{animation:{duration:220}}):this.editor.zoomIn(r,{animation:{duration:220}}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}g(cF,"id","pointing");class dF extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"zoomBrush",new Z);g(this,"onEnter",r=>{this.info=r,this.update()});g(this,"onExit",()=>{this.editor.updateInstanceState({zoomBrush:null})});g(this,"onPointerMove",()=>{this.update()});g(this,"onPointerUp",()=>{this.complete()});g(this,"onCancel",()=>{this.cancel()})}update(){const{inputs:{originPagePoint:r,currentPagePoint:a}}=this.editor;this.zoomBrush.setTo(Z.FromPoints([r,a])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:r}=this,a=8/this.editor.getZoomLevel();if(r.width<a&&r.height<a){const s=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(s,{animation:{duration:220}}):this.editor.zoomIn(s,{animation:{duration:220}})}else{const s=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(r,{targetZoom:s,animation:{duration:220}})}this.parent.transition("idle",this.info)}}g(dF,"id","zoom_brushing");class mf extends se{constructor(){super(...arguments);g(this,"info",{});g(this,"onEnter",r=>{this.info=r,this.parent.setCurrentToolIdMask(r.onInteractionEnd),this.updateCursor()});g(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}}),this.parent.setCurrentToolIdMask(void 0)});g(this,"onKeyDown",()=>{this.updateCursor()});g(this,"onKeyUp",r=>{this.updateCursor(),r.code==="KeyZ"&&this.complete()});g(this,"onInterrupt",()=>{this.complete()})}complete(){this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select"?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}updateCursor(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out",rotation:0}):this.editor.setCursor({type:"zoom-in",rotation:0})}}g(mf,"id","zoom"),g(mf,"initial","idle"),g(mf,"children",()=>[lF,dF,cF]);const ZX=[uf,pf,ff,mf,gf];function re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function R9(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function wg(...e){return t=>{let r=!1;const a=e.map(s=>{const n=R9(s,t);return!r&&typeof n=="function"&&(r=!0),n});if(r)return()=>{for(let s=0;s<a.length;s++){const n=a[s];typeof n=="function"?n():R9(e[s],null)}}}}function $e(...e){return S.useCallback(wg(...e),e)}function JX(e,t){const r=S.createContext(t),a=n=>{const{children:o,...i}=n,l=S.useMemo(()=>i,Object.values(i));return u.jsx(r.Provider,{value:l,children:o})};a.displayName=e+"Provider";function s(n){const o=S.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}return[a,s]}function Ss(e,t=[]){let r=[];function a(n,o){const i=S.createContext(o),l=r.length;r=[...r,o];const c=p=>{var b;const{scope:f,children:h,...y}=p,m=((b=f==null?void 0:f[e])==null?void 0:b[l])||i,w=S.useMemo(()=>y,Object.values(y));return u.jsx(m.Provider,{value:w,children:h})};c.displayName=n+"Provider";function d(p,f){var m;const h=((m=f==null?void 0:f[e])==null?void 0:m[l])||i,y=S.useContext(h);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${n}\``)}return[c,d]}const s=()=>{const n=r.map(o=>S.createContext(o));return function(i){const l=(i==null?void 0:i[e])||n;return S.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return s.scopeName=e,[a,QX(s,...t)]}function QX(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(n){const o=a.reduce((i,{useScope:l,scopeName:c})=>{const p=l(n)[`__scope${c}`];return{...i,...p}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Xs=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},eZ=B7[" useId ".trim().toString()]||(()=>{}),tZ=0;function $s(e){const[t,r]=S.useState(eZ());return Xs(()=>{e||r(a=>a??String(tZ++))},[e]),e||(t?`radix-${t}`:"")}var rZ=B7[" useInsertionEffect ".trim().toString()]||Xs;function ao({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){const[s,n,o]=aZ({defaultProp:t,onChange:r}),i=e!==void 0,l=i?e:s;{const d=S.useRef(e!==void 0);S.useEffect(()=>{const p=d.current;p!==i&&console.warn(`${a} is changing from ${p?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,a])}const c=S.useCallback(d=>{var p;if(i){const f=sZ(d)?d(e):d;f!==e&&((p=o.current)==null||p.call(o,f))}else n(d)},[i,e,n,o]);return[l,c]}function aZ({defaultProp:e,onChange:t}){const[r,a]=S.useState(e),s=S.useRef(r),n=S.useRef(t);return rZ(()=>{n.current=t},[t]),S.useEffect(()=>{var o;s.current!==r&&((o=n.current)==null||o.call(n,r),s.current=r)},[r,s]),[r,a,n]}function sZ(e){return typeof e=="function"}function _l(e){const t=nZ(e),r=S.forwardRef((a,s)=>{const{children:n,...o}=a,i=S.Children.toArray(n),l=i.find(iZ);if(l){const c=l.props.children,d=i.map(p=>p===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:p);return u.jsx(t,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(t,{...o,ref:s,children:n})});return r.displayName=`${e}.Slot`,r}function nZ(e){const t=S.forwardRef((r,a)=>{const{children:s,...n}=r;if(S.isValidElement(s)){const o=cZ(s),i=lZ(n,s.props);return s.type!==S.Fragment&&(i.ref=a?wg(a,o):o),S.cloneElement(s,i)}return S.Children.count(s)>1?S.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var oZ=Symbol("radix.slottable");function iZ(e){return S.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===oZ}function lZ(e,t){const r={...t};for(const a in t){const s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...i)=>{const l=n(...i);return s(...i),l}:s&&(r[a]=s):a==="style"?r[a]={...s,...n}:a==="className"&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}function cZ(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var dZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=dZ.reduce((e,t)=>{const r=_l(`Primitive.${t}`),a=S.forwardRef((s,n)=>{const{asChild:o,...i}=s,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...i,ref:n})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function F0(e,t){e&&Fl.flushSync(()=>e.dispatchEvent(t))}function fr(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}function uZ(e,t=globalThis==null?void 0:globalThis.document){const r=fr(e);S.useEffect(()=>{const a=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var pZ="DismissableLayer",Wb="dismissableLayer.update",fZ="dismissableLayer.pointerDownOutside",hZ="dismissableLayer.focusOutside",O9,uF=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yd=S.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:n,onInteractOutside:o,onDismiss:i,...l}=e,c=S.useContext(uF),[d,p]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=S.useState({}),y=$e(t,P=>p(P)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(w),_=d?m.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,C=_>=b,k=mZ(P=>{const I=P.target,j=[...c.branches].some(A=>A.contains(I));!C||j||(s==null||s(P),o==null||o(P),P.defaultPrevented||i==null||i())},f),F=bZ(P=>{const I=P.target;[...c.branches].some(A=>A.contains(I))||(n==null||n(P),o==null||o(P),P.defaultPrevented||i==null||i())},f);return uZ(P=>{_===c.layers.size-1&&(a==null||a(P),!P.defaultPrevented&&i&&(P.preventDefault(),i()))},f),S.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(O9=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),z9(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=O9)}},[d,f,r,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),z9())},[d,c]),S.useEffect(()=>{const P=()=>h({});return document.addEventListener(Wb,P),()=>document.removeEventListener(Wb,P)},[]),u.jsx(we.div,{...l,ref:y,style:{pointerEvents:x?C?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,F.onFocusCapture),onBlurCapture:re(e.onBlurCapture,F.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,k.onPointerDownCapture)})});Yd.displayName=pZ;var gZ="DismissableLayerBranch",pF=S.forwardRef((e,t)=>{const r=S.useContext(uF),a=S.useRef(null),s=$e(t,a);return S.useEffect(()=>{const n=a.current;if(n)return r.branches.add(n),()=>{r.branches.delete(n)}},[r.branches]),u.jsx(we.div,{...e,ref:s})});pF.displayName=gZ;function mZ(e,t=globalThis==null?void 0:globalThis.document){const r=fr(e),a=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const n=i=>{if(i.target&&!a.current){let l=function(){fF(fZ,r,c,{discrete:!0})};const c={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",n)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",n),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function bZ(e,t=globalThis==null?void 0:globalThis.document){const r=fr(e),a=S.useRef(!1);return S.useEffect(()=>{const s=n=>{n.target&&!a.current&&fF(hZ,r,{originalEvent:n},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function z9(){const e=new CustomEvent(Wb);document.dispatchEvent(e)}function fF(e,t,r,{discrete:a}){const s=r.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),a?F0(s,n):s.dispatchEvent(n)}var yZ=Yd,_Z=pF,v2="focusScope.autoFocusOnMount",x2="focusScope.autoFocusOnUnmount",N9={bubbles:!1,cancelable:!0},wZ="FocusScope",vg=S.forwardRef((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:n,...o}=e,[i,l]=S.useState(null),c=fr(s),d=fr(n),p=S.useRef(null),f=$e(t,m=>l(m)),h=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(a){let m=function(x){if(h.paused||!i)return;const C=x.target;i.contains(C)?p.current=C:bn(p.current,{select:!0})},w=function(x){if(h.paused||!i)return;const C=x.relatedTarget;C!==null&&(i.contains(C)||bn(p.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const k of x)k.removedNodes.length>0&&bn(i)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const _=new MutationObserver(b);return i&&_.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),_.disconnect()}}},[a,i,h.paused]),S.useEffect(()=>{if(i){$9.add(h);const m=document.activeElement;if(!i.contains(m)){const b=new CustomEvent(v2,N9);i.addEventListener(v2,c),i.dispatchEvent(b),b.defaultPrevented||(vZ(CZ(hF(i)),{select:!0}),document.activeElement===m&&bn(i))}return()=>{i.removeEventListener(v2,c),setTimeout(()=>{const b=new CustomEvent(x2,N9);i.addEventListener(x2,d),i.dispatchEvent(b),b.defaultPrevented||bn(m??document.body,{select:!0}),i.removeEventListener(x2,d),$9.remove(h)},0)}}},[i,c,d,h]);const y=S.useCallback(m=>{if(!r&&!a||h.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(w&&b){const _=m.currentTarget,[x,C]=xZ(_);x&&C?!m.shiftKey&&b===C?(m.preventDefault(),r&&bn(x,{select:!0})):m.shiftKey&&b===x&&(m.preventDefault(),r&&bn(C,{select:!0})):b===_&&m.preventDefault()}},[r,a,h.paused]);return u.jsx(we.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});vg.displayName=wZ;function vZ(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(bn(a,{select:t}),document.activeElement!==r)return}function xZ(e){const t=hF(e),r=q9(t,e),a=q9(t.reverse(),e);return[r,a]}function hF(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function q9(e,t){for(const r of e)if(!SZ(r,{upTo:t}))return r}function SZ(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function kZ(e){return e instanceof HTMLInputElement&&"select"in e}function bn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&kZ(e)&&t&&e.select()}}var $9=FZ();function FZ(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=U9(e,t),e.unshift(t)},remove(t){var r;e=U9(e,t),(r=e[0])==null||r.resume()}}}function U9(e,t){const r=[...e],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function CZ(e){return e.filter(t=>t.tagName!=="A")}var PZ="Portal",Xd=S.forwardRef((e,t)=>{var i;const{container:r,...a}=e,[s,n]=S.useState(!1);Xs(()=>n(!0),[]);const o=r||s&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return o?GD.createPortal(u.jsx(we.div,{...a,ref:t}),o):null});Xd.displayName=PZ;function IZ(e,t){return S.useReducer((r,a)=>t[r][a]??r,e)}var Ka=e=>{const{present:t,children:r}=e,a=AZ(t),s=typeof r=="function"?r({present:a.isPresent}):S.Children.only(r),n=$e(a.ref,jZ(s));return typeof r=="function"||a.isPresent?S.cloneElement(s,{ref:n}):null};Ka.displayName="Presence";function AZ(e){const[t,r]=S.useState(),a=S.useRef(null),s=S.useRef(e),n=S.useRef("none"),o=e?"mounted":"unmounted",[i,l]=IZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=rp(a.current);n.current=i==="mounted"?c:"none"},[i]),Xs(()=>{const c=a.current,d=s.current;if(d!==e){const f=n.current,h=rp(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Xs(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,p=h=>{const m=rp(a.current).includes(h.animationName);if(h.target===t&&m&&(l("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=h=>{h.target===t&&(n.current=rp(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:S.useCallback(c=>{a.current=c?getComputedStyle(c):null,r(c)},[])}}function rp(e){return(e==null?void 0:e.animationName)||"none"}function jZ(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var S2=0;function C0(){S.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??W9()),document.body.insertAdjacentElement("beforeend",e[1]??W9()),S2++,()=>{S2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),S2--}},[])}function W9(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ss=function(){return ss=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ss.apply(this,arguments)};function gF(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function EZ(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,n;a<s;a++)(n||!(a in t))&&(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}var bf="right-scroll-bar-position",yf="width-before-scroll-bar",DZ="with-scroll-bars-hidden",TZ="--removed-body-scroll-bar-size";function k2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function MZ(e,t){var r=S.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(a){var s=r.value;s!==a&&(r.value=a,r.callback(a,s))}}}})[0];return r.callback=t,r.facade}var BZ=typeof window<"u"?S.useLayoutEffect:S.useEffect,H9=new WeakMap;function LZ(e,t){var r=MZ(t||null,function(a){return e.forEach(function(s){return k2(s,a)})});return BZ(function(){var a=H9.get(r);if(a){var s=new Set(a),n=new Set(e),o=r.current;s.forEach(function(i){n.has(i)||k2(i,null)}),n.forEach(function(i){s.has(i)||k2(i,o)})}H9.set(r,e)},[e]),r}function RZ(e){return e}function OZ(e,t){t===void 0&&(t=RZ);var r=[],a=!1,s={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(n){var o=t(n,a);return r.push(o),function(){r=r.filter(function(i){return i!==o})}},assignSyncMedium:function(n){for(a=!0;r.length;){var o=r;r=[],o.forEach(n)}r={push:function(i){return n(i)},filter:function(){return r}}},assignMedium:function(n){a=!0;var o=[];if(r.length){var i=r;r=[],i.forEach(n),o=r}var l=function(){var d=o;o=[],d.forEach(n)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),r}}}};return s}function zZ(e){e===void 0&&(e={});var t=OZ(null);return t.options=ss({async:!0,ssr:!1},e),t}var mF=function(e){var t=e.sideCar,r=gF(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return S.createElement(a,ss({},r))};mF.isSideCarExport=!0;function NZ(e,t){return e.useMedium(t),mF}var bF=zZ(),F2=function(){},xg=S.forwardRef(function(e,t){var r=S.useRef(null),a=S.useState({onScrollCapture:F2,onWheelCapture:F2,onTouchMoveCapture:F2}),s=a[0],n=a[1],o=e.forwardProps,i=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,p=e.shards,f=e.sideCar,h=e.noRelative,y=e.noIsolation,m=e.inert,w=e.allowPinchZoom,b=e.as,_=b===void 0?"div":b,x=e.gapMode,C=gF(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,F=LZ([r,t]),P=ss(ss({},C),s);return S.createElement(S.Fragment,null,d&&S.createElement(k,{sideCar:bF,removeScrollBar:c,shards:p,noRelative:h,noIsolation:y,inert:m,setCallbacks:n,allowPinchZoom:!!w,lockRef:r,gapMode:x}),o?S.cloneElement(S.Children.only(i),ss(ss({},P),{ref:F})):S.createElement(_,ss({},P,{className:l,ref:F}),i))});xg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xg.classNames={fullWidth:yf,zeroRight:bf};var G9,qZ=function(){if(G9)return G9;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $Z(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qZ();return t&&e.setAttribute("nonce",t),e}function UZ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function WZ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var HZ=function(){var e=0,t=null;return{add:function(r){e==0&&(t=$Z())&&(UZ(t,r),WZ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},GZ=function(){var e=HZ();return function(t,r){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},yF=function(){var e=GZ(),t=function(r){var a=r.styles,s=r.dynamic;return e(a,s),null};return t},KZ={left:0,top:0,right:0,gap:0},C2=function(e){return parseInt(e||"",10)||0},VZ=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[C2(r),C2(a),C2(s)]},YZ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return KZ;var t=VZ(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},XZ=yF(),rl="data-scroll-locked",ZZ=function(e,t,r,a){var s=e.left,n=e.top,o=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(DZ,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(i,"px ").concat(a,`;
  }
  body[`).concat(rl,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(n,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bf,` {
    right: `).concat(i,"px ").concat(a,`;
  }
  
  .`).concat(yf,` {
    margin-right: `).concat(i,"px ").concat(a,`;
  }
  
  .`).concat(bf," .").concat(bf,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(yf," .").concat(yf,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(rl,`] {
    `).concat(TZ,": ").concat(i,`px;
  }
`)},K9=function(){var e=parseInt(document.body.getAttribute(rl)||"0",10);return isFinite(e)?e:0},JZ=function(){S.useEffect(function(){return document.body.setAttribute(rl,(K9()+1).toString()),function(){var e=K9()-1;e<=0?document.body.removeAttribute(rl):document.body.setAttribute(rl,e.toString())}},[])},QZ=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,s=a===void 0?"margin":a;JZ();var n=S.useMemo(function(){return YZ(s)},[s]);return S.createElement(XZ,{styles:ZZ(n,!t,s,r?"":"!important")})},Hb=!1;if(typeof window<"u")try{var ap=Object.defineProperty({},"passive",{get:function(){return Hb=!0,!0}});window.addEventListener("test",ap,ap),window.removeEventListener("test",ap,ap)}catch{Hb=!1}var pi=Hb?{passive:!1}:!1,eJ=function(e){return e.tagName==="TEXTAREA"},_F=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!eJ(e)&&r[t]==="visible")},tJ=function(e){return _F(e,"overflowY")},rJ=function(e){return _F(e,"overflowX")},V9=function(e,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var s=wF(e,a);if(s){var n=vF(e,a),o=n[1],i=n[2];if(o>i)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},aJ=function(e){var t=e.scrollTop,r=e.scrollHeight,a=e.clientHeight;return[t,r,a]},sJ=function(e){var t=e.scrollLeft,r=e.scrollWidth,a=e.clientWidth;return[t,r,a]},wF=function(e,t){return e==="v"?tJ(t):rJ(t)},vF=function(e,t){return e==="v"?aJ(t):sJ(t)},nJ=function(e,t){return e==="h"&&t==="rtl"?-1:1},oJ=function(e,t,r,a,s){var n=nJ(e,window.getComputedStyle(t).direction),o=n*a,i=r.target,l=t.contains(i),c=!1,d=o>0,p=0,f=0;do{if(!i)break;var h=vF(e,i),y=h[0],m=h[1],w=h[2],b=m-w-n*y;(y||b)&&wF(e,i)&&(p+=b,f+=y);var _=i.parentNode;i=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!l&&i!==document.body||l&&(t.contains(i)||t===i));return(d&&(s&&Math.abs(p)<1||!s&&o>p)||!d&&(s&&Math.abs(f)<1||!s&&-o>f))&&(c=!0),c},sp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Y9=function(e){return[e.deltaX,e.deltaY]},X9=function(e){return e&&"current"in e?e.current:e},iJ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lJ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cJ=0,fi=[];function dJ(e){var t=S.useRef([]),r=S.useRef([0,0]),a=S.useRef(),s=S.useState(cJ++)[0],n=S.useState(yF)[0],o=S.useRef(e);S.useEffect(function(){o.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=EZ([e.lockRef.current],(e.shards||[]).map(X9),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=S.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=sp(m),_=r.current,x="deltaX"in m?m.deltaX:_[0]-b[0],C="deltaY"in m?m.deltaY:_[1]-b[1],k,F=m.target,P=Math.abs(x)>Math.abs(C)?"h":"v";if("touches"in m&&P==="h"&&F.type==="range")return!1;var I=V9(P,F);if(!I)return!0;if(I?k=P:(k=P==="v"?"h":"v",I=V9(P,F)),!I)return!1;if(!a.current&&"changedTouches"in m&&(x||C)&&(a.current=k),!k)return!0;var j=a.current||k;return oJ(j,w,m,j==="h"?x:C,!0)},[]),l=S.useCallback(function(m){var w=m;if(!(!fi.length||fi[fi.length-1]!==n)){var b="deltaY"in w?Y9(w):sp(w),_=t.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&iJ(k.delta,b)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var x=(o.current.shards||[]).map(X9).filter(Boolean).filter(function(k){return k.contains(w.target)}),C=x.length>0?i(w,x[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=S.useCallback(function(m,w,b,_){var x={name:m,delta:w,target:b,should:_,shadowParent:uJ(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(C){return C!==x})},1)},[]),d=S.useCallback(function(m){r.current=sp(m),a.current=void 0},[]),p=S.useCallback(function(m){c(m.type,Y9(m),m.target,i(m,e.lockRef.current))},[]),f=S.useCallback(function(m){c(m.type,sp(m),m.target,i(m,e.lockRef.current))},[]);S.useEffect(function(){return fi.push(n),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:f}),document.addEventListener("wheel",l,pi),document.addEventListener("touchmove",l,pi),document.addEventListener("touchstart",d,pi),function(){fi=fi.filter(function(m){return m!==n}),document.removeEventListener("wheel",l,pi),document.removeEventListener("touchmove",l,pi),document.removeEventListener("touchstart",d,pi)}},[]);var h=e.removeScrollBar,y=e.inert;return S.createElement(S.Fragment,null,y?S.createElement(n,{styles:lJ(s)}):null,h?S.createElement(QZ,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function uJ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pJ=NZ(bF,dJ);var xF=S.forwardRef(function(e,t){return S.createElement(xg,ss({},e,{ref:t,sideCar:pJ}))});xF.classNames=xg.classNames;const P0=xF;var fJ=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},hi=new WeakMap,np=new WeakMap,op={},P2=0,SF=function(e){return e&&(e.host||SF(e.parentNode))},hJ=function(e,t){return t.map(function(r){if(e.contains(r))return r;var a=SF(r);return a&&e.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},gJ=function(e,t,r,a){var s=hJ(t,Array.isArray(e)?e:[e]);op[r]||(op[r]=new WeakMap);var n=op[r],o=[],i=new Set,l=new Set(s),c=function(p){!p||i.has(p)||(i.add(p),c(p.parentNode))};s.forEach(c);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(f){if(i.has(f))d(f);else try{var h=f.getAttribute(a),y=h!==null&&h!=="false",m=(hi.get(f)||0)+1,w=(n.get(f)||0)+1;hi.set(f,m),n.set(f,w),o.push(f),m===1&&y&&np.set(f,!0),w===1&&f.setAttribute(r,"true"),y||f.setAttribute(a,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return d(t),i.clear(),P2++,function(){o.forEach(function(p){var f=hi.get(p)-1,h=n.get(p)-1;hi.set(p,f),n.set(p,h),f||(np.has(p)||p.removeAttribute(a),np.delete(p)),h||p.removeAttribute(r)}),P2--,P2||(hi=new WeakMap,hi=new WeakMap,np=new WeakMap,op={})}},I0=function(e,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),s=t||fJ(e);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live], script"))),gJ(a,s,r,"aria-hidden")):function(){return null}},Sg="Dialog",[kF,kie]=Ss(Sg),[mJ,Va]=kF(Sg),FF=e=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:s,onOpenChange:n,modal:o=!0}=e,i=S.useRef(null),l=S.useRef(null),[c,d]=ao({prop:a,defaultProp:s??!1,onChange:n,caller:Sg});return u.jsx(mJ,{scope:t,triggerRef:i,contentRef:l,contentId:$s(),titleId:$s(),descriptionId:$s(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(p=>!p),[d]),modal:o,children:r})};FF.displayName=Sg;var CF="DialogTrigger",bJ=S.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Va(CF,r),n=$e(t,s.triggerRef);return u.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":E0(s.open),...a,ref:n,onClick:re(e.onClick,s.onOpenToggle)})});bJ.displayName=CF;var A0="DialogPortal",[yJ,PF]=kF(A0,{forceMount:void 0}),IF=e=>{const{__scopeDialog:t,forceMount:r,children:a,container:s}=e,n=Va(A0,t);return u.jsx(yJ,{scope:t,forceMount:r,children:S.Children.map(a,o=>u.jsx(Ka,{present:r||n.open,children:u.jsx(Xd,{asChild:!0,container:s,children:o})}))})};IF.displayName=A0;var Ph="DialogOverlay",AF=S.forwardRef((e,t)=>{const r=PF(Ph,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,n=Va(Ph,e.__scopeDialog);return n.modal?u.jsx(Ka,{present:a||n.open,children:u.jsx(wJ,{...s,ref:t})}):null});AF.displayName=Ph;var _J=_l("DialogOverlay.RemoveScroll"),wJ=S.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Va(Ph,r);return u.jsx(P0,{as:_J,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(we.div,{"data-state":E0(s.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Uo="DialogContent",jF=S.forwardRef((e,t)=>{const r=PF(Uo,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,n=Va(Uo,e.__scopeDialog);return u.jsx(Ka,{present:a||n.open,children:n.modal?u.jsx(vJ,{...s,ref:t}):u.jsx(xJ,{...s,ref:t})})});jF.displayName=Uo;var vJ=S.forwardRef((e,t)=>{const r=Va(Uo,e.__scopeDialog),a=S.useRef(null),s=$e(t,r.contentRef,a);return S.useEffect(()=>{const n=a.current;if(n)return I0(n)},[]),u.jsx(EF,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,n=>{var o;n.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,n=>{const o=n.detail.originalEvent,i=o.button===0&&o.ctrlKey===!0;(o.button===2||i)&&n.preventDefault()}),onFocusOutside:re(e.onFocusOutside,n=>n.preventDefault())})}),xJ=S.forwardRef((e,t)=>{const r=Va(Uo,e.__scopeDialog),a=S.useRef(!1),s=S.useRef(!1);return u.jsx(EF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var o,i;(o=e.onCloseAutoFocus)==null||o.call(e,n),n.defaultPrevented||(a.current||(i=r.triggerRef.current)==null||i.focus(),n.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:n=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=n.target;((c=r.triggerRef.current)==null?void 0:c.contains(o))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&s.current&&n.preventDefault()}})}),EF=S.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:n,...o}=e,i=Va(Uo,r),l=S.useRef(null),c=$e(t,l);return C0(),u.jsxs(u.Fragment,{children:[u.jsx(vg,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:n,children:u.jsx(Yd,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":E0(i.open),...o,ref:c,onDismiss:()=>i.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(kJ,{titleId:i.titleId}),u.jsx(CJ,{contentRef:l,descriptionId:i.descriptionId})]})]})}),j0="DialogTitle",DF=S.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Va(j0,r);return u.jsx(we.h2,{id:s.titleId,...a,ref:t})});DF.displayName=j0;var TF="DialogDescription",SJ=S.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Va(TF,r);return u.jsx(we.p,{id:s.descriptionId,...a,ref:t})});SJ.displayName=TF;var MF="DialogClose",BF=S.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Va(MF,r);return u.jsx(we.button,{type:"button",...a,ref:t,onClick:re(e.onClick,()=>s.onOpenChange(!1))})});BF.displayName=MF;function E0(e){return e?"open":"closed"}var LF="DialogTitleWarning",[Fie,RF]=JX(LF,{contentName:Uo,titleName:j0,docsSlug:"dialog"}),kJ=({titleId:e})=>{const t=RF(LF),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return S.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},FJ="DialogDescriptionWarning",CJ=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RF(FJ).contentName}}.`;return S.useEffect(()=>{var n;const s=(n=e.current)==null?void 0:n.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},PJ=FF,IJ=IF,AJ=AF,jJ=jF;const OF=()=>{},zF=S.createContext(null);function EJ({onEvent:e,children:t}){return u.jsx(zF.Provider,{value:e??OF,children:t})}function ks(){return S.useContext(zF)??OF}const NF=S.createContext(null);function DJ({children:e}){const t=N(),r=ks(),[a,s]=S.useState([]),n=S.useCallback(c=>{const d=c.id??rt();return s(p=>[...p.filter(f=>f.id!==c.id),{...c,id:d}]),r("open-menu",{source:"dialog",id:d}),t.addOpenMenu(d),d},[t,r]),o=S.useCallback((c,d)=>(s(p=>p.map(f=>f.id===c?{...f,...d}:f)),r("open-menu",{source:"dialog",id:c}),t.addOpenMenu(c),c),[t,r]),i=S.useCallback(c=>(s(d=>d.filter(p=>{var f;return p.id===c?((f=p.onClose)==null||f.call(p),!1):!0})),r("close-menu",{source:"dialog",id:c}),t.deleteOpenMenu(c),c),[t,r]),l=S.useCallback(()=>{s(c=>(c.forEach(d=>{var p;(p=d.onClose)==null||p.call(d),r("close-menu",{source:"dialog",id:d.id}),t.deleteOpenMenu(d.id)}),[]))},[t,r]);return u.jsx(NF.Provider,{value:{dialogs:a,addDialog:n,removeDialog:i,clearDialogs:l,updateDialog:o},children:e})}function Qo(){const e=S.useContext(NF);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}const TJ=({id:e,component:t,onClose:r})=>{const{removeDialog:a}=Qo(),s=or(),n=S.useCallback(o=>{if(!o){if(r)try{r()}catch(i){console.warn(i)}a(e)}},[e,r,a]);return u.jsx(PJ,{onOpenChange:n,defaultOpen:!0,children:u.jsx(IJ,{container:s,children:u.jsx(AJ,{dir:"ltr",className:"tlui-dialog__overlay",onClick:o=>{o.target===o.currentTarget&&n(!1)},children:u.jsx(jJ,{dir:"ltr",className:"tlui-dialog__content",children:u.jsx(t,{onClose:()=>n(!1)})})})})})};function MJ(){const{dialogs:e}=Qo();return u.jsx(u.Fragment,{children:e.map(t=>u.jsx(TJ,{...t},t.id))})}const BJ=_e.memo(MJ);function LJ(){const e=N(),t=H("follow",()=>e.getInstanceState().followingUserId,[e]);return t?u.jsx(RJ,{userId:t}):null}function RJ({userId:e}){const t=vS(e);return t?u.jsx("div",{className:"tlui-following-indicator",style:{borderColor:t.color}}):null}function kg(e){const t=e+"CollectionProvider",[r,a]=Ss(t),[s,n]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:w,children:b}=m,_=_e.useRef(null),x=_e.useRef(new Map).current;return u.jsx(s,{scope:w,itemMap:x,collectionRef:_,children:b})};o.displayName=t;const i=e+"CollectionSlot",l=_l(i),c=_e.forwardRef((m,w)=>{const{scope:b,children:_}=m,x=n(i,b),C=$e(w,x.collectionRef);return u.jsx(l,{ref:C,children:_})});c.displayName=i;const d=e+"CollectionItemSlot",p="data-radix-collection-item",f=_l(d),h=_e.forwardRef((m,w)=>{const{scope:b,children:_,...x}=m,C=_e.useRef(null),k=$e(w,C),F=n(d,b);return _e.useEffect(()=>(F.itemMap.set(C,{ref:C,...x}),()=>void F.itemMap.delete(C))),u.jsx(f,{[p]:"",ref:k,children:_})});h.displayName=d;function y(m){const w=n(e+"CollectionConsumer",m);return _e.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const x=Array.from(_.querySelectorAll(`[${p}]`));return Array.from(w.itemMap.values()).sort((F,P)=>x.indexOf(F.ref.current)-x.indexOf(P.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},y,a]}var OJ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zJ="VisuallyHidden",D0=S.forwardRef((e,t)=>u.jsx(we.span,{...e,ref:t,style:{...OJ,...e.style}}));D0.displayName=zJ;var T0="ToastProvider",[M0,NJ,qJ]=kg("Toast"),[qF,Cie]=Ss("Toast",[qJ]),[$J,Fg]=qF(T0),$F=e=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:n=50,children:o}=e,[i,l]=S.useState(null),[c,d]=S.useState(0),p=S.useRef(!1),f=S.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${T0}\`. Expected non-empty \`string\`.`),u.jsx(M0.Provider,{scope:t,children:u.jsx($J,{scope:t,label:r,duration:a,swipeDirection:s,swipeThreshold:n,toastCount:c,viewport:i,onViewportChange:l,onToastAdd:S.useCallback(()=>d(h=>h+1),[]),onToastRemove:S.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:f,children:o})})};$F.displayName=T0;var UF="ToastViewport",UJ=["F8"],Gb="toast.viewportPause",Kb="toast.viewportResume",WF=S.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:a=UJ,label:s="Notifications ({hotkey})",...n}=e,o=Fg(UF,r),i=NJ(r),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),p=S.useRef(null),f=$e(t,p,o.onViewportChange),h=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;S.useEffect(()=>{const w=b=>{var x;a.length!==0&&a.every(C=>b[C]||b.code===C)&&((x=p.current)==null||x.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[a]),S.useEffect(()=>{const w=l.current,b=p.current;if(y&&w&&b){const _=()=>{if(!o.isClosePausedRef.current){const F=new CustomEvent(Gb);b.dispatchEvent(F),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const F=new CustomEvent(Kb);b.dispatchEvent(F),o.isClosePausedRef.current=!1}},C=F=>{!w.contains(F.relatedTarget)&&x()},k=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",_),w.addEventListener("focusout",C),w.addEventListener("pointermove",_),w.addEventListener("pointerleave",k),window.addEventListener("blur",_),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",_),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",_),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",_),window.removeEventListener("focus",x)}}},[y,o.isClosePausedRef]);const m=S.useCallback(({tabbingDirection:w})=>{const _=i().map(x=>{const C=x.ref.current,k=[C,...rQ(C)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?_.reverse():_).flat()},[i]);return S.useEffect(()=>{const w=p.current;if(w){const b=_=>{var k,F,P;const x=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!x){const I=document.activeElement,j=_.shiftKey;if(_.target===w&&j){(k=c.current)==null||k.focus();return}const z=m({tabbingDirection:j?"backwards":"forwards"}),T=z.findIndex(M=>M===I);I2(z.slice(T+1))?_.preventDefault():j?(F=c.current)==null||F.focus():(P=d.current)==null||P.focus()}};return w.addEventListener("keydown",b),()=>w.removeEventListener("keydown",b)}},[i,m]),u.jsxs(_Z,{ref:l,role:"region","aria-label":s.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&u.jsx(Vb,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});I2(w)}}),u.jsx(M0.Slot,{scope:r,children:u.jsx(we.ol,{tabIndex:-1,...n,ref:f})}),y&&u.jsx(Vb,{ref:d,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});I2(w)}})]})});WF.displayName=UF;var HF="ToastFocusProxy",Vb=S.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...s}=e,n=Fg(HF,r);return u.jsx(D0,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var c;const i=o.relatedTarget;!((c=n.viewport)!=null&&c.contains(i))&&a()}})});Vb.displayName=HF;var Zd="Toast",WJ="toast.swipeStart",HJ="toast.swipeMove",GJ="toast.swipeCancel",KJ="toast.swipeEnd",GF=S.forwardRef((e,t)=>{const{forceMount:r,open:a,defaultOpen:s,onOpenChange:n,...o}=e,[i,l]=ao({prop:a,defaultProp:s??!0,onChange:n,caller:Zd});return u.jsx(Ka,{present:r||i,children:u.jsx(XJ,{open:i,...o,ref:t,onClose:()=>l(!1),onPause:fr(e.onPause),onResume:fr(e.onResume),onSwipeStart:re(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:re(e.onSwipeMove,c=>{const{x:d,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:re(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:re(e.onSwipeEnd,c=>{const{x:d,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})})});GF.displayName=Zd;var[VJ,YJ]=qF(Zd,{onClose(){}}),XJ=S.forwardRef((e,t)=>{const{__scopeToast:r,type:a="foreground",duration:s,open:n,onClose:o,onEscapeKeyDown:i,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:f,onSwipeEnd:h,...y}=e,m=Fg(Zd,r),[w,b]=S.useState(null),_=$e(t,M=>b(M)),x=S.useRef(null),C=S.useRef(null),k=s||m.duration,F=S.useRef(0),P=S.useRef(k),I=S.useRef(0),{onToastAdd:j,onToastRemove:A}=m,D=fr(()=>{var L;(w==null?void 0:w.contains(document.activeElement))&&((L=m.viewport)==null||L.focus()),o()}),z=S.useCallback(M=>{!M||M===1/0||(window.clearTimeout(I.current),F.current=new Date().getTime(),I.current=window.setTimeout(D,M))},[D]);S.useEffect(()=>{const M=m.viewport;if(M){const L=()=>{z(P.current),c==null||c()},G=()=>{const W=new Date().getTime()-F.current;P.current=P.current-W,window.clearTimeout(I.current),l==null||l()};return M.addEventListener(Gb,G),M.addEventListener(Kb,L),()=>{M.removeEventListener(Gb,G),M.removeEventListener(Kb,L)}}},[m.viewport,k,l,c,z]),S.useEffect(()=>{n&&!m.isClosePausedRef.current&&z(k)},[n,k,m.isClosePausedRef,z]),S.useEffect(()=>(j(),()=>A()),[j,A]);const T=S.useMemo(()=>w?QF(w):null,[w]);return m.viewport?u.jsxs(u.Fragment,{children:[T&&u.jsx(ZJ,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:T}),u.jsx(VJ,{scope:r,onClose:D,children:Fl.createPortal(u.jsx(M0.ItemSlot,{scope:r,children:u.jsx(yZ,{asChild:!0,onEscapeKeyDown:re(i,()=>{m.isFocusedToastEscapeKeyDownRef.current||D(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":n?"open":"closed","data-swipe-direction":m.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:re(e.onKeyDown,M=>{M.key==="Escape"&&(i==null||i(M.nativeEvent),M.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:re(e.onPointerDown,M=>{M.button===0&&(x.current={x:M.clientX,y:M.clientY})}),onPointerMove:re(e.onPointerMove,M=>{if(!x.current)return;const L=M.clientX-x.current.x,G=M.clientY-x.current.y,W=!!C.current,O=["left","right"].includes(m.swipeDirection),$=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,U=O?$(0,L):0,X=O?0:$(0,G),ne=M.pointerType==="touch"?10:2,Ae={x:U,y:X},je={originalEvent:M,delta:Ae};W?(C.current=Ae,ip(HJ,p,je,{discrete:!1})):Z9(Ae,m.swipeDirection,ne)?(C.current=Ae,ip(WJ,d,je,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(L)>ne||Math.abs(G)>ne)&&(x.current=null)}),onPointerUp:re(e.onPointerUp,M=>{const L=C.current,G=M.target;if(G.hasPointerCapture(M.pointerId)&&G.releasePointerCapture(M.pointerId),C.current=null,x.current=null,L){const W=M.currentTarget,O={originalEvent:M,delta:L};Z9(L,m.swipeDirection,m.swipeThreshold)?ip(KJ,h,O,{discrete:!0}):ip(GJ,f,O,{discrete:!0}),W.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),ZJ=e=>{const{__scopeToast:t,children:r,...a}=e,s=Fg(Zd,t),[n,o]=S.useState(!1),[i,l]=S.useState(!1);return eQ(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),i?null:u.jsx(Xd,{asChild:!0,children:u.jsx(D0,{...a,children:n&&u.jsxs(u.Fragment,{children:[s.label," ",r]})})})},JJ="ToastTitle",KF=S.forwardRef((e,t)=>{const{__scopeToast:r,...a}=e;return u.jsx(we.div,{...a,ref:t})});KF.displayName=JJ;var QJ="ToastDescription",VF=S.forwardRef((e,t)=>{const{__scopeToast:r,...a}=e;return u.jsx(we.div,{...a,ref:t})});VF.displayName=QJ;var YF="ToastAction",XF=S.forwardRef((e,t)=>{const{altText:r,...a}=e;return r.trim()?u.jsx(JF,{altText:r,asChild:!0,children:u.jsx(B0,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${YF}\`. Expected non-empty \`string\`.`),null)});XF.displayName=YF;var ZF="ToastClose",B0=S.forwardRef((e,t)=>{const{__scopeToast:r,...a}=e,s=YJ(ZF,r);return u.jsx(JF,{asChild:!0,children:u.jsx(we.button,{type:"button",...a,ref:t,onClick:re(e.onClick,s.onClose)})})});B0.displayName=ZF;var JF=S.forwardRef((e,t)=>{const{__scopeToast:r,altText:a,...s}=e;return u.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...s,ref:t})});function QF(e){const t=[];return Array.from(e.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),tQ(a)){const s=a.ariaHidden||a.hidden||a.style.display==="none",n=a.dataset.radixToastAnnounceExclude==="";if(!s)if(n){const o=a.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...QF(a))}}),t}function ip(e,t,r,{discrete:a}){const s=r.originalEvent.currentTarget,n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),a?F0(s,n):s.dispatchEvent(n)}var Z9=(e,t,r=0)=>{const a=Math.abs(e.x),s=Math.abs(e.y),n=a>s;return t==="left"||t==="right"?n&&a>r:!n&&s>r};function eQ(e=()=>{}){const t=fr(e);Xs(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function tQ(e){return e.nodeType===e.ELEMENT_NODE}function rQ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function I2(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var aQ=GF,sQ=KF,nQ=VF,oQ=XF,J9=B0;const eC=S.createContext(null);function iQ({children:e}){const[t,r]=S.useState([]),a=S.useCallback(o=>{const i=o.id??rt();return r(l=>[...l.filter(c=>c.id!==o.id),{...o,id:i}]),i},[]),s=S.useCallback(o=>(r(i=>i.filter(l=>l.id!==o)),o),[]),n=S.useCallback(()=>{r(()=>[])},[]);return u.jsx($F,{children:u.jsx(eC.Provider,{value:{toasts:t,addToast:a,removeToast:s,clearToasts:n},children:e})})}function Ya(){const e=S.useContext(eC);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}const de=S.forwardRef(function({children:t,disabled:r,type:a,...s},n){return u.jsx("button",{ref:n,type:"button",draggable:!1,disabled:r,...s,className:le("tlui-button",`tlui-button__${a}`,s.className),children:t})});function xt({children:e}){return u.jsx("span",{className:"tlui-button__label",children:e})}const Gn=S.memo(function({small:t,invertIcon:r,icon:a,color:s,className:n,...o}){const i=v0(),l=i.icons[a]??i.icons["question-mark-circle"],c=S.useRef(null);return S.useLayoutEffect(()=>{l||console.error(`Icon not found: ${a}. Add it to the assetUrls.icons object.`),c!=null&&c.current&&(c.current.style.webkitMask=`url(${l}) center 100% / 100% no-repeat`)},[c,l,a]),a==="none"?u.jsx("div",{className:le("tlui-icon tlui-icon__placeholder",{"tlui-icon__small":t},n)}):u.jsx("div",{...o,ref:c,className:le("tlui-icon",{"tlui-icon__small":t},n),style:{color:s,mask:`url(${l}) center 100% / 100% no-repeat`,transform:r?"scale(-1, 1)":void 0}})}),lQ={success:"check-circle",warning:"warning-triangle",error:"cross-circle",info:"info-circle"};function cQ({toast:e}){const{removeToast:t}=Ya(),r=Ie(),a=o=>{o||t(e.id)},s=e.actions&&e.actions.length>0,n=e.icon||e.severity&&lQ[e.severity];return u.jsxs(aQ,{onOpenChange:a,className:"tlui-toast__container",duration:e.keepOpen?1/0:5e3,"data-severity":e.severity,children:[n&&u.jsx("div",{className:"tlui-toast__icon",children:u.jsx(Gn,{icon:n})}),u.jsxs("div",{className:"tlui-toast__main",children:[u.jsxs("div",{className:"tlui-toast__content",children:[e.title&&u.jsx(sQ,{className:"tlui-toast__title",children:e.title}),e.description&&u.jsx(nQ,{className:"tlui-toast__description",children:e.description})]}),e.actions&&u.jsxs("div",{className:"tlui-toast__actions",children:[e.actions.map((o,i)=>u.jsx(oQ,{altText:o.label,asChild:!0,onClick:o.onClick,children:u.jsx(de,{type:o.type,children:u.jsx(xt,{children:o.label})})},i)),u.jsx(J9,{asChild:!0,children:u.jsx(de,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:u.jsx(xt,{children:e.closeLabel??r("toast.close")})})})]})]}),!s&&u.jsx(J9,{asChild:!0,children:u.jsx(de,{type:"normal",className:"tlui-toast__close",children:u.jsx(xt,{children:e.closeLabel??r("toast.close")})})})]})}function dQ(){const{toasts:e}=Ya();return u.jsx(u.Fragment,{children:e.map(t=>u.jsx(cQ,{toast:t},t.id))})}const uQ=S.memo(dQ);function pQ(){const e=N(),{toasts:t}=Ya(),[r,a]=S.useState(!1);return S.useEffect(()=>{let s=-1;return t.length?a(!0):s=e.timers.setTimeout(()=>{a(!1)},1e3),()=>{clearTimeout(s)}},[t.length,a,e]),r?u.jsx(WF,{className:"tlui-toast__viewport"}):null}function ve({icon:e,small:t,invertIcon:r}){return u.jsx(Gn,{className:"tlui-button__icon",icon:e,small:t,invertIcon:r})}const A2=[0,390,428,468,580,640,840,1023];var bt=(e=>(e[e.ZERO=0]="ZERO",e[e.MOBILE_XXS=1]="MOBILE_XXS",e[e.MOBILE_XS=2]="MOBILE_XS",e[e.MOBILE_SM=3]="MOBILE_SM",e[e.MOBILE=4]="MOBILE",e[e.TABLET_SM=5]="TABLET_SM",e[e.TABLET=6]="TABLET",e[e.DESKTOP=7]="DESKTOP",e))(bt||{});const ko="2.2.1";let Yb={fonts:{draw:`https://unpkg.com/@tldraw/assets@${ko}/fonts/Shantell_Sans-Tldrawish.woff2`,serif:`https://unpkg.com/@tldraw/assets@${ko}/fonts/IBMPlexSerif-Medium.woff2`,sansSerif:`https://unpkg.com/@tldraw/assets@${ko}/fonts/IBMPlexSans-Medium.woff2`,monospace:`https://unpkg.com/@tldraw/assets@${ko}/fonts/IBMPlexMono-Medium.woff2`}};function tC(e){return S.useMemo(()=>e?{fonts:{...Yb.fonts,...e==null?void 0:e.fonts}}:Yb,[e])}const fQ=["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","blob","bring-forward","bring-to-front","broken","check-circle","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","color","cross-2","cross-circle","dash-dashed","dash-dotted","dash-draw","dash-solid","disconnected","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-heart","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","horizontal-align-end","horizontal-align-middle","horizontal-align-start","info-circle","leading","link","lock","menu","minus","mixed","pack","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","send-backward","send-to-back","share-1","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-left","text-align-right","toggle-off","toggle-on","tool-arrow","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-screenshot","tool-text","trash","twitter","undo","ungroup","unlock","vertical-align-end","vertical-align-middle","vertical-align-start","warning-triangle","zoom-in","zoom-out"];let lc={...Yb,icons:Object.fromEntries(fQ.map(e=>[e,`https://unpkg.com/@tldraw/assets@${ko}/icons/icon/${e}.svg`])),translations:Object.fromEntries(fd.map(e=>[e.locale,`https://unpkg.com/@tldraw/assets@${ko}/translations/${e.locale}.json`])),embedIcons:Object.fromEntries(Nd.map(e=>[e.type,`https://unpkg.com/@tldraw/assets@${ko}/embed-icons/${e.type}.png`]))};function hQ(e){return e?{fonts:Object.assign({...lc.fonts},{...e==null?void 0:e.fonts}),icons:Object.assign({...lc.icons},{...e==null?void 0:e.icons}),embedIcons:Object.assign({...lc.embedIcons},{...e==null?void 0:e.embedIcons}),translations:Object.assign({...lc.translations},{...e==null?void 0:e.translations})}:lc}function Cg({className:e,children:t}){return u.jsx("div",{className:le("tlui-dialog__header",e),children:t})}function Pg({className:e,children:t}){return u.jsx(DF,{dir:"ltr",className:le("tlui-dialog__header__title",e),children:t})}function Ig(){return u.jsx("div",{className:"tlui-dialog__header__close",children:u.jsx(BF,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:u.jsx(de,{type:"icon","aria-label":"Close",onTouchEnd:e=>e.target.click(),children:u.jsx(ve,{small:!0,icon:"cross-2"})})})})}function _d({className:e,children:t,style:r}){return u.jsx("div",{className:le("tlui-dialog__body",e),style:r,children:t})}function L0({className:e,children:t}){return u.jsx("div",{className:le("tlui-dialog__footer",e),children:t})}const R0=S.forwardRef(function({className:t,label:r,icon:a,iconLeft:s,autoSelect:n=!1,autoFocus:o=!1,defaultValue:i,placeholder:l,onComplete:c,onValueChange:d,onCancel:p,onFocus:f,onBlur:h,shouldManuallyMaintainScrollPositionWhenFocused:y=!1,children:m,value:w},b){const _=N(),x=S.useRef(null);S.useImperativeHandle(b,()=>x.current);const C=Ie(),k=S.useRef(i??""),F=S.useRef(i??""),[P,I]=S.useState(!1),j=S.useCallback(T=>{I(!0);const M=T.currentTarget;F.current=M.value,_.timers.requestAnimationFrame(()=>{n&&M.select()}),f==null||f()},[n,f,_.timers]),A=S.useCallback(T=>{const M=T.currentTarget.value;F.current=M,d==null||d(M)},[d]),D=S.useCallback(T=>{switch(T.key){case"Enter":{T.currentTarget.blur(),qt(T),c==null||c(T.currentTarget.value);break}case"Escape":{T.currentTarget.value=k.current,T.currentTarget.blur(),qt(T),p==null||p(T.currentTarget.value);break}}},[c,p]),z=S.useCallback(T=>{I(!1);const M=T.currentTarget.value;h==null||h(M)},[h]);return S.useEffect(()=>{if(!_.environment.isIos)return;const T=window.visualViewport;if(P&&y&&T){const M=()=>{var L;(L=x.current)==null||L.scrollIntoView({block:"center"})};return T.addEventListener("resize",M),T.addEventListener("scroll",M),_.timers.requestAnimationFrame(()=>{var L;(L=x.current)==null||L.scrollIntoView({block:"center"})}),()=>{T.removeEventListener("resize",M),T.removeEventListener("scroll",M)}}},[_,P,y]),u.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[m,r&&u.jsx("label",{children:C(r)}),s&&u.jsx(Gn,{icon:s,className:"tlui-icon-left",small:!0}),u.jsx("input",{ref:x,className:le("tlui-input",t),type:"text",defaultValue:i,onKeyUp:D,onChange:A,onFocus:j,onBlur:z,autoFocus:o,placeholder:l,value:w}),a&&u.jsx(Gn,{icon:a,small:!!r})]})}),rC=la(function({onClose:t}){const r=N(),a=Ie(),s=v0(),[n,o]=S.useState(null),[i,l]=S.useState(""),[c,d]=S.useState(null),[p,f]=S.useState(!1),h=S.useRef(-1);return u.jsxs(u.Fragment,{children:[u.jsxs(Cg,{children:[u.jsx(Pg,{children:n?`${a("embed-dialog.title")} — ${n.title}`:a("embed-dialog.title")}),u.jsx(Ig,{})]}),n?u.jsxs(u.Fragment,{children:[u.jsxs(_d,{className:"tlui-embed-dialog__enter",children:[u.jsx(R0,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autoFocus:!0,onValueChange:y=>{l(y);const m=In(y);d(m&&m.definition.type===n.type?m:null),f(!1),clearTimeout(h.current),h.current=r.timers.setTimeout(()=>f(!m),320)}}),i===""?u.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[u.jsx("span",{children:a("embed-dialog.instruction")})," ",n.instructionLink&&u.jsxs("a",{target:"_blank",rel:"noopener noreferrer",href:n.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",u.jsx(Gn,{icon:"external-link",small:!0})]})]}):u.jsx("div",{className:"tlui-embed-dialog__warning",children:p?a("embed-dialog.invalid-url"):" "})]}),u.jsxs(L0,{className:"tlui-dialog__footer__actions",children:[u.jsx(de,{type:"normal",onClick:()=>{o(null),d(null),l("")},children:u.jsx(xt,{children:a("embed-dialog.back")})}),u.jsx("div",{className:"tlui-embed__spacer"}),u.jsx(de,{type:"normal",onClick:t,children:u.jsx(xt,{children:a("embed-dialog.cancel")})}),u.jsx(de,{type:"primary",disabled:!c,onClick:()=>{c&&(r.putExternalContent({type:"embed",url:i,point:r.getViewportPageBounds().center,embed:c.definition}),t())},children:u.jsx(xt,{children:a("embed-dialog.create")})})]})]}):u.jsx(u.Fragment,{children:u.jsx(_d,{className:"tlui-embed-dialog__list",children:Nd.map(y=>u.jsxs(de,{type:"menu",onClick:()=>o(y),children:[u.jsx(xt,{children:y.title}),u.jsx("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:`url(${s.embedIcons[y.type]})`}})]},y.type))})})]})});function aC(){const e=N(),t=S.useRef();return S.useEffect(()=>{const r=window.document.createElement("input");r.type="file",r.accept=Zz,r.multiple=!0,t.current=r;async function a(s){const n=s.target.files;!n||n.length===0||(e.mark("insert media"),await e.putExternalContent({type:"files",files:Array.from(n),point:e.getViewportPageBounds().center,ignoreParent:!1}),r.value="")}return r.addEventListener("change",a),()=>{t.current=void 0,r.removeEventListener("change",a)}},[e]),S.useCallback(()=>{var r;(r=t.current)==null||r.click()},[t])}const sC=S.createContext(null);function gQ({overrides:e,children:t}){const r=N(),a=ks(),{addDialog:s}=Qo(),n=aC(),o=S.useMemo(()=>{const i=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(c){r.setCurrentTool("select"),a("select-tool",{source:c,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(c){r.setCurrentTool("hand"),a("select-tool",{source:c,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect(c){r.setCurrentTool("eraser"),a("select-tool",{source:c,id:"eraser"})}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect(c){r.setCurrentTool("draw"),a("select-tool",{source:c,id:"draw"})}},...[...us.values].map(c=>({id:c,label:`tool.${c}`,meta:{geo:c},kbd:c==="rectangle"?"r":c==="ellipse"?"o":void 0,icon:"geo-"+c,onSelect(d){r.batch(()=>{r.setStyleForNextShapes(us,c),r.setCurrentTool("geo"),a("select-tool",{source:d,id:`geo-${c}`})})}})),{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect(c){r.setCurrentTool("arrow"),a("select-tool",{source:c,id:"arrow"})}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect(c){r.setCurrentTool("line"),a("select-tool",{source:c,id:"line"})}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect(c){r.setCurrentTool("frame"),a("select-tool",{source:c,id:"frame"})}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect(c){r.setCurrentTool("text"),a("select-tool",{source:c,id:"text"})}},{id:"asset",label:"tool.asset",icon:"tool-media",kbd:"$u",onSelect(c){n(),a("select-tool",{source:c,id:"media"})}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect(c){r.setCurrentTool("note"),a("select-tool",{source:c,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(c){r.setCurrentTool("laser"),a("select-tool",{source:c,id:"laser"})}},{id:"embed",label:"tool.embed",icon:"dot",onSelect(c){s({component:rC}),a("select-tool",{source:c,id:"embed"})}},{id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"!d",onSelect(c){r.setCurrentTool("highlight"),a("select-tool",{source:c,id:"highlight"})}}];i.push();const l=Object.fromEntries(i.map(c=>[c.id,c]));return e?e(r,l,{insertMedia:n}):l},[e,r,a,n,s]);return u.jsx(sC.Provider,{value:o,children:t})}function Ag(){const e=S.useContext(sC);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}const nC=_e.createContext(null);function mQ({forceMobile:e=!1,children:t}){const r=N(),a=H("breakpoint",()=>{const{width:s}=r.getViewportScreenBounds(),n=e?bt.MOBILE_SM:A2.length-1;for(let o=0;o<n;o++)if(s>A2[o]&&s<=A2[o+1])return o;return n},[r]);return u.jsx(nC.Provider,{value:a,children:t})}function qr(){const e=S.useContext(nC);if(e===null)throw new Error("useBreakpoint must be used inside of the <BreakpointProvider /> component");return e}function bQ(){const{addToast:e,removeToast:t,clearToasts:r}=Ya(),{addDialog:a,clearDialogs:s,removeDialog:n,updateDialog:o}=Qo(),l=qr()<bt.TABLET_SM,c=Ie();return S.useMemo(()=>({addToast:e,removeToast:t,clearToasts:r,addDialog:a,clearDialogs:s,removeDialog:n,updateDialog:o,msg:c,isMobile:l}),[a,e,s,r,c,n,t,o,l])}function yQ(e,t){const r={};for(const a of e)if(a.translations)for(const[s,n]of Lr(a.translations)){let o=r[s];o||(o=r[s]={}),Object.assign(o,n)}return{actions:(a,s)=>{for(const n of e)n.actions&&(s=n.actions(a,s,t));return s},tools:(a,s,n)=>{for(const o of e)o.tools&&(s=o.tools(a,s,{...t,...n}));return s},translations:r}}function oC(e){return S.useMemo(()=>e,e)}function _Q(e){const t=oC(e==null?[]:Array.isArray(e)?e:[e]);return S.useMemo(()=>{const r={};for(const a of t)if(a.translations)for(const[s,n]of Lr(a.translations)){let o=r[s];o||(o=r[s]={}),Object.assign(o,n)}return r},[t])}function wQ(e){const t=bQ(),r=oC(e==null?[]:Array.isArray(e)?e:[e]);return S.useMemo(()=>yQ(r,t),[r,t])}function vQ(e,t){const r=ge(t.map(s=>e.getShape(s)).filter(s=>s&&e.isShapeOfType(s,"frame")));if(!r.length)return;const a=[];e.batch(()=>{r.map(s=>{const n=e.getSortedChildIdsForParent(s.id);n.length&&(e.reparentShapes(n,s.parentId,s.index),a.push(...n))}),e.setSelectedShapes(a),e.deleteShapes(t)})}const xQ=50;function SQ(e,t,r={}){const a=e.getShape(t);if(!a)return;const s=e.getSortedChildIdsForParent(a.id),n=ge(s.map(h=>e.getShape(h)));if(!n.length)return;const o=Z.FromPoints(n.flatMap(h=>{const y=e.getShapeGeometry(h.id);return e.getShapeLocalTransform(h).applyToPoints(y.vertices)})),{padding:i=xQ}=r,l=o.w+2*i,c=o.h+2*i,d=i-o.minX,p=i-o.minY;if(d===0&&p===0&&a.props.w===l&&a.props.h===c)return;const f=new v(d,p).rot(a.rotation);e.batch(()=>{const h=s.map(y=>{const m=e.getShape(y);return{id:m.id,type:m.type,x:m.x+d,y:m.y+p}});h.push({id:a.id,type:a.type,x:a.x-f.x,y:a.y-f.y,props:{w:l,h:c}}),e.updateShapes(h)})}function Q9(e){return sa.isValid(e)?{isValid:!0,hasProtocol:!0}:sa.isValid("https://"+e)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const kQ=la(function({onClose:t}){const a=N().getOnlySelectedShape();return a&&"url"in a.props&&typeof a.props.url=="string"?u.jsx(FQ,{onClose:t,selectedShape:a}):null}),FQ=la(function({onClose:t,selectedShape:r}){const a=N(),s=Ie(),n=S.useRef(null);S.useEffect(()=>{a.timers.requestAnimationFrame(()=>{var y;return(y=n.current)==null?void 0:y.focus()})},[a]);const o=S.useRef(r.props.url),[i,l]=S.useState(()=>{const y=Q9(r.props.url),m=y.isValid===!0?y.hasProtocol?r.props.url:"https://"+r.props.url:"https://";return{actual:m,safe:m,valid:!0}}),c=S.useCallback(y=>{const m=y.replace(/https?:\/\/(https?:\/\/)/,(_,x)=>x),w=Q9(m),b=w.isValid===!0?w.hasProtocol?m:"https://"+m:"https://";l({actual:m,safe:b,valid:w.isValid})},[]),d=S.useCallback(()=>{const y=a.getOnlySelectedShape();y&&(a.updateShapes([{id:y.id,type:y.type,props:{url:""}}]),t())},[a,t]),p=S.useCallback(()=>{const y=a.getOnlySelectedShape();y&&(y&&"url"in y.props&&y.props.url!==i.safe&&a.updateShapes([{id:y.id,type:y.type,props:{url:i.safe}}]),t())},[a,t,i]),f=S.useCallback(()=>{t()},[t]);if(!r)return t(),null;const h=o.current&&!i.valid;return u.jsxs(u.Fragment,{children:[u.jsxs(Cg,{children:[u.jsx(Pg,{children:s("edit-link-dialog.title")}),u.jsx(Ig,{})]}),u.jsx(_d,{children:u.jsxs("div",{className:"tlui-edit-link-dialog",children:[u.jsx(R0,{ref:n,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autoFocus:!0,value:i.actual,onValueChange:c,onComplete:p,onCancel:f}),u.jsx("div",{children:i.valid?s("edit-link-dialog.detail"):s("edit-link-dialog.invalid-url")})]})}),u.jsxs(L0,{className:"tlui-dialog__footer__actions",children:[u.jsx(de,{type:"normal",onClick:f,onTouchEnd:f,children:u.jsx(xt,{children:s("edit-link-dialog.cancel")})}),h?u.jsx(de,{type:"danger",onTouchEnd:d,onClick:d,children:u.jsx(xt,{children:s("edit-link-dialog.clear")})}):u.jsx(de,{type:"primary",disabled:!i.valid,onTouchEnd:p,onClick:p,children:u.jsx(xt,{children:s("edit-link-dialog.save")})})]})]})});var O0={exports:{}};O0.exports;(function(e){var t=function(){var r=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(l,c){if(!n[l]){n[l]={};for(var d=0;d<l.length;d++)n[l][l.charAt(d)]=d}return n[l][c]}var i={compressToBase64:function(l){if(l==null)return"";var c=i._compress(l,6,function(d){return a.charAt(d)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:i._decompress(l.length,32,function(c){return o(a,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":i._compress(l,15,function(c){return r(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:i._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=i.compress(l),d=new Uint8Array(c.length*2),p=0,f=c.length;p<f;p++){var h=c.charCodeAt(p);d[p*2]=h>>>8,d[p*2+1]=h%256}return d},decompressFromUint8Array:function(l){if(l==null)return i.decompress(l);for(var c=new Array(l.length/2),d=0,p=c.length;d<p;d++)c[d]=l[d*2]*256+l[d*2+1];var f=[];return c.forEach(function(h){f.push(r(h))}),i.decompress(f.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":i._compress(l,6,function(c){return s.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),i._decompress(l.length,32,function(c){return o(s,l.charAt(c))}))},compress:function(l){return i._compress(l,16,function(c){return r(c)})},_compress:function(l,c,d){if(l==null)return"";var p,f,h={},y={},m="",w="",b="",_=2,x=3,C=2,k=[],F=0,P=0,I;for(I=0;I<l.length;I+=1)if(m=l.charAt(I),Object.prototype.hasOwnProperty.call(h,m)||(h[m]=x++,y[m]=!0),w=b+m,Object.prototype.hasOwnProperty.call(h,w))b=w;else{if(Object.prototype.hasOwnProperty.call(y,b)){if(b.charCodeAt(0)<256){for(p=0;p<C;p++)F=F<<1,P==c-1?(P=0,k.push(d(F)),F=0):P++;for(f=b.charCodeAt(0),p=0;p<8;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1}else{for(f=1,p=0;p<C;p++)F=F<<1|f,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=0;for(f=b.charCodeAt(0),p=0;p<16;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1}_--,_==0&&(_=Math.pow(2,C),C++),delete y[b]}else for(f=h[b],p=0;p<C;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1;_--,_==0&&(_=Math.pow(2,C),C++),h[w]=x++,b=String(m)}if(b!==""){if(Object.prototype.hasOwnProperty.call(y,b)){if(b.charCodeAt(0)<256){for(p=0;p<C;p++)F=F<<1,P==c-1?(P=0,k.push(d(F)),F=0):P++;for(f=b.charCodeAt(0),p=0;p<8;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1}else{for(f=1,p=0;p<C;p++)F=F<<1|f,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=0;for(f=b.charCodeAt(0),p=0;p<16;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1}_--,_==0&&(_=Math.pow(2,C),C++),delete y[b]}else for(f=h[b],p=0;p<C;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1;_--,_==0&&(_=Math.pow(2,C),C++)}for(f=2,p=0;p<C;p++)F=F<<1|f&1,P==c-1?(P=0,k.push(d(F)),F=0):P++,f=f>>1;for(;;)if(F=F<<1,P==c-1){k.push(d(F));break}else P++;return k.join("")},decompress:function(l){return l==null?"":l==""?null:i._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,d){var p=[],f=4,h=4,y=3,m="",w=[],b,_,x,C,k,F,P,I={val:d(0),position:c,index:1};for(b=0;b<3;b+=1)p[b]=b;for(x=0,k=Math.pow(2,2),F=1;F!=k;)C=I.val&I.position,I.position>>=1,I.position==0&&(I.position=c,I.val=d(I.index++)),x|=(C>0?1:0)*F,F<<=1;switch(x){case 0:for(x=0,k=Math.pow(2,8),F=1;F!=k;)C=I.val&I.position,I.position>>=1,I.position==0&&(I.position=c,I.val=d(I.index++)),x|=(C>0?1:0)*F,F<<=1;P=r(x);break;case 1:for(x=0,k=Math.pow(2,16),F=1;F!=k;)C=I.val&I.position,I.position>>=1,I.position==0&&(I.position=c,I.val=d(I.index++)),x|=(C>0?1:0)*F,F<<=1;P=r(x);break;case 2:return""}for(p[3]=P,_=P,w.push(P);;){if(I.index>l)return"";for(x=0,k=Math.pow(2,y),F=1;F!=k;)C=I.val&I.position,I.position>>=1,I.position==0&&(I.position=c,I.val=d(I.index++)),x|=(C>0?1:0)*F,F<<=1;switch(P=x){case 0:for(x=0,k=Math.pow(2,8),F=1;F!=k;)C=I.val&I.position,I.position>>=1,I.position==0&&(I.position=c,I.val=d(I.index++)),x|=(C>0?1:0)*F,F<<=1;p[h++]=r(x),P=h-1,f--;break;case 1:for(x=0,k=Math.pow(2,16),F=1;F!=k;)C=I.val&I.position,I.position>>=1,I.position==0&&(I.position=c,I.val=d(I.index++)),x|=(C>0?1:0)*F,F<<=1;p[h++]=r(x),P=h-1,f--;break;case 2:return w.join("")}if(f==0&&(f=Math.pow(2,y),y++),p[P])m=p[P];else if(P===h)m=_+_.charAt(0);else return null;w.push(m),p[h++]=_+m.charAt(0),f--,_=m,f==0&&(f=Math.pow(2,y),y++)}}};return i}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(O0);var CQ=O0.exports;const iC=Yn(CQ);async function PQ(e,t,r){var b,_,x;const{elements:a,files:s}=t,n={shapes:[],bindings:[],rootShapeIds:[],assets:[],schema:e.store.schema.serialize()},o=new Map,i=new Map,l=e.getCurrentPageId(),c=new Map,d=[],p=new Set;a.forEach(C=>{if(c.set(C.id,Ne()),C.boundElements!==null)for(const k of C.boundElements)k.type==="text"&&p.add(k.id)});let f=Qz;for(const C of a){if(p.has(C.id))continue;const k=c.get(C.id),F={id:k,typeName:"shape",parentId:l,index:f,x:C.x,y:C.y,rotation:0,isLocked:C.locked,opacity:IQ(C.opacity),meta:{}};switch(C.angle!==0&&i.set(k,C.angle),C.groupIds&&C.groupIds.length>0?o.has(C.groupIds[0])?(b=o.get(C.groupIds[0]))==null||b.push(k):o.set(C.groupIds[0],[k]):d.push(k),C.type){case"rectangle":case"ellipse":case"diamond":{let P="",I="middle";if(C.boundElements!==null){for(const A of C.boundElements)if(A.type==="text"){const D=a.find(z=>z.id===A.id);D&&(P=D.text,I=MQ[D.textAlign])}}const j=C.backgroundColor==="transparent"?C.strokeColor:C.backgroundColor;n.shapes.push({...F,type:"geo",props:{geo:C.type,url:C.link??"",w:C.width,h:C.height,size:lp[C.strokeWidth]??"draw",color:cc[j]??"black",text:P,align:I,dash:cp(C),fill:RQ(C)}});break}case"freedraw":{n.shapes.push({...F,type:"draw",props:{dash:cp(C),size:lp[C.strokeWidth],color:cc[C.strokeColor]??"black",segments:[{type:"free",points:C.points.map(([P,I,j=.5])=>({x:P,y:I,z:j}))}]}});break}case"line":{if(C.points.slice().length<2)break;const I=ud(C.points.length);n.shapes.push({...F,type:"line",props:{dash:cp(C),size:lp[C.strokeWidth],color:cc[C.strokeColor]??"black",spline:C.roundness?"cubic":"line",points:{...Object.fromEntries(C.points.map(([j,A],D)=>{const z=I[D];return[z,{id:z,index:z,x:j,y:A}]}))}}});break}case"arrow":{let P="";if(C.boundElements!==null){for(const z of C.boundElements)if(z.type==="text"){const T=a.find(M=>M.id===z.id);T&&(P=T.text)}}const I=C.points[0],j=C.points[C.points.length-1],A=c.get((_=C.startBinding)==null?void 0:_.elementId),D=c.get((x=C.endBinding)==null?void 0:x.elementId);n.shapes.push({...F,type:"arrow",props:{text:P,bend:LQ(C,I,j),dash:cp(C),size:lp[C.strokeWidth]??"m",color:cc[C.strokeColor]??"black",start:{x:I[0],y:I[1]},end:{x:j[0],y:j[1]},arrowheadEnd:e7[C.endArrowhead]??"none",arrowheadStart:e7[C.startArrowhead]??"none"}}),A&&n.bindings.push({id:jo(),typeName:"binding",type:"arrow",fromId:k,toId:A,props:{terminal:"start",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}}),D&&n.bindings.push({id:jo(),typeName:"binding",type:"arrow",fromId:k,toId:D,props:{terminal:"end",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}});break}case"text":{const{size:P,scale:I}=jQ(C.fontSize);n.shapes.push({...F,type:"text",props:{size:P,scale:I,font:EQ[C.fontFamily]??"draw",color:cc[C.strokeColor]??"black",text:C.text,textAlign:BQ[C.textAlign]}});break}case"image":{const P=s[C.fileId];if(!P)break;const I=So.createId();n.assets.push({id:I,typeName:"asset",type:"image",props:{w:C.width,h:C.height,name:C.id??"Untitled",isAnimated:!1,mimeType:P.mimeType,src:P.dataURL},meta:{}}),n.shapes.push({...F,type:"image",props:{w:C.width,h:C.height,assetId:I}})}}f=Ms(f)}const h=r??(e.inputs.shiftKey?e.inputs.currentPagePoint:void 0);e.mark("paste"),e.putContentOntoCurrentPage(n,{point:h,select:!1,preserveIds:!0});for(const C of o.values())if(C.length>1){e.groupShapes(C);const k=e.getShape(C[0]);k!=null&&k.parentId&&Kr(k.parentId)&&d.push(k.parentId)}for(const[C,k]of i)e.select(C),e.rotateShapesBy([C],k);const y=ge(d.map(C=>e.getShape(C))),m=Z.Common(y.map(C=>e.getShapePageBounds(C))),w=e.getViewportPageBounds().center;e.updateShapes(y.map(C=>{const k={x:(C.x??0)-(m.x+m.w/2),y:(C.y??0)-(m.y+m.h/2)};return{id:C.id,type:C.type,x:w.x+k.x,y:w.y+k.y}})),e.setSelectedShapes(d)}const IQ=e=>{const t=e/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},lp={1:"s",2:"m",3:"l",4:"xl"},AQ={16:"s",20:"m",28:"l",36:"xl"};function jQ(e){const t=AQ[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}}const EQ={1:"draw",2:"sans",3:"mono"},cc={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},DQ={solid:"draw",dashed:"dashed",dotted:"dotted"},TQ={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},MQ={left:"start",center:"middle",right:"end"},BQ={left:"start",center:"middle",right:"end"},e7={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function LQ(e,t,r){let a=0;if(e.points.length>2){const s=new v(t[0],t[1]),n=new v(r[0],r[1]),o=new v(e.points[1][0],e.points[1][1]),i=v.Sub(n,s),l=v.Per(i),c=v.Med(n,s),d=v.Sub(c,l),p=v.Add(c,l),f=v.NearestPointOnLineSegment(d,p,o,!1);a=v.Dist(f,c),v.Clockwise(f,n,c)&&(a*=-1)}return a}const cp=e=>{let t=DQ[e.strokeStyle]??"draw";return t==="draw"&&e.roughness===0&&(t="solid"),t},RQ=e=>e.backgroundColor==="transparent"?"none":TQ[e.fillStyle]??"solid";async function lC(e,t,r,a){const n=(await Promise.all(t.map(async o=>await(await fetch(o,{referrerPolicy:"strict-origin-when-cross-origin"})).blob()))).map(o=>new File([o],"tldrawFile",{type:o.type}));e.mark("paste"),await e.putExternalContent({type:"files",files:n,point:r,ignoreParent:!1,sources:a}),t.forEach(o=>URL.revokeObjectURL(o))}function OQ(e,t,r){const a=r??(e.inputs.shiftKey?e.inputs.currentPagePoint:void 0),s=e.getSelectionPageBounds();e.mark("paste"),e.putContentOntoCurrentPage(t,{point:a,select:!0});const n=e.getSelectionPageBounds();s&&n&&(s!=null&&s.collides(n))&&(e.updateInstanceState({isChangingStyle:!0}),e.timers.setTimeout(()=>{e.updateInstanceState({isChangingStyle:!1})},150))}async function Xb(e,t,r,a){var s;try{if(new URL(t).pathname.match(/\.(png|jpe?g|gif|svg|webp)$/i)&&(s=(await fetch(t,{method:"HEAD",referrerPolicy:"strict-origin-when-cross-origin"})).headers.get("content-type"))!=null&&s.match(/^image\//)){e.mark("paste"),lC(e,[t]);return}}catch(n){n.message!=="Failed to fetch"&&console.error(n)}return e.mark("paste"),await e.putExternalContent({type:"url",point:r,url:t,sources:a})}function zQ(e){const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""}const NQ=e=>{try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}},qQ=e=>{const t=e.split(/[\n\s]/);for(const r of t)try{const a=new URL(r);if(!(a.protocol==="http:"||a.protocol==="https:"))return}catch{return}return wS(t)},$Q=e=>/^<svg/.test(e),UQ=["input","select","textarea"];function j2(e){const{activeElement:t}=document;return e.getIsMenuOpen()||t&&(t.getAttribute("contenteditable")||UQ.indexOf(t.tagName.toLowerCase())>-1)}const WQ=e=>e.types.find(t=>t.match(/^image\//)),E2=(e,t,r,a)=>{const s=qQ(t);if(s)for(const n of s)Xb(e,n,r);else NQ(t)?Xb(e,t,r):$Q(t)?(e.mark("paste"),e.putExternalContent({type:"svg-text",text:t,point:r,sources:a})):(e.mark("paste"),e.putExternalContent({type:"text",text:t,point:r,sources:a}))},HQ=async(e,t,r)=>{if(e.getEditingShapeId()!==null)return;if(!t)throw Error("No clipboard data");const a=[];for(const s of Object.values(t.items))switch(s.kind){case"file":{a.push({type:"file",source:new Promise(n=>n(s.getAsFile()))});break}case"string":{s.type==="text/html"?a.push({type:"html",source:new Promise(n=>s.getAsString(n))}):s.type==="text/plain"?a.push({type:"text",source:new Promise(n=>s.getAsString(n))}):a.push({type:s.type,source:new Promise(n=>s.getAsString(n))});break}}dC(e,a,r)},cC=async(e,t,r)=>{const a=[];for(const s of t){if(WQ(s))for(const n of s.types)n.match(/^image\//)&&a.push({type:"blob",source:s.getType(n)});s.types.includes("text/html")&&a.push({type:"html",source:(async()=>{const n=await s.getType("text/html");return await Yi.blobToText(n)})()}),s.types.includes("text/uri-list")&&a.push({type:"url",source:(async()=>{const n=await s.getType("text/uri-list");return await Yi.blobToText(n)})()}),s.types.includes("text/plain")&&a.push({type:"text",source:(async()=>{const n=await s.getType("text/plain");return await Yi.blobToText(n)})()})}return await dC(e,a,r)};async function dC(e,t,r){const a=t.filter(n=>(n.type==="file"||n.type==="blob")&&n.source!==null);if(a.length){const o=(await Promise.all(a.map(i=>i.source))).filter(Boolean).map(i=>URL.createObjectURL(i));return await lC(e,o,r)}const s=await Promise.all(t.filter(n=>n.type!=="file").map(n=>new Promise(o=>{const i=n;if(i.type==="file"){o({type:"error",data:null,reason:"unexpected file"});return}i.source.then(l=>{var d;const c=(d=l.match(/<tldraw[^>]*>(.*)<\/tldraw>/))==null?void 0:d[1];if(c)try{const p=iC.decompressFromBase64(c);if(p===null){o({type:"error",data:p,reason:"found tldraw data comment but could not parse base64"});return}else{const f=JSON.parse(p);if(f.type!=="application/tldraw"&&o({type:"error",data:f,reason:`found tldraw data comment but JSON was of a different type: ${f.type}`}),typeof f.data=="string"){o({type:"error",data:f,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}o({type:"tldraw",data:f.data});return}}catch{o({type:"error",data:c,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(i.type==="html"){o({type:"text",data:l,subtype:"html"});return}if(i.type==="url"){o({type:"text",data:l,subtype:"url"});return}try{const p=JSON.parse(l);if(p.type==="excalidraw/clipboard"){o({type:"excalidraw",data:p});return}else{o({type:"text",data:l,subtype:"json"});return}}catch{o({type:"text",data:l,subtype:"text"});return}}o({type:"error",data:l,reason:"unhandled case"})})})));for(const n of s)if(n.type==="tldraw"){OQ(e,n.data,r);return}for(const n of s)if(n.type==="excalidraw"){PQ(e,n.data,r);return}for(const n of s)if(n.type==="text"&&n.subtype==="html"){const i=new DOMParser().parseFromString(n.data,"text/html").querySelector("body");if(i&&Array.from(i.children).filter(c=>c.nodeType===1).length===1&&i.firstElementChild&&i.firstElementChild.tagName==="A"&&i.firstElementChild.hasAttribute("href")&&i.firstElementChild.getAttribute("href")!==""){const c=i.firstElementChild.getAttribute("href");E2(e,c,r,s);return}if(!s.some(c=>c.type==="text"&&c.subtype!=="html")&&n.data.trim()){E2(e,zQ(n.data),r,s);return}}for(const n of s)if(n.type==="text"&&n.subtype==="url"){Xb(e,n.data,r,s);return}for(const n of s)if(n.type==="text"&&n.subtype==="text"&&n.data.trim()){E2(e,n.data,r,s);return}}const Ih=e=>{var a;const t=e.getContentFromCurrentPage(e.getSelectedShapeIds());if(!t){navigator&&navigator.clipboard&&navigator.clipboard.writeText("");return}const r=iC.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:t}));if(!(typeof navigator>"u")){const s=t.shapes.map(n=>e.isShapeOfType(n,"text")||e.isShapeOfType(n,"geo")||e.isShapeOfType(n,"arrow")?n.props.text:e.isShapeOfType(n,"bookmark")||e.isShapeOfType(n,"embed")?n.props.url:null).filter(cN);if((a=navigator.clipboard)!=null&&a.write){const n=new Blob([`<tldraw>${r}</tldraw>`],{type:"text/html"});let o=s.join(" ");o===""&&(o=" "),navigator.clipboard.write([new ClipboardItem({"text/html":n,"text/plain":new Blob([o],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<tldraw>${r}</tldraw>`)}};function GQ(){const e=N(),t=ks(),r=S.useCallback(function(o){e.getSelectedShapeIds().length!==0&&(Ih(e),t("copy",{source:o}))},[e,t]),a=S.useCallback(function(o){e.getSelectedShapeIds().length!==0&&(Ih(e),e.deleteShapes(e.getSelectedShapeIds()),t("cut",{source:o}))},[e,t]),s=S.useCallback(async function(o,i,l){e.getEditingShapeId()===null&&(Array.isArray(o)&&o[0]instanceof ClipboardItem?(cC(e,o,l),t("paste",{source:"menu"})):navigator.clipboard.read().then(c=>{s(c,i,l)}))},[e,t]);return{copy:r,cut:a,paste:s}}function KQ(){const e=N(),t=ks(),r=H("editor.isFocused",()=>e.getInstanceState().isFocused,[e]);S.useEffect(()=>{if(!r)return;const a=l=>{e.getSelectedShapeIds().length===0||e.getEditingShapeId()!==null||j2(e)||(ke(l),Ih(e),t("copy",{source:"kbd"}))};function s(l){e.getSelectedShapeIds().length===0||e.getEditingShapeId()!==null||j2(e)||(ke(l),Ih(e),e.deleteShapes(e.getSelectedShapeIds()),t("cut",{source:"kbd"}))}let n=!1;const o=l=>{l.button===1&&(n=!0,e.timers.requestAnimationFrame(()=>{n=!1}))},i=l=>{if(n){qt(l);return}e.getEditingShapeId()!==null||j2(e)||(l.clipboardData&&!e.inputs.shiftKey?HQ(e,l.clipboardData):navigator.clipboard.read().then(c=>{Array.isArray(c)&&c[0]instanceof ClipboardItem&&cC(e,c,e.inputs.currentPagePoint)}),ke(l),t("paste",{source:"kbd"}))};return document.addEventListener("copy",a),document.addEventListener("cut",s),document.addEventListener("paste",i),document.addEventListener("pointerup",o),()=>{document.removeEventListener("copy",a),document.removeEventListener("cut",s),document.removeEventListener("paste",i),document.removeEventListener("pointerup",o)}},[e,t,r])}async function uC(e,t,r){const{type:a,quality:s,scale:n,width:o,height:i}=r;let[l,c]=await ik(o*n,i*n);l=Math.floor(l),c=Math.floor(c);const d=l/o,p=URL.createObjectURL(new Blob([t],{type:"image/svg+xml"})),f=await new Promise(y=>{const m=new Image;m.crossOrigin="anonymous",m.onload=async()=>{e.environment.isSafari&&await new Promise(_=>e.timers.setTimeout(_,250));const w=document.createElement("canvas"),b=w.getContext("2d");w.width=l,w.height=c,b.imageSmoothingEnabled=!0,b.imageSmoothingQuality="high",b.drawImage(m,0,0,l,c),URL.revokeObjectURL(p),y(w)},m.onerror=()=>{y(null)},m.referrerPolicy="strict-origin-when-cross-origin",m.src=p});if(!f)return null;const h=await new Promise(y=>f.toBlob(m=>{(!m||vt.throwToBlob.get())&&y(null),y(m)},"image/"+a,s));if(!h)return null;if(a==="png"){const y=new DataView(await h.arrayBuffer());return as.setPhysChunk(y,d,{type:"image/"+a})}else return h}async function pC(e,t,r){const a=await e.getSvgString(t!=null&&t.length?t:[...e.getCurrentPageShapeIds()],{scale:1,background:e.getInstanceState().exportBackground,...r});if(!a)throw new Error("Could not construct SVG.");return a}async function Zb(e,t,r,a={}){var s;switch(r){case"svg":return(s=await pC(e,t,a))==null?void 0:s.svg;case"json":{const n=e.getContentFromCurrentPage(t);return JSON.stringify(n)}default:tr(r)}}async function fC({editor:e,ids:t,format:r,opts:a={}}){switch(r){case"svg":return new Blob([await Zb(e,t,"svg",a)],{type:"text/plain"});case"json":return new Blob([await Zb(e,t,"json",a)],{type:"text/plain"});case"jpeg":case"png":case"webp":{const s=await pC(e,t,a);if(!s)throw new Error("Could not construct image.");const n=await uC(e,s.svg,{type:r,quality:1,scale:2,width:s.width,height:s.height});if(!n)throw new Error("Could not construct image.");return n}default:tr(r)}}const VQ={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",json:"text/plain",svg:"text/plain"};function YQ(e,t,r,a={}){return{blobPromise:fC({editor:e,ids:t,format:r,opts:a}),mimeType:VQ[r]}}function XQ(e,t,r="svg",a={}){if(!window.navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(window.navigator.clipboard.write){const{blobPromise:s,mimeType:n}=YQ(e,t,r,a);return window.navigator.clipboard.write([new ClipboardItem({[n]:s})]).catch(o=>(console.error(o),s.then(i=>window.navigator.clipboard.write([new ClipboardItem({[n]:i})]))))}switch(r){case"json":case"svg":return ZQ(async()=>Zb(e,t,r,a));case"jpeg":case"png":throw new Error("Copy not supported");default:tr(r)}}async function ZQ(e){var t,r;await((r=(t=navigator.clipboard)==null?void 0:t.writeText)==null?void 0:r.call(t,await e()))}function JQ(){const e=N(),{addToast:t}=Ya(),r=Ie();return S.useCallback((a,s="svg")=>{XQ(e,a,s).catch(()=>{t({id:"copy-fail",severity:"warning",title:r("toast.error.copy-fail.title"),description:r("toast.error.copy-fail.desc")})})},[e,t,r])}async function QQ(e,t,r="png",a,s={}){if(!a&&(a=`shapes at ${t7()}`,t.length===1)){const i=e.getShape(t[0]);e.isShapeOfType(i,"frame")?a=i.props.name??"frame":a=`${i.id.replace(/:/,"_")} at ${t7()}`}a+=`.${r}`;const n=await fC({editor:e,ids:t,format:r,opts:s}),o=new File([n],a,{type:n.type});eee(o)}function t7(){const e=new Date,t=String(e.getFullYear()).slice(2),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${a} ${s}.${n}.${o}`}function eee(e){const t=document.createElement("a"),r=URL.createObjectURL(e);t.href=r,t.download=e.name,t.click(),URL.revokeObjectURL(r)}function hC(){const e=N(),{addToast:t}=Ya(),r=Ie();return S.useCallback((a,s="png",n)=>{QQ(e,a,s,n,{scale:1,background:e.getInstanceState().exportBackground}).catch(o=>{console.error(o.message),t({id:"export-fail",title:r("toast.error.export-fail.title"),description:r("toast.error.export-fail.desc"),severity:"error"})})},[e,t,r])}function tee(){const e=N(),t=S.useRef(null),r=S.useRef(null);return S.useCallback(async function(){const s=document.createElement("div"),n=document.createElement("style"),o=(b,_)=>{b&&(b.innerHTML=""),_&&document.head.contains(_)&&document.head.removeChild(_),b&&document.body.contains(b)&&document.body.removeChild(b)};o(t.current,r.current),t.current=s,r.current=n;const i=`tl-print-surface-${rt()}`;s.className=i,n.innerHTML=`
			.${i} {
				display: none;
			}

			.${i} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.tldraw__editor {
					display: none;
				}

				.${i} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${i}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${i}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${i}__item__header {
					display: none;
				}

				.${i}__item__footer {
					display: none;
					text-align: right;
				}

				.${i}__item__footer__hide {
					display: none;
				}

				
			}

		`;const l=()=>{document.head.appendChild(n),document.body.appendChild(s)},c=()=>{e.once("tick",()=>{o(s,n)})};window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c);function d(b,_,x){try{s.innerHTML+=`<div class="${i}__item">
        <div class="${i}__item__header">
          ${b.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${i}__item__main">
          ${x}
        </div>
        <div class="${i}__item__footer ${i}__item__footer__${_?"":"hide"}">
          ${_??""}
        </div>
      </div>`}catch(C){console.error(C)}}function p(){e.environment.isChromeForIos?(l(),window.print()):e.environment.isSafari?(l(),document.execCommand("print",!1)):window.print()}const f=e.getSelectedShapeIds(),h=e.getCurrentPageId(),y=e.getPages(),w={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(e.getSelectedShapeIds().length>0){const b=await e.getSvgString(f,w);if(b){const _=y.find(x=>x.id===h);d(`tldraw — ${_==null?void 0:_.name}`,null,b.svg),p()}}else{const b=e.getCurrentPage(),_=await e.getSvgString(e.getSortedChildIdsForParent(b.id),w);_&&(d(`tldraw — ${b.name}`,null,_.svg),p())}window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c)},[e])}const gC=S.createContext(null);function ree(e){return Object.fromEntries(e.map(t=>[t.id,t]))}function gi(e,t){if(e.getSelectedShapes().length===0)return e.getDocumentSettings().name||t}function aee({overrides:e,children:t}){const r=N(),{addDialog:a,clearDialogs:s}=Qo(),{clearToasts:n}=Ya(),o=Ie(),i=aC(),l=tee(),{cut:c,copy:d,paste:p}=GQ(),f=JQ(),h=hC(),y=o("document.default-name"),m=ks(),w=S.useMemo(()=>{function b(){return r.isIn("select")||(r.complete(),r.setCurrentTool("select")),!1}function _(){return r.isIn("select")&&r.getSelectedShapeIds().length>0}const C=ree([{id:"edit-link",label:"action.edit-link",icon:"link",onSelect(k){_()&&(b()||(m("edit-link",{source:k}),r.mark("edit-link"),a({component:kQ})))}},{id:"insert-embed",label:"action.insert-embed",kbd:"$i",onSelect(k){m("insert-embed",{source:k}),a({component:rC})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",onSelect(k){m("insert-media",{source:k}),i()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",onSelect(k){m("undo",{source:k}),r.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",onSelect(k){m("redo",{source:k}),r.redo()}},{id:"export-as-svg",label:{default:"action.export-as-svg",menu:"action.export-as-svg.short","context-menu":"action.export-as-svg.short"},readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("export-as",{format:"svg",source:k}),h(F,"svg",gi(r,y)))}},{id:"export-as-png",label:{default:"action.export-as-png",menu:"action.export-as-png.short","context-menu":"action.export-as-png.short"},readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("export-as",{format:"png",source:k}),h(F,"png",gi(r,y)))}},{id:"export-as-json",label:{default:"action.export-as-json",menu:"action.export-as-json.short","context-menu":"action.export-as-json.short"},readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("export-as",{format:"json",source:k}),h(F,"json",gi(r,y)))}},{id:"export-all-as-svg",label:{default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short","context-menu":"action.export-all-as-svg.short"},readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("export-all-as",{format:"svg",source:k}),h(Array.from(r.getCurrentPageShapeIds()),"svg",gi(r,y)))}},{id:"export-all-as-png",label:{default:"action.export-all-as-png",menu:"action.export-all-as-png.short","context-menu":"action.export-all-as-png.short"},readonlyOk:!0,onSelect(k){const F=Array.from(r.getCurrentPageShapeIds().values());F.length!==0&&(m("export-all-as",{format:"png",source:k}),h(F,"png",gi(r,y)))}},{id:"export-all-as-json",label:{default:"action.export-all-as-json",menu:"action.export-all-as-json.short","context-menu":"action.export-all-as-json.short"},readonlyOk:!0,onSelect(k){const F=Array.from(r.getCurrentPageShapeIds().values());F.length!==0&&(m("export-all-as",{format:"json",source:k}),h(F,"json",gi(r,y)))}},{id:"copy-as-svg",label:{default:"action.copy-as-svg",menu:"action.copy-as-svg.short","context-menu":"action.copy-as-svg.short"},kbd:"$!c",readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("copy-as",{format:"svg",source:k}),f(F,"svg"))}},{id:"copy-as-png",label:{default:"action.copy-as-png",menu:"action.copy-as-png.short","context-menu":"action.copy-as-png.short"},readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("copy-as",{format:"png",source:k}),f(F,"png"))}},{id:"copy-as-json",label:{default:"action.copy-as-json",menu:"action.copy-as-json.short","context-menu":"action.copy-as-json.short"},readonlyOk:!0,onSelect(k){let F=r.getSelectedShapeIds();F.length===0&&(F=Array.from(r.getCurrentPageShapeIds().values())),F.length!==0&&(m("copy-as",{format:"json",source:k}),f(F,"json"))}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect(k){if(!_()||b())return;m("toggle-auto-size",{source:k}),r.mark("toggling auto size");const F=r.getSelectedShapes().filter(P=>r.isShapeOfType(P,"text")&&P.props.autoSize===!1);r.updateShapes(F.map(P=>({id:P.id,type:P.type,props:{...P.props,w:8,autoSize:!0}}))),We(r,F.map(P=>P.id))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(k){m("open-embed-link",{source:k});const F=r.getSelectedShapeIds(),P="No embed shapes selected";if(F.length!==1){console.error(P);return}const I=r.getShape(F[0]);if(!I||!r.isShapeOfType(I,"embed")){console.error(P);return}JK(I.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(k){var F,P;if(((F=r.root.getCurrent())==null?void 0:F.id)!=="zoom"&&(m("zoom-tool",{source:k}),!(r.inputs.shiftKey||r.inputs.ctrlKey))){const I=r.root.getCurrent();I&&((P=I.getCurrent())==null?void 0:P.id)==="idle"&&r.setCurrentTool("zoom",{onInteractionEnd:I.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",onSelect(k){_()&&(b()||r.batch(()=>{m("convert-to-bookmark",{source:k});const F=r.getSelectedShapes(),P=[],I=[];for(const j of F){if(!j||!r.isShapeOfType(j,"embed")||!j.props.url)continue;const A=new v(j.x,j.y);A.rot(-j.rotation),A.add(new v(j.props.w/2-300/2,j.props.h/2-320/2)),A.rot(j.rotation);const D={id:Ne(),type:"bookmark",rotation:j.rotation,x:A.x,y:A.y,opacity:1,props:{url:j.props.url}};P.push(D),I.push(j.id)}r.mark("convert shapes to bookmark"),r.deleteShapes(I),r.createShapes(P)}))}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect(k){_()&&(b()||(m("convert-to-embed",{source:k}),r.batch(()=>{const F=r.getSelectedShapeIds(),P=ge(F.map(A=>r.getShape(A))),I=[],j=[];for(const A of P){if(!r.isShapeOfType(A,"bookmark"))continue;const{url:D}=A.props,z=In(A.props.url);if(!z||!z.definition)continue;const{width:T,height:M}=z.definition,L=new v(A.x,A.y);L.rot(-A.rotation),L.add(new v(A.props.w/2-T/2,A.props.h/2-M/2)),L.rot(A.rotation);const G={id:Ne(),type:"embed",x:L.x,y:L.y,rotation:A.rotation,props:{url:D,w:T,h:M}};I.push(G),j.push(A.id)}r.mark("convert shapes to embed"),r.deleteShapes(j),r.createShapes(I)})))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",onSelect(k){if(!_()||b())return;m("duplicate-shapes",{source:k});const F=r.getInstanceState();let P,I;if(F.duplicateProps)P=F.duplicateProps.shapeIds,I=F.duplicateProps.offset;else{P=r.getSelectedShapeIds();const j=Z.Common(ge(P.map(A=>r.getShapePageBounds(A))));I=r.getCameraOptions().isLocked?{x:20,y:20}:{x:j.width+20,y:0}}r.mark("duplicate shapes"),r.duplicateShapes(P,I),F.duplicateProps&&r.updateInstanceState({duplicateProps:{...F.duplicateProps,shapeIds:r.getSelectedShapeIds()}})}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",onSelect(k){_()&&(b()||(m("ungroup-shapes",{source:k}),r.mark("ungroup"),r.ungroupShapes(r.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",onSelect(k){if(!_()||b())return;m("group-shapes",{source:k});const F=r.getOnlySelectedShape();F&&r.isShapeOfType(F,"group")?(r.mark("ungroup"),r.ungroupShapes(r.getSelectedShapeIds())):(r.mark("group"),r.groupShapes(r.getSelectedShapeIds()))}},{id:"remove-frame",label:"action.remove-frame",kbd:"$!f",onSelect(k){if(!_())return;m("remove-frame",{source:k});const F=r.getSelectedShapes();F.length>0&&F.every(P=>r.isShapeOfType(P,"frame"))&&(r.mark("remove-frame"),vQ(r,F.map(P=>P.id)))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect(k){if(!_())return;m("fit-frame-to-content",{source:k});const F=r.getOnlySelectedShape();F&&r.isShapeOfType(F,"frame")&&(r.mark("fit-frame-to-content"),SQ(r,F.id))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",onSelect(k){if(!_()||b())return;m("align-shapes",{operation:"left",source:k}),r.mark("align left");const F=r.getSelectedShapeIds();r.alignShapes(F,"left"),We(r,F)}},{id:"align-center-horizontal",label:{default:"action.align-center-horizontal","context-menu":"action.align-center-horizontal.short"},kbd:"?H",icon:"align-center-horizontal",onSelect(k){if(!_()||b())return;m("align-shapes",{operation:"center-horizontal",source:k}),r.mark("align center horizontal");const F=r.getSelectedShapeIds();r.alignShapes(F,"center-horizontal"),We(r,F)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",onSelect(k){if(!_()||b())return;m("align-shapes",{operation:"right",source:k}),r.mark("align right");const F=r.getSelectedShapeIds();r.alignShapes(F,"right"),We(r,F)}},{id:"align-center-vertical",label:{default:"action.align-center-vertical","context-menu":"action.align-center-vertical.short"},kbd:"?V",icon:"align-center-vertical",onSelect(k){if(!_()||b())return;m("align-shapes",{operation:"center-vertical",source:k}),r.mark("align center vertical");const F=r.getSelectedShapeIds();r.alignShapes(F,"center-vertical"),We(r,F)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",onSelect(k){if(!_()||b())return;m("align-shapes",{operation:"top",source:k}),r.mark("align top");const F=r.getSelectedShapeIds();r.alignShapes(F,"top"),We(r,F)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",onSelect(k){if(!_()||b())return;m("align-shapes",{operation:"bottom",source:k}),r.mark("align bottom");const F=r.getSelectedShapeIds();r.alignShapes(F,"bottom"),We(r,F)}},{id:"distribute-horizontal",label:{default:"action.distribute-horizontal","context-menu":"action.distribute-horizontal.short"},icon:"distribute-horizontal",kbd:"?!h",onSelect(k){if(!_()||b())return;m("distribute-shapes",{operation:"horizontal",source:k}),r.mark("distribute horizontal");const F=r.getSelectedShapeIds();r.distributeShapes(F,"horizontal"),We(r,F)}},{id:"distribute-vertical",label:{default:"action.distribute-vertical","context-menu":"action.distribute-vertical.short"},icon:"distribute-vertical",kbd:"?!V",onSelect(k){if(!_()||b())return;m("distribute-shapes",{operation:"vertical",source:k}),r.mark("distribute vertical");const F=r.getSelectedShapeIds();r.distributeShapes(F,"vertical"),We(r,F)}},{id:"stretch-horizontal",label:{default:"action.stretch-horizontal","context-menu":"action.stretch-horizontal.short"},icon:"stretch-horizontal",onSelect(k){if(!_()||b())return;m("stretch-shapes",{operation:"horizontal",source:k}),r.mark("stretch horizontal");const F=r.getSelectedShapeIds();r.stretchShapes(F,"horizontal"),We(r,F)}},{id:"stretch-vertical",label:{default:"action.stretch-vertical","context-menu":"action.stretch-vertical.short"},icon:"stretch-vertical",onSelect(k){if(!_()||b())return;m("stretch-shapes",{operation:"vertical",source:k}),r.mark("stretch vertical");const F=r.getSelectedShapeIds();r.stretchShapes(F,"vertical"),We(r,F)}},{id:"flip-horizontal",label:{default:"action.flip-horizontal","context-menu":"action.flip-horizontal.short"},kbd:"!h",onSelect(k){if(!_()||b())return;m("flip-shapes",{operation:"horizontal",source:k}),r.mark("flip horizontal");const F=r.getSelectedShapeIds();r.flipShapes(F,"horizontal"),We(r,F)}},{id:"flip-vertical",label:{default:"action.flip-vertical","context-menu":"action.flip-vertical.short"},kbd:"!v",onSelect(k){if(!_()||b())return;m("flip-shapes",{operation:"vertical",source:k}),r.mark("flip vertical");const F=r.getSelectedShapeIds();r.flipShapes(F,"vertical"),We(r,F)}},{id:"pack",label:"action.pack",icon:"pack",onSelect(k){if(!_()||b())return;m("pack-shapes",{source:k}),r.mark("pack");const F=r.getSelectedShapeIds();r.packShapes(F,r.options.adjacentShapeMargin),We(r,F)}},{id:"stack-vertical",label:{default:"action.stack-vertical","context-menu":"action.stack-vertical.short"},icon:"stack-vertical",onSelect(k){if(!_()||b())return;m("stack-shapes",{operation:"vertical",source:k}),r.mark("stack-vertical");const F=r.getSelectedShapeIds();r.stackShapes(F,"vertical",16),We(r,F)}},{id:"stack-horizontal",label:{default:"action.stack-horizontal","context-menu":"action.stack-horizontal.short"},icon:"stack-horizontal",onSelect(k){if(!_()||b())return;m("stack-shapes",{operation:"horizontal",source:k}),r.mark("stack-horizontal");const F=r.getSelectedShapeIds();r.stackShapes(F,"horizontal",16),We(r,F)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect(k){_()&&(b()||(m("reorder-shapes",{operation:"toFront",source:k}),r.mark("bring to front"),r.bringToFront(r.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",onSelect(k){_()&&(b()||(m("reorder-shapes",{operation:"forward",source:k}),r.mark("bring forward"),r.bringForward(r.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",onSelect(k){_()&&(b()||(m("reorder-shapes",{operation:"backward",source:k}),r.mark("send backward"),r.sendBackward(r.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect(k){_()&&(b()||(m("reorder-shapes",{operation:"toBack",source:k}),r.mark("send to back"),r.sendToBack(r.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"$x",onSelect(k){_()&&(b()||(r.mark("cut"),c(k)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(k){_()&&(b()||d(k))}},{id:"paste",label:"action.paste",kbd:"$v",onSelect(k){var F;(F=navigator.clipboard)==null||F.read().then(P=>{p(P,k,k==="context-menu"?r.inputs.currentPagePoint:void 0)})}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(k){r.batch(()=>{b()||(m("select-all-shapes",{source:k}),r.mark("select all kbd"),r.selectAll())})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(k){_()&&(b()||(m("select-none-shapes",{source:k}),r.mark("select none"),r.selectNone()))}},{id:"delete",label:"action.delete",kbd:"⌫,del,backspace",icon:"trash",onSelect(k){_()&&(b()||(m("delete-shapes",{source:k}),r.mark("delete"),r.deleteShapes(r.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",onSelect(k){if(!_()||b())return;m("rotate-cw",{source:k}),r.mark("rotate-cw");const F=r.getSelectionRotation()%(Ge/2),P=Zi(F,0)||Zi(F,Ge/2),I=r.getSelectedShapeIds();r.rotateShapesBy(I,Ge/2-(P?0:F)),We(r,I)}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",onSelect(k){if(!_()||b())return;m("rotate-ccw",{source:k}),r.mark("rotate-ccw");const F=r.getSelectionRotation()%(Ge/2),P=Zi(F,0),I=r.getSelectedShapeIds();r.rotateShapesBy(I,P?-(Ge/2):-F),We(r,I)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(k){m("zoom-in",{source:k}),r.zoomIn(void 0,{animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(k){m("zoom-out",{source:k}),r.zoomOut(void 0,{animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(k){m("reset-zoom",{source:k}),r.resetZoom(void 0,{animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(k){m("zoom-to-fit",{source:k}),r.zoomToFit({animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(k){_()&&(b()||(m("zoom-to-selection",{source:k}),r.zoomToSelection({animation:{duration:r.options.animationMediumMs}})))}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect(k){m("toggle-snap-mode",{source:k}),r.user.updateUserPreferences({isSnapMode:!r.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"$/",readonlyOk:!0,onSelect(k){m("toggle-dark-mode",{source:k}),r.user.updateUserPreferences({isDarkMode:!r.user.getIsDarkMode()})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect(k){m("toggle-wrap-mode",{source:k}),r.user.updateUserPreferences({isWrapMode:!r.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect(k){m("toggle-reduce-motion",{source:k}),r.user.updateUserPreferences({animationSpeed:r.user.getAnimationSpeed()===0?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect(k){m("toggle-edge-scrolling",{source:k}),r.user.updateUserPreferences({edgeScrollSpeed:r.user.getEdgeScrollSpeed()===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:{default:"action.toggle-transparent",menu:"action.toggle-transparent.menu","context-menu":"action.toggle-transparent.context-menu"},readonlyOk:!0,onSelect(k){m("toggle-transparent",{source:k}),r.updateInstanceState({exportBackground:!r.getInstanceState().exportBackground})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect(k){m("toggle-tool-lock",{source:k}),r.updateInstanceState({isToolLocked:!r.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect(k){m("unlock-all",{source:k});const F=[];for(const P of r.getCurrentPageShapes())P.isLocked&&F.push({id:P.id,type:P.type,isLocked:!1});F.length>0&&r.updateShapes(F)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(k){r.timers.requestAnimationFrame(()=>{r.batch(()=>{m("toggle-focus-mode",{source:k}),s(),n(),r.updateInstanceState({isFocusMode:!r.getInstanceState().isFocusMode})})})}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"$'",onSelect(k){m("toggle-grid-mode",{source:k}),r.updateInstanceState({isGridMode:!r.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect(k){m("toggle-debug-mode",{source:k}),r.updateInstanceState({isDebugMode:!r.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(k){m("print",{source:k}),l()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(k){m("exit-pen-mode",{source:k}),r.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(k){m("stop-following",{source:k}),r.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(k){m("zoom-to-content",{source:k});const F=r.getSelectionPageBounds()??r.getCurrentPageBounds();F&&r.zoomToBounds(F,{targetZoom:Math.min(1,r.getZoomLevel()),animation:{duration:220}})}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"!l",onSelect(k){r.mark("locking"),m("toggle-lock",{source:k}),r.toggleLock(r.getSelectedShapeIds())}},{id:"new-page",label:"context.pages.new-page",onSelect(k){const F=Vs.createId(),P=r.getSelectedShapeIds();r.batch(()=>{r.mark("move_shapes_to_page"),r.createPage({name:o("page-menu.new-page-initial-name"),id:F}),r.moveShapesToPage(P,F)}),m("new-page",{source:k})}},{id:"select-white-color",label:"color-style.white",kbd:"?t",onSelect(k){const F=na;r.batch(()=>{r.mark("change-color"),r.isIn("select")&&r.setStyleForSelectedShapes(F,"white"),r.setStyleForNextShapes(F,"white"),r.updateInstanceState({isChangingStyle:!0})}),m("set-style",{source:k,id:F.id,value:"white"})}}]);return e?e(r,C,void 0):C},[r,m,e,a,i,h,f,c,d,p,s,n,l,o,y]);return u.jsx(gC.Provider,{value:w,children:t})}function oe(){const e=S.useContext(gC);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}function wd(e,t){return e?typeof e=="string"?e:t?e[t]??e.default:void 0:void 0}const see=["top","right","bottom","left"],Kn=Math.min,Yr=Math.max,Ah=Math.round,dp=Math.floor,hs=e=>({x:e,y:e}),nee={left:"right",right:"left",bottom:"top",top:"bottom"},oee={start:"end",end:"start"};function Jb(e,t,r){return Yr(e,Kn(t,r))}function Zs(e,t){return typeof e=="function"?e(t):e}function Js(e){return e.split("-")[0]}function Ll(e){return e.split("-")[1]}function z0(e){return e==="x"?"y":"x"}function N0(e){return e==="y"?"height":"width"}function Us(e){return["top","bottom"].includes(Js(e))?"y":"x"}function q0(e){return z0(Us(e))}function iee(e,t,r){r===void 0&&(r=!1);const a=Ll(e),s=q0(e),n=N0(s);let o=s==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[n]>t.floating[n]&&(o=jh(o)),[o,jh(o)]}function lee(e){const t=jh(e);return[Qb(e),t,Qb(t)]}function Qb(e){return e.replace(/start|end/g,t=>oee[t])}function cee(e,t,r){const a=["left","right"],s=["right","left"],n=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:a:t?a:s;case"left":case"right":return t?n:o;default:return[]}}function dee(e,t,r,a){const s=Ll(e);let n=cee(Js(e),r==="start",a);return s&&(n=n.map(o=>o+"-"+s),t&&(n=n.concat(n.map(Qb)))),n}function jh(e){return e.replace(/left|right|bottom|top/g,t=>nee[t])}function uee(e){return{top:0,right:0,bottom:0,left:0,...e}}function mC(e){return typeof e!="number"?uee(e):{top:e,right:e,bottom:e,left:e}}function Eh(e){const{x:t,y:r,width:a,height:s}=e;return{width:a,height:s,top:r,left:t,right:t+a,bottom:r+s,x:t,y:r}}function r7(e,t,r){let{reference:a,floating:s}=e;const n=Us(t),o=q0(t),i=N0(o),l=Js(t),c=n==="y",d=a.x+a.width/2-s.width/2,p=a.y+a.height/2-s.height/2,f=a[i]/2-s[i]/2;let h;switch(l){case"top":h={x:d,y:a.y-s.height};break;case"bottom":h={x:d,y:a.y+a.height};break;case"right":h={x:a.x+a.width,y:p};break;case"left":h={x:a.x-s.width,y:p};break;default:h={x:a.x,y:a.y}}switch(Ll(t)){case"start":h[o]-=f*(r&&c?-1:1);break;case"end":h[o]+=f*(r&&c?-1:1);break}return h}const pee=async(e,t,r)=>{const{placement:a="bottom",strategy:s="absolute",middleware:n=[],platform:o}=r,i=n.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:p}=r7(c,a,l),f=a,h={},y=0;for(let m=0;m<i.length;m++){const{name:w,fn:b}=i[m],{x:_,y:x,data:C,reset:k}=await b({x:d,y:p,initialPlacement:a,placement:f,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});d=_??d,p=x??p,h={...h,[w]:{...h[w],...C}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:d,y:p}=r7(c,f,l)),m=-1)}return{x:d,y:p,placement:f,strategy:s,middlewareData:h}};async function vd(e,t){var r;t===void 0&&(t={});const{x:a,y:s,platform:n,rects:o,elements:i,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:f=!1,padding:h=0}=Zs(t,e),y=mC(h),w=i[f?p==="floating"?"reference":"floating":p],b=Eh(await n.getClippingRect({element:(r=await(n.isElement==null?void 0:n.isElement(w)))==null||r?w:w.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:l})),_=p==="floating"?{x:a,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(n.getOffsetParent==null?void 0:n.getOffsetParent(i.floating)),C=await(n.isElement==null?void 0:n.isElement(x))?await(n.getScale==null?void 0:n.getScale(x))||{x:1,y:1}:{x:1,y:1},k=Eh(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:_,offsetParent:x,strategy:l}):_);return{top:(b.top-k.top+y.top)/C.y,bottom:(k.bottom-b.bottom+y.bottom)/C.y,left:(b.left-k.left+y.left)/C.x,right:(k.right-b.right+y.right)/C.x}}const fee=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:s,rects:n,platform:o,elements:i,middlewareData:l}=t,{element:c,padding:d=0}=Zs(e,t)||{};if(c==null)return{};const p=mC(d),f={x:r,y:a},h=q0(s),y=N0(h),m=await o.getDimensions(c),w=h==="y",b=w?"top":"left",_=w?"bottom":"right",x=w?"clientHeight":"clientWidth",C=n.reference[y]+n.reference[h]-f[h]-n.floating[y],k=f[h]-n.reference[h],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let P=F?F[x]:0;(!P||!await(o.isElement==null?void 0:o.isElement(F)))&&(P=i.floating[x]||n.floating[y]);const I=C/2-k/2,j=P/2-m[y]/2-1,A=Kn(p[b],j),D=Kn(p[_],j),z=A,T=P-m[y]-D,M=P/2-m[y]/2+I,L=Jb(z,M,T),G=!l.arrow&&Ll(s)!=null&&M!==L&&n.reference[y]/2-(M<z?A:D)-m[y]/2<0,W=G?M<z?M-z:M-T:0;return{[h]:f[h]+W,data:{[h]:L,centerOffset:M-L-W,...G&&{alignmentOffset:W}},reset:G}}}),hee=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:s,middlewareData:n,rects:o,initialPlacement:i,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...w}=Zs(e,t);if((r=n.arrow)!=null&&r.alignmentOffset)return{};const b=Js(s),_=Us(i),x=Js(i)===i,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(x||!m?[jh(i)]:lee(i)),F=y!=="none";!f&&F&&k.push(...dee(i,m,y,C));const P=[i,...k],I=await vd(t,w),j=[];let A=((a=n.flip)==null?void 0:a.overflows)||[];if(d&&j.push(I[b]),p){const L=iee(s,o,C);j.push(I[L[0]],I[L[1]])}if(A=[...A,{placement:s,overflows:j}],!j.every(L=>L<=0)){var D,z;const L=(((D=n.flip)==null?void 0:D.index)||0)+1,G=P[L];if(G){var T;const O=p==="alignment"?_!==Us(G):!1,$=((T=A[0])==null?void 0:T.overflows[0])>0;if(!O||$)return{data:{index:L,overflows:A},reset:{placement:G}}}let W=(z=A.filter(O=>O.overflows[0]<=0).sort((O,$)=>O.overflows[1]-$.overflows[1])[0])==null?void 0:z.placement;if(!W)switch(h){case"bestFit":{var M;const O=(M=A.filter($=>{if(F){const U=Us($.placement);return U===_||U==="y"}return!0}).map($=>[$.placement,$.overflows.filter(U=>U>0).reduce((U,X)=>U+X,0)]).sort(($,U)=>$[1]-U[1])[0])==null?void 0:M[0];O&&(W=O);break}case"initialPlacement":W=i;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function a7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function s7(e){return see.some(t=>e[t]>=0)}const gee=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...s}=Zs(e,t);switch(a){case"referenceHidden":{const n=await vd(t,{...s,elementContext:"reference"}),o=a7(n,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:s7(o)}}}case"escaped":{const n=await vd(t,{...s,altBoundary:!0}),o=a7(n,r.floating);return{data:{escapedOffsets:o,escaped:s7(o)}}}default:return{}}}}};async function mee(e,t){const{placement:r,platform:a,elements:s}=e,n=await(a.isRTL==null?void 0:a.isRTL(s.floating)),o=Js(r),i=Ll(r),l=Us(r)==="y",c=["left","top"].includes(o)?-1:1,d=n&&l?-1:1,p=Zs(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return i&&typeof y=="number"&&(h=i==="end"?y*-1:y),l?{x:h*d,y:f*c}:{x:f*c,y:h*d}}const bee=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:s,y:n,placement:o,middlewareData:i}=t,l=await mee(t,e);return o===((r=i.offset)==null?void 0:r.placement)&&(a=i.arrow)!=null&&a.alignmentOffset?{}:{x:s+l.x,y:n+l.y,data:{...l,placement:o}}}}},yee=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:s}=t,{mainAxis:n=!0,crossAxis:o=!1,limiter:i={fn:w=>{let{x:b,y:_}=w;return{x:b,y:_}}},...l}=Zs(e,t),c={x:r,y:a},d=await vd(t,l),p=Us(Js(s)),f=z0(p);let h=c[f],y=c[p];if(n){const w=f==="y"?"top":"left",b=f==="y"?"bottom":"right",_=h+d[w],x=h-d[b];h=Jb(_,h,x)}if(o){const w=p==="y"?"top":"left",b=p==="y"?"bottom":"right",_=y+d[w],x=y-d[b];y=Jb(_,y,x)}const m=i.fn({...t,[f]:h,[p]:y});return{...m,data:{x:m.x-r,y:m.y-a,enabled:{[f]:n,[p]:o}}}}}},_ee=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:s,rects:n,middlewareData:o}=t,{offset:i=0,mainAxis:l=!0,crossAxis:c=!0}=Zs(e,t),d={x:r,y:a},p=Us(s),f=z0(p);let h=d[f],y=d[p];const m=Zs(i,t),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",C=n.reference[f]-n.floating[x]+w.mainAxis,k=n.reference[f]+n.reference[x]-w.mainAxis;h<C?h=C:h>k&&(h=k)}if(c){var b,_;const x=f==="y"?"width":"height",C=["top","left"].includes(Js(s)),k=n.reference[p]-n.floating[x]+(C&&((b=o.offset)==null?void 0:b[p])||0)+(C?0:w.crossAxis),F=n.reference[p]+n.reference[x]+(C?0:((_=o.offset)==null?void 0:_[p])||0)-(C?w.crossAxis:0);y<k?y=k:y>F&&(y=F)}return{[f]:h,[p]:y}}}},wee=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:s,rects:n,platform:o,elements:i}=t,{apply:l=()=>{},...c}=Zs(e,t),d=await vd(t,c),p=Js(s),f=Ll(s),h=Us(s)==="y",{width:y,height:m}=n.floating;let w,b;p==="top"||p==="bottom"?(w=p,b=f===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(b=p,w=f==="end"?"top":"bottom");const _=m-d.top-d.bottom,x=y-d.left-d.right,C=Kn(m-d[w],_),k=Kn(y-d[b],x),F=!t.middlewareData.shift;let P=C,I=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(I=x),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(P=_),F&&!f){const A=Yr(d.left,0),D=Yr(d.right,0),z=Yr(d.top,0),T=Yr(d.bottom,0);h?I=y-2*(A!==0||D!==0?A+D:Yr(d.left,d.right)):P=m-2*(z!==0||T!==0?z+T:Yr(d.top,d.bottom))}await l({...t,availableWidth:I,availableHeight:P});const j=await o.getDimensions(i.floating);return y!==j.width||m!==j.height?{reset:{rects:!0}}:{}}}};function jg(){return typeof window<"u"}function Rl(e){return bC(e)?(e.nodeName||"").toLowerCase():"#document"}function ra(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fs(e){var t;return(t=(bC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bC(e){return jg()?e instanceof Node||e instanceof ra(e).Node:!1}function Ua(e){return jg()?e instanceof Element||e instanceof ra(e).Element:!1}function ys(e){return jg()?e instanceof HTMLElement||e instanceof ra(e).HTMLElement:!1}function n7(e){return!jg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ra(e).ShadowRoot}function Jd(e){const{overflow:t,overflowX:r,overflowY:a,display:s}=Wa(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(s)}function vee(e){return["table","td","th"].includes(Rl(e))}function Eg(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function $0(e){const t=U0(),r=Ua(e)?Wa(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(r.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(r.contain||"").includes(a))}function xee(e){let t=Vn(e);for(;ys(t)&&!wl(t);){if($0(t))return t;if(Eg(t))return null;t=Vn(t)}return null}function U0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wl(e){return["html","body","#document"].includes(Rl(e))}function Wa(e){return ra(e).getComputedStyle(e)}function Dg(e){return Ua(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vn(e){if(Rl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||n7(e)&&e.host||Fs(e);return n7(t)?t.host:t}function yC(e){const t=Vn(e);return wl(t)?e.ownerDocument?e.ownerDocument.body:e.body:ys(t)&&Jd(t)?t:yC(t)}function xd(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=yC(e),n=s===((a=e.ownerDocument)==null?void 0:a.body),o=ra(s);if(n){const i=ey(o);return t.concat(o,o.visualViewport||[],Jd(s)?s:[],i&&r?xd(i):[])}return t.concat(s,xd(s,[],r))}function ey(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _C(e){const t=Wa(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=ys(e),n=s?e.offsetWidth:r,o=s?e.offsetHeight:a,i=Ah(r)!==n||Ah(a)!==o;return i&&(r=n,a=o),{width:r,height:a,$:i}}function W0(e){return Ua(e)?e:e.contextElement}function al(e){const t=W0(e);if(!ys(t))return hs(1);const r=t.getBoundingClientRect(),{width:a,height:s,$:n}=_C(t);let o=(n?Ah(r.width):r.width)/a,i=(n?Ah(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!i||!Number.isFinite(i))&&(i=1),{x:o,y:i}}const See=hs(0);function wC(e){const t=ra(e);return!U0()||!t.visualViewport?See:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kee(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ra(e)?!1:t}function Wo(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),n=W0(e);let o=hs(1);t&&(a?Ua(a)&&(o=al(a)):o=al(e));const i=kee(n,r,a)?wC(n):hs(0);let l=(s.left+i.x)/o.x,c=(s.top+i.y)/o.y,d=s.width/o.x,p=s.height/o.y;if(n){const f=ra(n),h=a&&Ua(a)?ra(a):a;let y=f,m=ey(y);for(;m&&a&&h!==y;){const w=al(m),b=m.getBoundingClientRect(),_=Wa(m),x=b.left+(m.clientLeft+parseFloat(_.paddingLeft))*w.x,C=b.top+(m.clientTop+parseFloat(_.paddingTop))*w.y;l*=w.x,c*=w.y,d*=w.x,p*=w.y,l+=x,c+=C,y=ra(m),m=ey(y)}}return Eh({width:d,height:p,x:l,y:c})}function H0(e,t){const r=Dg(e).scrollLeft;return t?t.left+r:Wo(Fs(e)).left+r}function vC(e,t,r){r===void 0&&(r=!1);const a=e.getBoundingClientRect(),s=a.left+t.scrollLeft-(r?0:H0(e,a)),n=a.top+t.scrollTop;return{x:s,y:n}}function Fee(e){let{elements:t,rect:r,offsetParent:a,strategy:s}=e;const n=s==="fixed",o=Fs(a),i=t?Eg(t.floating):!1;if(a===o||i&&n)return r;let l={scrollLeft:0,scrollTop:0},c=hs(1);const d=hs(0),p=ys(a);if((p||!p&&!n)&&((Rl(a)!=="body"||Jd(o))&&(l=Dg(a)),ys(a))){const h=Wo(a);c=al(a),d.x=h.x+a.clientLeft,d.y=h.y+a.clientTop}const f=o&&!p&&!n?vC(o,l,!0):hs(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:r.y*c.y-l.scrollTop*c.y+d.y+f.y}}function Cee(e){return Array.from(e.getClientRects())}function Pee(e){const t=Fs(e),r=Dg(e),a=e.ownerDocument.body,s=Yr(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),n=Yr(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-r.scrollLeft+H0(e);const i=-r.scrollTop;return Wa(a).direction==="rtl"&&(o+=Yr(t.clientWidth,a.clientWidth)-s),{width:s,height:n,x:o,y:i}}function Iee(e,t){const r=ra(e),a=Fs(e),s=r.visualViewport;let n=a.clientWidth,o=a.clientHeight,i=0,l=0;if(s){n=s.width,o=s.height;const c=U0();(!c||c&&t==="fixed")&&(i=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:i,y:l}}function Aee(e,t){const r=Wo(e,!0,t==="fixed"),a=r.top+e.clientTop,s=r.left+e.clientLeft,n=ys(e)?al(e):hs(1),o=e.clientWidth*n.x,i=e.clientHeight*n.y,l=s*n.x,c=a*n.y;return{width:o,height:i,x:l,y:c}}function o7(e,t,r){let a;if(t==="viewport")a=Iee(e,r);else if(t==="document")a=Pee(Fs(e));else if(Ua(t))a=Aee(t,r);else{const s=wC(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Eh(a)}function xC(e,t){const r=Vn(e);return r===t||!Ua(r)||wl(r)?!1:Wa(r).position==="fixed"||xC(r,t)}function jee(e,t){const r=t.get(e);if(r)return r;let a=xd(e,[],!1).filter(i=>Ua(i)&&Rl(i)!=="body"),s=null;const n=Wa(e).position==="fixed";let o=n?Vn(e):e;for(;Ua(o)&&!wl(o);){const i=Wa(o),l=$0(o);!l&&i.position==="fixed"&&(s=null),(n?!l&&!s:!l&&i.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Jd(o)&&!l&&xC(e,o))?a=a.filter(d=>d!==o):s=i,o=Vn(o)}return t.set(e,a),a}function Eee(e){let{element:t,boundary:r,rootBoundary:a,strategy:s}=e;const o=[...r==="clippingAncestors"?Eg(t)?[]:jee(t,this._c):[].concat(r),a],i=o[0],l=o.reduce((c,d)=>{const p=o7(t,d,s);return c.top=Yr(p.top,c.top),c.right=Kn(p.right,c.right),c.bottom=Kn(p.bottom,c.bottom),c.left=Yr(p.left,c.left),c},o7(t,i,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Dee(e){const{width:t,height:r}=_C(e);return{width:t,height:r}}function Tee(e,t,r){const a=ys(t),s=Fs(t),n=r==="fixed",o=Wo(e,!0,n,t);let i={scrollLeft:0,scrollTop:0};const l=hs(0);function c(){l.x=H0(s)}if(a||!a&&!n)if((Rl(t)!=="body"||Jd(s))&&(i=Dg(t)),a){const h=Wo(t,!0,n,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else s&&c();n&&!a&&s&&c();const d=s&&!a&&!n?vC(s,i):hs(0),p=o.left+i.scrollLeft-l.x-d.x,f=o.top+i.scrollTop-l.y-d.y;return{x:p,y:f,width:o.width,height:o.height}}function D2(e){return Wa(e).position==="static"}function i7(e,t){if(!ys(e)||Wa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Fs(e)===r&&(r=r.ownerDocument.body),r}function SC(e,t){const r=ra(e);if(Eg(e))return r;if(!ys(e)){let s=Vn(e);for(;s&&!wl(s);){if(Ua(s)&&!D2(s))return s;s=Vn(s)}return r}let a=i7(e,t);for(;a&&vee(a)&&D2(a);)a=i7(a,t);return a&&wl(a)&&D2(a)&&!$0(a)?r:a||xee(e)||r}const Mee=async function(e){const t=this.getOffsetParent||SC,r=this.getDimensions,a=await r(e.floating);return{reference:Tee(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function Bee(e){return Wa(e).direction==="rtl"}const Lee={convertOffsetParentRelativeRectToViewportRelativeRect:Fee,getDocumentElement:Fs,getClippingRect:Eee,getOffsetParent:SC,getElementRects:Mee,getClientRects:Cee,getDimensions:Dee,getScale:al,isElement:Ua,isRTL:Bee};function kC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ree(e,t){let r=null,a;const s=Fs(e);function n(){var i;clearTimeout(a),(i=r)==null||i.disconnect(),r=null}function o(i,l){i===void 0&&(i=!1),l===void 0&&(l=1),n();const c=e.getBoundingClientRect(),{left:d,top:p,width:f,height:h}=c;if(i||t(),!f||!h)return;const y=dp(p),m=dp(s.clientWidth-(d+f)),w=dp(s.clientHeight-(p+h)),b=dp(d),x={rootMargin:-y+"px "+-m+"px "+-w+"px "+-b+"px",threshold:Yr(0,Kn(1,l))||1};let C=!0;function k(F){const P=F[0].intersectionRatio;if(P!==l){if(!C)return o();P?o(!1,P):a=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!kC(c,e.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(k,{...x,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,x)}r.observe(e)}return o(!0),n}function Oee(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:n=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:l=!1}=a,c=W0(e),d=s||n?[...c?xd(c):[],...xd(t)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",r,{passive:!0}),n&&b.addEventListener("resize",r)});const p=c&&i?Ree(c,r):null;let f=-1,h=null;o&&(h=new ResizeObserver(b=>{let[_]=b;_&&_.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),r()}),c&&!l&&h.observe(c),h.observe(t));let y,m=l?Wo(e):null;l&&w();function w(){const b=Wo(e);m&&!kC(m,b)&&r(),m=b,y=requestAnimationFrame(w)}return r(),()=>{var b;d.forEach(_=>{s&&_.removeEventListener("scroll",r),n&&_.removeEventListener("resize",r)}),p==null||p(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(y)}}const zee=bee,Nee=yee,qee=hee,$ee=wee,Uee=gee,l7=fee,Wee=_ee,Hee=(e,t,r)=>{const a=new Map,s={platform:Lee,...r},n={...s.platform,_c:a};return pee(e,t,{...s,platform:n})};var _f=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Dh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Dh(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=r;a--!==0;){const n=s[a];if(!(n==="_owner"&&e.$$typeof)&&!Dh(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function FC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c7(e,t){const r=FC(e);return Math.round(t*r)/r}function T2(e){const t=S.useRef(e);return _f(()=>{t.current=e}),t}function Gee(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:s,elements:{reference:n,floating:o}={},transform:i=!0,whileElementsMounted:l,open:c}=e,[d,p]=S.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=S.useState(a);Dh(f,a)||h(a);const[y,m]=S.useState(null),[w,b]=S.useState(null),_=S.useCallback(O=>{O!==F.current&&(F.current=O,m(O))},[]),x=S.useCallback(O=>{O!==P.current&&(P.current=O,b(O))},[]),C=n||y,k=o||w,F=S.useRef(null),P=S.useRef(null),I=S.useRef(d),j=l!=null,A=T2(l),D=T2(s),z=T2(c),T=S.useCallback(()=>{if(!F.current||!P.current)return;const O={placement:t,strategy:r,middleware:f};D.current&&(O.platform=D.current),Hee(F.current,P.current,O).then($=>{const U={...$,isPositioned:z.current!==!1};M.current&&!Dh(I.current,U)&&(I.current=U,Fl.flushSync(()=>{p(U)}))})},[f,t,r,D,z]);_f(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(O=>({...O,isPositioned:!1})))},[c]);const M=S.useRef(!1);_f(()=>(M.current=!0,()=>{M.current=!1}),[]),_f(()=>{if(C&&(F.current=C),k&&(P.current=k),C&&k){if(A.current)return A.current(C,k,T);T()}},[C,k,T,A,j]);const L=S.useMemo(()=>({reference:F,floating:P,setReference:_,setFloating:x}),[_,x]),G=S.useMemo(()=>({reference:C,floating:k}),[C,k]),W=S.useMemo(()=>{const O={position:r,left:0,top:0};if(!G.floating)return O;const $=c7(G.floating,d.x),U=c7(G.floating,d.y);return i?{...O,transform:"translate("+$+"px, "+U+"px)",...FC(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:U}},[r,i,G.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:T,refs:L,elements:G,floatingStyles:W}),[d,T,L,G,W])}const Kee=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:s}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?l7({element:a.current,padding:s}).fn(r):{}:a?l7({element:a,padding:s}).fn(r):{}}}},Vee=(e,t)=>({...zee(e),options:[e,t]}),Yee=(e,t)=>({...Nee(e),options:[e,t]}),Xee=(e,t)=>({...Wee(e),options:[e,t]}),Zee=(e,t)=>({...qee(e),options:[e,t]}),Jee=(e,t)=>({...$ee(e),options:[e,t]}),Qee=(e,t)=>({...Uee(e),options:[e,t]}),ete=(e,t)=>({...Kee(e),options:[e,t]});var tte="Arrow",CC=S.forwardRef((e,t)=>{const{children:r,width:a=10,height:s=5,...n}=e;return u.jsx(we.svg,{...n,ref:t,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});CC.displayName=tte;var rte=CC;function PC(e){const[t,r]=S.useState(void 0);return Xs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const n=s[0];let o,i;if("borderBoxSize"in n){const l=n.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,i=c.blockSize}else o=e.offsetWidth,i=e.offsetHeight;r({width:o,height:i})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}var G0="Popper",[IC,Tg]=Ss(G0),[ate,AC]=IC(G0),jC=e=>{const{__scopePopper:t,children:r}=e,[a,s]=S.useState(null);return u.jsx(ate,{scope:t,anchor:a,onAnchorChange:s,children:r})};jC.displayName=G0;var EC="PopperAnchor",DC=S.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...s}=e,n=AC(EC,r),o=S.useRef(null),i=$e(t,o);return S.useEffect(()=>{n.onAnchorChange((a==null?void 0:a.current)||o.current)}),a?null:u.jsx(we.div,{...s,ref:i})});DC.displayName=EC;var K0="PopperContent",[ste,nte]=IC(K0),TC=S.forwardRef((e,t)=>{var De,Je,Ee,nt,Oe,$r;const{__scopePopper:r,side:a="bottom",sideOffset:s=0,align:n="center",alignOffset:o=0,arrowPadding:i=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:p="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:y,...m}=e,w=AC(K0,r),[b,_]=S.useState(null),x=$e(t,Dt=>_(Dt)),[C,k]=S.useState(null),F=PC(C),P=(F==null?void 0:F.width)??0,I=(F==null?void 0:F.height)??0,j=a+(n!=="center"?"-"+n:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(c)?c:[c],z=D.length>0,T={padding:A,boundary:D.filter(ite),altBoundary:z},{refs:M,floatingStyles:L,placement:G,isPositioned:W,middlewareData:O}=Gee({strategy:"fixed",placement:j,whileElementsMounted:(...Dt)=>Oee(...Dt,{animationFrame:h==="always"}),elements:{reference:w.anchor},middleware:[Vee({mainAxis:s+I,alignmentAxis:o}),l&&Yee({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Xee():void 0,...T}),l&&Zee({...T}),Jee({...T,apply:({elements:Dt,rects:vr,availableWidth:yt,availableHeight:Ht})=>{const{width:Cs,height:zl}=vr.reference,ln=Dt.floating.style;ln.setProperty("--radix-popper-available-width",`${yt}px`),ln.setProperty("--radix-popper-available-height",`${Ht}px`),ln.setProperty("--radix-popper-anchor-width",`${Cs}px`),ln.setProperty("--radix-popper-anchor-height",`${zl}px`)}}),C&&ete({element:C,padding:i}),lte({arrowWidth:P,arrowHeight:I}),f&&Qee({strategy:"referenceHidden",...T})]}),[$,U]=LC(G),X=fr(y);Xs(()=>{W&&(X==null||X())},[W,X]);const ne=(De=O.arrow)==null?void 0:De.x,Ae=(Je=O.arrow)==null?void 0:Je.y,je=((Ee=O.arrow)==null?void 0:Ee.centerOffset)!==0,[ie,qe]=S.useState();return Xs(()=>{b&&qe(window.getComputedStyle(b).zIndex)},[b]),u.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:W?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(nt=O.transformOrigin)==null?void 0:nt.x,(Oe=O.transformOrigin)==null?void 0:Oe.y].join(" "),...(($r=O.hide)==null?void 0:$r.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx(ste,{scope:r,placedSide:$,onArrowChange:k,arrowX:ne,arrowY:Ae,shouldHideArrow:je,children:u.jsx(we.div,{"data-side":$,"data-align":U,...m,ref:x,style:{...m.style,animation:W?void 0:"none"}})})})});TC.displayName=K0;var MC="PopperArrow",ote={top:"bottom",right:"left",bottom:"top",left:"right"},BC=S.forwardRef(function(t,r){const{__scopePopper:a,...s}=t,n=nte(MC,a),o=ote[n.placedSide];return u.jsx("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:u.jsx(rte,{...s,ref:r,style:{...s.style,display:"block"}})})});BC.displayName=MC;function ite(e){return e!==null}var lte=e=>({name:"transformOrigin",options:e,fn(t){var w,b,_;const{placement:r,rects:a,middlewareData:s}=t,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,i=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,d]=LC(r),p={start:"0%",center:"50%",end:"100%"}[d],f=(((b=s.arrow)==null?void 0:b.x)??0)+i/2,h=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let y="",m="";return c==="bottom"?(y=o?p:`${f}px`,m=`${-l}px`):c==="top"?(y=o?p:`${f}px`,m=`${a.floating.height+l}px`):c==="right"?(y=`${-l}px`,m=o?p:`${h}px`):c==="left"&&(y=`${a.floating.width+l}px`,m=o?p:`${h}px`),{data:{x:y,y:m}}}});function LC(e){const[t,r="center"]=e.split("-");return[t,r]}var V0=jC,Y0=DC,RC=TC,OC=BC,Mg="Popover",[zC,Pie]=Ss(Mg,[Tg]),Qd=Tg(),[cte,so]=zC(Mg),NC=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:s,onOpenChange:n,modal:o=!1}=e,i=Qd(t),l=S.useRef(null),[c,d]=S.useState(!1),[p,f]=ao({prop:a,defaultProp:s??!1,onChange:n,caller:Mg});return u.jsx(V0,{...i,children:u.jsx(cte,{scope:t,contentId:$s(),triggerRef:l,open:p,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:S.useCallback(()=>d(!0),[]),onCustomAnchorRemove:S.useCallback(()=>d(!1),[]),modal:o,children:r})})};NC.displayName=Mg;var qC="PopoverAnchor",dte=S.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=so(qC,r),n=Qd(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:i}=s;return S.useEffect(()=>(o(),()=>i()),[o,i]),u.jsx(Y0,{...n,...a,ref:t})});dte.displayName=qC;var $C="PopoverTrigger",UC=S.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=so($C,r),n=Qd(r),o=$e(t,s.triggerRef),i=u.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":VC(s.open),...a,ref:o,onClick:re(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:u.jsx(Y0,{asChild:!0,...n,children:i})});UC.displayName=$C;var X0="PopoverPortal",[ute,pte]=zC(X0,{forceMount:void 0}),WC=e=>{const{__scopePopover:t,forceMount:r,children:a,container:s}=e,n=so(X0,t);return u.jsx(ute,{scope:t,forceMount:r,children:u.jsx(Ka,{present:r||n.open,children:u.jsx(Xd,{asChild:!0,container:s,children:a})})})};WC.displayName=X0;var vl="PopoverContent",HC=S.forwardRef((e,t)=>{const r=pte(vl,e.__scopePopover),{forceMount:a=r.forceMount,...s}=e,n=so(vl,e.__scopePopover);return u.jsx(Ka,{present:a||n.open,children:n.modal?u.jsx(hte,{...s,ref:t}):u.jsx(gte,{...s,ref:t})})});HC.displayName=vl;var fte=_l("PopoverContent.RemoveScroll"),hte=S.forwardRef((e,t)=>{const r=so(vl,e.__scopePopover),a=S.useRef(null),s=$e(t,a),n=S.useRef(!1);return S.useEffect(()=>{const o=a.current;if(o)return I0(o)},[]),u.jsx(P0,{as:fte,allowPinchZoom:!0,children:u.jsx(GC,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),n.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0,c=i.button===2||l;n.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),gte=S.forwardRef((e,t)=>{const r=so(vl,e.__scopePopover),a=S.useRef(!1),s=S.useRef(!1);return u.jsx(GC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var o,i;(o=e.onCloseAutoFocus)==null||o.call(e,n),n.defaultPrevented||(a.current||(i=r.triggerRef.current)==null||i.focus(),n.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:n=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=n.target;((c=r.triggerRef.current)==null?void 0:c.contains(o))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&s.current&&n.preventDefault()}})}),GC=S.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:n,disableOutsidePointerEvents:o,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...p}=e,f=so(vl,r),h=Qd(r);return C0(),u.jsx(vg,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:n,children:u.jsx(Yd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:u.jsx(RC,{"data-state":VC(f.open),role:"dialog",id:f.contentId,...h,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),KC="PopoverClose",mte=S.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=so(KC,r);return u.jsx(we.button,{type:"button",...a,ref:t,onClick:re(e.onClick,()=>s.onOpenChange(!1))})});mte.displayName=KC;var bte="PopoverArrow",yte=S.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=Qd(r);return u.jsx(OC,{...s,...a,ref:t})});yte.displayName=bte;function VC(e){return e?"open":"closed"}var _te=NC,wte=UC,vte=WC,xte=HC;function no(e,t){const r=N(),a=S.useRef(!1),s=ks(),n=S.useCallback(i=>{a.current=i,r.batch(()=>{i?(r.complete(),r.addOpenMenu(e)):r.updateInstanceState({openMenus:r.getOpenMenus().filter(l=>!l.startsWith(e))}),t==null||t(i)})},[r,e,t]),o=H("is menu open",()=>r.getOpenMenus().includes(e),[r,e]);return S.useEffect(()=>(a.current&&(s("open-menu",{source:"unknown",id:e}),r.addOpenMenu(e)),()=>{a.current&&(r.deleteOpenMenu(e),r.getOpenMenus().forEach(i=>{i.startsWith(e)&&(s("close-menu",{source:"unknown",id:e}),r.deleteOpenMenu(i))}),a.current=!1)}),[r,e,s]),[o,n]}function Z0({id:e,children:t,onOpenChange:r,open:a}){const[s,n]=no(e,r);return u.jsx(_te,{onOpenChange:n,open:a||s,children:u.jsx("div",{className:"tlui-popover",children:t})})}function J0({children:e}){return u.jsx(wte,{asChild:!0,dir:"ltr",children:e})}function Q0({side:e,children:t,align:r="center",sideOffset:a=8,alignOffset:s=0}){const n=or();return u.jsx(vte,{container:n,children:u.jsx(xte,{className:"tlui-popover__content",side:e,sideOffset:a,align:r,alignOffset:s,dir:"ltr",children:t})})}const YC=S.createContext(null);function Bg(){const e=S.useContext(YC);if(!e)throw new Error("useTldrawUiMenuContext must be used within a TldrawUiMenuContextProvider");return e}function ka({type:e,sourceId:t,children:r}){return u.jsx(YC.Provider,{value:{type:e,sourceId:t},children:r})}function Ste(e){return e.getSelectedShapeIds().map(a=>e.getShape(a)).filter(a=>{if(!a)return!1;if(e.isShapeOfType(a,"arrow")){const s=Ir(e,a);if(s.start||s.end)return!1}return!0})}const XC=()=>{const e=N();return H("threeStackableItems",()=>Ste(e).length>2,[e])},nn=()=>{const e=N();return H("isInSelectState",()=>e.isIn("select"),[e])},ZC=()=>{const e=N();return H("allow group",()=>{const t=e.getSelectedShapes();if(t.length<2)return!1;for(const r of t)if(e.isShapeOfType(r,"arrow")){const a=Ir(e,r);if(a.start&&!t.some(s=>s.id===a.start.toId)||a.end&&!t.some(s=>s.id===a.end.toId))return!1}return!0},[e])},JC=()=>{const e=N();return H("allowUngroup",()=>e.getSelectedShapeIds().some(t=>{var r;return((r=e.getShape(t))==null?void 0:r.type)==="group"}),[e])},kte=typeof window<"u"&&"navigator"in window&&!!navigator.clipboard&&!!navigator.clipboard.read;function Fte(e,t){const r=N();return H("selectedShapes",()=>{const a=r.getSelectedShapes().length;return e===void 0?t===void 0?a:a<=t:t===void 0?a>=e:a>=e&&a<=t},[r,e,t])}function wr(e,t){const r=N();return H("selectedShapes",()=>{const a=r.getSelectedShapes().filter(s=>!r.isShapeOrAncestorLocked(s)).length;return e===void 0?t===void 0?a:a<=t:t===void 0?a>=e:a>=e&&a<=t},[r])}function Cte(){const e=N();return H("showAutoSizeToggle",()=>{const t=e.getSelectedShapes();return t.length===1&&e.isShapeOfType(t[0],"text")&&t[0].props.autoSize===!1},[e])}function QC(){const e=N();return H("hasLinkShapeSelected",()=>{const t=e.getOnlySelectedShape();return!!(t&&t.type!=="embed"&&"url"in t.props&&!t.isLocked)},[e])}function Pte(){const e=N();return H("onlyFlippableShape",()=>{const t=e.getOnlySelectedShape();return t&&(e.isShapeOfType(t,"group")||e.isShapeOfType(t,"arrow")||e.isShapeOfType(t,"line")||e.isShapeOfType(t,"draw"))},[e])}function eP(){const e=N();return H("useCanRedo",()=>e.getCanRedo(),[e])}function tP(){const e=N();return H("useCanUndo",()=>e.getCanUndo(),[e])}var Ite=S.createContext(void 0);function e4(e){const t=S.useContext(Ite);return e||t||"ltr"}var M2="rovingFocusGroup.onEntryFocus",Ate={bubbles:!1,cancelable:!0},eu="RovingFocusGroup",[ty,rP,jte]=kg(eu),[Ete,aP]=Ss(eu,[jte]),[Dte,Tte]=Ete(eu),sP=S.forwardRef((e,t)=>u.jsx(ty.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(ty.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Mte,{...e,ref:t})})}));sP.displayName=eu;var Mte=S.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:n,currentTabStopId:o,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...p}=e,f=S.useRef(null),h=$e(t,f),y=e4(n),[m,w]=ao({prop:o,defaultProp:i??null,onChange:l,caller:eu}),[b,_]=S.useState(!1),x=fr(c),C=rP(r),k=S.useRef(!1),[F,P]=S.useState(0);return S.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(M2,x),()=>I.removeEventListener(M2,x)},[x]),u.jsx(Dte,{scope:r,orientation:a,dir:y,loop:s,currentTabStopId:m,onItemFocus:S.useCallback(I=>w(I),[w]),onItemShiftTab:S.useCallback(()=>_(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(I=>I+1),[]),onFocusableItemRemove:S.useCallback(()=>P(I=>I-1),[]),children:u.jsx(we.div,{tabIndex:b||F===0?-1:0,"data-orientation":a,...p,ref:h,style:{outline:"none",...e.style},onMouseDown:re(e.onMouseDown,()=>{k.current=!0}),onFocus:re(e.onFocus,I=>{const j=!k.current;if(I.target===I.currentTarget&&j&&!b){const A=new CustomEvent(M2,Ate);if(I.currentTarget.dispatchEvent(A),!A.defaultPrevented){const D=C().filter(G=>G.focusable),z=D.find(G=>G.active),T=D.find(G=>G.id===m),L=[z,T,...D].filter(Boolean).map(G=>G.ref.current);iP(L,d)}}k.current=!1}),onBlur:re(e.onBlur,()=>_(!1))})})}),nP="RovingFocusGroupItem",oP=S.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:n,children:o,...i}=e,l=$s(),c=n||l,d=Tte(nP,r),p=d.currentTabStopId===c,f=rP(r),{onFocusableItemAdd:h,onFocusableItemRemove:y,currentTabStopId:m}=d;return S.useEffect(()=>{if(a)return h(),()=>y()},[a,h,y]),u.jsx(ty.ItemSlot,{scope:r,id:c,focusable:a,active:s,children:u.jsx(we.span,{tabIndex:p?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:re(e.onMouseDown,w=>{a?d.onItemFocus(c):w.preventDefault()}),onFocus:re(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:re(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const b=Rte(w,d.orientation,d.dir);if(b!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=f().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")x.reverse();else if(b==="prev"||b==="next"){b==="prev"&&x.reverse();const C=x.indexOf(w.currentTarget);x=d.loop?Ote(x,C+1):x.slice(C+1)}setTimeout(()=>iP(x))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:m!=null}):o})})});oP.displayName=nP;var Bte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lte(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Rte(e,t,r){const a=Lte(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Bte[a]}function iP(e,t=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function Ote(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var zte=sP,Nte=oP,ry=["Enter"," "],qte=["ArrowDown","PageUp","Home"],lP=["ArrowUp","PageDown","End"],$te=[...qte,...lP],Ute={ltr:[...ry,"ArrowRight"],rtl:[...ry,"ArrowLeft"]},Wte={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tu="Menu",[Sd,Hte,Gte]=kg(tu),[ei,Lg]=Ss(tu,[Gte,Tg,aP]),ru=Tg(),cP=aP(),[dP,oo]=ei(tu),[Kte,au]=ei(tu),uP=e=>{const{__scopeMenu:t,open:r=!1,children:a,dir:s,onOpenChange:n,modal:o=!0}=e,i=ru(t),[l,c]=S.useState(null),d=S.useRef(!1),p=fr(n),f=e4(s);return S.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),u.jsx(V0,{...i,children:u.jsx(dP,{scope:t,open:r,onOpenChange:p,content:l,onContentChange:c,children:u.jsx(Kte,{scope:t,onClose:S.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:d,dir:f,modal:o,children:a})})})};uP.displayName=tu;var Vte="MenuAnchor",t4=S.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,s=ru(r);return u.jsx(Y0,{...s,...a,ref:t})});t4.displayName=Vte;var r4="MenuPortal",[Yte,pP]=ei(r4,{forceMount:void 0}),fP=e=>{const{__scopeMenu:t,forceMount:r,children:a,container:s}=e,n=oo(r4,t);return u.jsx(Yte,{scope:t,forceMount:r,children:u.jsx(Ka,{present:r||n.open,children:u.jsx(Xd,{asChild:!0,container:s,children:a})})})};fP.displayName=r4;var va="MenuContent",[Xte,a4]=ei(va),hP=S.forwardRef((e,t)=>{const r=pP(va,e.__scopeMenu),{forceMount:a=r.forceMount,...s}=e,n=oo(va,e.__scopeMenu),o=au(va,e.__scopeMenu);return u.jsx(Sd.Provider,{scope:e.__scopeMenu,children:u.jsx(Ka,{present:a||n.open,children:u.jsx(Sd.Slot,{scope:e.__scopeMenu,children:o.modal?u.jsx(Zte,{...s,ref:t}):u.jsx(Jte,{...s,ref:t})})})})}),Zte=S.forwardRef((e,t)=>{const r=oo(va,e.__scopeMenu),a=S.useRef(null),s=$e(t,a);return S.useEffect(()=>{const n=a.current;if(n)return I0(n)},[]),u.jsx(s4,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:re(e.onFocusOutside,n=>n.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Jte=S.forwardRef((e,t)=>{const r=oo(va,e.__scopeMenu);return u.jsx(s4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Qte=_l("MenuContent.ScrollLock"),s4=S.forwardRef((e,t)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:f,onDismiss:h,disableOutsideScroll:y,...m}=e,w=oo(va,r),b=au(va,r),_=ru(r),x=cP(r),C=Hte(r),[k,F]=S.useState(null),P=S.useRef(null),I=$e(t,P,w.onContentChange),j=S.useRef(0),A=S.useRef(""),D=S.useRef(0),z=S.useRef(null),T=S.useRef("right"),M=S.useRef(0),L=y?P0:S.Fragment,G=y?{as:Qte,allowPinchZoom:!0}:void 0,W=$=>{var De,Je;const U=A.current+$,X=C().filter(Ee=>!Ee.disabled),ne=document.activeElement,Ae=(De=X.find(Ee=>Ee.ref.current===ne))==null?void 0:De.textValue,je=X.map(Ee=>Ee.textValue),ie=ure(je,U,Ae),qe=(Je=X.find(Ee=>Ee.textValue===ie))==null?void 0:Je.ref.current;(function Ee(nt){A.current=nt,window.clearTimeout(j.current),nt!==""&&(j.current=window.setTimeout(()=>Ee(""),1e3))})(U),qe&&setTimeout(()=>qe.focus())};S.useEffect(()=>()=>window.clearTimeout(j.current),[]),C0();const O=S.useCallback($=>{var X,ne;return T.current===((X=z.current)==null?void 0:X.side)&&fre($,(ne=z.current)==null?void 0:ne.area)},[]);return u.jsx(Xte,{scope:r,searchRef:A,onItemEnter:S.useCallback($=>{O($)&&$.preventDefault()},[O]),onItemLeave:S.useCallback($=>{var U;O($)||((U=P.current)==null||U.focus(),F(null))},[O]),onTriggerLeave:S.useCallback($=>{O($)&&$.preventDefault()},[O]),pointerGraceTimerRef:D,onPointerGraceIntentChange:S.useCallback($=>{z.current=$},[]),children:u.jsx(L,{...G,children:u.jsx(vg,{asChild:!0,trapped:s,onMountAutoFocus:re(n,$=>{var U;$.preventDefault(),(U=P.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(Yd,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:f,onDismiss:h,children:u.jsx(zte,{asChild:!0,...x,dir:b.dir,orientation:"vertical",loop:a,currentTabStopId:k,onCurrentTabStopIdChange:F,onEntryFocus:re(l,$=>{b.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(RC,{role:"menu","aria-orientation":"vertical","data-state":EP(w.open),"data-radix-menu-content":"",dir:b.dir,..._,...m,ref:I,style:{outline:"none",...m.style},onKeyDown:re(m.onKeyDown,$=>{const X=$.target.closest("[data-radix-menu-content]")===$.currentTarget,ne=$.ctrlKey||$.altKey||$.metaKey,Ae=$.key.length===1;X&&($.key==="Tab"&&$.preventDefault(),!ne&&Ae&&W($.key));const je=P.current;if($.target!==je||!$te.includes($.key))return;$.preventDefault();const qe=C().filter(De=>!De.disabled).map(De=>De.ref.current);lP.includes($.key)&&qe.reverse(),cre(qe)}),onBlur:re(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(j.current),A.current="")}),onPointerMove:re(e.onPointerMove,kd($=>{const U=$.target,X=M.current!==$.clientX;if($.currentTarget.contains(U)&&X){const ne=$.clientX>M.current?"right":"left";T.current=ne,M.current=$.clientX}}))})})})})})})});hP.displayName=va;var ere="MenuGroup",n4=S.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return u.jsx(we.div,{role:"group",...a,ref:t})});n4.displayName=ere;var tre="MenuLabel",gP=S.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return u.jsx(we.div,{...a,ref:t})});gP.displayName=tre;var Th="MenuItem",d7="menu.itemSelect",Rg=S.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:a,...s}=e,n=S.useRef(null),o=au(Th,e.__scopeMenu),i=a4(Th,e.__scopeMenu),l=$e(t,n),c=S.useRef(!1),d=()=>{const p=n.current;if(!r&&p){const f=new CustomEvent(d7,{bubbles:!0,cancelable:!0});p.addEventListener(d7,h=>a==null?void 0:a(h),{once:!0}),F0(p,f),f.defaultPrevented?c.current=!1:o.onClose()}};return u.jsx(mP,{...s,ref:l,disabled:r,onClick:re(e.onClick,d),onPointerDown:p=>{var f;(f=e.onPointerDown)==null||f.call(e,p),c.current=!0},onPointerUp:re(e.onPointerUp,p=>{var f;c.current||(f=p.currentTarget)==null||f.click()}),onKeyDown:re(e.onKeyDown,p=>{const f=i.searchRef.current!=="";r||f&&p.key===" "||ry.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Rg.displayName=Th;var mP=S.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:a=!1,textValue:s,...n}=e,o=a4(Th,r),i=cP(r),l=S.useRef(null),c=$e(t,l),[d,p]=S.useState(!1),[f,h]=S.useState("");return S.useEffect(()=>{const y=l.current;y&&h((y.textContent??"").trim())},[n.children]),u.jsx(Sd.ItemSlot,{scope:r,disabled:a,textValue:s??f,children:u.jsx(Nte,{asChild:!0,...i,focusable:!a,children:u.jsx(we.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...n,ref:c,onPointerMove:re(e.onPointerMove,kd(y=>{a?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(e.onPointerLeave,kd(y=>o.onItemLeave(y))),onFocus:re(e.onFocus,()=>p(!0)),onBlur:re(e.onBlur,()=>p(!1))})})})}),rre="MenuCheckboxItem",bP=S.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:a,...s}=e;return u.jsx(xP,{scope:e.__scopeMenu,checked:r,children:u.jsx(Rg,{role:"menuitemcheckbox","aria-checked":Mh(r)?"mixed":r,...s,ref:t,"data-state":l4(r),onSelect:re(s.onSelect,()=>a==null?void 0:a(Mh(r)?!0:!r),{checkForDefaultPrevented:!1})})})});bP.displayName=rre;var yP="MenuRadioGroup",[are,sre]=ei(yP,{value:void 0,onValueChange:()=>{}}),_P=S.forwardRef((e,t)=>{const{value:r,onValueChange:a,...s}=e,n=fr(a);return u.jsx(are,{scope:e.__scopeMenu,value:r,onValueChange:n,children:u.jsx(n4,{...s,ref:t})})});_P.displayName=yP;var wP="MenuRadioItem",vP=S.forwardRef((e,t)=>{const{value:r,...a}=e,s=sre(wP,e.__scopeMenu),n=r===s.value;return u.jsx(xP,{scope:e.__scopeMenu,checked:n,children:u.jsx(Rg,{role:"menuitemradio","aria-checked":n,...a,ref:t,"data-state":l4(n),onSelect:re(a.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});vP.displayName=wP;var o4="MenuItemIndicator",[xP,nre]=ei(o4,{checked:!1}),SP=S.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:a,...s}=e,n=nre(o4,r);return u.jsx(Ka,{present:a||Mh(n.checked)||n.checked===!0,children:u.jsx(we.span,{...s,ref:t,"data-state":l4(n.checked)})})});SP.displayName=o4;var ore="MenuSeparator",kP=S.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return u.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});kP.displayName=ore;var ire="MenuArrow",FP=S.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,s=ru(r);return u.jsx(OC,{...s,...a,ref:t})});FP.displayName=ire;var i4="MenuSub",[lre,CP]=ei(i4),PP=e=>{const{__scopeMenu:t,children:r,open:a=!1,onOpenChange:s}=e,n=oo(i4,t),o=ru(t),[i,l]=S.useState(null),[c,d]=S.useState(null),p=fr(s);return S.useEffect(()=>(n.open===!1&&p(!1),()=>p(!1)),[n.open,p]),u.jsx(V0,{...o,children:u.jsx(dP,{scope:t,open:a,onOpenChange:p,content:c,onContentChange:d,children:u.jsx(lre,{scope:t,contentId:$s(),triggerId:$s(),trigger:i,onTriggerChange:l,children:r})})})};PP.displayName=i4;var Fc="MenuSubTrigger",IP=S.forwardRef((e,t)=>{const r=oo(Fc,e.__scopeMenu),a=au(Fc,e.__scopeMenu),s=CP(Fc,e.__scopeMenu),n=a4(Fc,e.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:l}=n,c={__scopeMenu:e.__scopeMenu},d=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>d,[d]),S.useEffect(()=>{const p=i.current;return()=>{window.clearTimeout(p),l(null)}},[i,l]),u.jsx(t4,{asChild:!0,...c,children:u.jsx(mP,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":EP(r.open),...e,ref:wg(t,s.onTriggerChange),onClick:p=>{var f;(f=e.onClick)==null||f.call(e,p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:re(e.onPointerMove,kd(p=>{n.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(n.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:re(e.onPointerLeave,kd(p=>{var h,y;d();const f=(h=r.content)==null?void 0:h.getBoundingClientRect();if(f){const m=(y=r.content)==null?void 0:y.dataset.side,w=m==="right",b=w?-5:5,_=f[w?"left":"right"],x=f[w?"right":"left"];n.onPointerGraceIntentChange({area:[{x:p.clientX+b,y:p.clientY},{x:_,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:_,y:f.bottom}],side:m}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>n.onPointerGraceIntentChange(null),300)}else{if(n.onTriggerLeave(p),p.defaultPrevented)return;n.onPointerGraceIntentChange(null)}})),onKeyDown:re(e.onKeyDown,p=>{var h;const f=n.searchRef.current!=="";e.disabled||f&&p.key===" "||Ute[a.dir].includes(p.key)&&(r.onOpenChange(!0),(h=r.content)==null||h.focus(),p.preventDefault())})})})});IP.displayName=Fc;var AP="MenuSubContent",jP=S.forwardRef((e,t)=>{const r=pP(va,e.__scopeMenu),{forceMount:a=r.forceMount,...s}=e,n=oo(va,e.__scopeMenu),o=au(va,e.__scopeMenu),i=CP(AP,e.__scopeMenu),l=S.useRef(null),c=$e(t,l);return u.jsx(Sd.Provider,{scope:e.__scopeMenu,children:u.jsx(Ka,{present:a||n.open,children:u.jsx(Sd.Slot,{scope:e.__scopeMenu,children:u.jsx(s4,{id:i.contentId,"aria-labelledby":i.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var p;o.isUsingKeyboardRef.current&&((p=l.current)==null||p.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:re(e.onFocusOutside,d=>{d.target!==i.trigger&&n.onOpenChange(!1)}),onEscapeKeyDown:re(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:re(e.onKeyDown,d=>{var h;const p=d.currentTarget.contains(d.target),f=Wte[o.dir].includes(d.key);p&&f&&(n.onOpenChange(!1),(h=i.trigger)==null||h.focus(),d.preventDefault())})})})})})});jP.displayName=AP;function EP(e){return e?"open":"closed"}function Mh(e){return e==="indeterminate"}function l4(e){return Mh(e)?"indeterminate":e?"checked":"unchecked"}function cre(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function dre(e,t){return e.map((r,a)=>e[(t+a)%e.length])}function ure(e,t,r){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,n=r?e.indexOf(r):-1;let o=dre(e,Math.max(n,0));s.length===1&&(o=o.filter(c=>c!==r));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function pre(e,t){const{x:r,y:a}=e;let s=!1;for(let n=0,o=t.length-1;n<t.length;o=n++){const i=t[n],l=t[o],c=i.x,d=i.y,p=l.x,f=l.y;d>a!=f>a&&r<(p-c)*(a-d)/(f-d)+c&&(s=!s)}return s}function fre(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return pre(r,t)}function kd(e){return t=>t.pointerType==="mouse"?e(t):void 0}var DP=uP,TP=t4,MP=fP,BP=hP,LP=n4,RP=gP,OP=Rg,zP=bP,NP=_P,qP=vP,$P=SP,UP=kP,WP=FP,HP=PP,GP=IP,KP=jP,c4="ContextMenu",[hre,Iie]=Ss(c4,[Lg]),ir=Lg(),[gre,VP]=hre(c4),YP=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:a,dir:s,modal:n=!0}=e,[o,i]=S.useState(!1),l=ir(t),c=fr(a),d=S.useCallback(p=>{i(p),c(p)},[c]);return u.jsx(gre,{scope:t,open:o,onOpenChange:d,modal:n,children:u.jsx(DP,{...l,dir:s,open:o,onOpenChange:d,modal:n,children:r})})};YP.displayName=c4;var XP="ContextMenuTrigger",ZP=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,disabled:a=!1,...s}=e,n=VP(XP,r),o=ir(r),i=S.useRef({x:0,y:0}),l=S.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...i.current})}),c=S.useRef(0),d=S.useCallback(()=>window.clearTimeout(c.current),[]),p=f=>{i.current={x:f.clientX,y:f.clientY},n.onOpenChange(!0)};return S.useEffect(()=>d,[d]),S.useEffect(()=>void(a&&d()),[a,d]),u.jsxs(u.Fragment,{children:[u.jsx(TP,{...o,virtualRef:l}),u.jsx(we.span,{"data-state":n.open?"open":"closed","data-disabled":a?"":void 0,...s,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:a?e.onContextMenu:re(e.onContextMenu,f=>{d(),p(f),f.preventDefault()}),onPointerDown:a?e.onPointerDown:re(e.onPointerDown,up(f=>{d(),c.current=window.setTimeout(()=>p(f),700)})),onPointerMove:a?e.onPointerMove:re(e.onPointerMove,up(d)),onPointerCancel:a?e.onPointerCancel:re(e.onPointerCancel,up(d)),onPointerUp:a?e.onPointerUp:re(e.onPointerUp,up(d))})]})});ZP.displayName=XP;var mre="ContextMenuPortal",d4=e=>{const{__scopeContextMenu:t,...r}=e,a=ir(t);return u.jsx(MP,{...a,...r})};d4.displayName=mre;var JP="ContextMenuContent",QP=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=VP(JP,r),n=ir(r),o=S.useRef(!1);return u.jsx(BP,{...n,...a,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:i=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,i),!i.defaultPrevented&&o.current&&i.preventDefault(),o.current=!1},onInteractOutside:i=>{var l;(l=e.onInteractOutside)==null||l.call(e,i),!i.defaultPrevented&&!s.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QP.displayName=JP;var bre="ContextMenuGroup",eI=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(LP,{...s,...a,ref:t})});eI.displayName=bre;var yre="ContextMenuLabel",_re=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(RP,{...s,...a,ref:t})});_re.displayName=yre;var wre="ContextMenuItem",tI=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(OP,{...s,...a,ref:t})});tI.displayName=wre;var vre="ContextMenuCheckboxItem",rI=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(zP,{...s,...a,ref:t})});rI.displayName=vre;var xre="ContextMenuRadioGroup",Sre=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(NP,{...s,...a,ref:t})});Sre.displayName=xre;var kre="ContextMenuRadioItem",Fre=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(qP,{...s,...a,ref:t})});Fre.displayName=kre;var Cre="ContextMenuItemIndicator",Pre=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx($P,{...s,...a,ref:t})});Pre.displayName=Cre;var Ire="ContextMenuSeparator",Are=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(UP,{...s,...a,ref:t})});Are.displayName=Ire;var jre="ContextMenuArrow",Ere=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(WP,{...s,...a,ref:t})});Ere.displayName=jre;var aI="ContextMenuSub",sI=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:a,open:s,defaultOpen:n}=e,o=ir(t),[i,l]=ao({prop:s,defaultProp:n??!1,onChange:a,caller:aI});return u.jsx(HP,{...o,open:i,onOpenChange:l,children:r})};sI.displayName=aI;var Dre="ContextMenuSubTrigger",nI=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(GP,{...s,...a,ref:t})});nI.displayName=Dre;var Tre="ContextMenuSubContent",oI=S.forwardRef((e,t)=>{const{__scopeContextMenu:r,...a}=e,s=ir(r);return u.jsx(KP,{...s,...a,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oI.displayName=Tre;function up(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Mre=YP,Bre=ZP,Lre=d4,Rre=QP,Ore=rI;const iI=typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,zre=iI?"⌘":"Ctrl",Nre=iI?"⌥":"Alt";function lI(e){return e.split(",")[0].split("").map(t=>{const r=t.replace(/\$/g,zre).replace(/\?/g,Nre).replace(/!/g,"⇧");return r[0].toUpperCase()+r.slice(1)})}function ay(e){return"— "+lI(e).join(" ")}function qre(e){return u.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",...e,children:u.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[u.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),u.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:u.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}var Og="DropdownMenu",[$re,Aie]=Ss(Og,[Lg]),lr=Lg(),[Ure,cI]=$re(Og),dI=e=>{const{__scopeDropdownMenu:t,children:r,dir:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!0}=e,l=lr(t),c=S.useRef(null),[d,p]=ao({prop:s,defaultProp:n??!1,onChange:o,caller:Og});return u.jsx(Ure,{scope:t,triggerId:$s(),triggerRef:c,contentId:$s(),open:d,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(f=>!f),[p]),modal:i,children:u.jsx(DP,{...l,open:d,onOpenChange:p,dir:a,modal:i,children:r})})};dI.displayName=Og;var uI="DropdownMenuTrigger",pI=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...s}=e,n=cI(uI,r),o=lr(r);return u.jsx(TP,{asChild:!0,...o,children:u.jsx(we.button,{type:"button",id:n.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":n.open?n.contentId:void 0,"data-state":n.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...s,ref:wg(t,n.triggerRef),onPointerDown:re(e.onPointerDown,i=>{!a&&i.button===0&&i.ctrlKey===!1&&(n.onOpenToggle(),n.open||i.preventDefault())}),onKeyDown:re(e.onKeyDown,i=>{a||(["Enter"," "].includes(i.key)&&n.onOpenToggle(),i.key==="ArrowDown"&&n.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});pI.displayName=uI;var Wre="DropdownMenuPortal",fI=e=>{const{__scopeDropdownMenu:t,...r}=e,a=lr(t);return u.jsx(MP,{...a,...r})};fI.displayName=Wre;var hI="DropdownMenuContent",gI=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=cI(hI,r),n=lr(r),o=S.useRef(!1);return u.jsx(BP,{id:s.contentId,"aria-labelledby":s.triggerId,...n,...a,ref:t,onCloseAutoFocus:re(e.onCloseAutoFocus,i=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,i.preventDefault()}),onInteractOutside:re(e.onInteractOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!s.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gI.displayName=hI;var Hre="DropdownMenuGroup",mI=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(LP,{...s,...a,ref:t})});mI.displayName=Hre;var Gre="DropdownMenuLabel",Kre=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(RP,{...s,...a,ref:t})});Kre.displayName=Gre;var Vre="DropdownMenuItem",bI=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(OP,{...s,...a,ref:t})});bI.displayName=Vre;var Yre="DropdownMenuCheckboxItem",yI=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(zP,{...s,...a,ref:t})});yI.displayName=Yre;var Xre="DropdownMenuRadioGroup",Zre=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(NP,{...s,...a,ref:t})});Zre.displayName=Xre;var Jre="DropdownMenuRadioItem",Qre=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(qP,{...s,...a,ref:t})});Qre.displayName=Jre;var eae="DropdownMenuItemIndicator",tae=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx($P,{...s,...a,ref:t})});tae.displayName=eae;var rae="DropdownMenuSeparator",aae=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(UP,{...s,...a,ref:t})});aae.displayName=rae;var sae="DropdownMenuArrow",nae=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(WP,{...s,...a,ref:t})});nae.displayName=sae;var oae=e=>{const{__scopeDropdownMenu:t,children:r,open:a,onOpenChange:s,defaultOpen:n}=e,o=lr(t),[i,l]=ao({prop:a,defaultProp:n??!1,onChange:s,caller:"DropdownMenuSub"});return u.jsx(HP,{...o,open:i,onOpenChange:l,children:r})},iae="DropdownMenuSubTrigger",_I=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(GP,{...s,...a,ref:t})});_I.displayName=iae;var lae="DropdownMenuSubContent",wI=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,s=lr(r);return u.jsx(KP,{...s,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wI.displayName=lae;var u4=dI,p4=pI,zg=fI,f4=gI,cae=mI,dae=bI,uae=yI,pae=oae,fae=_I,hae=wI;function Ho({id:e,children:t,modal:r=!1,debugOpen:a=!1}){const[s,n]=no(e);return u.jsx(u4,{open:a||s,dir:"ltr",modal:r,onOpenChange:n,children:t})}function Go({children:e,...t}){return u.jsx(p4,{dir:"ltr",asChild:!0,onTouchEnd:r=>ke(r),...t,children:e})}function Ko({side:e="bottom",align:t="start",sideOffset:r=8,alignOffset:a=8,children:s}){const n=or();return u.jsx(zg,{container:n,children:u.jsx(f4,{className:"tlui-menu",side:e,sideOffset:r,align:t,alignOffset:a,collisionPadding:4,children:s})})}function gae({id:e,children:t}){const[r,a]=no(e);return u.jsx(pae,{open:r,onOpenChange:a,children:t})}function mae({id:e,label:t,title:r,disabled:a}){return u.jsx(fae,{dir:"ltr",asChild:!0,disabled:a,children:u.jsxs(de,{"data-testid":e,type:"menu",className:"tlui-menu__submenu__trigger",disabled:a,title:r,children:[u.jsx(xt,{children:t}),u.jsx(ve,{icon:"chevron-right",small:!0})]})})}function bae({id:e,alignOffset:t=-1,sideOffset:r=-4,size:a="small",children:s}){const n=or();return u.jsx(zg,{container:n,children:u.jsx(hae,{"data-testid":e,className:"tlui-menu tlui-menu__submenu__content",alignOffset:t,sideOffset:r,collisionPadding:4,"data-size":a,children:s})})}function yae({children:e}){return u.jsx(cae,{dir:"ltr",className:"tlui-menu__group",children:e})}function Fd({noClose:e,children:t}){return u.jsx(dae,{dir:"ltr",asChild:!0,onClick:e?ke:void 0,children:t})}function Wc({children:e,visibleOnMobileLayout:t=!1}){const r=qr();return!t&&r<bt.MOBILE?null:u.jsx("kbd",{className:"tlui-kbd",children:lI(e).map((a,s)=>u.jsx("span",{children:a},s))})}function q({disabled:e=!1,spinner:t=!1,readonlyOk:r=!1,id:a,kbd:s,label:n,icon:o,onSelect:i,noClose:l,isSelected:c}){const{type:d,sourceId:p}=Bg(),f=Ie(),[h,y]=S.useState(!1);if(sn()&&!r)return null;const w=wd(n,d),b=s?ay(s):void 0,_=w?f(w):void 0,x=_&&b?`${_} ${b}`:_;switch(d){case"menu":return u.jsx(Fd,{children:u.jsxs(de,{type:"menu","data-testid":`${p}.${a}`,disabled:e,title:x,onClick:C=>{l&&ke(C),h?y(!1):i(p)},children:[u.jsx(xt,{children:_}),s&&u.jsx(Wc,{children:s})]})});case"context-menu":return e?null:u.jsxs(tI,{dir:"ltr",title:x,draggable:!1,className:"tlui-button tlui-button__menu","data-testid":`${p}.${a}`,onSelect:C=>{l&&ke(C),h?y(!1):i(p)},children:[u.jsx("span",{className:"tlui-button__label",draggable:!1,children:_}),s&&u.jsx(Wc,{children:s}),t&&u.jsx(qre,{})]});case"panel":return u.jsxs(de,{"data-testid":`${p}.${a}`,type:"menu",title:x,disabled:e,onClick:()=>i(p),children:[u.jsx(xt,{children:_}),o&&u.jsx(ve,{icon:o})]});case"small-icons":case"icons":return u.jsx(de,{"data-testid":`${p}.${a}`,type:"icon",title:x,disabled:e,onClick:()=>i(p),children:u.jsx(ve,{icon:o,small:d==="small-icons"})});case"keyboard-shortcuts":return s?u.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":`${p}.${a}`,children:[u.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:_}),u.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:u.jsx(Wc,{visibleOnMobileLayout:!0,children:s})})]}):(console.warn(`Menu item '${n}' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.`),null);case"helper-buttons":return u.jsxs(de,{type:"low",onClick:()=>i(p),children:[u.jsx(ve,{icon:o}),u.jsx(xt,{children:_})]});case"toolbar":return u.jsx(de,{type:"tool","data-testid":`tools.${a}`,"aria-label":w,"data-value":a,onClick:()=>i("toolbar"),title:x,onTouchStart:C=>{ke(C),i("toolbar")},role:"radio","aria-checked":c?"true":"false",children:u.jsx(ve,{icon:o})});case"toolbar-overflow":return u.jsx(Fd,{"aria-label":n,children:u.jsx(de,{type:"icon",className:"tlui-button-grid__button",onClick:()=>{i("toolbar")},"data-testid":`tools.more.${a}`,title:x,role:"radio","aria-checked":c?"true":"false","data-value":a,children:u.jsx(ve,{icon:o})})});default:throw tr(d)}}function _ae(){return u.jsxs(u.Fragment,{children:[u.jsx(wae,{}),u.jsx(vae,{}),u.jsx(xae,{}),u.jsx(Sae,{}),u.jsx(kae,{}),u.jsx(Pae,{}),u.jsx(Iae,{}),u.jsx(Aae,{})]})}function wae(){const e=oe(),t=wr(2),r=nn(),a=t&&r;return u.jsxs(u.Fragment,{children:[u.jsx(q,{...e["align-left"],disabled:!a}),u.jsx(q,{...e["align-center-horizontal"],disabled:!a}),u.jsx(q,{...e["align-right"],disabled:!a}),u.jsx(q,{...e["stretch-horizontal"],disabled:!a}),u.jsx(q,{...e["align-top"],disabled:!a}),u.jsx(q,{...e["align-center-vertical"],disabled:!a}),u.jsx(q,{...e["align-bottom"],disabled:!a}),u.jsx(q,{...e["stretch-vertical"],disabled:!a})]})}function vae(){const e=oe(),t=wr(3),r=nn(),a=t&&r;return u.jsxs(u.Fragment,{children:[u.jsx(q,{...e["distribute-horizontal"],disabled:!a}),u.jsx(q,{...e["distribute-vertical"],disabled:!a})]})}function xae(){const e=oe(),t=XC(),r=nn(),a=t&&r;return u.jsxs(u.Fragment,{children:[u.jsx(q,{...e["stack-horizontal"],disabled:!a}),u.jsx(q,{...e["stack-vertical"],disabled:!a})]})}function Sae(){const e=oe(),t=wr(1),r=nn(),a=t&&r;return u.jsxs(u.Fragment,{children:[u.jsx(q,{...e["send-to-back"],disabled:!a}),u.jsx(q,{...e["send-backward"],disabled:!a}),u.jsx(q,{...e["bring-forward"],disabled:!a}),u.jsx(q,{...e["bring-to-front"],disabled:!a})]})}function kae(){return qr()<bt.TABLET_SM?u.jsx(Fae,{}):u.jsx(Cae,{})}function Fae(){const e=oe(),t=N(),r=H("zoom is 1",()=>t.getZoomLevel()===1,[t]);return u.jsx(q,{...e["zoom-to-100"],disabled:r})}function Cae(){const e=oe(),t=wr(1),r=nn(),a=t&&r;return u.jsx(q,{...e["rotate-ccw"],disabled:!a})}function Pae(){const e=oe(),t=wr(1),r=nn(),a=t&&r;return u.jsx(q,{...e["rotate-cw"],disabled:!a})}function Iae(){const e=oe(),t=QC(),r=nn(),a=t&&r;return u.jsx(q,{...e["edit-link"],disabled:!a})}function Aae(){const e=ZC(),t=JC();return e?u.jsx(u7,{}):t?u.jsx(jae,{}):u.jsx(u7,{})}function u7(){const e=oe(),t=wr(2),r=nn(),a=t&&r;return u.jsx(q,{...e.group,disabled:!a})}function jae(){const e=oe();return u.jsx(q,{...e.ungroup})}const Eae=S.memo(function({children:t}){const r=Ie(),a=qr(),s=sn(),n=N(),o=H("should display quick actions when in readonly",()=>n.isInAny("hand","zoom"),[n]),i=t??u.jsx(_ae,{});if(!(s&&!o))return u.jsxs(Z0,{id:"actions-menu",children:[u.jsx(J0,{children:u.jsx(de,{type:"icon","data-testid":"actions-menu.button",title:r("actions-menu.title"),children:u.jsx(ve,{icon:"dots-vertical",small:!0})})}),u.jsx(Q0,{side:a>=bt.TABLET?"bottom":"top",sideOffset:6,children:u.jsx("div",{className:"tlui-actions-menu tlui-buttons__grid","data-testid":"actions-menu.content",children:u.jsx(ka,{type:"icons",sourceId:"actions-menu",children:i})})})]})});function Ca({id:e,kbd:t,label:r,readonlyOk:a,onSelect:s,toggle:n=!1,disabled:o=!1,checked:i=!1}){const{type:l,sourceId:c}=Bg(),d=sn(),p=Ie();if(d&&!a)return null;const f=wd(r,l),h=f?p(f):void 0;switch(l){case"menu":return u.jsxs(uae,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",title:h,onSelect:y=>{s==null||s(c),ke(y)},disabled:o,checked:i,children:[u.jsx(Gn,{small:!0,icon:n?i?"toggle-on":"toggle-off":i?"check":"none"}),h&&u.jsx("span",{className:"tlui-button__label",draggable:!1,children:h}),t&&u.jsx(Wc,{children:t})]});case"context-menu":return u.jsxs(Ore,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",title:h,onSelect:y=>{s(c),ke(y)},disabled:o,checked:i,children:[u.jsx(Gn,{small:!0,icon:n?i?"toggle-on":"toggle-off":i?"check":"none"}),h&&u.jsx("span",{className:"tlui-button__label",draggable:!1,children:h}),t&&u.jsx(Wc,{children:t})]},e);default:return null}}function he({id:e,label:t,children:r}){const{type:a,sourceId:s}=Bg(),n=Ie(),o=wd(t,a),i=o?n(o):void 0;switch(a){case"panel":return u.jsx("div",{className:"tlui-menu__group","data-testid":`${s}-group.${e}`,children:r});case"menu":return u.jsx(yae,{"data-testid":`${s}-group.${e}`,children:r});case"context-menu":return u.jsx(eI,{dir:"ltr",className:"tlui-menu__group","data-testid":`${s}-group.${e}`,children:r});case"keyboard-shortcuts":return u.jsxs("div",{className:"tlui-shortcuts-dialog__group","data-testid":`${s}-group.${e}`,children:[u.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:i}),u.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:r})]});default:return r}}function Pa({id:e,disabled:t=!1,label:r,size:a="small",children:s}){const{type:n,sourceId:o}=Bg(),i=or(),l=Ie(),c=r?typeof r=="string"?r:r[n]??r.default:void 0,d=c?l(c):void 0;switch(n){case"menu":return u.jsxs(gae,{id:`${o}-sub.${e}`,children:[u.jsx(mae,{id:`${o}-sub.${d?d.toLowerCase()+"-button":""}`,disabled:t,label:d,title:d}),u.jsx(bae,{id:`${o}-sub.${d?d.toLowerCase()+"-content":""}`,size:a,children:s})]});case"context-menu":return t?null:u.jsxs(Dae,{id:`${o}-sub.${e}`,children:[u.jsx(nI,{dir:"ltr",disabled:t,asChild:!0,children:u.jsxs(de,{"data-testid":`${o}-sub-trigger.${e}`,type:"menu",className:"tlui-menu__submenu__trigger",children:[u.jsx(xt,{children:d}),u.jsx(ve,{icon:"chevron-right",small:!0})]})}),u.jsx(d4,{container:i,children:u.jsx(oI,{"data-testid":`${o}-sub-content.${e}`,className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":a,children:s})})]});default:return s}}function Dae({id:e,children:t}){const[r,a]=no(e);return u.jsx(sI,{open:r,onOpenChange:a,children:t})}function vI(){const e=oe();return Cte()?u.jsx(q,{...e["toggle-auto-size"]}):null}function xI(){const e=oe();return QC()?u.jsx(q,{...e["edit-link"]}):null}function Tae(){const e=oe();return wr(1)?u.jsx(q,{...e.duplicate}):null}function SI(){const e=oe();return ZC()?u.jsx(q,{...e.group}):null}function kI(){const e=oe();return JC()?u.jsx(q,{...e.ungroup}):null}function FI(){const e=N(),t=oe();return H("allow unframe",()=>{const a=e.getSelectedShapes();return a.length===0?!1:a.every(s=>e.isShapeOfType(s,"frame"))},[e])?u.jsx(q,{...t["remove-frame"]}):null}function CI(){const e=N(),t=oe();return H("allow fit frame to content",()=>{const a=e.getOnlySelectedShape();return a?e.isShapeOfType(a,"frame")&&e.getSortedChildIdsForParent(a).length>0:!1},[e])?u.jsx(q,{...t["fit-frame-to-content"]}):null}function PI(){const e=N(),t=oe();return H("selected shapes",()=>e.getSelectedShapes().length>0,[e])?u.jsx(q,{...t["toggle-lock"]}):null}function h4(){const e=oe(),t=N(),r=H("isTransparentBg",()=>!t.getInstanceState().exportBackground,[t]);return u.jsx(Ca,{...e["toggle-transparent"],checked:r,toggle:!0})}function Mae(){const e=N(),t=oe(),r=H("any shapes",()=>e.getCurrentPageShapeIds().size>0,[e]);return u.jsx(q,{...t["unlock-all"],disabled:!r})}function II(){const e=N(),t=H("zoomed to 100",()=>e.getZoomLevel()===1,[e]),r=oe();return u.jsx(q,{...r["zoom-to-100"],noClose:!0,disabled:t})}function AI(){const e=N(),t=H("has shapes",()=>e.getCurrentPageShapeIds().size>0,[e]),r=oe();return u.jsx(q,{...r["zoom-to-fit"],disabled:!t,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})}function jI(){const e=N(),t=H("has shapes",()=>e.getSelectedShapeIds().length>0,[e]),r=oe();return u.jsx(q,{...r["zoom-to-selection"],disabled:!t,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})}function EI(){return u.jsxs(he,{id:"clipboard",children:[u.jsx(Lae,{}),u.jsx(Rae,{}),u.jsx(Oae,{}),u.jsx(Tae,{}),u.jsx(zae,{})]})}function Bae(){var a;const e=N(),t=oe(),r=H("atLeastOneShapeOnPage",()=>e.getCurrentPageShapeIds().size>0,[e]);return u.jsxs(Pa,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!r,children:[u.jsxs(he,{id:"copy-as-group",children:[u.jsx(q,{...t["copy-as-svg"]}),!!((a=window.navigator.clipboard)!=null&&a.write)&&u.jsx(q,{...t["copy-as-png"]}),u.jsx(q,{...t["copy-as-json"]})]}),u.jsx(he,{id:"copy-as-bg",children:u.jsx(h4,{})})]})}function Lae(){const e=oe(),t=wr(1);return u.jsx(q,{...e.cut,disabled:!t})}function Rae(){const e=oe(),t=Fte(1);return u.jsx(q,{...e.copy,disabled:!t})}function Oae(){const e=oe(),t=kte;return u.jsx(q,{...e.paste,disabled:!t})}function DI(){const e=N(),t=oe();return H("atLeastOneShapeOnPage",()=>e.getCurrentPageShapeIds().size>0,[e])?u.jsxs(he,{id:"conversions",children:[u.jsx(Bae,{}),u.jsxs(Pa,{id:"export-as",label:"context-menu.export-as",size:"small",children:[u.jsxs(he,{id:"export-as-group",children:[u.jsx(q,{...t["export-as-svg"]}),u.jsx(q,{...t["export-as-png"]}),u.jsx(q,{...t["export-as-json"]})]}),u.jsx(he,{id:"export-as-bg",children:u.jsx(h4,{})})]})]}):null}function TI(){const e=oe(),t=N(),r=H("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t]);return u.jsx(q,{...e["select-all"],disabled:!r})}function zae(){const e=oe(),t=wr(1);return u.jsx(q,{...e.delete,disabled:!t})}function Nae(){const e=wr(2),t=Pte(),r=oe();return e||t?u.jsxs(Pa,{id:"arrange",label:"context-menu.arrange",size:"small",children:[e&&u.jsxs(he,{id:"align",children:[u.jsx(q,{...r["align-left"]}),u.jsx(q,{...r["align-center-horizontal"]}),u.jsx(q,{...r["align-right"]}),u.jsx(q,{...r["align-top"]}),u.jsx(q,{...r["align-center-vertical"]}),u.jsx(q,{...r["align-bottom"]})]}),u.jsx(qae,{}),e&&u.jsxs(he,{id:"stretch",children:[u.jsx(q,{...r["stretch-horizontal"]}),u.jsx(q,{...r["stretch-vertical"]})]}),(e||t)&&u.jsxs(he,{id:"flip",children:[u.jsx(q,{...r["flip-horizontal"]}),u.jsx(q,{...r["flip-vertical"]})]}),u.jsx($ae,{})]}):null}function qae(){const e=oe();return wr(3)?u.jsxs(he,{id:"distribute",children:[u.jsx(q,{...e["distribute-horizontal"]}),u.jsx(q,{...e["distribute-vertical"]})]}):null}function $ae(){const e=oe(),t=wr(2),r=XC();return t?u.jsxs(he,{id:"order",children:[u.jsx(q,{...e.pack}),r&&u.jsx(q,{...e["stack-horizontal"]}),r&&u.jsx(q,{...e["stack-vertical"]})]}):null}function Uae(){const e=oe();return wr(1)?u.jsx(Pa,{id:"reorder",label:"context-menu.reorder",size:"small",children:u.jsxs(he,{id:"reorder",children:[u.jsx(q,{...e["bring-to-front"]}),u.jsx(q,{...e["bring-forward"]}),u.jsx(q,{...e["send-backward"]}),u.jsx(q,{...e["send-to-back"]})]})}):null}function Wae(){const e=N(),t=H("pages",()=>e.getPages(),[e]),r=H("current page id",()=>e.getCurrentPageId(),[e]),{addToast:a}=Ya(),s=oe(),n=ks();return wr(1)?u.jsxs(Pa,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[u.jsx(he,{id:"pages",children:t.map(i=>u.jsx(q,{id:i.id,disabled:r===i.id,label:i.name,onSelect:()=>{e.mark("move_shapes_to_page"),e.moveShapesToPage(e.getSelectedShapeIds(),i.id);const l=e.getPage(i.id);l&&a({title:"Changed Page",description:`Moved to ${l.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{e.mark("change-page"),e.setCurrentPage(r)}}]}),n("move-to-page",{source:"context-menu"})}},i.id))}),u.jsx(he,{id:"new-page",children:u.jsx(q,{...s["new-page"]})})]}):null}function MI(){const e=N(),t=oe();return H("oneEmbedSelected",()=>{const a=e.getOnlySelectedShape();return a?!!(e.isShapeOfType(a,"embed")&&a.props.url&&!e.isShapeOrAncestorLocked(a)):!1},[e])?u.jsx(q,{...t["convert-to-bookmark"]}):null}function BI(){const e=N(),t=oe();return H("oneEmbeddableBookmarkSelected",()=>{const a=e.getOnlySelectedShape();return a?!!(e.isShapeOfType(a,"bookmark")&&a.props.url&&In(a.props.url)&&!e.isShapeOrAncestorLocked(a)):!1},[e])?u.jsx(q,{...t["convert-to-embed"]}):null}function Hae(){const e=oe(),t=N(),r=H("isSnapMode",()=>t.user.getIsSnapMode(),[t]);return u.jsx(Ca,{...e["toggle-snap-mode"],checked:r})}function Gae(){const e=oe(),t=N(),r=H("isToolLock",()=>t.getInstanceState().isToolLocked,[t]);return u.jsx(Ca,{...e["toggle-tool-lock"],checked:r})}function Kae(){const e=oe(),t=N(),r=H("isGridMode",()=>t.getInstanceState().isGridMode,[t]);return u.jsx(Ca,{...e["toggle-grid"],checked:r})}function Vae(){const e=oe(),t=N(),r=H("isWrapMode",()=>t.user.getIsWrapMode(),[t]);return u.jsx(Ca,{...e["toggle-wrap-mode"],checked:r})}function Yae(){const e=oe(),t=N(),r=H("isDarkMode",()=>t.user.getIsDarkMode(),[t]);return u.jsx(Ca,{...e["toggle-dark-mode"],checked:r})}function Xae(){const e=oe(),t=N(),r=H("isFocusMode",()=>t.getInstanceState().isFocusMode,[t]);return u.jsx(Ca,{...e["toggle-focus-mode"],checked:r})}function Zae(){const e=oe(),t=N(),r=H("edgeScrollSpeed",()=>t.user.getEdgeScrollSpeed(),[t]);return u.jsx(Ca,{...e["toggle-edge-scrolling"],checked:r===1})}function Jae(){const e=oe(),t=N(),r=H("animationSpeed",()=>t.user.getAnimationSpeed(),[t]);return u.jsx(Ca,{...e["toggle-reduce-motion"],checked:r===0})}function Qae(){const e=oe(),t=N(),r=H("isDebugMode",()=>t.getInstanceState().isDebugMode,[t]);return u.jsx(Ca,{...e["toggle-debug-mode"],checked:r})}function ese(){const e=N();return H("isSelectToolActive",()=>e.getCurrentToolId()==="select",[e])?u.jsxs(u.Fragment,{children:[u.jsxs(he,{id:"misc",children:[u.jsx(SI,{}),u.jsx(kI,{}),u.jsx(xI,{}),u.jsx(vI,{}),u.jsx(FI,{}),u.jsx(CI,{}),u.jsx(BI,{}),u.jsx(MI,{}),u.jsx(PI,{})]}),u.jsxs(he,{id:"modify",children:[u.jsx(Nae,{}),u.jsx(Uae,{}),u.jsx(Wae,{})]}),u.jsx(EI,{}),u.jsx(DI,{}),u.jsx(he,{id:"select-all",children:u.jsx(TI,{})})]}):null}const tse=S.memo(function({children:t}){const r=N(),{Canvas:a}=st(),s=S.useCallback(c=>{if(c){if(r.getInstanceState().isCoarsePointer){const d=r.getSelectedShapes(),{inputs:{currentPagePoint:p}}=r,f=r.getShapesAtPoint(p);if(!r.getSelectedShapes().length||!f.some(h=>d.includes(h))){const h=f.filter(y=>r.isShapeOrAncestorLocked(y));h.length&&r.select(...h.map(y=>y.id))}}}else{const d=r.getOnlySelectedShape();d&&r.isShapeOrAncestorLocked(d)&&r.setSelectedShapes([])}},[r]),n=or(),[o,i]=no("context menu",s),l=t??u.jsx(ese,{});return u.jsxs(Mre,{dir:"ltr",onOpenChange:i,modal:!1,children:[u.jsx(Bre,{onContextMenu:void 0,dir:"ltr",children:a?u.jsx(a,{}):null}),o&&u.jsx(Lre,{container:n,children:u.jsx(Rre,{className:"tlui-menu scrollable","data-testid":"context-menu",alignOffset:-4,collisionPadding:4,onContextMenu:ke,children:u.jsx(ka,{type:"context-menu",sourceId:"context-menu",children:l})})})]})});function sy({checked:e}){return u.jsx(Gn,{icon:e?"check":"none",className:"tlui-button__icon",small:!0})}function rse(){const e=N(),{addToast:t}=Ya(),{addDialog:r}=Qo(),[a,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsxs(he,{id:"items",children:[u.jsx(q,{id:"add-toast",onSelect:()=>{t({id:rt(),title:"Something good happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"success"}),t({id:rt(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"info",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),t({id:rt(),title:"Something maybe bad happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"warning",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),t({id:rt(),title:"Something bad happened",severity:"error",keepOpen:!0})},label:"Show toast"}),u.jsx(q,{id:"show-dialog",label:"Show dialog",onSelect:()=>{r({component:({onClose:n})=>u.jsx(nse,{displayDontShowAgain:!0,onCancel:()=>n(),onContinue:()=>n()}),onClose:()=>{}})}}),u.jsx(q,{id:"create-shapes",label:"Create 100 shapes",onSelect:()=>ose(e,100)}),u.jsx(q,{id:"count-nodes",label:"Count shapes / nodes",onSelect:()=>{var i;const n=e.getSelectedShapes(),o=n.length===0?e.getRenderingShapes():n;window.alert(`Shapes ${o.length}, DOM nodes:${(i=document.querySelector(".tl-shapes").querySelectorAll("*"))==null?void 0:i.length}`)}}),(()=>{if(a)throw Error("oh no!");return null})(),u.jsx(q,{id:"throw-error",onSelect:()=>s(!0),label:"Throw error"}),u.jsx(q,{id:"hard-reset",onSelect:CS,label:"Hard reset"})]}),u.jsxs(he,{id:"flags",children:[u.jsx(ase,{}),u.jsx(sse,{})]})]})}function ase(){const e=Object.values(vt);return e.length?u.jsx(Pa,{id:"debug flags",label:"Debug Flags",children:u.jsx(he,{id:"debug flags",children:e.map(t=>u.jsx(LI,{flag:t},t.name))})}):null}function sse(){const e=Object.values(p$);return e.length?u.jsx(Pa,{id:"feature flags",label:"Feature Flags",children:u.jsx(he,{id:"feature flags",children:e.map(t=>u.jsx(LI,{flag:t},t.name))})}):null}function nse({title:e="title",body:t="hello hello hello",cancel:r="Cancel",confirm:a="Continue",displayDontShowAgain:s=!1,onCancel:n,onContinue:o}){const[i,l]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsxs(Cg,{children:[u.jsx(Pg,{children:e}),u.jsx(Ig,{})]}),u.jsx(_d,{style:{maxWidth:350},children:t}),u.jsxs(L0,{className:"tlui-dialog__footer__actions",children:[s&&u.jsxs(de,{type:"normal",onClick:()=>l(!i),style:{marginRight:"auto"},children:[u.jsx(sy,{checked:i}),u.jsx(xt,{children:"Don't show again"})]}),u.jsx(de,{type:"normal",onClick:n,children:u.jsx(xt,{children:r})}),u.jsx(de,{type:"primary",onClick:async()=>o(),children:u.jsx(xt,{children:a})})]})]})}const LI=la(function({flag:t,onChange:r}){const a=t.get();return u.jsx(Ca,{id:t.name,title:t.name,label:t.name.replace(/([a-z0-9])([A-Z])/g,s=>`${s[0]} ${s[1].toLowerCase()}`).replace(/^[a-z]/,s=>s.toUpperCase()),checked:a,onSelect:()=>{t.set(!a),r==null||r(!a)}})});let p7=0;function ose(e,t){const r=Array(t),a=Math.floor(Math.sqrt(t));for(let s=0;s<t;s++)p7++,r[s]={id:Ne("box"+p7),type:"geo",x:s%a*132,y:Math.floor(s/a)*132};e.batch(()=>{e.createShapes(r).setSelectedShapes(r.map(s=>s.id))})}function ise({children:e}){const t=e??u.jsx(rse,{});return u.jsxs(Ho,{id:"debug",children:[u.jsx(Go,{children:u.jsx(de,{type:"icon",title:"Debug menu",children:u.jsx(ve,{icon:"dots-horizontal"})})}),u.jsx(Ko,{side:"top",align:"end",alignOffset:0,children:u.jsx(ka,{type:"menu",sourceId:"debug-panel",children:t})})]})}const lse=S.memo(function(){const{DebugMenu:t}=lo();return u.jsxs("div",{className:"tlui-debug-panel",children:[u.jsx(dse,{}),u.jsx(use,{}),t&&u.jsx(t,{})]})});function cse(e=!0){const[t,r]=S.useState(0),a=N();S.useEffect(()=>{if(!e)return;const s=()=>r(n=>n+1);return a.on("tick",s),()=>{a.off("tick",s)}},[a,e])}const dse=la(function(){cse();const t=N(),r=t.getPath(),a=t.getHoveredShape(),s=t.getOnlySelectedShape(),n=r==="select.idle"||!r.includes("select.")?a:s,o=n&&r.includes("select.")?` / ${n.type||""}${"geo"in n.props?" / "+n.props.geo:""} / [${v.ToInt(t.getPointInShapeSpace(n,t.inputs.currentPagePoint))}]`:"",i=r.startsWith("select.")&&!r.includes(".idle")?` / [${v.ToInt(t.inputs.originPagePoint)}] → [${v.ToInt(t.inputs.currentPagePoint)}] = ${v.Dist(t.inputs.originPagePoint,t.inputs.currentPagePoint).toFixed(0)}`:"";return u.jsx("div",{className:"tlui-debug-panel__current-state",children:`${r}${o}${i}`})});function use(){const e=N(),t=H("show_fps",()=>vt.showFps.get(),[vt]),r=S.useRef(null);return S.useEffect(()=>{if(!t)return;const a=250;let s=0,n=-1,o=performance.now(),i=0,l=0,c=!1;function d(){if(l++,i=performance.now()-o,i>a){const p=Math.round(l*(a/i)*(1e3/a));p>s&&(s=p);const f=s*.75;(p<f&&!c||p>=f&&c)&&(c=!c),r.current.innerHTML=`FPS ${p.toString()}`,r.current.className="tlui-debug-panel__fps"+(c?" tlui-debug-panel__fps__slow":""),i-=a,l=0,o=performance.now()}n=e.timers.requestAnimationFrame(d)}return d(),()=>{cancelAnimationFrame(n)}},[t,e]),t?u.jsx("div",{ref:r}):null}function RI(){const e=N(),t=ks(),r=H("locale",()=>e.user.getLocale(),[e]);return u.jsx(Pa,{id:"help menu language",label:"menu.language",children:u.jsx(he,{id:"languages",children:fd.map(({locale:a,label:s})=>u.jsx(Ca,{id:`language-${a}`,title:a,label:s,checked:a===r,onSelect:()=>{e.user.updateUserPreferences({locale:a}),t("change-language",{source:"menu",locale:a})}},a))})})}function pse(){return u.jsxs(u.Fragment,{children:[u.jsx(RI,{}),u.jsx(fse,{})]})}function fse(){const{KeyboardShortcutsDialog:e}=lo(),{addDialog:t}=Qo();return e?u.jsx(q,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:()=>{t({component:e})}}):null}const hse=S.memo(function({children:t}){const r=Ie(),a=qr(),s=t??u.jsx(pse,{});return a<bt.MOBILE?null:u.jsx("div",{className:"tlui-help-menu",children:u.jsxs(Ho,{id:"help menu",children:[u.jsx(Go,{children:u.jsx(de,{type:"help",title:r("help-menu.title"),"data-testid":"help-menu.button",children:u.jsx(ve,{icon:"question-mark",small:!0})})}),u.jsx(Ko,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:u.jsx(ka,{type:"menu",sourceId:"help-menu",children:s})})]})})});function gse(){const e=N(),t=oe(),[r,a]=S.useState(!1),s=S.useRef(!1);return On("toggle showback to content",()=>{const n=s.current,o=e.getCurrentPageShapeIds();let i=!1;o.size&&(i=o.size===e.getCulledShapes().size),n!==i&&(a(i),s.current=i)},[e]),r?u.jsx(q,{...t["back-to-content"],onSelect:()=>{t["back-to-content"].onSelect("helper-buttons"),a(!1)}}):null}function mse(){const e=N(),t=oe();return H("is pen mode",()=>e.getInstanceState().isPenMode,[e])?u.jsx(q,{...t["exit-pen-mode"]}):null}function bse(){const e=N(),t=oe();return H("is following user",()=>!!e.getInstanceState().followingUserId,[e])?u.jsx(q,{...t["stop-following"]}):null}function yse(){return u.jsxs(u.Fragment,{children:[u.jsx(mse,{}),u.jsx(gse,{}),u.jsx(bse,{})]})}function _se({children:e}){const t=e??u.jsx(yse,{});return u.jsx("div",{className:"tlui-helper-buttons",children:u.jsx(ka,{type:"helper-buttons",sourceId:"helper-buttons",children:t})})}function wse(){const e=oe(),t=Ag();return u.jsxs(u.Fragment,{children:[u.jsxs(he,{label:"shortcuts-dialog.tools",id:"tools",children:[u.jsx(q,{...e["toggle-tool-lock"]}),u.jsx(q,{...e["insert-media"]}),u.jsx(q,{...t.select}),u.jsx(q,{...t.draw}),u.jsx(q,{...t.eraser}),u.jsx(q,{...t.hand}),u.jsx(q,{...t.rectangle}),u.jsx(q,{...t.ellipse}),u.jsx(q,{...t.arrow}),u.jsx(q,{...t.line}),u.jsx(q,{...t.text}),u.jsx(q,{...t.frame}),u.jsx(q,{...t.note}),u.jsx(q,{...t.laser})]}),u.jsxs(he,{label:"shortcuts-dialog.preferences",id:"preferences",children:[u.jsx(q,{...e["toggle-dark-mode"]}),u.jsx(q,{...e["toggle-focus-mode"]}),u.jsx(q,{...e["toggle-grid"]})]}),u.jsxs(he,{label:"shortcuts-dialog.edit",id:"edit",children:[u.jsx(q,{...e.undo}),u.jsx(q,{...e.redo}),u.jsx(q,{...e.cut}),u.jsx(q,{...e.copy}),u.jsx(q,{...e.paste}),u.jsx(q,{...e["select-all"]}),u.jsx(q,{...e.delete}),u.jsx(q,{...e.duplicate})]}),u.jsxs(he,{label:"shortcuts-dialog.view",id:"view",children:[u.jsx(q,{...e["zoom-in"]}),u.jsx(q,{...e["zoom-out"]}),u.jsx(q,{...e["zoom-to-100"]}),u.jsx(q,{...e["zoom-to-fit"]}),u.jsx(q,{...e["zoom-to-selection"]})]}),u.jsxs(he,{label:"shortcuts-dialog.transform",id:"transform",children:[u.jsx(q,{...e["bring-to-front"]}),u.jsx(q,{...e["bring-forward"]}),u.jsx(q,{...e["send-backward"]}),u.jsx(q,{...e["send-to-back"]}),u.jsx(q,{...e.group}),u.jsx(q,{...e.ungroup}),u.jsx(q,{...e["flip-horizontal"]}),u.jsx(q,{...e["flip-vertical"]}),u.jsx(q,{...e["align-top"]}),u.jsx(q,{...e["align-center-vertical"]}),u.jsx(q,{...e["align-bottom"]}),u.jsx(q,{...e["align-left"]}),u.jsx(q,{...e["align-center-horizontal"]}),u.jsx(q,{...e["align-right"]})]})]})}const vse=S.memo(function({children:t}){const r=Ie(),a=qr(),s=t??u.jsx(wse,{});return u.jsxs(u.Fragment,{children:[u.jsxs(Cg,{className:"tlui-shortcuts-dialog__header",children:[u.jsx(Pg,{children:r("shortcuts-dialog.title")}),u.jsx(Ig,{})]}),u.jsx(_d,{className:le("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":a<=bt.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":a<=bt.TABLET}),children:u.jsx(ka,{type:"keyboard-shortcuts",sourceId:"kbd",children:s})}),u.jsx("div",{className:"tlui-dialog__scrim"})]})});function OI(){return u.jsxs(u.Fragment,{children:[u.jsx(Sse,{}),u.jsx(Pse,{}),u.jsx(xse,{}),u.jsx(Ise,{}),u.jsx(Ase,{})]})}function xse(){const e=oe();return u.jsxs(Pa,{id:"export-all-as",label:"context-menu.export-all-as",size:"small",children:[u.jsxs(he,{id:"export-all-as-group",children:[u.jsx(q,{...e["export-all-as-svg"]}),u.jsx(q,{...e["export-all-as-png"]}),u.jsx(q,{...e["export-all-as-json"]})]}),u.jsx(he,{id:"export-all-as-bg",children:u.jsx(h4,{})})]})}function Sse(){const e=N(),t=H("isSelectToolActive",()=>e.getCurrentToolId()==="select",[e]);return u.jsxs(Pa,{id:"edit",label:"menu.edit",disabled:!t,children:[u.jsx(Cse,{}),u.jsx(EI,{}),u.jsx(DI,{}),u.jsx(kse,{}),u.jsx(Fse,{}),u.jsx(he,{id:"select-all",children:u.jsx(TI,{})})]})}function kse(){return u.jsxs(he,{id:"misc",children:[u.jsx(SI,{}),u.jsx(kI,{}),u.jsx(xI,{}),u.jsx(vI,{}),u.jsx(FI,{}),u.jsx(CI,{}),u.jsx(BI,{}),u.jsx(MI,{})]})}function Fse(){return u.jsxs(he,{id:"lock",children:[u.jsx(PI,{}),u.jsx(Mae,{})]})}function Cse(){const e=oe(),t=tP(),r=eP();return u.jsxs(he,{id:"undo-redo",children:[u.jsx(q,{...e.undo,disabled:!t}),u.jsx(q,{...e.redo,disabled:!r})]})}function Pse(){const e=oe();return u.jsx(Pa,{id:"view",label:"menu.view",children:u.jsxs(he,{id:"view-actions",children:[u.jsx(q,{...e["zoom-in"]}),u.jsx(q,{...e["zoom-out"]}),u.jsx(II,{}),u.jsx(AI,{}),u.jsx(jI,{})]})})}function Ise(){const e=oe();return u.jsxs(he,{id:"extras",children:[u.jsx(q,{...e["insert-embed"]}),u.jsx(q,{...e["insert-media"]})]})}function Ase(){return u.jsx(he,{id:"preferences",children:u.jsxs(Pa,{id:"preferences",label:"menu.preferences",children:[u.jsxs(he,{id:"preferences-actions",children:[u.jsx(Hae,{}),u.jsx(Gae,{}),u.jsx(Kae,{}),u.jsx(Vae,{}),u.jsx(Yae,{}),u.jsx(Xae,{}),u.jsx(Zae,{}),u.jsx(Jae,{}),u.jsx(Qae,{})]}),u.jsx(he,{id:"language",children:u.jsx(RI,{})})]})})}const zI=S.memo(function({children:t}){const r=or(),[a,s]=no("main menu"),n=Ie(),o=t??u.jsx(OI,{});return u.jsxs(u4,{dir:"ltr",open:a,onOpenChange:s,modal:!1,children:[u.jsx(p4,{asChild:!0,dir:"ltr",children:u.jsx(de,{type:"icon","data-testid":"main-menu.button",title:n("menu.title"),children:u.jsx(ve,{icon:"menu",small:!0})})}),u.jsx(zg,{container:r,children:u.jsx(f4,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:u.jsx(ka,{type:"menu",sourceId:"main-menu",children:o})})})]})}),jse=S.memo(function(){const t=qr(),{MainMenu:r,QuickActions:a,ActionsMenu:s,PageMenu:n}=lo();return!r&&!n&&t<6?null:u.jsx("div",{className:"tlui-menu-zone",children:u.jsxs("div",{className:"tlui-buttons__horizontal",children:[r&&u.jsx(r,{}),n&&u.jsx(n,{}),t<6?null:u.jsxs(u.Fragment,{children:[a&&u.jsx(a,{}),s&&u.jsx(s,{})]})]})})}),B2={};function dc(e){if(B2[e])return B2[e];const r=document.createElement("canvas").getContext("2d");r.fillStyle=e,r.fillRect(0,0,1,1);const[a,s,n,o]=r.getImageData(0,0,1,1).data,i=new Float32Array([a/255,s/255,n/255,o/255]);return B2[e]=i,i}const wf=10,NI=4*6*wf+12+4*12;function yi(e,{center:t,radius:r,numArcSegments:a=20,startAngle:s=0,endAngle:n=Be,offset:o=0}){const i=(n-s)/a;let l=o;for(let c=s;c<n;c+=i)e[l++]=t.x,e[l++]=t.y,e[l++]=t.x+Math.cos(c)*r,e[l++]=t.y+Math.sin(c)*r,e[l++]=t.x+Math.cos(c+i)*r,e[l++]=t.y+Math.sin(c+i)*r;return e}function _i(e,t,r,a,s,n){e[t++]=r,e[t++]=a,e[t++]=r,e[t++]=a+n,e[t++]=r+s,e[t++]=a,e[t++]=r+s,e[t++]=a,e[t++]=r,e[t++]=a+n,e[t++]=r+s,e[t++]=a+n}function Ese(e,t,r){const a=wf;r=Math.min(r,Math.min(t.w,t.h)/2);const s=Z.ExpandBy(t,-r);if(s.w<=0||s.h<=0)return yi(e,{center:t.center,radius:r,numArcSegments:wf*4}),wf*4*6;let n=0;return _i(e,n,s.minX,s.minY,s.w,s.h),n+=12,_i(e,n,s.minX,t.minY,s.w,r),n+=12,_i(e,n,s.maxX,s.minY,r,s.h),n+=12,_i(e,n,s.minX,s.maxY,s.w,r),n+=12,_i(e,n,t.minX,s.minY,r,s.h),n+=12,yi(e,{numArcSegments:a,offset:n,center:s.point,radius:r,startAngle:Ce,endAngle:Ce*1.5}),n+=a*6,yi(e,{numArcSegments:a,offset:n,center:v.Add(s.point,new v(s.w,0)),radius:r,startAngle:Ce*1.5,endAngle:Be}),n+=a*6,yi(e,{numArcSegments:a,offset:n,center:v.Add(s.point,s.size),radius:r,startAngle:0,endAngle:Ge}),n+=a*6,yi(e,{numArcSegments:a,offset:n,center:v.Add(s.point,new v(0,s.h)),radius:r,startAngle:Ge,endAngle:Ce}),NI}function Dse(e){if(!e)throw new Error("Canvas element not found");const t=e.getContext("webgl2",{premultipliedAlpha:!1});if(!t)throw new Error("Failed to get webgl2 context");const r=`#version 300 es
  precision mediump float;
  
  in vec2 shapeVertexPosition;

	uniform vec4 canvasPageBounds;

	// taken (with thanks) from
	// https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html
  void main() {
		// convert the position from pixels to 0.0 to 1.0
		vec2 zeroToOne = (shapeVertexPosition - canvasPageBounds.xy) / canvasPageBounds.zw;
	
		// convert from 0->1 to 0->2
		vec2 zeroToTwo = zeroToOne * 2.0;
	
		// convert from 0->2 to -1->+1 (clipspace)
		vec2 clipSpace = zeroToTwo - 1.0;
	
		gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  }`,a=t.createShader(t.VERTEX_SHADER);if(!a)throw new Error("Failed to create vertex shader");if(t.shaderSource(a,r),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Error("Failed to compile vertex shader");const s=`#version 300 es
  precision mediump float;
  
	uniform vec4 fillColor;
  out vec4 outputColor;

  void main() {
	outputColor = fillColor;
  }`,n=t.createShader(t.FRAGMENT_SHADER);if(!n)throw new Error("Failed to create fragment shader");if(t.shaderSource(n,s),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Failed to compile fragment shader");const o=t.createProgram();if(!o)throw new Error("Failed to create program");if(t.attachShader(o,a),t.attachShader(o,n),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Failed to link program");t.useProgram(o);const i=t.getAttribLocation(o,"shapeVertexPosition");if(i<0)throw new Error("Failed to get shapeVertexPosition attribute location");t.enableVertexAttribArray(i);const l=t.getUniformLocation(o,"canvasPageBounds"),c=t.getUniformLocation(o,"fillColor");if(!t.createBuffer())throw new Error("Failed to create buffer");if(!t.createBuffer())throw new Error("Failed to create buffer");return{context:t,selectedShapes:pp(t,1024),unselectedShapes:pp(t,4096),viewport:pp(t,NI),collaborators:pp(t,1024),prepareTriangles(f,h){t.bindBuffer(t.ARRAY_BUFFER,f.buffer),t.bufferData(t.ARRAY_BUFFER,f.vertices,t.STATIC_DRAW,0,h),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0)},drawTrianglesTransparently(f){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLES,0,f/2),t.disable(t.BLEND)},drawTriangles(f){t.drawArrays(t.TRIANGLES,0,f/2)},setFillColor(f){t.uniform4fv(c,f)},setCanvasPageBounds(f){t.uniform4fv(l,f)}}}function pp(e,t){const r=e.createBuffer();if(!r)throw new Error("Failed to create buffer");return{buffer:r,vertices:new Float32Array(t)}}function f7(e,t,r){let a=e.vertices.length;for(;a<t+r.length;)a*=2;if(a!=e.vertices.length){const s=new Float32Array(a);s.set(e.vertices),e.vertices=s}e.vertices.set(r,t)}var Tse=Object.defineProperty,Mse=Object.getOwnPropertyDescriptor,io=(e,t,r,a)=>{for(var s=a>1?void 0:a?Mse(t,r):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(s=(a?o(t,r,s):o(s))||s);return a&&s&&Tse(t,r,s),s};class on{constructor(t,r,a){g(this,"disposables",[]);g(this,"close",()=>this.disposables.forEach(t=>t()));g(this,"gl");g(this,"shapeGeometryCache");g(this,"colors");g(this,"id",rt());g(this,"canvasBoundingClientRect",rr("canvasBoundingClientRect",new Z));g(this,"originPagePoint",new v);g(this,"originPageCenter",new v);g(this,"isInViewport",!1);g(this,"getMinimapPagePoint",(t,r)=>{const a=this.getCanvasPageBounds(),s=this.getCanvasScreenBounds();let n=t-s.x,o=r-s.y;return n*=a.width/s.width,o*=a.height/s.height,n+=a.minX,o+=a.minY,new v(n,o,1)});g(this,"minimapScreenPointToPagePoint",(t,r,a=!1,s=!1)=>{const{editor:n}=this,o=n.getViewportPageBounds();let{x:i,y:l}=this.getMinimapPagePoint(t,r);if(s){const c=this.editor.getCurrentPageBounds()??new Z,d=c.minX-o.width/2,p=c.maxX+o.width/2,f=c.minY-o.height/2,h=c.maxY+o.height/2,y=Math.max(0,d+o.width-i),m=Math.max(0,-(p-o.width-i)),w=Math.max(0,f+o.height-l),b=Math.max(0,-(h-o.height-l));i+=(y-m)/2,l+=(w-b)/2,i=Pt(i,d,p),l=Pt(l,f,h)}if(a){const{originPagePoint:c}=this,d=Math.abs(i-c.x),p=Math.abs(l-c.y);d>p?l=c.y:i=c.x}return new v(i,l)});g(this,"render",()=>{const t=this.gl.context,r=this.getCanvasSize();this.gl.setCanvasPageBounds(this.getCanvasPageBoundsArray()),this.elem.width=r.x,this.elem.height=r.y,t.viewport(0,0,r.x,r.y),t.clearColor(this.colors.background[0],this.colors.background[1],this.colors.background[2],1),t.clear(t.COLOR_BUFFER_BIT);const a=new Set(this.editor.getSelectedShapeIds()),s=this.colors;let n=0,o=0;const i=this.editor.getCurrentPageShapeIdsSorted();for(let l=0,c=i.length;l<c;l++){const d=i[l],p=this.shapeGeometryCache.get(d);if(!p)continue;const f=p.length;a.has(d)?(f7(this.gl.selectedShapes,n,p),n+=f):(f7(this.gl.unselectedShapes,o,p),o+=f)}this.drawShapes(this.gl.unselectedShapes,o,s.shapeFill),this.drawShapes(this.gl.selectedShapes,n,s.selectFill),this.drawViewport(),this.drawCollaborators()});this.editor=t,this.elem=r,this.container=a,this.gl=Dse(r),this.shapeGeometryCache=t.store.createComputedCache("webgl-geometry",s=>{const n=t.getShapeMaskedPageBounds(s.id);if(!n)return null;const o=new Float32Array(12);return _i(o,0,n.x,n.y,n.w,n.h),o}),this.colors=this._getColors(),this.disposables.push(this._listenForCanvasResize(),Jo("minimap render",this.render))}_getColors(){const t=getComputedStyle(this.editor.getContainer());return{shapeFill:dc(t.getPropertyValue("--color-text-3").trim()),selectFill:dc(t.getPropertyValue("--color-selected").trim()),viewportFill:dc(t.getPropertyValue("--color-muted-1").trim()),background:dc(t.getPropertyValue("--color-low").trim())}}updateColors(){this.colors=this._getColors()}getDpr(){return this.editor.getInstanceState().devicePixelRatio}getContentPageBounds(){const t=this.editor.getViewportPageBounds(),r=this.editor.getCurrentPageBounds();return r?Z.Expand(r,t):t}getContentScreenBounds(){const t=this.getContentPageBounds(),r=this.editor.pageToScreen(t.point),a=this.editor.pageToScreen(new v(t.maxX,t.maxY));return new Z(r.x,r.y,a.x-r.x,a.y-r.y)}_getCanvasBoundingRect(){const{x:t,y:r,width:a,height:s}=this.elem.getBoundingClientRect();return new Z(t,r,a,s)}getCanvasScreenBounds(){return this.canvasBoundingClientRect.get()}_listenForCanvasResize(){const t=new ResizeObserver(()=>{const r=this._getCanvasBoundingRect();this.canvasBoundingClientRect.set(r)});return t.observe(this.elem),t.observe(this.container),()=>t.disconnect()}getCanvasSize(){const t=this.canvasBoundingClientRect.get(),r=this.getDpr();return new v(t.width*r,t.height*r)}getCanvasClientPosition(){return this.canvasBoundingClientRect.get().point}getCanvasPageBounds(){const t=this.getCanvasScreenBounds(),r=this.getContentPageBounds(),a=t.width/t.height;let s=r.width,n=s/a;n<r.height&&(n=r.height,s=n*a);const o=new Z(0,0,s,n);return o.center=r.center,o}getZoom(){return this.getCanvasPageBounds().width/this.getCanvasScreenBounds().width}getCanvasPageBoundsArray(){const{x:t,y:r,w:a,h:s}=this.getCanvasPageBounds();return new Float32Array([t,r,a,s])}drawShapes(t,r,a){this.gl.prepareTriangles(t,r),this.gl.setFillColor(a),this.gl.drawTriangles(r)}drawViewport(){const t=this.editor.getViewportPageBounds(),r=Ese(this.gl.viewport.vertices,t,4*this.getZoom());this.gl.prepareTriangles(this.gl.viewport,r),this.gl.setFillColor(this.colors.viewportFill),this.gl.drawTrianglesTransparently(r),this.editor.environment.isSafari&&(this.gl.drawTrianglesTransparently(r),this.gl.drawTrianglesTransparently(r),this.gl.drawTrianglesTransparently(r))}drawCollaborators(){const t=this.editor.getCollaboratorsOnCurrentPage();if(!t.length)return;const r=20,a=r*6,s=a*t.length;this.gl.collaborators.vertices.length<s&&(this.gl.collaborators.vertices=new Float32Array(s));const n=this.gl.collaborators.vertices;let o=0;const i=this.getZoom();for(const{cursor:l}of t)yi(n,{center:v.From(l),radius:3*i,offset:o,numArcSegments:r}),o+=a;this.gl.prepareTriangles(this.gl.collaborators,s),o=0;for(const{color:l}of t)this.gl.setFillColor(dc(l)),this.gl.context.drawArrays(this.gl.context.TRIANGLES,o/2,a/2),o+=a}}io([K],on.prototype,"getDpr",1);io([K],on.prototype,"getContentPageBounds",1);io([K],on.prototype,"getContentScreenBounds",1);io([K],on.prototype,"getCanvasSize",1);io([K],on.prototype,"getCanvasClientPosition",1);io([K],on.prototype,"getCanvasPageBounds",1);io([K],on.prototype,"getZoom",1);io([K],on.prototype,"getCanvasPageBoundsArray",1);function Bse(){const e=N(),t=or(),r=S.useRef(null),a=S.useRef(!1),s=S.useRef();S.useEffect(()=>{try{const d=new on(e,r.current,t);return s.current=d,s.current.close}catch(d){e.annotateError(d,{origin:"minimap",willCrashApp:!1}),e.timers.setTimeout(()=>{throw d})}},[e,t]);const n=S.useCallback(d=>{if(!e.getCurrentPageShapeIds().size||!s.current)return;const p=s.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!1),f=s.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!0);s.current.originPagePoint.setTo(f),s.current.originPageCenter.setTo(e.getViewportPageBounds().center),e.centerOnPoint(p,{animation:{duration:e.options.animationMediumMs}})},[e]),o=S.useCallback(d=>{if(!s.current)return;const p=d.currentTarget;if($d(p,d),!e.getCurrentPageShapeIds().size)return;a.current=!0,s.current.isInViewport=!1;const f=s.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!1),h=e.getViewportPageBounds(),y=s.current.getContentPageBounds();if(new Z(y.x-h.width/2,y.y-h.height/2,y.width+h.width,y.height+h.height).containsPoint(f)&&!h.containsPoint(f)){s.current.isInViewport=h.containsPoint(f);const b=v.Sub(h.center,h.point),_=v.Add(f,b);s.current.originPagePoint.setTo(_),s.current.originPageCenter.setTo(f),e.centerOnPoint(f,{animation:{duration:e.options.animationMediumMs}})}else{const b=s.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!0);s.current.isInViewport=h.containsPoint(b),s.current.originPagePoint.setTo(b),s.current.originPageCenter.setTo(h.center)}function w(b){p&&Ud(p,b),a.current=!1,document.body.removeEventListener("pointerup",w)}document.body.addEventListener("pointerup",w)},[e]),i=S.useCallback(d=>{if(!s.current)return;const p=s.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,d.shiftKey,!0);if(a.current){if(s.current.isInViewport){const m=s.current.originPagePoint.clone().sub(s.current.originPageCenter);e.centerOnPoint(v.Sub(p,m));return}e.centerOnPoint(p)}const f=s.current.getMinimapPagePoint(d.clientX,d.clientY),h=e.pageToScreen(f),y={type:"pointer",target:"canvas",name:"pointer_move",...Er(d),point:h,isPen:e.getInstanceState().isPenMode};e.dispatch(y)},[e]),l=S.useCallback(d=>{const p=uS(d);e.dispatch({type:"wheel",name:"wheel",delta:p,point:new v(d.clientX,d.clientY),shiftKey:d.shiftKey,altKey:d.altKey,ctrlKey:d.metaKey||d.ctrlKey})},[e]),c=Vd();return S.useEffect(()=>{e.timers.setTimeout(()=>{var d,p;(d=s.current)==null||d.updateColors(),(p=s.current)==null||p.render()})},[c,e]),u.jsx("div",{className:"tlui-minimap",children:u.jsx("canvas",{role:"img","aria-label":"minimap",ref:r,className:"tlui-minimap__canvas",onDoubleClick:n,onPointerMove:i,onPointerDown:o,onWheel:l})})}function Lse(e,t){const[r,a]=_e.useState(t);_e.useLayoutEffect(()=>{const n=P_(e);if(n)try{a(JSON.parse(n))}catch{console.error(`Could not restore value ${e} from local storage.`)}},[e]);const s=_e.useCallback(n=>{a(o=>{const i=typeof n=="function"?n(o):n;return I_(e,JSON.stringify(i)),i})},[e]);return[r,s]}const Rse=S.memo(function(){const t=oe(),r=Ie(),a=qr(),[s,n]=Lse("minimap",!0),o=S.useCallback(()=>{n(c=>!c)},[n]),{ZoomMenu:i,Minimap:l}=lo();return a<bt.MOBILE?null:u.jsxs("div",{className:"tlui-navigation-panel",children:[u.jsx("div",{className:"tlui-buttons__horizontal",children:i&&a<bt.TABLET?u.jsx(i,{}):s?u.jsxs(u.Fragment,{children:[i&&u.jsx(i,{}),l&&u.jsx(de,{type:"icon","data-testid":"minimap.toggle-button",title:r("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:o,children:u.jsx(ve,{icon:s?"chevrons-ne":"chevrons-sw"})})]}):u.jsxs(u.Fragment,{children:[u.jsx(de,{type:"icon","data-testid":"minimap.zoom-out",title:`${r(wd(t["zoom-out"].label))} ${ay(t["zoom-out"].kbd)}`,onClick:()=>t["zoom-out"].onSelect("navigation-zone"),children:u.jsx(ve,{icon:"minus"})}),i&&u.jsx(i,{}),u.jsx(de,{type:"icon","data-testid":"minimap.zoom-in",title:`${r(wd(t["zoom-in"].label))} ${ay(t["zoom-in"].kbd)}`,onClick:()=>t["zoom-in"].onSelect("navigation-zone"),children:u.jsx(ve,{icon:"plus"})}),l&&u.jsx(de,{type:"icon","data-testid":"minimap.toggle-button",title:r("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:o,children:u.jsx(ve,{icon:s?"chevrons-ne":"chevrons-sw"})})]})}),l&&a>=bt.TABLET&&!s&&u.jsx(l,{})]})}),Ose=function({name:t,id:r,isCurrentPage:a}){const s=N(),n=S.useRef(null),o=S.useCallback(()=>{s.mark("rename page")},[s]),i=S.useCallback(l=>{s.renamePage(r,l||"New Page")},[s,r]);return u.jsx(R0,{className:"tlui-page-menu__item__input",ref:l=>n.current=l,defaultValue:t,onValueChange:i,onFocus:o,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:a,autoSelect:!0})},ny=(e,t,r,a)=>{let s;const n=e.getPages(),o=r>a?n[a-1]:n[a],i=r>a?n[a]:n[a+1];o&&!i?s=Ms(o.index):!o&&i?s=tN(n[0].index):s=dd(o.index,i.index),s!==n[r].index&&(e.mark("moving page"),e.updatePage({id:t,index:s}))},h7=la(function({index:t,listSize:r,item:a,onRename:s}){const n=N(),o=Ie(),i=n.getPages(),l=S.useCallback(()=>{n.mark("creating page");const f=Vs.createId();n.duplicatePage(a.id,f)},[n,a]),c=S.useCallback(()=>{ny(n,a.id,t,t-1)},[n,a,t]),d=S.useCallback(()=>{ny(n,a.id,t,t+1)},[n,a,t]),p=S.useCallback(()=>{n.mark("deleting page"),n.deletePage(a.id)},[n,a]);return u.jsxs(Ho,{id:`page item submenu ${t}`,children:[u.jsx(Go,{children:u.jsx(de,{type:"icon",title:o("page-menu.submenu.title"),children:u.jsx(ve,{icon:"dots-vertical"})})}),u.jsx(Ko,{alignOffset:0,side:"right",sideOffset:-4,children:u.jsxs(ka,{type:"menu",sourceId:"page-menu",children:[u.jsxs(he,{id:"modify",children:[s&&u.jsx(q,{id:"rename",label:"page-menu.submenu.rename",onSelect:s}),u.jsx(q,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:l,disabled:i.length>=n.options.maxPages}),t>0&&u.jsx(q,{id:"move-up",onSelect:c,label:"page-menu.submenu.move-up"}),t<r-1&&u.jsx(q,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:d})]}),r>1&&u.jsx(he,{id:"delete",children:u.jsx(q,{id:"delete",onSelect:p,label:"page-menu.submenu.delete"})})]})})]})}),zse=S.memo(function(){const t=N(),r=Ie(),a=qr(),s=S.useCallback(()=>w(!1),[]),[n,o]=no("page-menu",s),i=36,l=S.useRef(null),c=H("pages",()=>t.getPages(),[t]),d=H("currentPage",()=>t.getCurrentPage(),[t]),p=H("currentPageId",()=>t.getCurrentPageId(),[t]),f=sn(),h=H("maxPageCountReached",()=>t.getPages().length>=t.options.maxPages,[t]),y=H("isCoarsePointer",()=>t.getInstanceState().isCoarsePointer,[t]),[m,w]=S.useState(!1),b=S.useCallback(()=>{f||w(A=>!A)},[f]),_=S.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[x,C]=S.useState(Object.fromEntries(c.map((A,D)=>[A.id,{y:D*i,offsetY:0,isSelected:!1}])));S.useLayoutEffect(()=>{C(Object.fromEntries(c.map((A,D)=>[A.id,{y:D*i,offsetY:0,isSelected:!1}])))},[i,c]),S.useEffect(()=>{n&&t.timers.requestAnimationFrame(()=>{const A=document.querySelector(`[data-testid="page-menu-item-${p}"]`);if(A){const D=l.current;if(!D)return;const z=A.offsetTop,T=D.scrollTop;z<T&&D.scrollTo({top:z});const M=z+i,L=D.scrollTop+D.offsetHeight;M>L&&D.scrollTo({top:M-D.offsetHeight})}})},[i,p,n,t]);const k=S.useCallback(A=>{const{clientY:D,currentTarget:z}=A,{dataset:{id:T,index:M}}=z;if(!T||!M)return;const L=_.current;$d(A.currentTarget,A),L.status="pointing",L.pointing={id:T,index:+M};const W=x[T].y;L.startY=D,L.startIndex=Math.max(0,Math.min(Math.round(W/i),c.length-1))},[i,c.length,x]),F=S.useCallback(A=>{const D=_.current;if(D.status==="pointing"){const{clientY:z}=A,T=z-D.startY;Math.abs(T)>5&&(D.status="dragging")}if(D.status==="dragging"){const{clientY:z}=A,T=z-D.startY,M=x[D.pointing.id],{startIndex:L,pointing:G}=D,W=M.y+T,O=Math.max(0,Math.min(Math.round(W/i),c.length-1)),$={...x};if($[G.id]={y:M.y,offsetY:T,isSelected:!0},O!==D.dragIndex){D.dragIndex=O;for(let U=0;U<c.length;U++){const X=c[U];if(X.id===D.pointing.id)continue;let{y:ne}=$[X.id];O===L?ne=U*i:O<L?O<=U&&U<L?ne=(U+1)*i:ne=U*i:O>L&&(O>=U&&U>L?ne=(U-1)*i:ne=U*i),ne!==$[X.id].y&&($[X.id]={y:ne,offsetY:0,isSelected:!0})}}C($)}},[i,c,x]),P=S.useCallback(A=>{const D=_.current;if(D.status==="dragging"){const{id:z,index:T}=D.pointing;ny(t,z,T,D.dragIndex)}Ud(A.currentTarget,A),D.status="idle"},[t]),I=S.useCallback(A=>{const D=_.current;A.key==="Escape"&&(D.status==="dragging"&&C(Object.fromEntries(c.map((z,T)=>[z.id,{y:T*i,offsetY:0,isSelected:!1}]))),D.status="idle")},[i,c]),j=S.useCallback(()=>{f||t.batch(()=>{t.mark("creating page");const A=Vs.createId();t.createPage({name:r("page-menu.new-page-initial-name"),id:A}),t.setCurrentPage(A),w(!0)})},[t,r,f]);return u.jsxs(Z0,{id:"pages",onOpenChange:o,open:n,children:[u.jsx(J0,{"data-testid":"main.page-menu",children:u.jsxs(de,{type:"menu",title:d.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[u.jsx("div",{className:"tlui-page-menu__name",children:d.name}),u.jsx(ve,{icon:"chevron-down",small:!0})]})}),u.jsx(Q0,{side:"bottom",align:"start",sideOffset:6,children:u.jsxs("div",{className:"tlui-page-menu__wrapper",children:[u.jsxs("div",{className:"tlui-page-menu__header",children:[u.jsx("div",{className:"tlui-page-menu__header__title",children:r("page-menu.title")}),!f&&u.jsxs("div",{className:"tlui-buttons__horizontal",children:[u.jsx(de,{type:"icon","data-testid":"page-menu.edit",title:r(m?"page-menu.edit-done":"page-menu.edit-start"),onClick:b,children:u.jsx(ve,{icon:m?"check":"edit"})}),u.jsx(de,{type:"icon","data-testid":"page-menu.create",title:r(h?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:h,onClick:j,children:u.jsx(ve,{icon:"plus"})})]})]}),u.jsx("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:i*c.length+4},ref:l,children:c.map((A,D)=>{const z=x[A.id]??{position:D*40,offsetY:0};return m?u.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page_menu__item__sortable",style:{zIndex:A.id===d.id?888:D,transform:`translate(0px, ${z.y+z.offsetY}px)`},children:[u.jsx(de,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:k,onPointerUp:P,onPointerMove:F,onKeyDown:I,"data-id":A.id,"data-index":D,children:u.jsx(ve,{icon:"drag-handle-dots"})}),a<bt.TABLET_SM&&y?u.jsxs(de,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const T=window.prompt("Rename page",A.name);T&&T!==A.name&&t.renamePage(A.id,T)},onDoubleClick:b,children:[u.jsx(sy,{checked:A.id===d.id}),u.jsx(xt,{children:A.name})]}):u.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:i},children:u.jsx(Ose,{id:A.id,name:A.name,isCurrentPage:A.id===d.id})}),!f&&u.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":m,children:u.jsx(h7,{index:D,item:A,listSize:c.length})})]},A.id+"_editing"):u.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[u.jsxs(de,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>t.setCurrentPage(A.id),onDoubleClick:b,title:r("page-menu.go-to-page"),children:[u.jsx(sy,{checked:A.id===d.id}),u.jsx(xt,{children:A.name})]}),!f&&u.jsx("div",{className:"tlui-page_menu__item__submenu",children:u.jsx(h7,{index:D,item:A,listSize:c.length,onRename:()=>{if(t.environment.isIos){const T=window.prompt("Rename page",A.name);T&&T!==A.name&&t.renamePage(A.id,T)}else t.batch(()=>{w(!0),t.setCurrentPage(A.id)})}})})]},A.id)})})]})})]})});function Nse(){const e=oe(),t=N(),r=tP(),a=eP(),s=wr(1),n=sn(),o=H("should display quick actions",()=>t.isInAny("select","hand","zoom"),[t]),i=nn(),l=s&&i;if(!(n&&!o))return u.jsxs(u.Fragment,{children:[u.jsx(q,{...e.undo,disabled:!r}),u.jsx(q,{...e.redo,disabled:!a}),u.jsx(q,{...e.delete,disabled:!l}),u.jsx(q,{...e.duplicate,disabled:!l})]})}const qse=S.memo(function({children:t}){const r=t??u.jsx(Nse,{});return u.jsx(ka,{type:"small-icons",sourceId:"quick-actions",children:r})}),$se=Object.freeze([na,Oo,pl,ms]);function qI(e=$se){const t=N();return H("getRelevantStyles",()=>{var n;const r=new Ab(t.getSharedStyles()),a=!!((n=t.root.getCurrent())!=null&&n.shapeType),s=t.isIn("select")&&t.getSelectedShapeIds().length>0;if(r.size===0&&t.isIn("select")&&t.getSelectedShapeIds().length===0)for(const o of e)r.applyValue(o,t.getStyleForNextShape(o));return a||s||r.size>0?r:null},[t])}const _a={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],textAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],horizontalAlign:[{value:"start",icon:"horizontal-align-start"},{value:"middle",icon:"horizontal-align-middle"},{value:"end",icon:"horizontal-align-end"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-middle"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"star",icon:"geo-star"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"cloud",icon:"geo-cloud"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"},{value:"heart",icon:"geo-heart"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},Fo=S.memo(function(t){const{uiType:r,items:a,title:s,style:n,value:o,onValueChange:i,theme:l}=t,c=N(),d=Ie(),p=S.useRef(!1),f=S.useRef(null),{handleButtonClick:h,handleButtonPointerDown:y,handleButtonPointerEnter:m,handleButtonPointerUp:w}=S.useMemo(()=>{const b=()=>{p.current=!1,window.removeEventListener("pointerup",b);const F=f.current;F&&["TEXTAREA","INPUT"].includes(F.nodeName)&&F.focus(),f.current=null};return{handleButtonClick:F=>{const{id:P}=F.currentTarget.dataset;o.type==="shared"&&o.value===P||(c.mark("point picker item"),i(n,P))},handleButtonPointerDown:F=>{const{id:P}=F.currentTarget.dataset;c.mark("point picker item"),i(n,P),p.current=!0,f.current=document.activeElement,window.addEventListener("pointerup",b)},handleButtonPointerEnter:F=>{if(!p.current)return;const{id:P}=F.currentTarget.dataset;i(n,P)},handleButtonPointerUp:F=>{const{id:P}=F.currentTarget.dataset;o.type==="shared"&&o.value===P||i(n,P)}}},[o,c,i,n]);return u.jsx("div",{"data-testid":`style.${r}`,className:le("tlui-buttons__grid"),children:a.map(b=>u.jsx(de,{type:"icon","data-id":b.value,"data-testid":`style.${r}.${b.value}`,"aria-label":b.value,"data-state":o.type==="shared"&&o.value===b.value?"hinted":void 0,title:s+" — "+d(`${r}-style.${b.value}`),className:le("tlui-button-grid__button"),style:n===na?{color:l[b.value].solid}:void 0,onPointerEnter:m,onPointerDown:y,onPointerUp:w,onClick:h,children:u.jsx(ve,{icon:b.icon})},b.value))})});function $I(e,[t,r]){return Math.min(r,Math.max(t,e))}function Use(e){const t=S.useRef({value:e,previous:e});return S.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var UI=["PageUp","PageDown"],WI=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ol="Slider",[oy,Wse,Hse]=kg(Ol),[GI,jie]=Ss(Ol,[Hse]),[Gse,Ng]=GI(Ol),KI=S.forwardRef((e,t)=>{const{name:r,min:a=0,max:s=100,step:n=1,orientation:o="horizontal",disabled:i=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[a],value:d,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:y,...m}=e,w=S.useRef(new Set),b=S.useRef(0),x=o==="horizontal"?Kse:Vse,[C=[],k]=ao({prop:d,defaultProp:c,onChange:D=>{var T;(T=[...w.current][b.current])==null||T.focus(),p(D)}}),F=S.useRef(C);function P(D){const z=Qse(C,D);A(D,z)}function I(D){A(D,b.current)}function j(){const D=F.current[b.current];C[b.current]!==D&&f(C)}function A(D,z,{commit:T}={commit:!1}){const M=ane(n),L=sne(Math.round((D-a)/n)*n+a,M),G=$I(L,[a,s]);k((W=[])=>{const O=Zse(W,G,z);if(rne(O,l*n)){b.current=O.indexOf(G);const $=String(O)!==String(W);return $&&T&&f(O),$?O:W}else return W})}return u.jsx(Gse,{scope:e.__scopeSlider,name:r,disabled:i,min:a,max:s,valueIndexToChangeRef:b,thumbs:w.current,values:C,orientation:o,form:y,children:u.jsx(oy.Provider,{scope:e.__scopeSlider,children:u.jsx(oy.Slot,{scope:e.__scopeSlider,children:u.jsx(x,{"aria-disabled":i,"data-disabled":i?"":void 0,...m,ref:t,onPointerDown:re(m.onPointerDown,()=>{i||(F.current=C)}),min:a,max:s,inverted:h,onSlideStart:i?void 0:P,onSlideMove:i?void 0:I,onSlideEnd:i?void 0:j,onHomeKeyDown:()=>!i&&A(a,0,{commit:!0}),onEndKeyDown:()=>!i&&A(s,C.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:z})=>{if(!i){const L=UI.includes(D.key)||D.shiftKey&&WI.includes(D.key)?10:1,G=b.current,W=C[G],O=n*L*z;A(W+O,G,{commit:!0})}}})})})})});KI.displayName=Ol;var[VI,YI]=GI(Ol,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Kse=S.forwardRef((e,t)=>{const{min:r,max:a,dir:s,inverted:n,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,[p,f]=S.useState(null),h=$e(t,x=>f(x)),y=S.useRef(void 0),m=e4(s),w=m==="ltr",b=w&&!n||!w&&n;function _(x){const C=y.current||p.getBoundingClientRect(),k=[0,C.width],P=g4(k,b?[r,a]:[a,r]);return y.current=C,P(x-C.left)}return u.jsx(VI,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:u.jsx(XI,{dir:m,"data-orientation":"horizontal",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const C=_(x.clientX);o==null||o(C)},onSlideMove:x=>{const C=_(x.clientX);i==null||i(C)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:x=>{const k=HI[b?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:k?-1:1})}})})}),Vse=S.forwardRef((e,t)=>{const{min:r,max:a,inverted:s,onSlideStart:n,onSlideMove:o,onSlideEnd:i,onStepKeyDown:l,...c}=e,d=S.useRef(null),p=$e(t,d),f=S.useRef(void 0),h=!s;function y(m){const w=f.current||d.current.getBoundingClientRect(),b=[0,w.height],x=g4(b,h?[a,r]:[r,a]);return f.current=w,x(m-w.top)}return u.jsx(VI,{scope:e.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:u.jsx(XI,{"data-orientation":"vertical",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const w=y(m.clientY);n==null||n(w)},onSlideMove:m=>{const w=y(m.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,i==null||i()},onStepKeyDown:m=>{const b=HI[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:b?-1:1})}})})}),XI=S.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:s,onSlideEnd:n,onHomeKeyDown:o,onEndKeyDown:i,onStepKeyDown:l,...c}=e,d=Ng(Ol,r);return u.jsx(we.span,{...c,ref:t,onKeyDown:re(e.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(i(p),p.preventDefault()):UI.concat(WI).includes(p.key)&&(l(p),p.preventDefault())}),onPointerDown:re(e.onPointerDown,p=>{const f=p.target;f.setPointerCapture(p.pointerId),p.preventDefault(),d.thumbs.has(f)?f.focus():a(p)}),onPointerMove:re(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&s(p)}),onPointerUp:re(e.onPointerUp,p=>{const f=p.target;f.hasPointerCapture(p.pointerId)&&(f.releasePointerCapture(p.pointerId),n(p))})})}),ZI="SliderTrack",JI=S.forwardRef((e,t)=>{const{__scopeSlider:r,...a}=e,s=Ng(ZI,r);return u.jsx(we.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...a,ref:t})});JI.displayName=ZI;var iy="SliderRange",QI=S.forwardRef((e,t)=>{const{__scopeSlider:r,...a}=e,s=Ng(iy,r),n=YI(iy,r),o=S.useRef(null),i=$e(t,o),l=s.values.length,c=s.values.map(f=>rA(f,s.min,s.max)),d=l>1?Math.min(...c):0,p=100-Math.max(...c);return u.jsx(we.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...a,ref:i,style:{...e.style,[n.startEdge]:d+"%",[n.endEdge]:p+"%"}})});QI.displayName=iy;var ly="SliderThumb",eA=S.forwardRef((e,t)=>{const r=Wse(e.__scopeSlider),[a,s]=S.useState(null),n=$e(t,i=>s(i)),o=S.useMemo(()=>a?r().findIndex(i=>i.ref.current===a):-1,[r,a]);return u.jsx(Yse,{...e,ref:n,index:o})}),Yse=S.forwardRef((e,t)=>{const{__scopeSlider:r,index:a,name:s,...n}=e,o=Ng(ly,r),i=YI(ly,r),[l,c]=S.useState(null),d=$e(t,_=>c(_)),p=l?o.form||!!l.closest("form"):!0,f=PC(l),h=o.values[a],y=h===void 0?0:rA(h,o.min,o.max),m=Jse(a,o.values.length),w=f==null?void 0:f[i.size],b=w?ene(w,y,i.direction):0;return S.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${y}% + ${b}px)`},children:[u.jsx(oy.ItemSlot,{scope:e.__scopeSlider,children:u.jsx(we.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...n,ref:d,style:h===void 0?{display:"none"}:e.style,onFocus:re(e.onFocus,()=>{o.valueIndexToChangeRef.current=a})})}),p&&u.jsx(tA,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:h},a)]})});eA.displayName=ly;var Xse="RadioBubbleInput",tA=S.forwardRef(({__scopeSlider:e,value:t,...r},a)=>{const s=S.useRef(null),n=$e(s,a),o=Use(t);return S.useEffect(()=>{const i=s.current;if(!i)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const p=new Event("input",{bubbles:!0});d.call(i,t),i.dispatchEvent(p)}},[o,t]),u.jsx(we.input,{style:{display:"none"},...r,ref:n,defaultValue:t})});tA.displayName=Xse;function Zse(e=[],t,r){const a=[...e];return a[r]=t,a.sort((s,n)=>s-n)}function rA(e,t,r){const n=100/(r-t)*(e-t);return $I(n,[0,100])}function Jse(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Qse(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),a=Math.min(...r);return r.indexOf(a)}function ene(e,t,r){const a=e/2,n=g4([0,50],[0,a]);return(a-n(t)*r)*r}function tne(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function rne(e,t){if(t>0){const r=tne(e);return Math.min(...r)>=t}return!0}function g4(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}function ane(e){return(String(e).split(".")[1]||"").length}function sne(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var nne=KI,one=JI,ine=QI,lne=eA;const cne=S.memo(function(t){const{title:r,steps:a,value:s,label:n,onValueChange:o}=t,i=N(),l=Ie(),c=S.useCallback(f=>{o(f[0])},[o]),d=S.useCallback(()=>{i.mark("click slider")},[i]),p=S.useCallback(()=>{s&&o(s)},[s,o]);return u.jsx("div",{className:"tlui-slider__container",children:u.jsxs(nne,{"data-testid":t["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:a,step:1,value:s?[s]:void 0,onPointerDown:d,onValueChange:c,onPointerUp:p,title:r+" — "+l(n),children:[u.jsx(one,{className:"tlui-slider__track",dir:"ltr",children:s!==null&&u.jsx(ine,{className:"tlui-slider__range",dir:"ltr"})}),s!==null&&u.jsx(lne,{className:"tlui-slider__thumb",dir:"ltr"})]})})});function dne({label:e,uiTypeA:t,uiTypeB:r,labelA:a,labelB:s,itemsA:n,itemsB:o,styleA:i,styleB:l,valueA:c,valueB:d,onValueChange:p}){const f=Ie(),h=S.useMemo(()=>{var m;return((m=n.find(w=>c.type==="shared"&&c.value===w.value))==null?void 0:m.icon)??"mixed"},[n,c]),y=S.useMemo(()=>{var m;return((m=o.find(w=>d.type==="shared"&&d.value===w.value))==null?void 0:m.icon)??"mixed"},[o,d]);return c===void 0&&d===void 0?null:u.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[u.jsx("div",{title:f(e),className:"tlui-style-panel__double-select-picker-label",children:f(e)}),u.jsxs("div",{className:"tlui-buttons__horizontal",children:[u.jsxs(Ho,{id:`style panel ${t} A`,children:[u.jsx(Go,{children:u.jsx(de,{type:"icon","data-testid":`style.${t}`,title:f(a)+" — "+(c===null||c.type==="mixed"?f("style-panel.mixed"):f(`${t}-style.${c.value}`)),children:u.jsx(ve,{icon:h,small:!0,invertIcon:!0})})}),u.jsx(Ko,{side:"left",align:"center",sideOffset:80,alignOffset:0,children:u.jsx("div",{className:"tlui-buttons__grid",children:n.map((m,w)=>u.jsx(Fd,{"data-testid":`style.${t}.${m.value}`,children:u.jsx(de,{type:"icon",onClick:()=>p(i,m.value),title:`${f(a)} — ${f(`${t}-style.${m.value}`)}`,children:u.jsx(ve,{icon:m.icon,invertIcon:!0})},m.value)},w))})})]}),u.jsxs(Ho,{id:`style panel ${r}`,children:[u.jsx(Go,{children:u.jsx(de,{type:"icon","data-testid":`style.${r}`,title:f(s)+" — "+(d===null||d.type==="mixed"?f("style-panel.mixed"):f(`${r}-style.${d.value}`)),children:u.jsx(ve,{icon:y,small:!0})})}),u.jsx(Ko,{side:"left",align:"center",sideOffset:116,alignOffset:0,children:u.jsx("div",{className:"tlui-buttons__grid",children:o.map(m=>u.jsx(Fd,{children:u.jsx(de,{type:"icon",title:`${f(s)} — ${f(`${r}-style.${m.value}`)}`,"data-testid":`style.${r}.${m.value}`,onClick:()=>p(l,m.value),children:u.jsx(ve,{icon:m.icon})})},m.value))})})]})]})]})}const une=S.memo(dne);function pne({id:e,label:t,uiType:r,style:a,items:s,type:n,value:o,onValueChange:i}){const l=Ie(),c=N(),d=S.useMemo(()=>{var h;return(h=s.find(y=>o.type==="shared"&&y.value===o.value))==null?void 0:h.icon},[s,o]),p=o.type==="mixed"?l("style-panel.mixed"):l(`${r}-style.${o.value}`),f=t?l(t):"";return u.jsxs(Ho,{id:`style panel ${e}`,children:[u.jsx(Go,{children:u.jsxs(de,{type:n,"data-testid":`style.${r}`,title:p,children:[u.jsx(xt,{children:f}),u.jsx(ve,{icon:d??"mixed"})]})}),u.jsx(Ko,{side:"left",align:"center",alignOffset:0,children:u.jsx("div",{className:"tlui-buttons__grid",children:s.map(h=>u.jsx(Fd,{children:u.jsx(de,{type:"icon","data-testid":`style.${r}.${h.value}`,title:l(`${r}-style.${h.value}`),onClick:()=>{c.mark("select style dropdown item"),i(a,h.value)},children:u.jsx(ve,{icon:h.icon})})},h.value))})})]})}const m4=S.memo(pne);function fne({styles:e}){const t=Vd();if(!e)return null;const r=e.get(us),a=e.get(lh),s=e.get(ih),n=e.get(ph),o=e.get(gs),i=r===void 0,l=a===void 0&&s===void 0,c=n===void 0,d=o===void 0,p=an({isDarkMode:t});return u.jsxs(u.Fragment,{children:[u.jsx(hne,{theme:p,styles:e}),!d&&u.jsx(gne,{theme:p,styles:e}),!(i&&l&&c)&&u.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[u.jsx(mne,{styles:e}),u.jsx(yne,{styles:e}),u.jsx(bne,{styles:e})]})]})}function su(){const e=N(),t=ks();return _e.useMemo(()=>function(a,s){e.batch(()=>{e.isIn("select")&&e.setStyleForSelectedShapes(a,s),e.setStyleForNextShapes(a,s),e.updateInstanceState({isChangingStyle:!0})}),t("set-style",{source:"style-panel",id:a.id,value:s})},[e,t])}function hne({styles:e,theme:t}){const r=Ie(),a=N(),s=su(),n=e.get(na),o=e.get(pl),i=e.get(Oo),l=e.get(ms),c=o!==void 0||i!==void 0||l!==void 0;return u.jsxs(u.Fragment,{children:[u.jsxs("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles","data-testid":"style.panel",children:[n===void 0?null:u.jsx(Fo,{title:r("style-panel.color"),uiType:"color",style:na,items:_a.color,value:n,onValueChange:s,theme:t}),u.jsx(_ne,{})]}),c&&u.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[o===void 0?null:u.jsx(Fo,{title:r("style-panel.fill"),uiType:"fill",style:pl,items:_a.fill,value:o,onValueChange:s,theme:t}),i===void 0?null:u.jsx(Fo,{title:r("style-panel.dash"),uiType:"dash",style:Oo,items:_a.dash,value:i,onValueChange:s,theme:t}),l===void 0?null:u.jsx(Fo,{title:r("style-panel.size"),uiType:"size",style:ms,items:_a.size,value:l,onValueChange:(d,p)=>{s(d,p);const f=a.getSelectedShapeIds();f.length>0&&We(a,f)},theme:t})]})]})}function gne({theme:e,styles:t}){const r=Ie(),a=su(),s=t.get(gs),n=t.get(Sb),o=t.get(dh),i=t.get(uh);return s===void 0&&o===void 0?null:u.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[s===void 0?null:u.jsx(Fo,{title:r("style-panel.font"),uiType:"font",style:gs,items:_a.font,value:s,onValueChange:a,theme:e}),n===void 0?null:u.jsxs("div",{className:"tlui-style-panel__row",children:[u.jsx(Fo,{title:r("style-panel.align"),uiType:"align",style:Sb,items:_a.textAlign,value:n,onValueChange:a,theme:e}),u.jsx("div",{className:"tlui-style-panel__row__extra-button",children:u.jsx(de,{type:"icon",title:r("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:u.jsx(ve,{icon:"vertical-align-middle"})})})]}),o===void 0?null:u.jsxs("div",{className:"tlui-style-panel__row",children:[u.jsx(Fo,{title:r("style-panel.align"),uiType:"align",style:dh,items:_a.horizontalAlign,value:o,onValueChange:a,theme:e}),u.jsx("div",{className:"tlui-style-panel__row__extra-button",children:i===void 0?u.jsx(de,{type:"icon",title:r("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:u.jsx(ve,{icon:"vertical-align-middle"})}):u.jsx(m4,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",style:uh,items:_a.verticalAlign,value:i,onValueChange:a})})]})]})}function mne({styles:e}){const t=su(),r=e.get(us);return r===void 0?null:u.jsx(m4,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",style:us,items:_a.geo,value:r,onValueChange:t})}function bne({styles:e}){const t=su(),r=e.get(ph);return r===void 0?null:u.jsx(m4,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",style:ph,items:_a.spline,value:r,onValueChange:t})}function yne({styles:e}){const t=su(),r=e.get(lh),a=e.get(ih);return!r||!a?null:u.jsx(une,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:ih,itemsA:_a.arrowheadStart,valueA:a,uiTypeB:"arrowheadEnd",styleB:lh,itemsB:_a.arrowheadEnd,valueB:r,onValueChange:t,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}const uc=[.1,.25,.5,.75,1];function _ne(){const e=N(),t=H("opacity",()=>e.getSharedOpacity(),[e]),r=ks(),a=Ie(),s=_e.useCallback(o=>{const i=uc[o];e.batch(()=>{e.isIn("select")&&e.setOpacityForSelectedShapes(i),e.setOpacityForNextShapes(i),e.updateInstanceState({isChangingStyle:!0})}),r("set-style",{source:"style-panel",id:"opacity",value:o})},[e,r]);if(t===void 0)return null;const n=t.type==="mixed"?-1:uc.indexOf(zz(uc,o=>Math.abs(o-t.value)));return u.jsx(cne,{"data-testid":"style.opacity",value:n>=0?n:uc.length-1,label:t.type==="mixed"?"style-panel.mixed":`opacity-style.${t.value}`,onValueChange:s,steps:uc.length-1,title:a("style-panel.opacity")})}const wne=S.memo(function({isMobile:t,children:r}){const a=N(),s=qI(),n=S.useCallback(()=>{t||a.updateInstanceState({isChangingStyle:!1})},[a,t]),o=r??u.jsx(fne,{styles:s});return u.jsx("div",{className:le("tlui-style-panel",{"tlui-style-panel__wrapper":!t}),"data-ismobile":t,onPointerLeave:n,children:o})});function vne(){const e=N(),t=Ie(),r=qI(),a=r==null?void 0:r.get(na),s=an({isDarkMode:e.user.getIsDarkMode()}),n=((a==null?void 0:a.type)==="shared"?s[a.value]:s.black).solid,o=H("disable style panel",()=>e.isInAny("hand","zoom","eraser","laser"),[e]),i=S.useCallback(c=>{c||e.updateInstanceState({isChangingStyle:!1})},[e]),{StylePanel:l}=lo();return l?u.jsxs(Z0,{id:"mobile style menu",onOpenChange:i,children:[u.jsx(J0,{children:u.jsx(de,{type:"tool","data-testid":"mobile-styles.button",style:{color:o?"var(--color-muted-1)":n},title:t("style-panel.title"),disabled:o,children:u.jsx(ve,{icon:o?"blob":(a==null?void 0:a.type)==="mixed"?"mixed":"blob"})})}),u.jsx(Q0,{side:"top",align:"end",children:l&&u.jsx(l,{isMobile:!0})})]}):null}function xne(){return u.jsxs(u.Fragment,{children:[u.jsx(kne,{}),u.jsx(Fne,{}),u.jsx(Cne,{}),u.jsx(Pne,{}),u.jsx(Ine,{}),u.jsx(Ane,{}),u.jsx(jne,{}),u.jsx(Ene,{}),u.jsx(Dne,{}),u.jsx(Tne,{}),u.jsx(Bne,{}),u.jsx(Mne,{}),u.jsx(One,{}),u.jsx(qne,{}),u.jsx(Lne,{}),u.jsx(Nne,{}),u.jsx(zne,{}),u.jsx(Rne,{}),u.jsx($ne,{}),u.jsx(Une,{}),u.jsx(Wne,{}),u.jsx(Hne,{}),u.jsx(Gne,{}),u.jsx(Kne,{}),u.jsx(Vne,{}),u.jsx(Yne,{}),u.jsx(Zne,{}),u.jsx(Xne,{})]})}function Sne(e){var a;const t=N(),r=(a=e.meta)==null?void 0:a.geo;return H("is tool selected",()=>{const s=t.getCurrentToolId(),n=t.getSharedStyles().getAsKnownValue(us);return r?s==="geo"&&n===r:s===e.id},[t,e.id,r])}function Ue({tool:e}){const t=Ag(),r=Sne(t[e]);return u.jsx(q,{...t[e],isSelected:r})}function kne(){return u.jsx(Ue,{tool:"select"})}function Fne(){return u.jsx(Ue,{tool:"hand"})}function Cne(){return u.jsx(Ue,{tool:"draw"})}function Pne(){return u.jsx(Ue,{tool:"eraser"})}function Ine(){return u.jsx(Ue,{tool:"arrow"})}function Ane(){return u.jsx(Ue,{tool:"text"})}function jne(){return u.jsx(Ue,{tool:"note"})}function Ene(){const e=Ag();return u.jsx(q,{...e.asset})}function Dne(){return u.jsx(Ue,{tool:"rectangle"})}function Tne(){return u.jsx(Ue,{tool:"ellipse"})}function Mne(){return u.jsx(Ue,{tool:"diamond"})}function Bne(){return u.jsx(Ue,{tool:"triangle"})}function Lne(){return u.jsx(Ue,{tool:"rhombus"})}function Rne(){return u.jsx(Ue,{tool:"heart"})}function One(){return u.jsx(Ue,{tool:"hexagon"})}function zne(){return u.jsx(Ue,{tool:"cloud"})}function Nne(){return u.jsx(Ue,{tool:"star"})}function qne(){return u.jsx(Ue,{tool:"oval"})}function $ne(){return u.jsx(Ue,{tool:"x-box"})}function Une(){return u.jsx(Ue,{tool:"check-box"})}function Wne(){return u.jsx(Ue,{tool:"arrow-left"})}function Hne(){return u.jsx(Ue,{tool:"arrow-up"})}function Gne(){return u.jsx(Ue,{tool:"arrow-down"})}function Kne(){return u.jsx(Ue,{tool:"arrow-right"})}function Vne(){return u.jsx(Ue,{tool:"line"})}function Yne(){return u.jsx(Ue,{tool:"highlight"})}function Xne(){return u.jsx(Ue,{tool:"frame"})}function Zne(){return u.jsx(Ue,{tool:"laser"})}const L2=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function R2(e,t,r,a){e.addEventListener?e.addEventListener(t,r,a):e.attachEvent&&e.attachEvent("on".concat(t),r)}function pc(e,t,r,a){e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent&&e.detachEvent("on".concat(t),r)}function aA(e,t){const r=t.slice(0,t.length-1);for(let a=0;a<r.length;a++)r[a]=e[r[a].toLowerCase()];return r}function sA(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let r=t.lastIndexOf("");for(;r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function Jne(e,t){const r=e.length>=t.length?e:t,a=e.length>=t.length?t:e;let s=!0;for(let n=0;n<r.length;n++)a.indexOf(r[n])===-1&&(s=!1);return s}const Cd={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":L2?173:189,"=":L2?61:187,";":L2?59:186,"'":222,"[":219,"]":221,"\\":220},Na={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Cc={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Bt={16:!1,18:!1,17:!1,91:!1},ct={};for(let e=1;e<20;e++)Cd["f".concat(e)]=111+e;let et=[],Hc=null,nA="all";const Ds=new Map,nu=e=>Cd[e.toLowerCase()]||Na[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),Qne=e=>Object.keys(Cd).find(t=>Cd[t]===e),eoe=e=>Object.keys(Na).find(t=>Na[t]===e);function oA(e){nA=e||"all"}function Pd(){return nA||"all"}function toe(){return et.slice(0)}function roe(){return et.map(e=>Qne(e)||eoe(e)||String.fromCharCode(e))}function aoe(){const e=[];return Object.keys(ct).forEach(t=>{ct[t].forEach(r=>{let{key:a,scope:s,mods:n,shortcut:o}=r;e.push({scope:s,shortcut:o,mods:n,keys:a.split("+").map(i=>nu(i))})})}),e}function soe(e){const t=e.target||e.srcElement,{tagName:r}=t;let a=!0;const s=r==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(s||r==="TEXTAREA"||r==="SELECT")&&!t.readOnly)&&(a=!1),a}function noe(e){return typeof e=="string"&&(e=nu(e)),et.indexOf(e)!==-1}function ooe(e,t){let r,a;e||(e=Pd());for(const s in ct)if(Object.prototype.hasOwnProperty.call(ct,s))for(r=ct[s],a=0;a<r.length;)r[a].scope===e?r.splice(a,1).forEach(o=>{let{element:i}=o;return b4(i)}):a++;Pd()===e&&oA(t||"all")}function ioe(e){let t=e.keyCode||e.which||e.charCode;const r=et.indexOf(t);if(r>=0&&et.splice(r,1),e.key&&e.key.toLowerCase()==="meta"&&et.splice(0,et.length),(t===93||t===224)&&(t=91),t in Bt){Bt[t]=!1;for(const a in Na)Na[a]===t&&(Dr[a]=!1)}}function iA(e){if(typeof e>"u")Object.keys(ct).forEach(s=>{Array.isArray(ct[s])&&ct[s].forEach(n=>fp(n)),delete ct[s]}),b4(null);else if(Array.isArray(e))e.forEach(s=>{s.key&&fp(s)});else if(typeof e=="object")e.key&&fp(e);else if(typeof e=="string"){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];let[s,n]=r;typeof s=="function"&&(n=s,s=""),fp({key:e,scope:s,method:n,splitKey:"+"})}}const fp=e=>{let{key:t,scope:r,method:a,splitKey:s="+"}=e;sA(t).forEach(o=>{const i=o.split(s),l=i.length,c=i[l-1],d=c==="*"?"*":nu(c);if(!ct[d])return;r||(r=Pd());const p=l>1?aA(Na,i):[],f=[];ct[d]=ct[d].filter(h=>{const m=(a?h.method===a:!0)&&h.scope===r&&Jne(h.mods,p);return m&&f.push(h.element),!m}),f.forEach(h=>b4(h))})};function g7(e,t,r,a){if(t.element!==a)return;let s;if(t.scope===r||t.scope==="all"){s=t.mods.length>0;for(const n in Bt)Object.prototype.hasOwnProperty.call(Bt,n)&&(!Bt[n]&&t.mods.indexOf(+n)>-1||Bt[n]&&t.mods.indexOf(+n)===-1)&&(s=!1);(t.mods.length===0&&!Bt[16]&&!Bt[18]&&!Bt[17]&&!Bt[91]||s||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(et),t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function m7(e,t){const r=ct["*"];let a=e.keyCode||e.which||e.charCode;if(!Dr.filter.call(this,e))return;if((a===93||a===224)&&(a=91),et.indexOf(a)===-1&&a!==229&&et.push(a),["metaKey","ctrlKey","altKey","shiftKey"].forEach(i=>{const l=Cc[i];e[i]&&et.indexOf(l)===-1?et.push(l):!e[i]&&et.indexOf(l)>-1?et.splice(et.indexOf(l),1):i==="metaKey"&&e[i]&&(et=et.filter(c=>c in Cc||c===a))}),a in Bt){Bt[a]=!0;for(const i in Na)if(Object.prototype.hasOwnProperty.call(Na,i)){const l=Cc[Na[i]];Dr[i]=e[l]}if(!r)return}for(const i in Bt)Object.prototype.hasOwnProperty.call(Bt,i)&&(Bt[i]=e[Cc[i]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(et.indexOf(17)===-1&&et.push(17),et.indexOf(18)===-1&&et.push(18),Bt[17]=!0,Bt[18]=!0);const s=Pd();if(r)for(let i=0;i<r.length;i++)r[i].scope===s&&(e.type==="keydown"&&r[i].keydown||e.type==="keyup"&&r[i].keyup)&&g7(e,r[i],s,t);if(!(a in ct))return;const n=ct[a],o=n.length;for(let i=0;i<o;i++)if((e.type==="keydown"&&n[i].keydown||e.type==="keyup"&&n[i].keyup)&&n[i].key){const l=n[i],{splitKey:c}=l,d=l.key.split(c),p=[];for(let f=0;f<d.length;f++)p.push(nu(d[f]));p.sort().join("")===et.sort().join("")&&g7(e,l,s,t)}}function Dr(e,t,r){et=[];const a=sA(e);let s=[],n="all",o=document,i=0,l=!1,c=!0,d="+",p=!1,f=!1;for(r===void 0&&typeof t=="function"&&(r=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(n=t.scope),t.element&&(o=t.element),t.keyup&&(l=t.keyup),t.keydown!==void 0&&(c=t.keydown),t.capture!==void 0&&(p=t.capture),typeof t.splitKey=="string"&&(d=t.splitKey),t.single===!0&&(f=!0)),typeof t=="string"&&(n=t),f&&iA(e,n);i<a.length;i++)e=a[i].split(d),s=[],e.length>1&&(s=aA(Na,e)),e=e[e.length-1],e=e==="*"?"*":nu(e),e in ct||(ct[e]=[]),ct[e].push({keyup:l,keydown:c,scope:n,mods:s,shortcut:a[i],method:r,key:a[i],splitKey:d,element:o});if(typeof o<"u"&&window){if(!Ds.has(o)){const h=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return m7(m,o)},y=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;m7(m,o),ioe(m)};Ds.set(o,{keydownListener:h,keyupListenr:y,capture:p}),R2(o,"keydown",h,p),R2(o,"keyup",y,p)}if(!Hc){const h=()=>{et=[]};Hc={listener:h,capture:p},R2(window,"focus",h,p)}}}function loe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(ct).forEach(r=>{ct[r].filter(s=>s.scope===t&&s.shortcut===e).forEach(s=>{s&&s.method&&s.method()})})}function b4(e){const t=Object.values(ct).flat();if(t.findIndex(a=>{let{element:s}=a;return s===e})<0){const{keydownListener:a,keyupListenr:s,capture:n}=Ds.get(e)||{};a&&s&&(pc(e,"keyup",s,n),pc(e,"keydown",a,n),Ds.delete(e))}if((t.length<=0||Ds.size<=0)&&(Object.keys(Ds).forEach(s=>{const{keydownListener:n,keyupListenr:o,capture:i}=Ds.get(s)||{};n&&o&&(pc(s,"keyup",o,i),pc(s,"keydown",n,i),Ds.delete(s))}),Ds.clear(),Object.keys(ct).forEach(s=>delete ct[s]),Hc)){const{listener:s,capture:n}=Hc;pc(window,"focus",s,n),Hc=null}}const O2={getPressedKeyString:roe,setScope:oA,getScope:Pd,deleteScope:ooe,getPressedKeyCodes:toe,getAllKeyCodes:aoe,isPressed:noe,filter:soe,trigger:loe,unbind:iA,keyMap:Cd,modifier:Na,modifierMap:Cc};for(const e in O2)Object.prototype.hasOwnProperty.call(O2,e)&&(Dr[e]=O2[e]);if(typeof window<"u"){const e=window.hotkeys;Dr.noConflict=t=>(t&&window.hotkeys===Dr&&(window.hotkeys=e),Dr),window.hotkeys=Dr}const b7=["copy","cut","paste","asset"];function coe(){const e=N(),t=sn(),r=oe(),a=Ag(),s=H("is focused",()=>e.getInstanceState().isFocused,[e]);S.useEffect(()=>{if(!s)return;const n=new Array,o=(l,c)=>{Dr(l,{element:document.body},c),n.push(()=>{Dr.unbind(l,c)})},i=(l,c)=>{Dr(l,{element:document.body,keyup:!0,keydown:!1},c),n.push(()=>{Dr.unbind(l,c)})};for(const l of Object.values(r))l.kbd&&(t&&!l.readonlyOk||b7.includes(l.id)||o(y7(l.kbd),c=>{Pc(e)||(ke(c),l.onSelect("kbd"))}));for(const l of Object.values(a))!l.kbd||!l.readonlyOk&&e.getInstanceState().isReadonly||b7.includes(l.id)||o(y7(l.kbd),c=>{Pc(e)||(ke(c),l.onSelect("kbd"))});return o(",",l=>{if(Pc(e)||e.inputs.keys.has("Comma"))return;ke(l),e.focus(),e.inputs.keys.add("Comma");const{x:c,y:d,z:p}=e.inputs.currentScreenPoint,f={type:"pointer",name:"pointer_down",point:{x:c,y:d,z:p},shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,pointerId:0,button:0,isPen:e.getInstanceState().isPenMode,target:"canvas"};e.dispatch(f)}),i(",",l=>{if(Pc(e)||!e.inputs.keys.has("Comma"))return;e.inputs.keys.delete("Comma");const{x:c,y:d,z:p}=e.inputs.currentScreenPoint,f={type:"pointer",name:"pointer_up",point:{x:c,y:d,z:p},shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,pointerId:0,button:0,isPen:e.getInstanceState().isPenMode,target:"canvas"};e.dispatch(f)}),()=>{n.forEach(l=>l())}},[r,a,t,e,s])}function y7(e){return doe(e).map(t=>{let r="";const a=t.split("");return a.length===1?r=a[0]:a[0]==="!"?r=`shift+${a[1]}`:a[0]==="?"?a.length===3&&a[1]==="!"?r=`alt+shift+${a[2]}`:r=`alt+${a[1]}`:a[0]==="$"?a[1]==="!"?r=`cmd+shift+${a[2]},ctrl+shift+${a[2]}`:a[1]==="?"?r=`cmd+⌥+${a[2]},ctrl+alt+${a[2]}`:r=`cmd+${a[1]},ctrl+${a[1]}`:r=t,r}).join(",")}function doe(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let r=t.lastIndexOf("");for(;r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function Pc(e){return e.getIsMenuOpen()||e.getEditingShapeId()!==null||e.getCrashingError()}const uoe=S.createContext(!1);function poe({children:e}){const t=N(),r=HK(),a=qr(),s=Ie(),n=Math.min(8,5+a),[o,i]=S.useState(0),l=S.useRef(null),[c,d]=S.useState(null),p=S.useMemo(()=>{const h=c?`:not([data-value="${c}"])`:"";return`
			#${r}_main > *:nth-child(n + ${n+(c?1:2)})${h} {
				display: none;
			}
			#${r}_more > *:nth-child(-n + ${n}) {
				display: none;
			}
        `},[c,r,n]),f=n0(()=>{if(!l.current)return;const h=Array.from(l.current.children);i(h.length),h.findIndex(w=>w.getAttribute("data-value")===c)<=n&&d(null);const m=Array.from(l.current.children).findIndex(w=>w.getAttribute("aria-checked")==="true");m!==-1&&m>=n&&d(h[m].getAttribute("data-value"))});return S.useLayoutEffect(()=>{f()}),S.useLayoutEffect(()=>{if(!l.current)return;const h=new MutationObserver(f);return h.observe(l.current,{childList:!0,subtree:!0,attributeFilter:["data-value","aria-checked"]}),()=>{h.disconnect()}},[f]),S.useEffect(()=>{const h=[["1",0],["2",1],["3",2],["4",3],["5",4],["6",5],["7",6],["8",7],["9",8],["0",9]];for(const[y,m]of h)Dr(y,w=>{var x;if(Pc(t))return;ke(w);const _=Array.from(((x=l.current)==null?void 0:x.children)??[]).filter(C=>!(C instanceof HTMLElement)||C.tagName.toLowerCase()!=="button"?!1:!!(C.offsetWidth||C.offsetHeight))[m];_&&_.click()});return()=>{Dr.unbind("1,2,3,4,5,6,7,8,9,0")}},[t]),u.jsxs(u.Fragment,{children:[u.jsx("style",{children:p}),u.jsxs("div",{className:le("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":a<bt.TABLET_SM}),role:"radiogroup",children:[u.jsx("div",{id:`${r}_main`,ref:l,className:"tlui-toolbar__tools__list",children:u.jsx(ka,{type:"toolbar",sourceId:"toolbar",children:e})}),o>n+1&&u.jsx(uoe.Provider,{value:!0,children:u.jsxs(Ho,{id:"toolbar overflow",modal:!1,children:[u.jsx(Go,{children:u.jsx(de,{title:s("tool-panel.more"),type:"tool",className:"tlui-toolbar__overflow","data-testid":"tools.more-button",children:u.jsx(ve,{icon:"chevron-up"})})}),u.jsx(Ko,{side:"top",align:"center",children:u.jsx("div",{className:"tlui-buttons__grid","data-testid":"tools.more-content",id:`${r}_more`,children:u.jsx(ka,{type:"toolbar-overflow",sourceId:"toolbar",children:e})})})]})})]})]})}const foe=["select","hand","draw","eraser","text","zoom","laser","highlight"];function hoe({activeToolId:e}){const t=N(),r=qr(),a=Ie(),s=H("is tool locked",()=>t.getInstanceState().isToolLocked,[t]);return!e||foe.includes(e)?null:u.jsx(de,{type:"normal",title:a("action.toggle-tool-lock"),"data-testid":"tool-lock",className:le("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":r<bt.TABLET_SM}),onClick:()=>t.updateInstanceState({isToolLocked:!s}),children:u.jsx(ve,{icon:s?"lock":"unlock",small:!0})})}const goe=S.memo(function({children:t}){const r=N(),a=qr(),s=sn(),n=H("current tool id",()=>r.getCurrentToolId(),[r]),{ActionsMenu:o,QuickActions:i}=lo();return u.jsx("div",{className:"tlui-toolbar",children:u.jsxs("div",{className:"tlui-toolbar__inner",children:[u.jsxs("div",{className:"tlui-toolbar__left",children:[!s&&u.jsxs("div",{className:"tlui-toolbar__extras",children:[a<bt.TABLET&&u.jsxs("div",{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",children:[i&&u.jsx(i,{}),o&&u.jsx(o,{})]}),u.jsx(hoe,{activeToolId:n})]}),u.jsx(poe,{children:t??u.jsx(xne,{})})]}),a<bt.TABLET_SM&&!s&&u.jsx("div",{className:"tlui-toolbar__tools",children:u.jsx(vne,{})})]})})});function moe(){const e=oe();return u.jsxs(u.Fragment,{children:[u.jsx(q,{...e["zoom-in"],noClose:!0}),u.jsx(q,{...e["zoom-out"],noClose:!0}),u.jsx(II,{}),u.jsx(AI,{}),u.jsx(jI,{})]})}const boe=S.memo(function({children:t}){const r=or(),[a,s]=no("zoom menu"),n=t??u.jsx(moe,{});return u.jsxs(u4,{dir:"ltr",open:a,onOpenChange:s,modal:!1,children:[u.jsx(p4,{asChild:!0,dir:"ltr",children:u.jsx(yoe,{})}),u.jsx(zg,{container:r,children:u.jsx(f4,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:u.jsx(ka,{type:"menu",sourceId:"zoom-menu",children:n})})})]})}),yoe=S.forwardRef(function(t,r){const a=N(),s=qr(),n=H("zoom",()=>a.getZoomLevel(),[a]),o=Ie(),i=S.useCallback(()=>{a.resetZoom(a.getViewportScreenCenter(),{animation:{duration:a.options.animationMediumMs}})},[a]);return u.jsx(de,{ref:r,...t,type:"icon",title:`${o("navigation-zone.zoom")}`,"data-testid":"minimap.zoom-menu-button",className:s<bt.TABLET_SM?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:i,icon:s<bt.MOBILE?"zoom-in":void 0,children:s<bt.MOBILE?null:u.jsxs("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(n*100),"%"]})})}),lA=S.createContext(null);function _oe({overrides:e={},children:t}){const r=Z_(e);return u.jsx(lA.Provider,{value:S.useMemo(()=>({ContextMenu:tse,ActionsMenu:Eae,HelpMenu:hse,ZoomMenu:boe,MainMenu:zI,Minimap:Bse,StylePanel:wne,PageMenu:zse,NavigationPanel:Rse,Toolbar:goe,KeyboardShortcutsDialog:vse,QuickActions:qse,HelperButtons:_se,DebugPanel:lse,DebugMenu:ise,MenuPanel:jse,...r}),[r]),children:t})}function lo(){const e=S.useContext(lA);if(!e)throw new Error("useTldrawUiComponents must be used within a TldrawUiComponentsProvider");return e}function woe({overrides:e,components:t,assetUrls:r,onUiEvent:a,forceMobile:s,children:n}){return u.jsx(SX,{assetUrls:hQ(r),children:u.jsx(CX,{overrides:_Q(e),children:u.jsx(EJ,{onEvent:a,children:u.jsx(iQ,{children:u.jsx(DJ,{children:u.jsx(mQ,{forceMobile:s,children:u.jsx(_oe,{overrides:t,children:u.jsx(voe,{overrides:e,children:n})})})})})})})})}function voe({overrides:e,children:t}){const r=wQ(e);return u.jsx(aee,{overrides:r.actions,children:u.jsx(gQ,{overrides:r.tools,children:t})})}function xoe(){const e=N(),{addToast:t}=Ya();S.useEffect(()=>{function r({name:a,count:s}){t({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${a} (${s}). Please delete some shapes or move to a different page to continue.`,severity:"warning"})}return e.addListener("max-shapes",r),()=>{e.removeListener("max-shapes",r)}},[e,t])}const Soe=_e.memo(function({renderDebugMenuItems:t,children:r,hideUi:a,components:s,...n}){return u.jsx(woe,{...n,components:s,children:u.jsx(koe,{hideUi:a,renderDebugMenuItems:t,children:r})})}),koe=_e.memo(function({children:t,hideUi:r,...a}){return u.jsxs(u.Fragment,{children:[t,r?null:u.jsx(Coe,{...a}),u.jsx(Foe,{})]})});function Foe(){const{InFrontOfTheCanvas:e}=st();return e?u.jsx("div",{className:"tl-front",children:u.jsx(e,{})}):null}const Coe=_e.memo(function(){const t=N(),r=Ie(),a=qr(),s=sn(),n=H("focus",()=>t.getInstanceState().isFocusMode,[t]),o=H("debug",()=>t.getInstanceState().isDebugMode,[t]),{SharePanel:i,TopPanel:l,MenuPanel:c,StylePanel:d,Toolbar:p,HelpMenu:f,NavigationPanel:h,HelperButtons:y,DebugPanel:m}=lo();coe(),KQ(),xoe();const{"toggle-focus-mode":w}=oe();return u.jsxs("div",{className:le("tlui-layout",{"tlui-layout__mobile":a<bt.TABLET_SM}),"data-breakpoint":a,children:[n?u.jsx("div",{className:"tlui-layout__top",children:u.jsx(de,{type:"icon",className:"tlui-focus-button",title:r("focus-mode.toggle-focus-mode"),onClick:()=>w.onSelect("menu"),children:u.jsx(ve,{icon:"dot"})})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"tlui-layout__top",children:[u.jsxs("div",{className:"tlui-layout__top__left",children:[c&&u.jsx(c,{}),y&&u.jsx(y,{})]}),u.jsx("div",{className:"tlui-layout__top__center",children:l&&u.jsx(l,{})}),u.jsxs("div",{className:"tlui-layout__top__right",children:[i&&u.jsx(i,{}),d&&a>=bt.TABLET_SM&&!s&&u.jsx(d,{})]})]}),u.jsxs("div",{className:"tlui-layout__bottom",children:[u.jsxs("div",{className:"tlui-layout__bottom__main",children:[h&&u.jsx(h,{}),p&&u.jsx(p,{}),f&&u.jsx(f,{})]}),o&&m&&u.jsx(m,{})]})]}),u.jsx(uQ,{}),u.jsx(BJ,{}),u.jsx(pQ,{}),u.jsx(LJ,{})]})});async function Poe(e,t){const{url:r,style:a="normal",weight:s="500",display:n,featureSettings:o,stretch:i,unicodeRange:l,variant:c,format:d}=t,p={style:a,weight:s,display:n,featureSettings:o,stretch:i,unicodeRange:l,variant:c},f=new FontFace(e,`url(${r})`,p);return await f.load(),document.fonts.add(f),f.$$_url=r,f.$$_fontface=`
@font-face {
	font-family: ${f.family};
	font-stretch: ${f.stretch};
	font-weight: ${f.weight};
	font-style: ${f.style};
	src: url("${r}") format("${d}")
}`,f}const hp=(e,t)=>{const[r,a]=S.useState(2);return S.useEffect(()=>{let s=!1;return a(2),Poe(e,t).then(()=>{s||a(0)}).catch(n=>{s||(console.error(n),a(1))}),()=>{s=!0}},[e,t]),r};function Ioe(e){return{draw:{url:e.fonts.draw,format:e.fonts.draw.split(".").pop()},serif:{url:e.fonts.serif,format:e.fonts.serif.split(".").pop()},sansSerif:{url:e.fonts.sansSerif,format:e.fonts.sansSerif.split(".").pop()},monospace:{url:e.fonts.monospace,format:e.fonts.monospace.split(".").pop()}}}function cA(e){const t=S.useMemo(()=>Ioe(e),[e]),r=[hp("tldraw_draw",t.draw),hp("tldraw_serif",t.serif),hp("tldraw_sans",t.sansSerif),hp("tldraw_mono",t.monospace)];return{error:r.some(a=>a===1),done:!r.some(a=>a===2)}}function Aoe(e){const{children:t,maxImageDimension:r,maxAssetSize:a,acceptedImageMimeTypes:s,acceptedVideoMimeTypes:n,onMount:o,components:i={},shapeUtils:l=[],bindingUtils:c=[],tools:d=[],...p}=e,f=Z_(i),h=S.useMemo(()=>({Scribble:e9,CollaboratorScribble:e9,SelectionForeground:oV,SelectionBackground:sV,Handles:QK,...f}),[f]),y=$c(l),m=S.useMemo(()=>[...Nk,...y],[y]),w=$c(c),b=S.useMemo(()=>[...nk,...w],[w]),_=$c(d),x=S.useMemo(()=>[...ZX,...nY,..._],[_]),C=tC(p.assetUrls),{done:k,error:F}=cA(C);return F?u.jsx(tk,{children:"Could not load assets. Please refresh the page."}):k?u.jsx(OK,{initialState:"select",...p,components:h,shapeUtils:m,bindingUtils:b,tools:x,children:u.jsxs(Soe,{...p,components:h,children:[u.jsx(joe,{maxImageDimension:r,maxAssetSize:a,acceptedImageMimeTypes:s,acceptedVideoMimeTypes:n,onMount:o}),t]})}):u.jsx(l0,{children:"Loading assets..."})}function joe({maxImageDimension:e=1e3,maxAssetSize:t=10*1024*1024,acceptedImageMimeTypes:r=C_,acceptedVideoMimeTypes:a=Nv,onMount:s}){const n=N(),o=Ya(),i=Ie(),l=n0(p=>{const f=[];return f.push(...BX(p)),$V(p,{maxImageDimension:e,maxAssetSize:t,acceptedImageMimeTypes:r,acceptedVideoMimeTypes:a},{toasts:o,msg:i}),f.push(s==null?void 0:s(p)),()=>{f.forEach(h=>h==null?void 0:h())}});S.useLayoutEffect(()=>{if(n)return l==null?void 0:l(n)},[n,l]);const{Canvas:c}=st(),{ContextMenu:d}=lo();return d?u.jsx(d,{}):c?u.jsx(c,{}):null}S.memo(function(t){const[r,a]=S.useState(null),[s,n]=S.useState(null),o=$c(t.shapeUtils??[]),i=S.useMemo(()=>[...Nk,...o],[o]),l=$c(t.bindingUtils??[]),c=S.useMemo(()=>[...nk,...l],[l]),d=JS({snapshot:t.snapshot,shapeUtils:i}),p=tC(),{done:f,error:h}=cA(p),{pageId:y,bounds:m,scale:w,background:b,padding:_,darkMode:x,preserveAspectRatio:C,format:k="svg"}=t;return S.useLayoutEffect(()=>{if(!s||!d||!f)return;let F=!1;const P=document.createElement("div");s.appendChild(P),s.classList.add("tl-container","tl-theme__light");const I=new J({store:d,shapeUtils:i,bindingUtils:c,tools:[],getContainer:()=>P});y&&I.setCurrentPage(y);const j=I.getCurrentPageShapeIds();async function A(){const D=await I.getSvgString([...j],{bounds:m,scale:w,background:b,padding:_,darkMode:x,preserveAspectRatio:C});if(D&&!F){if(k==="svg"){if(!F){const z=new Blob([D.svg],{type:"image/svg+xml"}),T=URL.createObjectURL(z);a(T)}}else if(k==="png"){const z=await uC(I,D.svg,{type:k,quality:1,scale:2,width:D.width,height:D.height});if(z&&!F){const T=URL.createObjectURL(z);a(T)}}}I.dispose()}return A(),()=>{F=!0}},[k,s,d,i,c,y,m,w,b,_,x,C,f,h]),h?u.jsx(tk,{children:"Could not load assets."}):f?u.jsx("div",{ref:n,style:{position:"relative",width:"100%",height:"100%"},children:r&&u.jsx("img",{src:r,style:{width:"100%",height:"100%"}})}):u.jsx(l0,{children:"Loading assets..."})});const Eoe=me({schemaVersion:nr(1),storeVersion:Mp,recordVersions:nh(pe,me({version:Mp,subTypeVersions:nh(pe,Mp).optional(),subTypeKey:pe.optional()}))}),Doe=me({schemaVersion:nr(2),sequences:nh(pe,Mp)});me({tldrawFileFormatVersion:VN,schema:YN("schemaVersion",{1:Eoe,2:Doe}),records:Rt(me({id:pe,typeName:pe}).allowUnknownProperties())});function Toe(){const e=N(),t=hC(),r=s=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=o=>{var c;const i=(c=o.target.files)==null?void 0:c[0],l=new FileReader;l.onload=d=>{if(typeof d.target.result!="string")return;const p=JSON.parse(d.target.result);s.putContentOntoCurrentPage(p,{select:!0})},l.readAsText(i)},n.click()},a=s=>{const n=`props-${Math.round(+new Date/1e3).toString().slice(5)}`;t(Array.from(s.getCurrentPageShapeIds()),"json",n)};return u.jsxs(zI,{children:[u.jsx(OI,{}),u.jsx(q,{id:"export",label:"Export JSON",icon:"external-link",readonlyOk:!0,onSelect:()=>a(e)}),u.jsx(q,{id:"import",label:"Import JSON",icon:"external-link",readonlyOk:!0,onSelect:()=>r(e)})]})}const kr=class kr{static get dt(){return kr.initialized?((r,a,s)=>Math.min(a,Math.max(r,s)))(0,100,kr._dt):(kr.lastTime=Date.now(),kr.initialized=!0,window.requestAnimationFrame(kr.tick),0)}static tick(t){kr._dt=t-kr.lastTime,kr.lastTime=t,window.requestAnimationFrame(kr.tick)}};g(kr,"lastTime",Date.now()),g(kr,"initialized",!1),g(kr,"_dt",0);let cy=kr;function Moe(e,t,r,a,s){dA(e,t,r||0,a||e.length-1,s||Boe)}function dA(e,t,r,a,s){for(;a>r;){if(a-r>600){var n=a-r+1,o=t-r+1,i=Math.log(n),l=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*l*(n-l)/n)*(o-n/2<0?-1:1),d=Math.max(r,Math.floor(t-o*l/n+c)),p=Math.min(a,Math.floor(t+(n-o)*l/n+c));dA(e,t,d,p,s)}var f=e[t],h=r,y=a;for(fc(e,r,t),s(e[a],f)>0&&fc(e,r,a);h<y;){for(fc(e,h,y),h++,y--;s(e[h],f)<0;)h++;for(;s(e[y],f)>0;)y--}s(e[r],f)===0?fc(e,r,y):(y++,fc(e,y,a)),y<=t&&(r=y+1),t<=y&&(a=y-1)}}function fc(e,t,r){var a=e[t];e[t]=e[r],e[r]=a}function Boe(e,t){return e<t?-1:e>t?1:0}class _7{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let r=this.data;const a=[];if(!mp(t,r))return a;const s=this.toBBox,n=[];for(;r;){for(let o=0;o<r.children.length;o++){const i=r.children[o],l=r.leaf?s(i):i;mp(t,l)&&(r.leaf?a.push(i):N2(t,l)?this._all(i,a):n.push(i))}r=n.pop()}return a}collides(t){let r=this.data;if(!mp(t,r))return!1;const a=[];for(;r;){for(let s=0;s<r.children.length;s++){const n=r.children[s],o=r.leaf?this.toBBox(n):n;if(mp(t,o)){if(r.leaf||N2(t,o))return!0;a.push(n)}}r=a.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let a=0;a<t.length;a++)this.insert(t[a]);return this}let r=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){const a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=wi([]),this}remove(t,r){if(!t)return this;let a=this.data;const s=this.toBBox(t),n=[],o=[];let i,l,c;for(;a||n.length;){if(a||(a=n.pop(),l=n[n.length-1],i=o.pop(),c=!0),a.leaf){const d=Loe(t,a.children,r);if(d!==-1)return a.children.splice(d,1),n.push(a),this._condense(n),this}!c&&!a.leaf&&N2(a,s)?(n.push(a),o.push(i),i=0,l=a,a=a.children[0]):l?(i++,a=l.children[i],c=!1):a=null}return this}toBBox(t){return t}compareMinX(t,r){return t.minX-r.minX}compareMinY(t,r){return t.minY-r.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,r){const a=[];for(;t;)t.leaf?r.push(...t.children):a.push(...t.children),t=a.pop();return r}_build(t,r,a,s){const n=a-r+1;let o=this._maxEntries,i;if(n<=o)return i=wi(t.slice(r,a+1)),mi(i,this.toBBox),i;s||(s=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,s-1))),i=wi([]),i.leaf=!1,i.height=s;const l=Math.ceil(n/o),c=l*Math.ceil(Math.sqrt(o));w7(t,r,a,c,this.compareMinX);for(let d=r;d<=a;d+=c){const p=Math.min(d+c-1,a);w7(t,d,p,l,this.compareMinY);for(let f=d;f<=p;f+=l){const h=Math.min(f+l-1,p);i.children.push(this._build(t,f,h,s-1))}}return mi(i,this.toBBox),i}_chooseSubtree(t,r,a,s){for(;s.push(r),!(r.leaf||s.length-1===a);){let n=1/0,o=1/0,i;for(let l=0;l<r.children.length;l++){const c=r.children[l],d=z2(c),p=zoe(t,c)-d;p<o?(o=p,n=d<n?d:n,i=c):p===o&&d<n&&(n=d,i=c)}r=i||r.children[0]}return r}_insert(t,r,a){const s=a?t:this.toBBox(t),n=[],o=this._chooseSubtree(s,this.data,r,n);for(o.children.push(t),Ac(o,s);r>=0&&n[r].children.length>this._maxEntries;)this._split(n,r),r--;this._adjustParentBBoxes(s,n,r)}_split(t,r){const a=t[r],s=a.children.length,n=this._minEntries;this._chooseSplitAxis(a,n,s);const o=this._chooseSplitIndex(a,n,s),i=wi(a.children.splice(o,a.children.length-o));i.height=a.height,i.leaf=a.leaf,mi(a,this.toBBox),mi(i,this.toBBox),r?t[r-1].children.push(i):this._splitRoot(a,i)}_splitRoot(t,r){this.data=wi([t,r]),this.data.height=t.height+1,this.data.leaf=!1,mi(this.data,this.toBBox)}_chooseSplitIndex(t,r,a){let s,n=1/0,o=1/0;for(let i=r;i<=a-r;i++){const l=Ic(t,0,i,this.toBBox),c=Ic(t,i,a,this.toBBox),d=Noe(l,c),p=z2(l)+z2(c);d<n?(n=d,s=i,o=p<o?p:o):d===n&&p<o&&(o=p,s=i)}return s||a-r}_chooseSplitAxis(t,r,a){const s=t.leaf?this.compareMinX:Roe,n=t.leaf?this.compareMinY:Ooe,o=this._allDistMargin(t,r,a,s),i=this._allDistMargin(t,r,a,n);o<i&&t.children.sort(s)}_allDistMargin(t,r,a,s){t.children.sort(s);const n=this.toBBox,o=Ic(t,0,r,n),i=Ic(t,a-r,a,n);let l=gp(o)+gp(i);for(let c=r;c<a-r;c++){const d=t.children[c];Ac(o,t.leaf?n(d):d),l+=gp(o)}for(let c=a-r-1;c>=r;c--){const d=t.children[c];Ac(i,t.leaf?n(d):d),l+=gp(i)}return l}_adjustParentBBoxes(t,r,a){for(let s=a;s>=0;s--)Ac(r[s],t)}_condense(t){for(let r=t.length-1,a;r>=0;r--)t[r].children.length===0?r>0?(a=t[r-1].children,a.splice(a.indexOf(t[r]),1)):this.clear():mi(t[r],this.toBBox)}}function Loe(e,t,r){if(!r)return t.indexOf(e);for(let a=0;a<t.length;a++)if(r(e,t[a]))return a;return-1}function mi(e,t){Ic(e,0,e.children.length,t,e)}function Ic(e,t,r,a,s){s||(s=wi(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let n=t;n<r;n++){const o=e.children[n];Ac(s,e.leaf?a(o):o)}return s}function Ac(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Roe(e,t){return e.minX-t.minX}function Ooe(e,t){return e.minY-t.minY}function z2(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function gp(e){return e.maxX-e.minX+(e.maxY-e.minY)}function zoe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Noe(e,t){const r=Math.max(e.minX,t.minX),a=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-r)*Math.max(0,n-a)}function N2(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function mp(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function wi(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w7(e,t,r,a,s){const n=[t,r];for(;n.length;){if(r=n.pop(),t=n.pop(),r-t<=a)continue;const o=t+Math.ceil((r-t)/a/2)*a;Moe(e,o,t,r,s),n.push(t,o,o,r)}}class qoe{constructor(t){g(this,"spatialIndex");g(this,"lastPageId",null);g(this,"shapesInTree");g(this,"rBush");this.editor=t,this.spatialIndex=this.createSpatialIndex(),this.shapesInTree=new Map,this.rBush=new _7}addElement(t,r,a){const s=this.getElement(t,a);s&&(r.push(s),this.shapesInTree.set(t,s))}getElement(t,r){const a=r??this.editor.getShapeMaskedPageBounds(t);return a?{minX:a.minX,minY:a.minY,maxX:a.maxX,maxY:a.maxY,id:t}:null}fromScratch(t){this.lastPageId=this.editor.getCurrentPageId(),this.shapesInTree=new Map;const r=[];return this.editor.getCurrentPageShapeIds().forEach(a=>{this.addElement(a,r)}),this.rBush=new _7().load(r),t}createSpatialIndex(){const t=this.editor.store.query.filterHistory("shape");return K("spatialIndex",(r,a)=>{if(ds(r))return this.fromScratch(a);const s=t.getDiffSince(a);if(s===Rr)return this.fromScratch(a);const n=this.editor.getCurrentPageId();if(!this.lastPageId||this.lastPageId!==n)return this.fromScratch(a);let o=!1;for(const i of s){const l=[];for(const c of Object.values(i.added))Cn(c)&&this.addElement(c.id,l);for(const[c,d]of Object.values(i.updated))if(Cn(d)){const p=this.shapesInTree.get(d.id),f=this.editor.getShapeMaskedPageBounds(d.id);if(p){if((f==null?void 0:f.minX)===p.minX&&f.minY===p.minY&&f.maxX===p.maxX&&f.maxY===p.maxY)continue;this.shapesInTree.delete(d.id),this.rBush.remove(p),o=!0}this.addElement(d.id,l,f)}l.length&&(this.rBush.load(l),o=!0);for(const c of Object.keys(i.removed))if(Kr(c)){const d=this.shapesInTree.get(c);d&&(this.shapesInTree.delete(c),this.rBush.remove(d),o=!0)}}return o?a:r})}_getVisibleShapes(){return K("visible shapes",t=>{this.spatialIndex.get();const r=this.rBush.search(this.editor.getViewportPageBounds()).map(s=>s.id);return ds(t)?new Set(r):t.size===r.length&&r.every(s=>t.has(s))?t:new Set(r)})}getVisibleShapes(){return this._getVisibleShapes().get()}_getNotVisibleShapes(){return K("not visible shapes",t=>{const r=this._getVisibleShapes().get(),s=[...this.editor.getCurrentPageShapeIds()].filter(o=>!r.has(o));return ds(t)?new Set(s):t.size===s.length&&s.every(o=>t.has(o))?t:new Set(s)})}getNotVisibleShapes(){return this._getNotVisibleShapes().get()}getShapeIdsInsideBounds(t){return this.spatialIndex.get(),this.rBush.search(t).map(r=>r.id)}}class $oe{constructor(t){g(this,"editor");g(this,"spatialIndex");this.editor=t,this.spatialIndex=new qoe(t)}intersects(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(!r)return!1;const a=this.editor.getShapePageTransform(r),s=this.editor.getShapeGeometry(r),n=a.applyToPoints(s.vertices),o=this.editor.getShapePageBounds(r),i=this.spatialIndex.getShapeIdsInsideBounds(o);for(const l of i){if(l===r)continue;const c=this.editor.getShape(l);if(!c||c.type==="arrow")continue;const d=this.editor.getShapeGeometry(c),f=this.editor.getShapePageTransform(c).applyToPoints(d.vertices),h=this.editor.getShapePageBounds(l);if(_h(n,f)||o.contains(h)||h.contains(o))return!0}return!1}distance(t,r){const a=typeof t=="string"?t:(t==null?void 0:t.id)??null,s=typeof r=="string"?r:(r==null?void 0:r.id)??null;if(!a||!s)return{x:0,y:0};const n=this.editor.getShape(a),o=this.editor.getShape(s);return!n||!o?{x:0,y:0}:{x:n.x-o.x,y:n.y-o.y}}distanceCenter(t,r){const a=typeof t=="string"?t:(t==null?void 0:t.id)??null,s=typeof r=="string"?r:(r==null?void 0:r.id)??null;if(!a||!s)return{x:0,y:0};const n=this.editor.getShapePageBounds(a),o=this.editor.getShapePageBounds(s);if(!n||!o)return{x:0,y:0};const i=n.center,l=o.center;return{x:i.x-l.x,y:i.y-l.y}}getIntersects(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(!r)return[];const a=this.editor.getShapePageTransform(r),s=this.editor.getShapeGeometry(r),n=a.applyToPoints(s.vertices),o=this.editor.getShapePageBounds(r),i=this.spatialIndex.getShapeIdsInsideBounds(o),l=[];for(const c of i){if(c===r)continue;const d=this.editor.getShape(c);if(!d||d.type==="arrow")continue;const p=this.editor.getShapeGeometry(d),h=this.editor.getShapePageTransform(d).applyToPoints(p.vertices),y=this.editor.getShapePageBounds(c);(_h(n,h)||o.contains(y)||y.contains(o))&&l.push(d)}return l}contains(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(!r)return!1;const a=this.editor.getShapePageBounds(r),s=this.spatialIndex.getShapeIdsInsideBounds(a);for(const n of s){if(n===r)continue;const o=this.editor.getShape(n);if(!o||o.type!=="geo")continue;const i=this.editor.getShapePageBounds(n);if(a.contains(i))return!0}return!1}getContains(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(!r)return[];const a=this.editor.getShapePageBounds(r),s=this.spatialIndex.getShapeIdsInsideBounds(a),n=[];for(const o of s){if(o===r)continue;const i=this.editor.getShape(o);if(!i||i.type!=="geo")continue;const l=this.editor.getShapePageBounds(o);a.contains(l)&&n.push(i)}return n}}function Co(e,t){return e.type===t}function v7(e,t){if(!e||!Co(e,"arrow"))return;const r=t.getBindingsInvolvingShape(e.id);if(!(!r||r.length!==2))return r[0].props.terminal==="end"?{arrowId:e.id,from:r[1].toId,to:r[0].toId,text:e.props.text}:{arrowId:e.id,from:r[0].toId,to:r[1].toId,text:e.props.text}}function uA(e,t){return e.getBindingsToShape(t,"arrow").filter(a=>a.props.terminal==="start").map(a=>a.fromId)}const Uoe=(async function(){}).constructor;function Woe(e,t){return Co(e,"arrow")?new RegExp(`^\\s*${t}\\s*\\{`).test(e.props.text):!1}function pA(e,t){return Co(e,"arrow")?new RegExp(`^\\s*${t}\\s*\\(\\)\\s*\\{`).test(e.props.text):!1}class Hoe{constructor(){g(this,"cache",new Map)}get(t,r,a){return this.cache.has(r.arrowId)?this.cache.get(r.arrowId):(console.log("creating func because it didnt exist"),this.set(t,r,a))}set(t,r,a){try{const s=t.getShape(r.arrowId);if(!s)throw new Error("Arrow shape not found");const n=r.text.replace(a,""),i=pA(s,a)?n.trim().replace(/^\s*\(\)\s*{|}$/g,""):`
      const mapping = ${n}
      editor.updateShape(_unpack({...to, ...mapping}))
      `,l=new Uoe("editor","from","to","G","bounds","dt","_unpack",i);return this.cache.set(r.arrowId,l),l}catch{this.cache.set(r.arrowId,null);return}}delete(t){this.cache.delete(t.arrowId)}}const x7=e=>({id:e.id,type:e.type,x:e.x,y:e.y,rotation:e.rotation,...e.props,m:e.meta}),S7=e=>{const{id:t,type:r,x:a,y:s,rotation:n,m:o,...i}=e,l=(c,d)=>c!==void 0?d(c):void 0;return{id:t,type:r,x:Number(a),y:Number(s),rotation:Number(n),props:{...i,text:l(i.text,String)},meta:o}};function k7(e,t,r){e.updateShape({...t,props:{...t.props,color:r}})}async function Goe(e,t){const r=t.map(a=>new a(e));for(const a of r){let s=function(n,o){if(o.type!=="arrow")return;const i=n.getShape(o.fromId);i&&Co(i,"arrow")&&a.onArrowChange(n,i)};for(const n of e.getCurrentPageShapes())Co(n,"arrow")&&await a.onArrowChange(e,n);e.sideEffects.registerAfterChangeHandler("shape",async(n,o)=>{var i,l;if(Co(o,"group")){const c=e.getSortedChildIdsForParent(o.id);for(const d of c){const p=e.getShape(d);await((i=a.afterChangeHandler)==null?void 0:i.call(a,e,p))}return}await((l=a.afterChangeHandler)==null?void 0:l.call(a,e,o)),Co(o,"arrow")&&await a.onArrowChange(e,o)}),e.sideEffects.registerAfterCreateHandler("binding",n=>{s(e,n)}),e.sideEffects.registerAfterDeleteHandler("binding",n=>{s(e,n)}),e.on("event",async n=>{var o;(o=a.eventHandler)==null||o.call(a,n)}),e.on("tick",async()=>{var n;(n=a.tickHandler)==null||n.call(a)})}}class qg{constructor(t){g(this,"listenerArrows",new Set);g(this,"listenerShapes",new Set);g(this,"arrowFunctionCache",new Hoe);g(this,"editor");g(this,"geo");g(this,"validateOnArrowChange",!1);this.editor=t,this.geo=new $oe(t)}async onArrowChange(t,r){const a=v7(r,t);if(!a)return;if(Woe(r,this.prefix)||pA(r,this.prefix)){if(this.validateOnArrowChange&&!await this.propagate(t,r.id)){this.removeListener(r.id,a);return}this.addListener(r.id,a)}else this.removeListener(r.id,a)}addListener(t,r){this.listenerArrows.add(t),this.listenerShapes.add(r.from),this.listenerShapes.add(r.to),this.arrowFunctionCache.set(this.editor,r,this.prefix)}removeListener(t,r){this.listenerArrows.delete(t),this.arrowFunctionCache.delete(r)}async propagate(t,r){const a=v7(t.getShape(r),t);if(!a)return;const s=t.getShape(r),n=t.getShape(a.from),o=t.getShape(a.to),i=x7(n),l=x7(o),c=d=>t.getShapePageBounds(d.id);try{const p=await this.arrowFunctionCache.get(t,a,this.prefix)(t,i,l,this.geo,c,cy.dt,S7);return p&&t.updateShape(S7({...l,...p})),k7(t,s,"black"),!0}catch(d){return console.error(d),k7(t,s,"orange"),!1}}}class Koe extends qg{constructor(){super(...arguments);g(this,"prefix","click")}async eventHandler(r){if(r.type!=="pointer"||r.name!=="pointer_down")return;const a=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:o=>o.type==="geo"});if(!a||!this.listenerShapes.has(a.id))return;const s=uA(this.editor,a.id),n=new Set;for(const o of s)this.listenerArrows.has(o)&&!n.has(o)&&(await this.propagate(this.editor,o),n.add(o))}}class Voe extends qg{constructor(){super(...arguments);g(this,"prefix","")}async afterChangeHandler(r,a){if(this.listenerShapes.has(a.id)){const s=uA(r,a.id);for(const n of s)if(this.listenerArrows.has(n)){const o=r.getBindingsInvolvingShape(n);if(o.length!==2||o[0].toId===o[1].toId)continue;await this.propagate(r,n)}}}}class Yoe extends qg{constructor(){super(...arguments);g(this,"prefix","tick");g(this,"validateOnArrowChange",!0)}async tickHandler(){for(const r of this.listenerArrows)await this.propagate(this.editor,r)}}class Xoe extends qg{constructor(){super(...arguments);g(this,"prefix","geo")}async afterChangeHandler(r,a){if(a.type!=="arrow")for(const s of this.listenerArrows)await this.propagate(r,s)}}const Zoe={store:{"document:document":{gridSize:10,name:"",meta:{},id:"document:document",typeName:"document"},"page:page":{meta:{},id:"page:page",name:"Examples",index:"a1",typeName:"page"},"shape:le_AKmAViAyrZizsFHHeG":{x:-295,y:2605,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:le_AKmAViAyrZizsFHHeG",type:"geo",props:{w:530,h:750,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"draw",text:`{
  "id": "shape:_dSU9KmUueDXFgZay83Vc",
  "type": "geo",
  "x": 5650,
  "y": -170,
  "rotation": 0,
  "w": 370,
  "h": 150,
  "geo": "rectangle",
  "color": "blue",
  "labelColor": "black",
  "fill": "solid",
  "dash": "draw",
  "size": "m",
  "font": "draw",
  "text": "Search Scryfall:\\n\\nset:blb id:ug",
  "align": "middle",
  "verticalAlign": "middle",
  "growY": 0,
  "url": "",
  "m": {
    "code": "const params = from.text.split('\\\\n')[2];\\nconst urlSearchParams = params.replaceAll(\\":\\",\\"%3A\\").replaceAll(' ','+');\\nconst url = \\"https://api.scryfall.com/cards/search?q=\\" + urlSearchParams;\\n\\nreturn fetch(url)\\n.then((response) => {\\nreturn response.json();\\n})\\n.then((json) => {\\nvar cardNames = json.data.map(card => card.name);\\nvar cardCount = \`Total Cards : \${cardNames.length.toString()}\`;\\nreturn cardCount + '\\\\n' + JSON.stringify(cardNames,null,2);\\n});"
  }
}`,align:"start",verticalAlign:"start",growY:381.015625,url:""},parentId:"page:page",index:"a1",typeName:"shape"},"shape:BDregN6lrhaQDrPWrwASm":{x:415,y:2705,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:BDregN6lrhaQDrPWrwASm",type:"arrow",parentId:"page:page",index:"a2",props:{dash:"draw",size:"m",fill:"semi",color:"black",labelColor:"black",bend:-4.252013144454395,start:{x:-597.7150991612671,y:-287.3895195663995},end:{x:-1106.199103396837,y:467.5241591335125},arrowheadStart:"none",arrowheadEnd:"arrow",text:"{text: JSON.stringify(from,null,2)}",labelPosition:.6578442177194026,font:"draw"},typeName:"shape"},"shape:HYZ4DCH9B85rYzlPLaxJZ":{x:-675,y:1324.9999999999998,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:HYZ4DCH9B85rYzlPLaxJZ",type:"geo",props:{w:1270,h:450,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"mono",text:`const params = from.text.split('\\n')[2];
const urlSearchParams = params.replaceAll(":","%3A").replaceAll(' ','+');
const url = "https://api.scryfall.com/cards/search?q=" + urlSearchParams;

return fetch(url)
.then((response) => {
return response.json();
})
.then((json) => {
var cardNames = json.data.map(card => card.name);
var cardCount = \`Total Cards : \${cardNames.length.toString()}\`;
return cardCount + '\\n' + JSON.stringify(cardNames,null,2);
});`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:page",index:"a3",typeName:"shape"},"shape:cRhvWd4hAAe4vV-Nip7Ln":{x:-445,y:2805,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:cRhvWd4hAAe4vV-Nip7Ln",type:"arrow",parentId:"page:page",index:"a4",props:{dash:"draw",size:"m",fill:"pattern",color:"black",labelColor:"black",bend:6.576602783674604,start:{x:404.9021170528413,y:-1040.0033077207725},end:{x:374.9021170528413,y:-878.379436189907},arrowheadStart:"none",arrowheadEnd:"arrow",text:"click {m: {code:from.text}}",labelPosition:.31636135696794454,font:"draw"},typeName:"shape"},"shape:triBu1WzVhh8tZcBHSU_o":{x:1640,y:1440,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:triBu1WzVhh8tZcBHSU_o",type:"geo",props:{w:441,h:730,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"s",font:"mono",text:`Total Cards : 111
[
  "Azure Beastbinder",
  "Bakersbane Duo",
  "Barkform Harvester",
  "Bark-Knuckle Boxer",
  "Bellowing Crier",
  "Brambleguard Veteran",
  "Bumbleflower's Sharepot",
  "Bushy Bodyguard",
  "Cache Grab",
  "Calamitous Tide",
  "Charmed Sleep",
  "Clement, the Worrywort",
  "Clifftop Lookout",
  "Colossification",
  "Curious Forager",
  "Daring Waverider",
  "Dazzling Denial",
  "Dire Downdraft",
  "Dour Port-Mage",
  "Dreamdew Entrancer",
  "Druid of the Spade",
  "Eddymurk Crab",
  "Eluge, the Shoreless Sea",
  "Fabled Passage",
  "Fecund Greenshell",
  "Finch Formation",
  "Forest",
  "For the Common Good",
  "Fountainport",
  "Fountainport Bell",
  "Galewind Moose",
  "Giant Growth",
  "Gossip's Talent",
  "Hazardroot Herbalist",
  "Heaped Harvest",
  "Heirloom Epic",
  "Hidden Grotto",
  "High Stride",
  "Hivespine Wolverine",
  "Honored Dreyleader",
  "Hunter's Talent",
  "Innkeeper's Talent",
  "Into the Flood Maw",
  "Island",
  "Keen-Eyed Curator",
  "Kitnap",
  "Kitsa, Otterball Elite",
  "Knightfisher",
  "Lightshell Duo",
  "Lilypad Village",
  "Lilysplash Mentor",
  "Long River Lurker",
  "Long River's Pull",
  "Longstalk Brawl",
  "Lumra, Bellow of the Woods",
  "Mind Spiral",
  "Mind Spring",
  "Mindwhisker",
  "Mistbreath Elder",
  "Mockingbird",
  "Nightwhorl Hermit",
  "Oakhollow Village",
  "Otterball Antics",
  "Overprotect",
  "Patchwork Banner",
  "Pawpatch Formation",
  "Pawpatch Recruit",
  "Pearl of Wisdom",
  "Peerless Recycling",
  "Plumecreed Escort",
  "Polliwallop",
  "Pond Prophet",
  "Portent of Calamity",
  "Rabid Bite",
  "Run Away Together",
  "Rust-Shield Rampager",
  "Scrapshooter",
  "Season of Gathering",
  "Season of Weaving",
  "Shoreline Looter",
  "Shore Up",
  "Short Bow",
  "Skyskipper Duo",
  "Spellgyre",
  "Splash Lasher",
  "Splash Portal",
  "Starforged Sword",
  "Stickytongue Sentinel",
  "Stocking the Pantry",
  "Stormchaser's Talent",
  "Sugar Coat",
  "Sunshower Druid",
  "Sword of Vengeance",
  "Tangle Tumbler",
  "Tender Wildguide",
  "Thieving Otter",
  "Thornvault Forager",
  "Thought Shucker",
  "Three Tree City",
  "Three Tree Mascot",
  "Three Tree Rootweaver",
  "Three Tree Scribe",
  "Thundertrap Trainer",
  "Treeguard Duo",
  "Treetop Sentries",
  "Uncharted Haven",
  "Valley Floodcaller",
  "Valley Mightcaller",
  "Waterspout Warden",
  "Wear Down",
  "Wishing Well"
]`,align:"start",verticalAlign:"start",growY:2071.84375,url:""},parentId:"page:page",index:"a5",typeName:"shape"},"shape:KWisNzpUixYVhauNP-dqn":{x:1100,y:1090,rotation:0,isLocked:!1,opacity:1,meta:{code:`const params = from.text.split('\\n')[2];
const urlSearchParams = params.replaceAll(":","%3A").replaceAll(' ','+');
const url = "https://api.scryfall.com/cards/search?q=" + urlSearchParams;

return fetch(url)
.then((response) => {
return response.json();
})
.then((json) => {
var cardNames = json.data.map(card => card.name);
var cardCount = \`Total Cards : \${cardNames.length.toString()}\`;
return cardCount + '\\n' + JSON.stringify(cardNames,null,2);
});`},id:"shape:KWisNzpUixYVhauNP-dqn",type:"geo",props:{w:370,h:150,geo:"rectangle",color:"blue",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:`Search Scryfall:

set:blb id:ug`,align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:page",index:"a6",typeName:"shape"},"shape:5KLSEVHcT0YbJGDX90GlV":{x:401.58489854056097,y:1518.7182025176905,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:5KLSEVHcT0YbJGDX90GlV",type:"arrow",parentId:"page:page",index:"a7",props:{dash:"draw",size:"m",fill:"semi",color:"black",labelColor:"black",bend:0,start:{x:-161.6016883610173,y:1162.9743228056118},end:{x:967.1693465602011,y:351.555776720522},arrowheadStart:"none",arrowheadEnd:"arrow",text:'click { text: await new Function("from","to",from.m.code)(from,to)}',labelPosition:.5,font:"mono"},typeName:"shape"},"shape:rb5QWHMyiSocmgIIVCf6V":{x:20.796899482638082,y:124,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:rb5QWHMyiSocmgIIVCf6V",type:"geo",props:{w:235.15593774672215,h:154.06768335130073,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"Hello",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:page",index:"a8",typeName:"shape"},"shape:vDnoNfPAPwqVIgxyHv68n":{x:1261.8294109646358,y:527.5912395048906,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:vDnoNfPAPwqVIgxyHv68n",type:"geo",props:{w:332.4618430212278,h:162.17650879084286,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"Goodbye World!",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:page",index:"a9",typeName:"shape"},"shape:WaDdTMECrNc1L97l8Jkyz":{x:707.6975266969813,y:694.4393222032274,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:WaDdTMECrNc1L97l8Jkyz",type:"arrow",parentId:"page:page",index:"aA",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-153.30100534503728,start:{x:0,y:0},end:{x:598.7347655872763,y:-99.05538401260105},arrowheadStart:"none",arrowheadEnd:"arrow",text:'click () { return {text: from.text + " World!"}}',labelPosition:.5,font:"draw"},typeName:"shape"},"shape:ezljsC3fOk38FAimzqNZs":{x:470,y:780,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ezljsC3fOk38FAimzqNZs",type:"geo",props:{w:235.15593774672215,h:154.06768335130073,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"Goodbye",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:page",index:"aB",typeName:"shape"},"shape:PUzj2rOYZpAYllPpgVBKw":{x:776.1243493110525,y:892.180631376728,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:PUzj2rOYZpAYllPpgVBKw",type:"arrow",parentId:"page:page",index:"aC",props:{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:84.78026889029374,start:{x:0,y:0},end:{x:574.521227273086,y:-77.04307645424524},arrowheadStart:"none",arrowheadEnd:"arrow",text:'click () { return {text: from.text + " World!"}}',labelPosition:.5,font:"draw"},typeName:"shape"},"binding:pzGRlhmaqYOLhzBRPuro2":{meta:{},id:"binding:pzGRlhmaqYOLhzBRPuro2",type:"arrow",fromId:"shape:BDregN6lrhaQDrPWrwASm",toId:"shape:le_AKmAViAyrZizsFHHeG",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.21185830346930742,y:.018888177949197168},terminal:"end"},typeName:"binding"},"binding:125lsYw2Hw9zI2llZG40w":{meta:{},id:"binding:125lsYw2Hw9zI2llZG40w",type:"arrow",fromId:"shape:cRhvWd4hAAe4vV-Nip7Ln",toId:"shape:HYZ4DCH9B85rYzlPLaxJZ",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.47630087956916634,y:.892485984270421},terminal:"start"},typeName:"binding"},"binding:I0q0BjyRg8ViQ1mHUsls1":{meta:{},id:"binding:I0q0BjyRg8ViQ1mHUsls1",type:"arrow",fromId:"shape:5KLSEVHcT0YbJGDX90GlV",toId:"shape:triBu1WzVhh8tZcBHSU_o",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.0988480963207782,y:.01795286055054412},terminal:"end"},typeName:"binding"},"binding:i0VHim-MV_u0VWm0d4O6p":{meta:{},id:"binding:i0VHim-MV_u0VWm0d4O6p",type:"arrow",fromId:"shape:5KLSEVHcT0YbJGDX90GlV",toId:"shape:KWisNzpUixYVhauNP-dqn",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.7779049291390581,y:.42763927604845303},terminal:"start"},typeName:"binding"},"binding:nLqsS7GF3N9hULaVIQ5AZ":{meta:{},id:"binding:nLqsS7GF3N9hULaVIQ5AZ",type:"arrow",fromId:"shape:WaDdTMECrNc1L97l8Jkyz",toId:"shape:rb5QWHMyiSocmgIIVCf6V",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.7814866700436612,y:.39874262173599573,z:1},terminal:"start"},typeName:"binding"},"binding:qanOCkzyi7L4IacWrW4M8":{meta:{},id:"binding:qanOCkzyi7L4IacWrW4M8",type:"arrow",fromId:"shape:WaDdTMECrNc1L97l8Jkyz",toId:"shape:vDnoNfPAPwqVIgxyHv68n",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.3746440325142453,y:.2747193377407052,z:1},terminal:"end"},typeName:"binding"},"binding:x2QaSNpFGFMcTptGaHBvt":{meta:{},id:"binding:x2QaSNpFGFMcTptGaHBvt",type:"arrow",fromId:"shape:PUzj2rOYZpAYllPpgVBKw",toId:"shape:vDnoNfPAPwqVIgxyHv68n",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5286066934021465,y:.452517749267513,z:1},terminal:"end"},typeName:"binding"},"binding:jxiuzJtwqs9HeIjanWgxo":{meta:{},id:"binding:jxiuzJtwqs9HeIjanWgxo",type:"arrow",fromId:"shape:PUzj2rOYZpAYllPpgVBKw",toId:"shape:ezljsC3fOk38FAimzqNZs",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.9000577581630342,y:.8401077455678014,z:1},terminal:"start"},typeName:"binding"},"asset:1829771020":{id:"asset:1829771020",typeName:"asset",type:"bookmark",props:{src:"https://scryfall.com/card/blb/49/eluge-the-shoreless-sea?utm_source=api",description:"",image:"",favicon:"",title:"https://scryfall.com/card/blb/49/eluge-the-shoreless-sea?utm_source=api"},meta:{}},"binding:2hVKNEvbEG8VLLs-ccgOB":{meta:{},id:"binding:2hVKNEvbEG8VLLs-ccgOB",type:"arrow",fromId:"shape:eDAgR2rJnC2oEgolsGsvI",toId:"shape:W76wd0dk9cVaJkIqxOT7Q",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.5,y:.5},terminal:"start"},typeName:"binding"},"binding:6rufiuI8GEgSuEkaYLa9q":{meta:{},id:"binding:6rufiuI8GEgSuEkaYLa9q",type:"arrow",fromId:"shape:F5tZ-7WhziNoplPjxUYog",toId:"shape:h05HZKPjaEsfYqteVi99Q",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.4283191499085897,y:.3210776182313368},terminal:"end"},typeName:"binding"},"binding:BMxSe0kcFu3UCUzqnkWzt":{meta:{},id:"binding:BMxSe0kcFu3UCUzqnkWzt",type:"arrow",fromId:"shape:EK3PoEEIsfa-AXq4cEhLT",toId:"shape:zl1iYinaSTusxcTrnVy6h",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.6208153028547276,y:.43162110326914405},terminal:"start"},typeName:"binding"},"binding:FZ1zWYeyJ4Ts2FJ7T4q4T":{meta:{},id:"binding:FZ1zWYeyJ4Ts2FJ7T4q4T",type:"arrow",fromId:"shape:1WcsV_7mGVDJ8FZp_nYxy",toId:"shape:WRJ9L6CRzJ9aAc7mmDwcN",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.8273944943921593,y:.20412778430256892},terminal:"end"},typeName:"binding"},"binding:HNbBFQ-RF7r-tHWP3d15l":{meta:{},id:"binding:HNbBFQ-RF7r-tHWP3d15l",type:"arrow",fromId:"shape:EDJCBv4B6zYh5m_nmUuwy",toId:"shape:5ElOGxzLK3r_X5bTHrUpO",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.348087066560036,y:.648803440355095},terminal:"end"},typeName:"binding"},"binding:Q9S6mriYwy5eLIwOm9ouD":{meta:{},id:"binding:Q9S6mriYwy5eLIwOm9ouD",type:"arrow",fromId:"shape:EK3PoEEIsfa-AXq4cEhLT",toId:"shape:DW7FYDDf02emXPBydDyC4",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.07539408796758262,y:.1755016582383304},terminal:"end"},typeName:"binding"},"binding:XD7oZa-XQdLEiHBU3OmJq":{meta:{},id:"binding:XD7oZa-XQdLEiHBU3OmJq",type:"arrow",fromId:"shape:eDAgR2rJnC2oEgolsGsvI",toId:"shape:zl1iYinaSTusxcTrnVy6h",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.5,y:.5},terminal:"end"},typeName:"binding"},"binding:c_cVPaVK1EMCLpJRtMxNA":{meta:{},id:"binding:c_cVPaVK1EMCLpJRtMxNA",type:"arrow",fromId:"shape:uT5Exwuh_RBQvFbSLLZCD",toId:"shape:bNubwlq-qXccVjLyoidp0",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.8463481661890198,y:.6779337251193465},terminal:"start"},typeName:"binding"},"binding:chQ3jdrgTWlLA6NpVFOkr":{meta:{},id:"binding:chQ3jdrgTWlLA6NpVFOkr",type:"arrow",fromId:"shape:lwW1TtNDtYhtRqErmci03",toId:"shape:myPVvFX_H6W5UneNKjje0",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.37322698072564453,y:.7580843346178957},terminal:"start"},typeName:"binding"},"binding:eHqpnGmYdKnMwu0vKfnPk":{meta:{},id:"binding:eHqpnGmYdKnMwu0vKfnPk",type:"arrow",fromId:"shape:F5tZ-7WhziNoplPjxUYog",toId:"shape:JRbT-py8wcwlBtNuO8a7H",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.4849064097480698,y:.5596861024822305},terminal:"start"},typeName:"binding"},"binding:hUQnAgcP5emETaf6NlC67":{meta:{},id:"binding:hUQnAgcP5emETaf6NlC67",type:"arrow",fromId:"shape:Zijuv5X5jVkqaB8a34tp1",toId:"shape:7P0cta80A2ed3dL_9gufE",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.07539408796758262,y:.1755016582383304},terminal:"end"},typeName:"binding"},"binding:pEeZHHyKC4ccnqdjUaN-I":{meta:{},id:"binding:pEeZHHyKC4ccnqdjUaN-I",type:"arrow",fromId:"shape:M6g_yYso5Ryxpcdzp6OV6",toId:"shape:mcHdVaeB8EW-7fVFAp-lb",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.18211817552720186,y:.07607783863453413},terminal:"end"},typeName:"binding"},"binding:u1fbeIz0Ul_dTmsCPUems":{meta:{},id:"binding:u1fbeIz0Ul_dTmsCPUems",type:"arrow",fromId:"shape:XYg91jvuY8Ml2xX1QVNE0",toId:"shape:W76wd0dk9cVaJkIqxOT7Q",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.5,y:.5},terminal:"end"},typeName:"binding"},"binding:yUkzatcUMF_L2edyWxlnm":{meta:{},id:"binding:yUkzatcUMF_L2edyWxlnm",type:"arrow",fromId:"shape:uT5Exwuh_RBQvFbSLLZCD",toId:"shape:W76wd0dk9cVaJkIqxOT7Q",props:{isPrecise:!0,isExact:!1,normalizedAnchor:{x:.7067162732349473,y:.4494954559710081},terminal:"end"},typeName:"binding"},"page:HnBI1MXzS7DUbU6-1cPhY":{meta:{},id:"page:HnBI1MXzS7DUbU6-1cPhY",name:"Components",index:"a2",typeName:"page"},"shape:1WcsV_7mGVDJ8FZp_nYxy":{x:-194.99999999999977,y:1060,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:1WcsV_7mGVDJ8FZp_nYxy",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aA",props:{dash:"draw",size:"m",fill:"semi",color:"black",labelColor:"black",bend:-4.252013144454395,start:{x:-1925.6811650895218,y:-680.5438796949975},end:{x:-1669.9700106006364,y:-319.80573229918224},arrowheadStart:"none",arrowheadEnd:"arrow",text:"{ text: from.m.code}",labelPosition:.6578442177194026,font:"draw"},typeName:"shape"},"shape:5ElOGxzLK3r_X5bTHrUpO":{x:280,y:-1060,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:5ElOGxzLK3r_X5bTHrUpO",type:"geo",props:{w:1400,h:477.546875,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"mono",text:"Cave,Desert,Forest,Gate,Island,Lair,Locus,Mine,Mountain,Plains,Power-Plant,Sphere,Swamp,Tower,Urza’s",align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aM",typeName:"shape"},"shape:7P0cta80A2ed3dL_9gufE":{x:-3766.6840025959723,y:-736.1751314178041,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:7P0cta80A2ed3dL_9gufE",type:"geo",props:{w:480,h:1270,geo:"rectangle",color:"yellow",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:`Cache Grab
Fountainport
Honored Dreyleader
Into the Flood Maw
Knightfisher
Lilypad Village
Longstalk Brawl
Mind Spiral
Mockingbird
Oakhollow Village
Otterball Antics
Polliwallop
Starforged Sword
Stormchaser's Talent
Thornvault Forager
Valley Mightcaller`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aW",typeName:"shape"},"shape:DW7FYDDf02emXPBydDyC4":{x:790,y:1230,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:DW7FYDDf02emXPBydDyC4",type:"geo",props:{w:480,h:1270,geo:"rectangle",color:"yellow",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:`Alania, Divergent Storm
Beza, the Bounding Spring
Builder's Talent
Cache Grab
Camellia, the Seedmiser
Carrot Cake
Fountainport
Gev, Scaled Scorch
Harnesser of Storms
Harvestrite Host
Head of the Homestead
Honored Dreyleader
Hop to It
Into the Flood Maw
Kastral, the Windcrested
Knightfisher
Lilypad Village
Longstalk Brawl
Lunar Convocation
Lupinflower Village
Manifold Mouse
Mind Spiral
Mockingbird
Mudflat Village
Muerra, Trash Tactician
Oakhollow Village
Otterball Antics
Parting Gust
Persistent Marshstalker
Polliwallop`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aK",typeName:"shape"},"shape:EDJCBv4B6zYh5m_nmUuwy":{x:-166.84202518535812,y:174.9700013440961,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:EDJCBv4B6zYh5m_nmUuwy",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aN",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:240.60003959380853,y:-917.4984395676305},end:{x:323.52357057598147,y:-320.1000407286166},arrowheadStart:"none",arrowheadEnd:"arrow",text:'click { text: await new Function("from","to",from.m.code)(from,to)}',labelPosition:.5,font:"draw"},typeName:"shape"},"shape:EK3PoEEIsfa-AXq4cEhLT":{x:-1153.3159974040277,y:866.1751314178042,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:EK3PoEEIsfa-AXq4cEhLT",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aYV",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:1300.4522402212147,y:7.446642306866465},end:{x:1680.3159751727862,y:93.46890380227887},arrowheadStart:"none",arrowheadEnd:"arrow",text:"{text: from.m.cards.map(card => card.name).join('\\n')}",labelPosition:.5,font:"draw"},typeName:"shape"},"shape:F5tZ-7WhziNoplPjxUYog":{x:2990,y:-270,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:F5tZ-7WhziNoplPjxUYog",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ahV",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:-405.7159624542155,y:-49.47479825309608},end:{x:-1188.9434986967776,y:711.6149425403369},arrowheadStart:"none",arrowheadEnd:"arrow",text:"click {m:{code: from.text}}",labelPosition:.5,font:"draw"},typeName:"shape"},"shape:JRbT-py8wcwlBtNuO8a7H":{x:1910,y:-580,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:JRbT-py8wcwlBtNuO8a7H",type:"geo",props:{w:1658.6376698209565,h:536.953125,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"mono",text:"return {text: to.x};",align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"af",typeName:"shape"},"shape:M6g_yYso5Ryxpcdzp6OV6":{x:1722.670142751032,y:723.3943939162557,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:M6g_yYso5Ryxpcdzp6OV6",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ah8",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:295.4141881678886,y:150.09048918698704},end:{x:655.9062413550123,y:330.94357466544693},arrowheadStart:"none",arrowheadEnd:"arrow",text:"{text: JSON.stringify(from,null,2)}",labelPosition:.5,font:"draw"},typeName:"shape"},"shape:Ond87KZejSnF-C7YUZmMG":{x:-340,y:-260,rotation:0,isLocked:!1,opacity:1,meta:{code:`    const url = "https://api.academyruins.com/cr/205.3i";

    return fetch(url)
        .then((response) => {
            return response.json();
        })
        .then((json) => {
            var ruleText = json.ruleText;
            const ruleStart = "The land types are";
            const ruleEnd = ".";
            const rule = ruleText.split(ruleStart)[1].split(ruleEnd)[0].trim();
            let landTypes = rule.split(",").map(type => type.trim());
            if (landTypes.length > 1) {
                let lastType = landTypes.at(-1).substring(4);
                landTypes = landTypes.slice(0, -1).concat(lastType);
            }
            return landTypes;
        });`},id:"shape:Ond87KZejSnF-C7YUZmMG",type:"geo",props:{w:419.99999999999994,h:90,geo:"rectangle",color:"blue",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"All Land Types (cr 205.3i)",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aa",typeName:"shape"},"shape:W76wd0dk9cVaJkIqxOT7Q":{x:-160,y:380,rotation:0,isLocked:!1,opacity:1,meta:{creatureTypes:["Time Lord","Advisor","Aetherborn","Alien","Ally","Angel","Antelope","Ape","Archer","Archon","Armadillo","Army","Artificer","Assassin","Assembly-Worker","Astartes","Atog","Aurochs","Avatar","Azra","Badger","Balloon","Barbarian","Bard","Basilisk","Bat","Bear","Beast","Beaver","Beeble","Beholder","Berserker","Bird","Blinkmoth","Boar","Bringer","Brushwagg","Camarid","Camel","Capybara","Caribou","Carrier","Cat","Centaur","Child","Chimera","Citizen","Cleric","Clown","Cockatrice","Construct","Coward","Coyote","Crab","Crocodile","C’tan","Custodes","Cyberman","Cyclops","Dalek","Dauthi","Demigod","Demon","Deserter","Detective","Devil","Dinosaur","Djinn","Doctor","Dog","Dragon","Drake","Dreadnought","Drone","Druid","Dryad","Dwarf","Efreet","Egg","Elder","Eldrazi","Elemental","Elephant","Elf","Elk","Employee","Eye","Faerie","Ferret","Fish","Flagbearer","Fox","Fractal","Frog","Fungus","Gamer","Gargoyle","Germ","Giant","Gith","Glimmer","Gnoll","Gnome","Goat","Goblin","God","Golem","Gorgon","Graveborn","Gremlin","Griffin","Guest","Hag","Halfling","Hamster","Harpy","Hellion","Hippo","Hippogriff","Homarid","Homunculus","Horror","Horse","Human","Hydra","Hyena","Illusion","Imp","Incarnation","Inkling","Inquisitor","Insect","Jackal","Jellyfish","Juggernaut","Kavu","Kirin","Kithkin","Knight","Kobold","Kor","Kraken","Llama","Lamia","Lammasu","Leech","Leviathan","Lhurgoyf","Licid","Lizard","Manticore","Masticore","Mercenary","Merfolk","Metathran","Minion","Minotaur","Mite","Mole","Monger","Mongoose","Monk","Monkey","Moonfolk","Mount","Mouse","Mutant","Myr","Mystic","Nautilus","Necron","Nephilim","Nightmare","Nightstalker","Ninja","Noble","Noggle","Nomad","Nymph","Octopus","Ogre","Ooze","Orb","Orc","Orgg","Otter","Ouphe","Ox","Oyster","Pangolin","Peasant","Pegasus","Pentavite","Performer","Pest","Phelddagrif","Phoenix","Phyrexian","Pilot","Pincher","Pirate","Plant","Porcupine","Possum","Praetor","Primarch","Prism","Processor","Rabbit","Raccoon","Ranger","Rat","Rebel","Reflection","Rhino","Rigger","Robot","Rogue","Sable","Salamander","Samurai","Sand","Saproling","Satyr","Scarecrow","Scientist","Scion","Scorpion","Scout","Sculpture","Seal","Serf","Serpent","Servo","Shade","Shaman","Shapeshifter","Shark","Sheep","Siren","Skeleton","Skunk","Slith","Sliver","Sloth","Slug","Snail","Snake","Soldier","Soltari","Spawn","Specter","Spellshaper","Sphinx","Spider","Spike","Spirit","Splinter","Sponge","Squid","Squirrel","Starfish","Surrakar","Survivor","Synth","Tentacle","Tetravite","Thalakos","Thopter","Thrull","Tiefling","Toy","Treefolk","Trilobite","Triskelavite","Troll","Turtle","Tyranid","Unicorn","Vampire","Varmint","Vedalken","Volver","Wall","Walrus","Warlock","Warrior","Weasel","Weird","Werewolf","Whale","Wizard","Wolf","Wolverine","Wombat","Worm","Wraith","Wurm","Yeti","Zombie","Zubera"],cards:[{object:"card",id:"7dd9946b-515e-4e0d-9da2-711e126e9fa6",oracle_id:"7b89b7d2-c724-4d5d-9f0b-7d3302ad1168",multiverse_ids:[669036],mtgo_id:129489,arena_id:91658,tcgplayer_id:559491,cardmarket_id:778435,name:"Agate Assault",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7dd9946b-515e-4e0d-9da2-711e126e9fa6",scryfall_uri:"https://scryfall.com/card/blb/122/agate-assault?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/d/7dd9946b-515e-4e0d-9da2-711e126e9fa6.jpg?1721426563",normal:"https://cards.scryfall.io/normal/front/7/d/7dd9946b-515e-4e0d-9da2-711e126e9fa6.jpg?1721426563",large:"https://cards.scryfall.io/large/front/7/d/7dd9946b-515e-4e0d-9da2-711e126e9fa6.jpg?1721426563",png:"https://cards.scryfall.io/png/front/7/d/7dd9946b-515e-4e0d-9da2-711e126e9fa6.png?1721426563",art_crop:"https://cards.scryfall.io/art_crop/front/7/d/7dd9946b-515e-4e0d-9da2-711e126e9fa6.jpg?1721426563",border_crop:"https://cards.scryfall.io/border_crop/front/7/d/7dd9946b-515e-4e0d-9da2-711e126e9fa6.jpg?1721426563"},mana_cost:"{2}{R}",cmc:3,type_line:"Sorcery",oracle_text:`Choose one —
• Agate Assault deals 4 damage to target creature. If that creature would die this turn, exile it instead.
• Exile target artifact.`,colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7dd9946b-515e-4e0d-9da2-711e126e9fa6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A7b89b7d2-c724-4d5d-9f0b-7d3302ad1168&unique=prints",collector_number:"122",digital:!1,rarity:"common",flavor_text:'"Only an amateur crushes their enemies with a *cold* rock."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Slawomir Maniak",artist_ids:["d887bc66-2779-416c-a1ff-d8720242063e"],illustration_id:"2ba76099-9c54-4350-972d-d15413769b9d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10518,penny_rank:13342,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.03",usd_foil:"0.06",usd_etched:null,eur:"0.05",eur_foil:"0.08",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669036&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DAgate%2BAssault",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DAgate%2BAssault",edhrec:"https://edhrec.com/route/?cc=Agate+Assault"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559491%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Agate-Assault?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129489?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"39ebb84a-1c52-4b07-9bd0-b360523b3a5b",oracle_id:"381a3e8e-71dd-48e4-ab62-53478bde4a14",multiverse_ids:[668996],mtgo_id:129409,arena_id:91618,tcgplayer_id:559647,cardmarket_id:778511,name:"Agate-Blade Assassin",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/39ebb84a-1c52-4b07-9bd0-b360523b3a5b",scryfall_uri:"https://scryfall.com/card/blb/82/agate-blade-assassin?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/9/39ebb84a-1c52-4b07-9bd0-b360523b3a5b.jpg?1721426332",normal:"https://cards.scryfall.io/normal/front/3/9/39ebb84a-1c52-4b07-9bd0-b360523b3a5b.jpg?1721426332",large:"https://cards.scryfall.io/large/front/3/9/39ebb84a-1c52-4b07-9bd0-b360523b3a5b.jpg?1721426332",png:"https://cards.scryfall.io/png/front/3/9/39ebb84a-1c52-4b07-9bd0-b360523b3a5b.png?1721426332",art_crop:"https://cards.scryfall.io/art_crop/front/3/9/39ebb84a-1c52-4b07-9bd0-b360523b3a5b.jpg?1721426332",border_crop:"https://cards.scryfall.io/border_crop/front/3/9/39ebb84a-1c52-4b07-9bd0-b360523b3a5b.jpg?1721426332"},mana_cost:"{1}{B}",cmc:2,type_line:"Creature — Lizard Assassin",oracle_text:"Whenever this creature attacks, defending player loses 1 life and you gain 1 life.",power:"1",toughness:"3",colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/39ebb84a-1c52-4b07-9bd0-b360523b3a5b/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A381a3e8e-71dd-48e4-ab62-53478bde4a14&unique=prints",collector_number:"82",digital:!1,rarity:"common",flavor_text:"Some lizardfolk wield the precious agate and yearn for fire. Others wield it and thirst for blood.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Hristo D. Chukov",artist_ids:["e4631396-f0ce-41df-9d35-a7bd1da9d5a6"],illustration_id:"f2fc19cd-5a0d-4ed7-94c5-ce69d4fbc2cc",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9325,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-17"},prices:{usd:"0.03",usd_foil:"0.09",usd_etched:null,eur:"0.09",eur_foil:"0.11",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668996&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DAgate-Blade%2BAssassin",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DAgate-Blade%2BAssassin",edhrec:"https://edhrec.com/route/?cc=Agate-Blade+Assassin"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559647%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Agate-Blade-Assassin?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129409?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b24c3e9c-2aff-45fd-9c87-3ebd33bbe807",oracle_id:"eb5406e1-c3eb-4434-91f4-308622d3eab4",multiverse_ids:[],name:"A-Heartfire Hero",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807",scryfall_uri:"https://scryfall.com/card/blb/A-138/a-heartfire-hero?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/2/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807.jpg?1747030876",normal:"https://cards.scryfall.io/normal/front/b/2/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807.jpg?1747030876",large:"https://cards.scryfall.io/large/front/b/2/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807.jpg?1747030876",png:"https://cards.scryfall.io/png/front/b/2/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807.png?1747030876",art_crop:"https://cards.scryfall.io/art_crop/front/b/2/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807.jpg?1747030876",border_crop:"https://cards.scryfall.io/border_crop/front/b/2/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807.jpg?1747030876"},mana_cost:"{R}",cmc:1,type_line:"Creature — Mouse Soldier",oracle_text:`Valiant — Whenever Heartfire Hero becomes the target of a spell or ability you control for the first time each turn, put a +1/+1 counter on it.
When Heartfire Hero dies, it deals damage equal to its power to each opponent.`,power:"0",toughness:"1",colors:["R"],color_identity:["R"],keywords:["Valiant"],all_parts:[{object:"related_card",id:"48ace959-66b2-40c8-9bff-fd7ed9c99a82",component:"combo_piece",name:"Heartfire Hero",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/48ace959-66b2-40c8-9bff-fd7ed9c99a82"},{object:"related_card",id:"b24c3e9c-2aff-45fd-9c87-3ebd33bbe807",component:"combo_piece",name:"A-Heartfire Hero",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807"}],legalities:{standard:"not_legal",future:"not_legal",historic:"legal",timeless:"not_legal",gladiator:"not_legal",pioneer:"not_legal",explorer:"not_legal",modern:"not_legal",legacy:"not_legal",pauper:"not_legal",vintage:"not_legal",penny:"not_legal",commander:"not_legal",oathbreaker:"not_legal",standardbrawl:"not_legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"not_legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aeb5406e1-c3eb-4434-91f4-308622d3eab4&unique=prints",collector_number:"A-138",digital:!0,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakub Kasper",artist_ids:["36901417-ce61-4636-8b77-6db14a9cb68a"],illustration_id:"fe052f41-65c4-40dc-b004-78ad4367746a",border_color:"black",frame:"2015",security_stamp:"arena",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["rebalanced","alchemy"],prices:{usd:null,usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DA-Heartfire%2BHero",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DA-Heartfire%2BHero",edhrec:"https://edhrec.com/route/?cc=A-Heartfire+Hero"}},{object:"card",id:"436d6a84-4cea-4ca7-94aa-9d08280652af",oracle_id:"63d50d5e-56de-44c4-b906-b2a21a56e3f3",multiverse_ids:[669118],mtgo_id:129653,arena_id:91740,tcgplayer_id:558439,cardmarket_id:777656,name:"Alania, Divergent Storm",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/436d6a84-4cea-4ca7-94aa-9d08280652af",scryfall_uri:"https://scryfall.com/card/blb/204/alania-divergent-storm?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",normal:"https://cards.scryfall.io/normal/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",large:"https://cards.scryfall.io/large/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",png:"https://cards.scryfall.io/png/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.png?1721426997",art_crop:"https://cards.scryfall.io/art_crop/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",border_crop:"https://cards.scryfall.io/border_crop/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997"},mana_cost:"{3}{U}{R}",cmc:5,type_line:"Legendary Creature — Otter Wizard",oracle_text:"Whenever you cast a spell, if it's the first instant spell, the first sorcery spell, or the first Otter spell other than Alania you've cast this turn, you may have target opponent draw a card. If you do, copy that spell. You may choose new targets for the copy.",power:"3",toughness:"5",colors:["R","U"],color_identity:["R","U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/436d6a84-4cea-4ca7-94aa-9d08280652af/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A63d50d5e-56de-44c4-b906-b2a21a56e3f3&unique=prints",collector_number:"204",digital:!1,rarity:"rare",flavor_text:'"Why would I chase the storm? Does a cloud chase the rain? Does the sun chase the light?"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Joshua Raphael",artist_ids:["553b2a73-780f-414b-b2d7-3b7888821082"],illustration_id:"2746db34-3fd2-4c86-989c-dd1512da6638",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5666,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.07",usd_foil:"0.19",usd_etched:null,eur:"0.16",eur_foil:"0.32",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669118&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DAlania%252C%2BDivergent%2BStorm",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DAlania%252C%2BDivergent%2BStorm",edhrec:"https://edhrec.com/route/?cc=Alania%2C+Divergent+Storm"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558439%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Alania-Divergent-Storm?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129653?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1",oracle_id:"ce36a450-68a6-4519-a9f0-0e3b772054eb",multiverse_ids:[669037],mtgo_id:129491,arena_id:91659,tcgplayer_id:559554,cardmarket_id:778487,name:"Alania's Pathmaker",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1",scryfall_uri:"https://scryfall.com/card/blb/123/alanias-pathmaker?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/3/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1.jpg?1721426565",normal:"https://cards.scryfall.io/normal/front/d/3/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1.jpg?1721426565",large:"https://cards.scryfall.io/large/front/d/3/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1.jpg?1721426565",png:"https://cards.scryfall.io/png/front/d/3/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1.png?1721426565",art_crop:"https://cards.scryfall.io/art_crop/front/d/3/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1.jpg?1721426565",border_crop:"https://cards.scryfall.io/border_crop/front/d/3/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1.jpg?1721426565"},mana_cost:"{3}{R}",cmc:4,type_line:"Creature — Otter Wizard",oracle_text:"When this creature enters, exile the top card of your library. Until the end of your next turn, you may play that card.",power:"4",toughness:"2",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/d3871fe6-e26e-4ab4-bd81-7e3c7b8135c1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ace36a450-68a6-4519-a9f0-0e3b772054eb&unique=prints",collector_number:"123",digital:!1,rarity:"common",flavor_text:`"The frogfolk should worry less that the sky is falling and worry more about where it's landing."`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jason Kang",artist_ids:["064b9176-e325-44f6-a413-2cadb7505851"],illustration_id:"18a96c06-231c-4f08-8193-d3db45d857c9",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12349,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.02",usd_foil:"0.05",usd_etched:null,eur:"0.05",eur_foil:"0.09",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669037&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DAlania%2527s%2BPathmaker",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DAlania%2527s%2BPathmaker",edhrec:"https://edhrec.com/route/?cc=Alania%27s+Pathmaker"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559554%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Alanias-Pathmaker?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129491?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8b9e51d9-189b-4dd6-87cb-628ea6373e81",oracle_id:"ea734863-5793-49d6-b10e-109432aec0a3",multiverse_ids:[669038],mtgo_id:129493,arena_id:91660,tcgplayer_id:558442,cardmarket_id:777607,name:"Artist's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8b9e51d9-189b-4dd6-87cb-628ea6373e81",scryfall_uri:"https://scryfall.com/card/blb/124/artists-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571",normal:"https://cards.scryfall.io/normal/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571",large:"https://cards.scryfall.io/large/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571",png:"https://cards.scryfall.io/png/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.png?1721426571",art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571",border_crop:"https://cards.scryfall.io/border_crop/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571"},mana_cost:"{1}{R}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
Whenever you cast a noncreature spell, you may discard a card. If you do, draw a card.
{2}{R}: Level 2
Noncreature spells you cast cost {1} less to cast.
{2}{R}: Level 3
If a source you control would deal noncombat damage to an opponent or a permanent an opponent controls, it deals that much damage plus 2 instead.`,colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8b9e51d9-189b-4dd6-87cb-628ea6373e81/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aea734863-5793-49d6-b10e-109432aec0a3&unique=prints",collector_number:"124",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Lars Grant-West",artist_ids:["21ed6499-c4d3-4965-ab02-6c7228275bec"],illustration_id:"7c52e545-fda2-47b8-8aa7-0dba0090b430",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3093,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"3.56",usd_foil:"4.86",usd_etched:null,eur:"5.63",eur_foil:"6.14",tix:"2.53"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669038&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DArtist%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DArtist%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Artist%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558442%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Artists-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129493?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"211af1bf-910b-41a5-b928-f378188d1871",oracle_id:"7bb51602-60e8-4730-b11c-2870d6b42e20",multiverse_ids:[668955],mtgo_id:129327,arena_id:91577,tcgplayer_id:559744,cardmarket_id:778925,name:"Azure Beastbinder",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/211af1bf-910b-41a5-b928-f378188d1871",scryfall_uri:"https://scryfall.com/card/blb/41/azure-beastbinder?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/1/211af1bf-910b-41a5-b928-f378188d1871.jpg?1721426023",normal:"https://cards.scryfall.io/normal/front/2/1/211af1bf-910b-41a5-b928-f378188d1871.jpg?1721426023",large:"https://cards.scryfall.io/large/front/2/1/211af1bf-910b-41a5-b928-f378188d1871.jpg?1721426023",png:"https://cards.scryfall.io/png/front/2/1/211af1bf-910b-41a5-b928-f378188d1871.png?1721426023",art_crop:"https://cards.scryfall.io/art_crop/front/2/1/211af1bf-910b-41a5-b928-f378188d1871.jpg?1721426023",border_crop:"https://cards.scryfall.io/border_crop/front/2/1/211af1bf-910b-41a5-b928-f378188d1871.jpg?1721426023"},mana_cost:"{1}{U}",cmc:2,type_line:"Creature — Rat Rogue",oracle_text:`Vigilance
This creature can't be blocked by creatures with power 2 or greater.
Whenever this creature attacks, up to one target artifact, creature, or planeswalker an opponent controls loses all abilities until your next turn. If it's a creature, it also has base power and toughness 2/2 until your next turn.`,power:"1",toughness:"3",colors:["U"],color_identity:["U"],keywords:["Vigilance"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/211af1bf-910b-41a5-b928-f378188d1871/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A7bb51602-60e8-4730-b11c-2870d6b42e20&unique=prints",collector_number:"41",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Adam Paquette",artist_ids:["89023dad-e6c0-41e0-83fb-eb2bfbbdc3f2"],illustration_id:"012a3d4a-34f2-45f3-9e1c-6572312067d9",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5045,penny_rank:6321,preview:{source:"Wizards of the Coast",source_uri:"https://x.com/mtgjp/status/1813581947127648442",previewed_at:"2024-07-17"},prices:{usd:"0.43",usd_foil:"0.44",usd_etched:null,eur:"0.57",eur_foil:"0.75",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668955&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DAzure%2BBeastbinder",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DAzure%2BBeastbinder",edhrec:"https://edhrec.com/route/?cc=Azure+Beastbinder"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559744%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Azure-Beastbinder?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129327?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"5309354f-1ff4-4fa9-9141-01ea2f7588ab",oracle_id:"ecd9a0a4-1dfa-4d91-8339-062e2be4e5d9",multiverse_ids:[669077],mtgo_id:129571,arena_id:91698,tcgplayer_id:559482,cardmarket_id:778488,name:"Bakersbane Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/5309354f-1ff4-4fa9-9141-01ea2f7588ab",scryfall_uri:"https://scryfall.com/card/blb/163/bakersbane-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/3/5309354f-1ff4-4fa9-9141-01ea2f7588ab.jpg?1721426764",normal:"https://cards.scryfall.io/normal/front/5/3/5309354f-1ff4-4fa9-9141-01ea2f7588ab.jpg?1721426764",large:"https://cards.scryfall.io/large/front/5/3/5309354f-1ff4-4fa9-9141-01ea2f7588ab.jpg?1721426764",png:"https://cards.scryfall.io/png/front/5/3/5309354f-1ff4-4fa9-9141-01ea2f7588ab.png?1721426764",art_crop:"https://cards.scryfall.io/art_crop/front/5/3/5309354f-1ff4-4fa9-9141-01ea2f7588ab.jpg?1721426764",border_crop:"https://cards.scryfall.io/border_crop/front/5/3/5309354f-1ff4-4fa9-9141-01ea2f7588ab.jpg?1721426764"},mana_cost:"{1}{G}",cmc:2,type_line:"Creature — Squirrel Raccoon",oracle_text:`When this creature enters, create a Food token.
Whenever you expend 4, this creature gets +1/+1 until end of turn. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)`,power:"2",toughness:"2",colors:["G"],color_identity:["G"],keywords:["Food"],all_parts:[{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"},{object:"related_card",id:"5309354f-1ff4-4fa9-9141-01ea2f7588ab",component:"combo_piece",name:"Bakersbane Duo",type_line:"Creature — Squirrel Raccoon",uri:"https://api.scryfall.com/cards/5309354f-1ff4-4fa9-9141-01ea2f7588ab"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/5309354f-1ff4-4fa9-9141-01ea2f7588ab/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aecd9a0a4-1dfa-4d91-8339-062e2be4e5d9&unique=prints",collector_number:"163",digital:!1,rarity:"common",flavor_text:`"I'll take the crust!" chittered the squirrel. "And I'll take the filling!" drooled the raccoon.`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Raluca Marinescu",artist_ids:["1922e455-d09b-4922-afec-5f6fb5bb5111"],illustration_id:"76c973bb-4d3f-4585-a268-bf72ff28ea2f",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10412,penny_rank:9633,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.05",usd_foil:"0.12",usd_etched:null,eur:"0.05",eur_foil:"0.19",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669077&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBakersbane%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBakersbane%2BDuo",edhrec:"https://edhrec.com/route/?cc=Bakersbane+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559482%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bakersbane-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129571?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"485dc8d8-9e44-4a0f-9ff6-fa448e232290",oracle_id:"bcbe879a-4609-4493-bd7d-47c26d27e83c",multiverse_ids:[668997],mtgo_id:129411,arena_id:91619,tcgplayer_id:559150,cardmarket_id:778343,name:"Bandit's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/485dc8d8-9e44-4a0f-9ff6-fa448e232290",scryfall_uri:"https://scryfall.com/card/blb/83/bandits-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/8/485dc8d8-9e44-4a0f-9ff6-fa448e232290.jpg?1739659353",normal:"https://cards.scryfall.io/normal/front/4/8/485dc8d8-9e44-4a0f-9ff6-fa448e232290.jpg?1739659353",large:"https://cards.scryfall.io/large/front/4/8/485dc8d8-9e44-4a0f-9ff6-fa448e232290.jpg?1739659353",png:"https://cards.scryfall.io/png/front/4/8/485dc8d8-9e44-4a0f-9ff6-fa448e232290.png?1739659353",art_crop:"https://cards.scryfall.io/art_crop/front/4/8/485dc8d8-9e44-4a0f-9ff6-fa448e232290.jpg?1739659353",border_crop:"https://cards.scryfall.io/border_crop/front/4/8/485dc8d8-9e44-4a0f-9ff6-fa448e232290.jpg?1739659353"},mana_cost:"{1}{B}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
When this Class enters, each opponent discards two cards unless they discard a nonland card.
{B}: Level 2
At the beginning of each opponent's upkeep, if that player has one or fewer cards in hand, they lose 2 life.
{3}{B}: Level 3
At the beginning of your draw step, draw an additional card for each opponent who has one or fewer cards in hand.`,colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/485dc8d8-9e44-4a0f-9ff6-fa448e232290/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abcbe879a-4609-4493-bd7d-47c26d27e83c&unique=prints",collector_number:"83",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Volkan Baǵa",artist_ids:["93bec3c0-0260-4d31-8064-5d01efb4153f"],illustration_id:"ca5f2cc5-ae6a-40d9-a0bd-8b38bfc942ce",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6273,penny_rank:123,preview:{source:"The Sun",source_uri:"https://thesun.my/style-life/wizards-s-exclusive-bandit-s-talent-KF12713191",previewed_at:"2024-07-12"},prices:{usd:"0.31",usd_foil:"0.33",usd_etched:null,eur:"0.13",eur_foil:"0.33",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668997&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBandit%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBandit%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Bandit%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559150%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bandits-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129411?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"25a06f82-ebdb-4dd6-bfe8-958018ce557c",oracle_id:"f28b21a6-f7ce-437a-8c5b-0423cb55cefb",multiverse_ids:[668915],mtgo_id:129247,arena_id:91537,tcgplayer_id:559497,cardmarket_id:778509,name:"Banishing Light",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/25a06f82-ebdb-4dd6-bfe8-958018ce557c",scryfall_uri:"https://scryfall.com/card/blb/1/banishing-light?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/5/25a06f82-ebdb-4dd6-bfe8-958018ce557c.jpg?1721425761",normal:"https://cards.scryfall.io/normal/front/2/5/25a06f82-ebdb-4dd6-bfe8-958018ce557c.jpg?1721425761",large:"https://cards.scryfall.io/large/front/2/5/25a06f82-ebdb-4dd6-bfe8-958018ce557c.jpg?1721425761",png:"https://cards.scryfall.io/png/front/2/5/25a06f82-ebdb-4dd6-bfe8-958018ce557c.png?1721425761",art_crop:"https://cards.scryfall.io/art_crop/front/2/5/25a06f82-ebdb-4dd6-bfe8-958018ce557c.jpg?1721425761",border_crop:"https://cards.scryfall.io/border_crop/front/2/5/25a06f82-ebdb-4dd6-bfe8-958018ce557c.jpg?1721425761"},mana_cost:"{2}{W}",cmc:3,type_line:"Enchantment",oracle_text:"When this enchantment enters, exile target nonland permanent an opponent controls until this enchantment leaves the battlefield.",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/25a06f82-ebdb-4dd6-bfe8-958018ce557c/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af28b21a6-f7ce-437a-8c5b-0423cb55cefb&unique=prints",collector_number:"1",digital:!1,rarity:"common",flavor_text:`"If you cannot find light in the darkness, create it."
—Aural, high cleric`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Zoltan Boros",artist_ids:["1885e6cb-c827-4896-994e-3d0a027d602f"],illustration_id:"8aeeab0a-3ad0-42e8-b110-3c1a553e246c",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2288,penny_rank:808,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.04",usd_foil:"0.06",usd_etched:null,eur:"0.08",eur_foil:"0.14",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668915&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBanishing%2BLight",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBanishing%2BLight",edhrec:"https://edhrec.com/route/?cc=Banishing+Light"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559497%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Banishing-Light?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129247?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"f77049a6-0f22-415b-bc89-20bcb32accf6",oracle_id:"0339bd11-ad71-4998-9b5d-a32790f0e5e3",multiverse_ids:[669157],mtgo_id:129731,arena_id:91779,tcgplayer_id:558679,cardmarket_id:777764,name:"Barkform Harvester",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/f77049a6-0f22-415b-bc89-20bcb32accf6",scryfall_uri:"https://scryfall.com/card/blb/243/barkform-harvester?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/7/f77049a6-0f22-415b-bc89-20bcb32accf6.jpg?1721427262",normal:"https://cards.scryfall.io/normal/front/f/7/f77049a6-0f22-415b-bc89-20bcb32accf6.jpg?1721427262",large:"https://cards.scryfall.io/large/front/f/7/f77049a6-0f22-415b-bc89-20bcb32accf6.jpg?1721427262",png:"https://cards.scryfall.io/png/front/f/7/f77049a6-0f22-415b-bc89-20bcb32accf6.png?1721427262",art_crop:"https://cards.scryfall.io/art_crop/front/f/7/f77049a6-0f22-415b-bc89-20bcb32accf6.jpg?1721427262",border_crop:"https://cards.scryfall.io/border_crop/front/f/7/f77049a6-0f22-415b-bc89-20bcb32accf6.jpg?1721427262"},mana_cost:"{3}",cmc:3,type_line:"Artifact Creature — Shapeshifter",oracle_text:`Changeling (This card is every creature type.)
Reach
{2}: Put target card from your graveyard on the bottom of your library.`,power:"2",toughness:"3",colors:[],color_identity:[],keywords:["Reach","Changeling"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/f77049a6-0f22-415b-bc89-20bcb32accf6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0339bd11-ad71-4998-9b5d-a32790f0e5e3&unique=prints",collector_number:"243",digital:!1,rarity:"common",flavor_text:"The farmers hide when it runs out of potatoes to harvest.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Zezhou Chen",artist_ids:["810677e5-a502-4c03-b726-78cd808a75d4"],illustration_id:"2cfdcba0-cd97-4639-9012-a0c88a375609",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6044,penny_rank:9143,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.05",usd_foil:"0.12",usd_etched:null,eur:"0.11",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669157&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBarkform%2BHarvester",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBarkform%2BHarvester",edhrec:"https://edhrec.com/route/?cc=Barkform+Harvester"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558679%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Barkform-Harvester?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129731?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"582637a9-6aa0-4824-bed7-d5fc91bda35e",oracle_id:"08e173e3-4c28-49d2-bb57-ccf533f20daf",multiverse_ids:[669078],mtgo_id:129573,arena_id:91700,tcgplayer_id:559073,cardmarket_id:778111,name:"Bark-Knuckle Boxer",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/582637a9-6aa0-4824-bed7-d5fc91bda35e",scryfall_uri:"https://scryfall.com/card/blb/164/bark-knuckle-boxer?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/8/582637a9-6aa0-4824-bed7-d5fc91bda35e.jpg?1721426764",normal:"https://cards.scryfall.io/normal/front/5/8/582637a9-6aa0-4824-bed7-d5fc91bda35e.jpg?1721426764",large:"https://cards.scryfall.io/large/front/5/8/582637a9-6aa0-4824-bed7-d5fc91bda35e.jpg?1721426764",png:"https://cards.scryfall.io/png/front/5/8/582637a9-6aa0-4824-bed7-d5fc91bda35e.png?1721426764",art_crop:"https://cards.scryfall.io/art_crop/front/5/8/582637a9-6aa0-4824-bed7-d5fc91bda35e.jpg?1721426764",border_crop:"https://cards.scryfall.io/border_crop/front/5/8/582637a9-6aa0-4824-bed7-d5fc91bda35e.jpg?1721426764"},mana_cost:"{1}{G}",cmc:2,type_line:"Creature — Raccoon Berserker",oracle_text:"Whenever you expend 4, this creature gains indestructible until end of turn. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)",power:"3",toughness:"2",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/582637a9-6aa0-4824-bed7-d5fc91bda35e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A08e173e3-4c28-49d2-bb57-ccf533f20daf&unique=prints",collector_number:"164",digital:!1,rarity:"uncommon",flavor_text:`May your bark be worse than your bite.
—Raccoonfolk war blessing`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Filip Burburan",artist_ids:["66082c3b-a623-4d34-be51-2475214b85d3"],illustration_id:"7b093252-8abe-4555-bca2-2d54227fa395",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13645,preview:{source:"Limited Resources",source_uri:"https://twitter.com/Marshall_LR/status/1811570808604807458",previewed_at:"2024-07-11"},prices:{usd:"0.02",usd_foil:"0.07",usd_etched:null,eur:"0.09",eur_foil:"0.17",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669078&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBark-Knuckle%2BBoxer",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBark-Knuckle%2BBoxer",edhrec:"https://edhrec.com/route/?cc=Bark-Knuckle+Boxer"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559073%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bark-Knuckle-Boxer?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129573?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"00e93be2-e06b-4774-8ba5-ccf82a6da1d8",oracle_id:"73dc28a7-37ac-4b16-aa00-967c9c44d979",multiverse_ids:[669119],mtgo_id:129655,arena_id:91741,tcgplayer_id:559115,cardmarket_id:778356,name:"Baylen, the Haymaker",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/00e93be2-e06b-4774-8ba5-ccf82a6da1d8",scryfall_uri:"https://scryfall.com/card/blb/205/baylen-the-haymaker?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/0/00e93be2-e06b-4774-8ba5-ccf82a6da1d8.jpg?1721427006",normal:"https://cards.scryfall.io/normal/front/0/0/00e93be2-e06b-4774-8ba5-ccf82a6da1d8.jpg?1721427006",large:"https://cards.scryfall.io/large/front/0/0/00e93be2-e06b-4774-8ba5-ccf82a6da1d8.jpg?1721427006",png:"https://cards.scryfall.io/png/front/0/0/00e93be2-e06b-4774-8ba5-ccf82a6da1d8.png?1721427006",art_crop:"https://cards.scryfall.io/art_crop/front/0/0/00e93be2-e06b-4774-8ba5-ccf82a6da1d8.jpg?1721427006",border_crop:"https://cards.scryfall.io/border_crop/front/0/0/00e93be2-e06b-4774-8ba5-ccf82a6da1d8.jpg?1721427006"},mana_cost:"{R}{G}{W}",cmc:3,type_line:"Legendary Creature — Rabbit Warrior",oracle_text:`Tap two untapped tokens you control: Add one mana of any color.
Tap three untapped tokens you control: Draw a card.
Tap four untapped tokens you control: Put three +1/+1 counters on Baylen. It gains trample until end of turn.`,power:"4",toughness:"3",colors:["G","R","W"],color_identity:["G","R","W"],keywords:[],produced_mana:["B","G","R","U","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/00e93be2-e06b-4774-8ba5-ccf82a6da1d8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A73dc28a7-37ac-4b16-aa00-967c9c44d979&unique=prints",collector_number:"205",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Ryan Pancoast",artist_ids:["89cc9475-dda2-4d13-bf88-54b92867a25c"],illustration_id:"1482323a-6b79-4402-8f85-bddeb51fafbd",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3534,penny_rank:9637,preview:{source:"NGA",source_uri:"https://nga.178.com/read.php?tid=40860745&rand=34",previewed_at:"2024-07-12"},prices:{usd:"0.83",usd_foil:"1.50",usd_etched:null,eur:"0.58",eur_foil:"1.84",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669119&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBaylen%252C%2Bthe%2BHaymaker",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBaylen%252C%2Bthe%2BHaymaker",edhrec:"https://edhrec.com/route/?cc=Baylen%2C+the+Haymaker"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559115%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Baylen-the-Haymaker?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129655?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ca2215dd-6300-49cf-b9b2-3a840b786c31",oracle_id:"f2f3be8a-5ea1-47c2-8104-747f4589f5e6",multiverse_ids:[668956],mtgo_id:129329,arena_id:91578,tcgplayer_id:559561,cardmarket_id:778506,name:"Bellowing Crier",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ca2215dd-6300-49cf-b9b2-3a840b786c31",scryfall_uri:"https://scryfall.com/card/blb/42/bellowing-crier?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/a/ca2215dd-6300-49cf-b9b2-3a840b786c31.jpg?1721426026",normal:"https://cards.scryfall.io/normal/front/c/a/ca2215dd-6300-49cf-b9b2-3a840b786c31.jpg?1721426026",large:"https://cards.scryfall.io/large/front/c/a/ca2215dd-6300-49cf-b9b2-3a840b786c31.jpg?1721426026",png:"https://cards.scryfall.io/png/front/c/a/ca2215dd-6300-49cf-b9b2-3a840b786c31.png?1721426026",art_crop:"https://cards.scryfall.io/art_crop/front/c/a/ca2215dd-6300-49cf-b9b2-3a840b786c31.jpg?1721426026",border_crop:"https://cards.scryfall.io/border_crop/front/c/a/ca2215dd-6300-49cf-b9b2-3a840b786c31.jpg?1721426026"},mana_cost:"{1}{U}",cmc:2,type_line:"Creature — Frog Advisor",oracle_text:"When this creature enters, draw a card, then discard a card.",power:"2",toughness:"1",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ca2215dd-6300-49cf-b9b2-3a840b786c31/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af2f3be8a-5ea1-47c2-8104-747f4589f5e6&unique=prints",collector_number:"42",digital:!1,rarity:"common",flavor_text:"Glarb's court can always be found repeating his disastrous visions, even when they're unwelcome.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jeff Miracola",artist_ids:["9b465bde-3656-4495-ace4-af4ce29999ed"],illustration_id:"97c44edd-3d69-4b8f-b167-38b8d9842862",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9653,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.03",usd_foil:"0.04",usd_etched:null,eur:"0.12",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668956&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBellowing%2BCrier",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBellowing%2BCrier",edhrec:"https://edhrec.com/route/?cc=Bellowing+Crier"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559561%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bellowing-Crier?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129329?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"fc310a26-b6a0-4e42-98ab-bdfd7b06cb63",oracle_id:"020de6d7-f5a2-4036-ad25-451e5977b4d4",multiverse_ids:[668916],mtgo_id:129249,arena_id:91538,tcgplayer_id:558421,cardmarket_id:777543,name:"Beza, the Bounding Spring",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63",scryfall_uri:"https://scryfall.com/card/blb/2/beza-the-bounding-spring?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",normal:"https://cards.scryfall.io/normal/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",large:"https://cards.scryfall.io/large/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",png:"https://cards.scryfall.io/png/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.png?1721425768",art_crop:"https://cards.scryfall.io/art_crop/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",border_crop:"https://cards.scryfall.io/border_crop/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768"},mana_cost:"{2}{W}{W}",cmc:4,type_line:"Legendary Creature — Elemental Elk",oracle_text:"When Beza enters, create a Treasure token if an opponent controls more lands than you. You gain 4 life if an opponent has more life than you. Create two 1/1 blue Fish creature tokens if an opponent controls more creatures than you. Draw a card if an opponent has more cards in hand than you.",power:"4",toughness:"5",colors:["W"],color_identity:["W"],keywords:["Treasure"],all_parts:[{object:"related_card",id:"0fc98b72-d268-4ce5-93b4-57c812a24eff",component:"combo_piece",name:"Beza, the Bounding Spring",type_line:"Legendary Creature — Elemental Elk",uri:"https://api.scryfall.com/cards/0fc98b72-d268-4ce5-93b4-57c812a24eff"},{object:"related_card",id:"ff0357fb-d90c-49c7-b16a-8b52ac686c3b",component:"token",name:"Treasure",type_line:"Token Artifact — Treasure",uri:"https://api.scryfall.com/cards/ff0357fb-d90c-49c7-b16a-8b52ac686c3b"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A020de6d7-f5a2-4036-ad25-451e5977b4d4&unique=prints",collector_number:"2",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Martin Wittfooth",artist_ids:["9f549ccf-d237-47c5-ab39-1b2bbbb164fc"],illustration_id:"ef24c61f-ae89-4267-a90c-1771b13edea9",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5831,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"9.93",usd_foil:"11.04",usd_etched:null,eur:"12.62",eur_foil:"13.69",tix:"7.99"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668916&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBeza%252C%2Bthe%2BBounding%2BSpring",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBeza%252C%2Bthe%2BBounding%2BSpring",edhrec:"https://edhrec.com/route/?cc=Beza%2C+the+Bounding+Spring"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558421%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Beza-the-Bounding-Spring?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129249?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"4bb318fa-481d-40a7-978e-f01b49101ae0",oracle_id:"9fdad42a-9db5-4d91-9e80-9d5ce19038b8",multiverse_ids:[669039],mtgo_id:129495,arena_id:91661,tcgplayer_id:559492,cardmarket_id:778490,name:"Blacksmith's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/4bb318fa-481d-40a7-978e-f01b49101ae0",scryfall_uri:"https://scryfall.com/card/blb/125/blacksmiths-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/b/4bb318fa-481d-40a7-978e-f01b49101ae0.jpg?1739659737",normal:"https://cards.scryfall.io/normal/front/4/b/4bb318fa-481d-40a7-978e-f01b49101ae0.jpg?1739659737",large:"https://cards.scryfall.io/large/front/4/b/4bb318fa-481d-40a7-978e-f01b49101ae0.jpg?1739659737",png:"https://cards.scryfall.io/png/front/4/b/4bb318fa-481d-40a7-978e-f01b49101ae0.png?1739659737",art_crop:"https://cards.scryfall.io/art_crop/front/4/b/4bb318fa-481d-40a7-978e-f01b49101ae0.jpg?1739659737",border_crop:"https://cards.scryfall.io/border_crop/front/4/b/4bb318fa-481d-40a7-978e-f01b49101ae0.jpg?1739659737"},mana_cost:"{R}",cmc:1,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
When this Class enters, create a colorless Equipment artifact token named Sword with "Equipped creature gets +1/+1" and equip {2}.
{2}{R}: Level 2
At the beginning of combat on your turn, attach target Equipment you control to up to one target creature you control.
{3}{R}: Level 3
During your turn, equipped creatures you control have double strike and haste.`,colors:["R"],color_identity:["R"],keywords:[],all_parts:[{object:"related_card",id:"bb1e78e6-a9e7-48a4-9231-61fb331c5837",component:"token",name:"Sword",type_line:"Token Artifact — Equipment",uri:"https://api.scryfall.com/cards/bb1e78e6-a9e7-48a4-9231-61fb331c5837"},{object:"related_card",id:"4bb318fa-481d-40a7-978e-f01b49101ae0",component:"combo_piece",name:"Blacksmith's Talent",type_line:"Enchantment — Class",uri:"https://api.scryfall.com/cards/4bb318fa-481d-40a7-978e-f01b49101ae0"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/4bb318fa-481d-40a7-978e-f01b49101ae0/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A9fdad42a-9db5-4d91-9e80-9d5ce19038b8&unique=prints",collector_number:"125",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Vincent Christiaens",artist_ids:["31b01a73-d14f-4f9e-a5dc-9cee3b036124"],illustration_id:"f17a2f88-ed3b-40e8-a58f-6ff02d84254e",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5131,penny_rank:3684,preview:{source:"yystv",source_uri:"https://www.yystv.cn/n/1004017",previewed_at:"2024-07-15"},prices:{usd:"0.18",usd_foil:"0.24",usd_etched:null,eur:"0.10",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669039&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBlacksmith%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBlacksmith%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Blacksmith%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559492%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Blacksmiths-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129495?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0cd92a83-cec3-4085-a929-3f204e3e0140",oracle_id:"2e5b8973-4f6e-4abe-bbbe-81fdca784997",multiverse_ids:[669040],mtgo_id:129497,arena_id:91662,tcgplayer_id:559654,cardmarket_id:778526,name:"Blooming Blast",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0cd92a83-cec3-4085-a929-3f204e3e0140",scryfall_uri:"https://scryfall.com/card/blb/126/blooming-blast?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/c/0cd92a83-cec3-4085-a929-3f204e3e0140.jpg?1721426579",normal:"https://cards.scryfall.io/normal/front/0/c/0cd92a83-cec3-4085-a929-3f204e3e0140.jpg?1721426579",large:"https://cards.scryfall.io/large/front/0/c/0cd92a83-cec3-4085-a929-3f204e3e0140.jpg?1721426579",png:"https://cards.scryfall.io/png/front/0/c/0cd92a83-cec3-4085-a929-3f204e3e0140.png?1721426579",art_crop:"https://cards.scryfall.io/art_crop/front/0/c/0cd92a83-cec3-4085-a929-3f204e3e0140.jpg?1721426579",border_crop:"https://cards.scryfall.io/border_crop/front/0/c/0cd92a83-cec3-4085-a929-3f204e3e0140.jpg?1721426579"},mana_cost:"{1}{R}",cmc:2,type_line:"Instant",oracle_text:`Gift a Treasure (You may promise an opponent a gift as you cast this spell. If you do, they create a Treasure token before its other effects. It's an artifact with "{T}, Sacrifice this token: Add one mana of any color.")
Blooming Blast deals 2 damage to target creature. If the gift was promised, Blooming Blast also deals 3 damage to that creature's controller.`,colors:["R"],color_identity:["R"],keywords:["Gift","Treasure"],produced_mana:["B","G","R","U","W"],all_parts:[{object:"related_card",id:"0cd92a83-cec3-4085-a929-3f204e3e0140",component:"combo_piece",name:"Blooming Blast",type_line:"Instant",uri:"https://api.scryfall.com/cards/0cd92a83-cec3-4085-a929-3f204e3e0140"},{object:"related_card",id:"ff0357fb-d90c-49c7-b16a-8b52ac686c3b",component:"token",name:"Treasure",type_line:"Token Artifact — Treasure",uri:"https://api.scryfall.com/cards/ff0357fb-d90c-49c7-b16a-8b52ac686c3b"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0cd92a83-cec3-4085-a929-3f204e3e0140/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A2e5b8973-4f6e-4abe-bbbe-81fdca784997&unique=prints",collector_number:"126",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakob Eirich",artist_ids:["982d9460-f9b9-42f6-8a25-47afa7df22e9"],illustration_id:"a1ea7c1c-e5c0-4a1d-9146-0d10812e897a",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:14859,penny_rank:993,preview:{source:"Rapsolo",source_uri:"https://twitter.com/RapsoloM/status/1813274426122600899",previewed_at:"2024-07-16"},prices:{usd:"0.08",usd_foil:"0.05",usd_etched:null,eur:"0.17",eur_foil:"0.29",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669040&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBlooming%2BBlast",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBlooming%2BBlast",edhrec:"https://edhrec.com/route/?cc=Blooming+Blast"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559654%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Blooming-Blast?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129497?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ecfa2cc9-e427-4104-bad7-b0294e392b1f",oracle_id:"45429b2c-be3b-4b2e-9bab-a059ccbda8cd",multiverse_ids:[670771],arena_id:91809,tcgplayer_id:559544,name:"Blossoming Sands",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ecfa2cc9-e427-4104-bad7-b0294e392b1f",scryfall_uri:"https://scryfall.com/card/blb/396/blossoming-sands?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/c/ecfa2cc9-e427-4104-bad7-b0294e392b1f.jpg?1721428122",normal:"https://cards.scryfall.io/normal/front/e/c/ecfa2cc9-e427-4104-bad7-b0294e392b1f.jpg?1721428122",large:"https://cards.scryfall.io/large/front/e/c/ecfa2cc9-e427-4104-bad7-b0294e392b1f.jpg?1721428122",png:"https://cards.scryfall.io/png/front/e/c/ecfa2cc9-e427-4104-bad7-b0294e392b1f.png?1721428122",art_crop:"https://cards.scryfall.io/art_crop/front/e/c/ecfa2cc9-e427-4104-bad7-b0294e392b1f.jpg?1721428122",border_crop:"https://cards.scryfall.io/border_crop/front/e/c/ecfa2cc9-e427-4104-bad7-b0294e392b1f.jpg?1721428122"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`This land enters tapped.
When this land enters, you gain 1 life.
{T}: Add {G} or {W}.`,colors:[],color_identity:["G","W"],keywords:[],produced_mana:["G","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ecfa2cc9-e427-4104-bad7-b0294e392b1f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A45429b2c-be3b-4b2e-9bab-a059ccbda8cd&unique=prints",collector_number:"396",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Sam Burley",artist_ids:["f89f4b78-cefb-41f7-b7cb-4f4d28de0c4f"],illustration_id:"9b3ae122-30f4-41a2-99b8-c0a8cda84acc",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:1025,penny_rank:1138,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.07",usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670771&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBlossoming%2BSands",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBlossoming%2BSands",edhrec:"https://edhrec.com/route/?cc=Blossoming+Sands"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559544%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Blossoming+Sands&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards?affiliate_id=scryfall&data%5Bsearch%5D=Blossoming+Sands&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"faf226fa-ca09-4468-8804-87b2a7de2c66",oracle_id:"c79cf0e5-52dd-4af3-ab06-6cdaab526c23",multiverse_ids:[668998],mtgo_id:129413,arena_id:91620,tcgplayer_id:559762,cardmarket_id:778929,name:"Bonebind Orator",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/faf226fa-ca09-4468-8804-87b2a7de2c66",scryfall_uri:"https://scryfall.com/card/blb/84/bonebind-orator?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/a/faf226fa-ca09-4468-8804-87b2a7de2c66.jpg?1721426343",normal:"https://cards.scryfall.io/normal/front/f/a/faf226fa-ca09-4468-8804-87b2a7de2c66.jpg?1721426343",large:"https://cards.scryfall.io/large/front/f/a/faf226fa-ca09-4468-8804-87b2a7de2c66.jpg?1721426343",png:"https://cards.scryfall.io/png/front/f/a/faf226fa-ca09-4468-8804-87b2a7de2c66.png?1721426343",art_crop:"https://cards.scryfall.io/art_crop/front/f/a/faf226fa-ca09-4468-8804-87b2a7de2c66.jpg?1721426343",border_crop:"https://cards.scryfall.io/border_crop/front/f/a/faf226fa-ca09-4468-8804-87b2a7de2c66.jpg?1721426343"},mana_cost:"{1}{B}",cmc:2,type_line:"Creature — Squirrel Warlock Bard",oracle_text:"{3}{B}, Exile this card from your graveyard: Return another target creature card from your graveyard to your hand.",power:"2",toughness:"2",colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/faf226fa-ca09-4468-8804-87b2a7de2c66/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac79cf0e5-52dd-4af3-ab06-6cdaab526c23&unique=prints",collector_number:"84",digital:!1,rarity:"common",flavor_text:"A great actor can breathe new life into old material.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Tuan Duong Chu",artist_ids:["d84246f9-a536-485f-a21d-a237302ed100"],illustration_id:"009b7ba7-eba1-402f-9dc3-fbfbbfeb71ae",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11969,penny_rank:7921,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.03",usd_foil:"0.13",usd_etched:null,eur:"0.11",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668998&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBonebind%2BOrator",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBonebind%2BOrator",edhrec:"https://edhrec.com/route/?cc=Bonebind+Orator"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559762%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bonebind-Orator?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129413?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"82defb87-237f-4b77-9673-5bf00607148f",oracle_id:"be3c7e4c-81fd-49e7-8fb5-5eb83994dafd",multiverse_ids:[668999],mtgo_id:129415,arena_id:91621,tcgplayer_id:558694,cardmarket_id:777762,name:"Bonecache Overseer",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/82defb87-237f-4b77-9673-5bf00607148f",scryfall_uri:"https://scryfall.com/card/blb/85/bonecache-overseer?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/2/82defb87-237f-4b77-9673-5bf00607148f.jpg?1721426349",normal:"https://cards.scryfall.io/normal/front/8/2/82defb87-237f-4b77-9673-5bf00607148f.jpg?1721426349",large:"https://cards.scryfall.io/large/front/8/2/82defb87-237f-4b77-9673-5bf00607148f.jpg?1721426349",png:"https://cards.scryfall.io/png/front/8/2/82defb87-237f-4b77-9673-5bf00607148f.png?1721426349",art_crop:"https://cards.scryfall.io/art_crop/front/8/2/82defb87-237f-4b77-9673-5bf00607148f.jpg?1721426349",border_crop:"https://cards.scryfall.io/border_crop/front/8/2/82defb87-237f-4b77-9673-5bf00607148f.jpg?1721426349"},mana_cost:"{B}",cmc:1,type_line:"Creature — Squirrel Warlock",oracle_text:"{T}, Pay 1 life: Draw a card. Activate only if three or more cards left your graveyard this turn or if you've sacrificed a Food this turn.",power:"1",toughness:"1",colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/82defb87-237f-4b77-9673-5bf00607148f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abe3c7e4c-81fd-49e7-8fb5-5eb83994dafd&unique=prints",collector_number:"85",digital:!1,rarity:"uncommon",flavor_text:'"Bring me my harvest."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mila Pesic",artist_ids:["81c5ec23-220b-4efa-b7df-9e49dd371e8d"],illustration_id:"92a2975c-c934-4735-b168-f30a28bb22c4",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9555,penny_rank:6196,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.11",usd_foil:"0.17",usd_etched:null,eur:"0.17",eur_foil:"0.22",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668999&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBonecache%2BOverseer",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBonecache%2BOverseer",edhrec:"https://edhrec.com/route/?cc=Bonecache+Overseer"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558694%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bonecache-Overseer?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129415?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e200b8bf-f2f3-4157-8e04-02baf07a963e",oracle_id:"104baa4e-a3f3-45dc-979d-4c58b659ba1a",multiverse_ids:[669041],mtgo_id:129499,arena_id:91663,tcgplayer_id:558701,cardmarket_id:777776,name:"Brambleguard Captain",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e200b8bf-f2f3-4157-8e04-02baf07a963e",scryfall_uri:"https://scryfall.com/card/blb/127/brambleguard-captain?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/2/e200b8bf-f2f3-4157-8e04-02baf07a963e.jpg?1721426582",normal:"https://cards.scryfall.io/normal/front/e/2/e200b8bf-f2f3-4157-8e04-02baf07a963e.jpg?1721426582",large:"https://cards.scryfall.io/large/front/e/2/e200b8bf-f2f3-4157-8e04-02baf07a963e.jpg?1721426582",png:"https://cards.scryfall.io/png/front/e/2/e200b8bf-f2f3-4157-8e04-02baf07a963e.png?1721426582",art_crop:"https://cards.scryfall.io/art_crop/front/e/2/e200b8bf-f2f3-4157-8e04-02baf07a963e.jpg?1721426582",border_crop:"https://cards.scryfall.io/border_crop/front/e/2/e200b8bf-f2f3-4157-8e04-02baf07a963e.jpg?1721426582"},mana_cost:"{3}{R}",cmc:4,type_line:"Creature — Mouse Soldier",oracle_text:"At the beginning of combat on your turn, target creature you control gets +X/+0 until end of turn, where X is this creature's power.",power:"2",toughness:"3",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e200b8bf-f2f3-4157-8e04-02baf07a963e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A104baa4e-a3f3-45dc-979d-4c58b659ba1a&unique=prints",collector_number:"127",digital:!1,rarity:"uncommon",flavor_text:'"We sought adventure and found calamity. Forward, so we may meet both with courage!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Quintin Gleim",artist_ids:["25fbebee-23a4-4431-bd63-14ec82f3c2b9"],illustration_id:"1d68e58f-a7b0-402a-b75f-c57246ed49da",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11844,preview:{source:"NicolaiBolas",source_uri:"https://www.youtube.com/watch?v=-OjO2cnxP_Y",previewed_at:"2024-07-10"},prices:{usd:"0.07",usd_foil:"0.08",usd_etched:null,eur:"0.10",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669041&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBrambleguard%2BCaptain",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBrambleguard%2BCaptain",edhrec:"https://edhrec.com/route/?cc=Brambleguard+Captain"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558701%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Brambleguard-Captain?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129499?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"bac9f6f8-6797-4580-9fc4-9a825872e017",oracle_id:"bc9c7e1a-5155-431a-be21-fcbd18718980",multiverse_ids:[669079],mtgo_id:129575,arena_id:91701,tcgplayer_id:558692,cardmarket_id:779412,name:"Brambleguard Veteran",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/bac9f6f8-6797-4580-9fc4-9a825872e017",scryfall_uri:"https://scryfall.com/card/blb/165/brambleguard-veteran?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/a/bac9f6f8-6797-4580-9fc4-9a825872e017.jpg?1721426774",normal:"https://cards.scryfall.io/normal/front/b/a/bac9f6f8-6797-4580-9fc4-9a825872e017.jpg?1721426774",large:"https://cards.scryfall.io/large/front/b/a/bac9f6f8-6797-4580-9fc4-9a825872e017.jpg?1721426774",png:"https://cards.scryfall.io/png/front/b/a/bac9f6f8-6797-4580-9fc4-9a825872e017.png?1721426774",art_crop:"https://cards.scryfall.io/art_crop/front/b/a/bac9f6f8-6797-4580-9fc4-9a825872e017.jpg?1721426774",border_crop:"https://cards.scryfall.io/border_crop/front/b/a/bac9f6f8-6797-4580-9fc4-9a825872e017.jpg?1721426774"},mana_cost:"{1}{G}{G}",cmc:3,type_line:"Creature — Raccoon Warrior",oracle_text:"Whenever you expend 4, Raccoons you control get +1/+1 and gain vigilance until end of turn. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)",power:"3",toughness:"4",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/bac9f6f8-6797-4580-9fc4-9a825872e017/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abc9c7e1a-5155-431a-be21-fcbd18718980&unique=prints",collector_number:"165",digital:!1,rarity:"uncommon",flavor_text:'"Why should the birdfolk get the best view?"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakob Eirich",artist_ids:["982d9460-f9b9-42f6-8a25-47afa7df22e9"],illustration_id:"2a8eea48-858b-435e-bd35-f683f8deb007",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13777,preview:{source:"Anna Margaret",source_uri:"https://x.com/itsannamargaret/status/1811139538615415281/photo/1",previewed_at:"2024-07-10"},prices:{usd:"0.07",usd_foil:"0.06",usd_etched:null,eur:"0.18",eur_foil:"0.14",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669079&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBrambleguard%2BVeteran",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBrambleguard%2BVeteran",edhrec:"https://edhrec.com/route/?cc=Brambleguard+Veteran"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558692%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Brambleguard-Veteran?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129575?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b8dd4693-424d-4d6e-86cf-24401a23d6b1",oracle_id:"1f5b7f4c-a3d2-4472-80f5-8504562fc7fd",multiverse_ids:[668917],mtgo_id:129251,arena_id:91539,tcgplayer_id:558592,cardmarket_id:777544,name:"Brave-Kin Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b8dd4693-424d-4d6e-86cf-24401a23d6b1",scryfall_uri:"https://scryfall.com/card/blb/3/brave-kin-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/8/b8dd4693-424d-4d6e-86cf-24401a23d6b1.jpg?1721425770",normal:"https://cards.scryfall.io/normal/front/b/8/b8dd4693-424d-4d6e-86cf-24401a23d6b1.jpg?1721425770",large:"https://cards.scryfall.io/large/front/b/8/b8dd4693-424d-4d6e-86cf-24401a23d6b1.jpg?1721425770",png:"https://cards.scryfall.io/png/front/b/8/b8dd4693-424d-4d6e-86cf-24401a23d6b1.png?1721425770",art_crop:"https://cards.scryfall.io/art_crop/front/b/8/b8dd4693-424d-4d6e-86cf-24401a23d6b1.jpg?1721425770",border_crop:"https://cards.scryfall.io/border_crop/front/b/8/b8dd4693-424d-4d6e-86cf-24401a23d6b1.jpg?1721425770"},mana_cost:"{W}",cmc:1,type_line:"Creature — Rabbit Mouse",oracle_text:"{1}, {T}: Target creature gets +1/+1 until end of turn. Activate only as a sorcery.",power:"1",toughness:"1",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b8dd4693-424d-4d6e-86cf-24401a23d6b1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A1f5b7f4c-a3d2-4472-80f5-8504562fc7fd&unique=prints",collector_number:"3",digital:!1,rarity:"common",flavor_text:'"Did you bring everything you need for the journey?" the rabbit asked. "Of course I did! I brought you, my dear pine cone," the mouse replied.',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Devin Platts",artist_ids:["f7a750ec-c87e-4259-a686-434b4720f1a1"],illustration_id:"d532e949-c38f-4112-922e-47223a1e004a",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11154,penny_rank:4913,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.08",usd_foil:"0.07",usd_etched:null,eur:"0.07",eur_foil:"0.13",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668917&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBrave-Kin%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBrave-Kin%2BDuo",edhrec:"https://edhrec.com/route/?cc=Brave-Kin+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558592%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Brave-Kin-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129251?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"78b55a58-c669-4dc6-aa63-5d9dff52e613",oracle_id:"f93dc9cc-3dd2-4e2b-b972-217ab9d89dfe",multiverse_ids:[669042],mtgo_id:129501,arena_id:91664,tcgplayer_id:558702,cardmarket_id:777772,name:"Brazen Collector",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/78b55a58-c669-4dc6-aa63-5d9dff52e613",scryfall_uri:"https://scryfall.com/card/blb/128/brazen-collector?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/8/78b55a58-c669-4dc6-aa63-5d9dff52e613.jpg?1721426587",normal:"https://cards.scryfall.io/normal/front/7/8/78b55a58-c669-4dc6-aa63-5d9dff52e613.jpg?1721426587",large:"https://cards.scryfall.io/large/front/7/8/78b55a58-c669-4dc6-aa63-5d9dff52e613.jpg?1721426587",png:"https://cards.scryfall.io/png/front/7/8/78b55a58-c669-4dc6-aa63-5d9dff52e613.png?1721426587",art_crop:"https://cards.scryfall.io/art_crop/front/7/8/78b55a58-c669-4dc6-aa63-5d9dff52e613.jpg?1721426587",border_crop:"https://cards.scryfall.io/border_crop/front/7/8/78b55a58-c669-4dc6-aa63-5d9dff52e613.jpg?1721426587"},mana_cost:"{1}{R}",cmc:2,type_line:"Creature — Raccoon Rogue",oracle_text:`First strike
Whenever this creature attacks, add {R}. Until end of turn, you don't lose this mana as steps and phases end.`,power:"2",toughness:"1",colors:["R"],color_identity:["R"],keywords:["First strike"],produced_mana:["R"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/78b55a58-c669-4dc6-aa63-5d9dff52e613/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af93dc9cc-3dd2-4e2b-b972-217ab9d89dfe&unique=prints",collector_number:"128",digital:!1,rarity:"uncommon",flavor_text:"Risks taken to retrieve a prize only increase its value.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aldo Domínguez",artist_ids:["b701136e-c578-4a48-9383-1c2a5381ecb2"],illustration_id:"ac74f179-7448-4970-97ca-137abd2d0d50",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11589,preview:{source:"BrujajaGaming",source_uri:"https://twitter.com/BrujajaGaming/status/1811091814381678696",previewed_at:"2024-07-10"},prices:{usd:"0.07",usd_foil:"0.10",usd_etched:null,eur:"0.13",eur_foil:"0.16",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669042&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBrazen%2BCollector",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBrazen%2BCollector",edhrec:"https://edhrec.com/route/?cc=Brazen+Collector"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558702%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Brazen-Collector?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129501?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"390c96b3-68da-4a42-89ab-d9ccc79ce0dd",oracle_id:"d627996b-cbcd-4162-bd13-9ab286de64d1",multiverse_ids:[670750],mtgo_id:128999,arena_id:91798,tcgplayer_id:541384,name:"Bria, Riptide Rogue",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/390c96b3-68da-4a42-89ab-d9ccc79ce0dd",scryfall_uri:"https://scryfall.com/card/blb/379/bria-riptide-rogue?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/9/390c96b3-68da-4a42-89ab-d9ccc79ce0dd.jpg?1724104634",normal:"https://cards.scryfall.io/normal/front/3/9/390c96b3-68da-4a42-89ab-d9ccc79ce0dd.jpg?1724104634",large:"https://cards.scryfall.io/large/front/3/9/390c96b3-68da-4a42-89ab-d9ccc79ce0dd.jpg?1724104634",png:"https://cards.scryfall.io/png/front/3/9/390c96b3-68da-4a42-89ab-d9ccc79ce0dd.png?1724104634",art_crop:"https://cards.scryfall.io/art_crop/front/3/9/390c96b3-68da-4a42-89ab-d9ccc79ce0dd.jpg?1724104634",border_crop:"https://cards.scryfall.io/border_crop/front/3/9/390c96b3-68da-4a42-89ab-d9ccc79ce0dd.jpg?1724104634"},mana_cost:"{2}{U}{R}",cmc:4,type_line:"Legendary Creature — Otter Rogue",oracle_text:`Prowess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)
Other creatures you control have prowess. (If a creature has multiple instances of prowess, each triggers separately.)
Whenever you cast a noncreature spell, target creature you control can't be blocked this turn.`,power:"3",toughness:"3",colors:["R","U"],color_identity:["R","U"],keywords:["Prowess"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!1,finishes:["foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/390c96b3-68da-4a42-89ab-d9ccc79ce0dd/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ad627996b-cbcd-4162-bd13-9ab286de64d1&unique=prints",collector_number:"379",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Borja Pindado",artist_ids:["1624a1a8-3492-4c0b-9abc-83dcf2653111"],illustration_id:"8a4d01fd-0ec9-419f-a2ad-fd26e468fcdd",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:4054,prices:{usd:null,usd_foil:"11.63",usd_etched:null,eur:null,eur_foil:null,tix:"5.65"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670750&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBria%252C%2BRiptide%2BRogue",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBria%252C%2BRiptide%2BRogue",edhrec:"https://edhrec.com/route/?cc=Bria%2C+Riptide+Rogue"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F541384%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Bria%2C+Riptide+Rogue&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/128999?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"df7fea2e-7414-4bc8-adb0-9342e174c009",oracle_id:"f1d2f437-d474-4617-aea6-102daa5e5a15",multiverse_ids:[668918],mtgo_id:129253,arena_id:91540,tcgplayer_id:558682,cardmarket_id:777771,name:"Brightblade Stoat",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/df7fea2e-7414-4bc8-adb0-9342e174c009",scryfall_uri:"https://scryfall.com/card/blb/4/brightblade-stoat?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/f/df7fea2e-7414-4bc8-adb0-9342e174c009.jpg?1721425778",normal:"https://cards.scryfall.io/normal/front/d/f/df7fea2e-7414-4bc8-adb0-9342e174c009.jpg?1721425778",large:"https://cards.scryfall.io/large/front/d/f/df7fea2e-7414-4bc8-adb0-9342e174c009.jpg?1721425778",png:"https://cards.scryfall.io/png/front/d/f/df7fea2e-7414-4bc8-adb0-9342e174c009.png?1721425778",art_crop:"https://cards.scryfall.io/art_crop/front/d/f/df7fea2e-7414-4bc8-adb0-9342e174c009.jpg?1721425778",border_crop:"https://cards.scryfall.io/border_crop/front/d/f/df7fea2e-7414-4bc8-adb0-9342e174c009.jpg?1721425778"},mana_cost:"{1}{W}",cmc:2,type_line:"Creature — Weasel Soldier",oracle_text:"First strike, lifelink",power:"2",toughness:"2",colors:["W"],color_identity:["W"],keywords:["Lifelink","First strike"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/df7fea2e-7414-4bc8-adb0-9342e174c009/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af1d2f437-d474-4617-aea6-102daa5e5a15&unique=prints",collector_number:"4",digital:!1,rarity:"uncommon",flavor_text:"Brightblades are trained to constantly mind the sun's position, adjusting the angle of their dagger to maximize glare.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Lius Lasahido",artist_ids:["0a0e9093-ce44-4a69-93a7-09b63e7c330d"],illustration_id:"93ec7d0e-4c62-4af6-be2d-5cde71f36d0a",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13531,penny_rank:4589,preview:{source:"Voxy",source_uri:"https://x.com/VoxyTwitch/status/1811098103866609941",previewed_at:"2024-07-10"},prices:{usd:"0.05",usd_foil:"0.07",usd_etched:null,eur:"0.10",eur_foil:"0.21",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668918&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBrightblade%2BStoat",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBrightblade%2BStoat",edhrec:"https://edhrec.com/route/?cc=Brightblade+Stoat"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558682%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Brightblade-Stoat?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129253?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"15fa581a-724e-4196-a9a3-ff84c54bdb7d",oracle_id:"0b19082c-8f80-448b-9e1b-0f324a159409",multiverse_ids:[668919],mtgo_id:129255,arena_id:91541,tcgplayer_id:559637,cardmarket_id:778523,name:"Builder's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/15fa581a-724e-4196-a9a3-ff84c54bdb7d",scryfall_uri:"https://scryfall.com/card/blb/5/builders-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",normal:"https://cards.scryfall.io/normal/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",large:"https://cards.scryfall.io/large/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",png:"https://cards.scryfall.io/png/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.png?1739650809",art_crop:"https://cards.scryfall.io/art_crop/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",border_crop:"https://cards.scryfall.io/border_crop/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809"},mana_cost:"{1}{W}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
When this Class enters, create a 0/4 white Wall creature token with defender.
{W}: Level 2
Whenever one or more noncreature, nonland permanents you control enter, put a +1/+1 counter on target creature you control.
{4}{W}: Level 3
When this Class becomes level 3, return target noncreature, nonland permanent card from your graveyard to the battlefield.`,colors:["W"],color_identity:["W"],keywords:[],all_parts:[{object:"related_card",id:"15fa581a-724e-4196-a9a3-ff84c54bdb7d",component:"combo_piece",name:"Builder's Talent",type_line:"Enchantment — Class",uri:"https://api.scryfall.com/cards/15fa581a-724e-4196-a9a3-ff84c54bdb7d"},{object:"related_card",id:"229a41de-91dd-4696-bfc1-10d702787c3e",component:"token",name:"Wall",type_line:"Token Creature — Wall",uri:"https://api.scryfall.com/cards/229a41de-91dd-4696-bfc1-10d702787c3e"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/15fa581a-724e-4196-a9a3-ff84c54bdb7d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0b19082c-8f80-448b-9e1b-0f324a159409&unique=prints",collector_number:"5",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Ovidio Cartagena",artist_ids:["7de94887-7f8b-4642-922c-1fa6b4568d07"],illustration_id:"5902a882-1e62-4015-92e2-e89978a5f6aa",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11542,penny_rank:3829,preview:{source:"Invictus Forge",source_uri:"https://www.facebook.com/invictusforgeMY/posts/pfbid086TaRez3sxUBhyy4DDBJQxXwNs1ZULKhwkcEsRnuVk7PR5CfmUw1aMcnHCgtnLc9l",previewed_at:"2024-07-16"},prices:{usd:"0.13",usd_foil:"0.11",usd_etched:null,eur:"0.09",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668919&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBuilder%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBuilder%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Builder%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559637%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Builders-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129255?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"5f0affd5-5dcd-4dd1-a694-37a9aedf4084",oracle_id:"6e152529-64b4-472c-8e50-99095af6af99",multiverse_ids:[669158],mtgo_id:129733,arena_id:91780,tcgplayer_id:559052,cardmarket_id:778129,name:"Bumbleflower's Sharepot",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/5f0affd5-5dcd-4dd1-a694-37a9aedf4084",scryfall_uri:"https://scryfall.com/card/blb/244/bumbleflowers-sharepot?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/f/5f0affd5-5dcd-4dd1-a694-37a9aedf4084.jpg?1721427267",normal:"https://cards.scryfall.io/normal/front/5/f/5f0affd5-5dcd-4dd1-a694-37a9aedf4084.jpg?1721427267",large:"https://cards.scryfall.io/large/front/5/f/5f0affd5-5dcd-4dd1-a694-37a9aedf4084.jpg?1721427267",png:"https://cards.scryfall.io/png/front/5/f/5f0affd5-5dcd-4dd1-a694-37a9aedf4084.png?1721427267",art_crop:"https://cards.scryfall.io/art_crop/front/5/f/5f0affd5-5dcd-4dd1-a694-37a9aedf4084.jpg?1721427267",border_crop:"https://cards.scryfall.io/border_crop/front/5/f/5f0affd5-5dcd-4dd1-a694-37a9aedf4084.jpg?1721427267"},mana_cost:"{2}",cmc:2,type_line:"Artifact",oracle_text:`When this artifact enters, create a Food token. (It's an artifact with "{2}, {T}, Sacrifice this token: You gain 3 life.")
{5}, {T}, Sacrifice this artifact: Destroy target nonland permanent. Activate only as a sorcery.`,colors:[],color_identity:[],keywords:["Food"],all_parts:[{object:"related_card",id:"5f0affd5-5dcd-4dd1-a694-37a9aedf4084",component:"combo_piece",name:"Bumbleflower's Sharepot",type_line:"Artifact",uri:"https://api.scryfall.com/cards/5f0affd5-5dcd-4dd1-a694-37a9aedf4084"},{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/5f0affd5-5dcd-4dd1-a694-37a9aedf4084/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A6e152529-64b4-472c-8e50-99095af6af99&unique=prints",collector_number:"244",digital:!1,rarity:"common",flavor_text:'"I may have overestimated the portions."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"J.P. Targete",artist_ids:["75a48ae5-d1d0-4a98-98a8-2ca5fd9e0cd9"],illustration_id:"8d6ef511-ccac-4453-a208-8aa8ed5a96f3",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10970,penny_rank:6891,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.03",usd_foil:"0.07",usd_etched:null,eur:"0.13",eur_foil:"0.25",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669158&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBumbleflower%2527s%2BSharepot",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBumbleflower%2527s%2BSharepot",edhrec:"https://edhrec.com/route/?cc=Bumbleflower%27s+Sharepot"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559052%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bumbleflowers-Sharepot?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129733?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"87138ace-3594-499e-bad5-ec76148613ea",oracle_id:"f293da27-e42d-4e87-8b61-d3c27e4c6d71",multiverse_ids:[669120],mtgo_id:129657,arena_id:91742,tcgplayer_id:559057,cardmarket_id:778101,name:"Burrowguard Mentor",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/87138ace-3594-499e-bad5-ec76148613ea",scryfall_uri:"https://scryfall.com/card/blb/206/burrowguard-mentor?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/7/87138ace-3594-499e-bad5-ec76148613ea.jpg?1721427007",normal:"https://cards.scryfall.io/normal/front/8/7/87138ace-3594-499e-bad5-ec76148613ea.jpg?1721427007",large:"https://cards.scryfall.io/large/front/8/7/87138ace-3594-499e-bad5-ec76148613ea.jpg?1721427007",png:"https://cards.scryfall.io/png/front/8/7/87138ace-3594-499e-bad5-ec76148613ea.png?1721427007",art_crop:"https://cards.scryfall.io/art_crop/front/8/7/87138ace-3594-499e-bad5-ec76148613ea.jpg?1721427007",border_crop:"https://cards.scryfall.io/border_crop/front/8/7/87138ace-3594-499e-bad5-ec76148613ea.jpg?1721427007"},mana_cost:"{G}{W}",cmc:2,type_line:"Creature — Rabbit Soldier",oracle_text:`Trample
Burrowguard Mentor's power and toughness are each equal to the number of creatures you control.`,power:"*",toughness:"*",colors:["G","W"],color_identity:["G","W"],keywords:["Trample"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/87138ace-3594-499e-bad5-ec76148613ea/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af293da27-e42d-4e87-8b61-d3c27e4c6d71&unique=prints",collector_number:"206",digital:!1,rarity:"uncommon",flavor_text:`"On your paws! I've been fighting in these fields for more seasons than you've had hot dinners!"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Dmitry Burmak",artist_ids:["9872f5c0-274a-48ce-a9ad-6f0d5654e29c"],illustration_id:"396e0ad5-31dd-475c-9298-186a7c3a464b",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7690,penny_rank:4914,preview:{source:"Voxy",source_uri:"https://twitter.com/VoxyTwitch/status/1811467809206980779",previewed_at:"2024-07-11"},prices:{usd:"0.04",usd_foil:"0.14",usd_etched:null,eur:"0.07",eur_foil:"0.83",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669120&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBurrowguard%2BMentor",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBurrowguard%2BMentor",edhrec:"https://edhrec.com/route/?cc=Burrowguard+Mentor"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559057%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Burrowguard-Mentor?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129657?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0de60cf7-fa82-4b6f-9f88-6590fba5c863",oracle_id:"5436bb0d-b5c7-43a9-8b3f-67cdc0dd0381",multiverse_ids:[669080],mtgo_id:129577,arena_id:91702,tcgplayer_id:559116,cardmarket_id:778342,name:"Bushy Bodyguard",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0de60cf7-fa82-4b6f-9f88-6590fba5c863",scryfall_uri:"https://scryfall.com/card/blb/166/bushy-bodyguard?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/d/0de60cf7-fa82-4b6f-9f88-6590fba5c863.jpg?1721426775",normal:"https://cards.scryfall.io/normal/front/0/d/0de60cf7-fa82-4b6f-9f88-6590fba5c863.jpg?1721426775",large:"https://cards.scryfall.io/large/front/0/d/0de60cf7-fa82-4b6f-9f88-6590fba5c863.jpg?1721426775",png:"https://cards.scryfall.io/png/front/0/d/0de60cf7-fa82-4b6f-9f88-6590fba5c863.png?1721426775",art_crop:"https://cards.scryfall.io/art_crop/front/0/d/0de60cf7-fa82-4b6f-9f88-6590fba5c863.jpg?1721426775",border_crop:"https://cards.scryfall.io/border_crop/front/0/d/0de60cf7-fa82-4b6f-9f88-6590fba5c863.jpg?1721426775"},mana_cost:"{1}{G}",cmc:2,type_line:"Creature — Squirrel Warrior",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
When this creature enters, you may forage. If you do, put two +1/+1 counters on it. (To forage, exile three cards from your graveyard or sacrifice a Food.)`,power:"2",toughness:"1",colors:["G"],color_identity:["G"],keywords:["Forage","Offspring"],all_parts:[{object:"related_card",id:"0de60cf7-fa82-4b6f-9f88-6590fba5c863",component:"combo_piece",name:"Bushy Bodyguard",type_line:"Creature — Squirrel Warrior",uri:"https://api.scryfall.com/cards/0de60cf7-fa82-4b6f-9f88-6590fba5c863"},{object:"related_card",id:"c247d48f-d1e9-4b28-b372-bf4eea67cb8c",component:"token",name:"Bushy Bodyguard",type_line:"Token Creature — Squirrel Warrior",uri:"https://api.scryfall.com/cards/c247d48f-d1e9-4b28-b372-bf4eea67cb8c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0de60cf7-fa82-4b6f-9f88-6590fba5c863/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5436bb0d-b5c7-43a9-8b3f-67cdc0dd0381&unique=prints",collector_number:"166",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Andrea Piparo",artist_ids:["e8ab9604-1b3c-4bb5-9290-dfb3fd3cf01d"],illustration_id:"178f591e-857c-414b-afd1-d5c876b985ed",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12015,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.11",usd_foil:"0.14",usd_etched:null,eur:"0.17",eur_foil:"0.29",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669080&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBushy%2BBodyguard",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBushy%2BBodyguard",edhrec:"https://edhrec.com/route/?cc=Bushy+Bodyguard"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559116%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Bushy-Bodyguard?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129577?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"6441abd3-320b-424a-9753-61e3581fe1a9",oracle_id:"e9c6e4e6-0c3f-4048-93e6-161a1221ea36",multiverse_ids:[670751],mtgo_id:129001,arena_id:91799,tcgplayer_id:541388,name:"Byrke, Long Ear of the Law",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/6441abd3-320b-424a-9753-61e3581fe1a9",scryfall_uri:"https://scryfall.com/card/blb/380/byrke-long-ear-of-the-law?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/4/6441abd3-320b-424a-9753-61e3581fe1a9.jpg?1726396879",normal:"https://cards.scryfall.io/normal/front/6/4/6441abd3-320b-424a-9753-61e3581fe1a9.jpg?1726396879",large:"https://cards.scryfall.io/large/front/6/4/6441abd3-320b-424a-9753-61e3581fe1a9.jpg?1726396879",png:"https://cards.scryfall.io/png/front/6/4/6441abd3-320b-424a-9753-61e3581fe1a9.png?1726396879",art_crop:"https://cards.scryfall.io/art_crop/front/6/4/6441abd3-320b-424a-9753-61e3581fe1a9.jpg?1726396879",border_crop:"https://cards.scryfall.io/border_crop/front/6/4/6441abd3-320b-424a-9753-61e3581fe1a9.jpg?1726396879"},mana_cost:"{4}{G}{W}",cmc:6,type_line:"Legendary Creature — Rabbit Soldier",oracle_text:`Vigilance
When Byrke enters, put a +1/+1 counter on each of up to two target creatures.
Whenever a creature you control with a +1/+1 counter on it attacks, double the number of +1/+1 counters on it.`,power:"4",toughness:"4",colors:["G","W"],color_identity:["G","W"],keywords:["Vigilance"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!1,finishes:["foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/6441abd3-320b-424a-9753-61e3581fe1a9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ae9c6e4e6-0c3f-4048-93e6-161a1221ea36&unique=prints",collector_number:"380",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Manuel Castañón",artist_ids:["35f11eeb-36ff-4059-bb70-d1274f5bd858"],illustration_id:"3c00f5ae-b4d6-40f1-922d-f908ad340492",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:7104,prices:{usd:null,usd_foil:"1.59",usd_etched:null,eur:null,eur_foil:null,tix:"2.68"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670751&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DByrke%252C%2BLong%2BEar%2Bof%2Bthe%2BLaw",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DByrke%252C%2BLong%2BEar%2Bof%2Bthe%2BLaw",edhrec:"https://edhrec.com/route/?cc=Byrke%2C+Long+Ear+of+the+Law"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F541388%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Byrke%2C+Long+Ear+of+the+Law&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129001?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"f41fc718-641b-4f32-a8c1-3e5591a05bf8",oracle_id:"a864b032-6e1a-4211-ad6e-54a5a5c7321b",multiverse_ids:[669043],mtgo_id:129503,arena_id:91665,tcgplayer_id:559070,cardmarket_id:778102,name:"Byway Barterer",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/f41fc718-641b-4f32-a8c1-3e5591a05bf8",scryfall_uri:"https://scryfall.com/card/blb/129/byway-barterer?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/4/f41fc718-641b-4f32-a8c1-3e5591a05bf8.jpg?1721426591",normal:"https://cards.scryfall.io/normal/front/f/4/f41fc718-641b-4f32-a8c1-3e5591a05bf8.jpg?1721426591",large:"https://cards.scryfall.io/large/front/f/4/f41fc718-641b-4f32-a8c1-3e5591a05bf8.jpg?1721426591",png:"https://cards.scryfall.io/png/front/f/4/f41fc718-641b-4f32-a8c1-3e5591a05bf8.png?1721426591",art_crop:"https://cards.scryfall.io/art_crop/front/f/4/f41fc718-641b-4f32-a8c1-3e5591a05bf8.jpg?1721426591",border_crop:"https://cards.scryfall.io/border_crop/front/f/4/f41fc718-641b-4f32-a8c1-3e5591a05bf8.jpg?1721426591"},mana_cost:"{2}{R}",cmc:3,type_line:"Creature — Raccoon Rogue",oracle_text:`Menace
Whenever you expend 4, you may discard your hand. If you do, draw two cards. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)`,power:"3",toughness:"3",colors:["R"],color_identity:["R"],keywords:["Menace"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/f41fc718-641b-4f32-a8c1-3e5591a05bf8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa864b032-6e1a-4211-ad6e-54a5a5c7321b&unique=prints",collector_number:"129",digital:!1,rarity:"rare",flavor_text:`"This trinket has saved my hide more times than I can count. I couldn't possibly let it go for less than say . . . four acorns."`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Ryan Pancoast",artist_ids:["89cc9475-dda2-4d13-bf88-54b92867a25c"],illustration_id:"66a32957-1973-4a44-a305-f0090855c5cb",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12054,penny_rank:11078,preview:{source:"k0ppk0pp",source_uri:"https://twitter.com/k0ppk0pp/status/1811500013081756088",previewed_at:"2024-07-11"},prices:{usd:"0.11",usd_foil:"0.17",usd_etched:null,eur:"0.20",eur_foil:"0.28",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669043&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DByway%2BBarterer",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DByway%2BBarterer",edhrec:"https://edhrec.com/route/?cc=Byway+Barterer"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559070%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Byway-Barterer?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129503?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"dfd977dc-a7c3-4d0a-aca7-b25bd154e963",oracle_id:"06ccec61-27d2-4079-80b5-29ebd3a980ee",multiverse_ids:[669081],mtgo_id:129579,arena_id:91703,tcgplayer_id:558407,cardmarket_id:777613,name:"Cache Grab",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/dfd977dc-a7c3-4d0a-aca7-b25bd154e963",scryfall_uri:"https://scryfall.com/card/blb/167/cache-grab?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",normal:"https://cards.scryfall.io/normal/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",large:"https://cards.scryfall.io/large/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",png:"https://cards.scryfall.io/png/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.png?1721426785",art_crop:"https://cards.scryfall.io/art_crop/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",border_crop:"https://cards.scryfall.io/border_crop/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785"},mana_cost:"{1}{G}",cmc:2,type_line:"Instant",oracle_text:'Mill four cards. You may put a permanent card from among the cards milled this way into your hand. If you control a Squirrel or returned a Squirrel card to your hand this way, create a Food token. (To mill four cards, put the top four cards of your library into your graveyard. A Food token is an artifact with "{2}, {T}, Sacrifice this token: You gain 3 life.")',colors:["G"],color_identity:["G"],keywords:["Food","Mill"],all_parts:[{object:"related_card",id:"dfd977dc-a7c3-4d0a-aca7-b25bd154e963",component:"combo_piece",name:"Cache Grab",type_line:"Instant",uri:"https://api.scryfall.com/cards/dfd977dc-a7c3-4d0a-aca7-b25bd154e963"},{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/dfd977dc-a7c3-4d0a-aca7-b25bd154e963/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A06ccec61-27d2-4079-80b5-29ebd3a980ee&unique=prints",collector_number:"167",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Loïc Canavaggia",artist_ids:["f1e2e10b-08be-4e92-8f50-95a72850a811"],illustration_id:"8f1fd037-a96c-4477-affc-08f94d67a589",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6529,penny_rank:1887,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.11",usd_foil:"0.18",usd_etched:null,eur:"0.08",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669081&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCache%2BGrab",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCache%2BGrab",edhrec:"https://edhrec.com/route/?cc=Cache+Grab"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558407%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Cache-Grab?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129579?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"178bc8b2-ffa0-4549-aead-aacb3db3cf19",oracle_id:"d605d9d1-c01a-4ef6-89f9-06fae8cd57e6",multiverse_ids:[668957],mtgo_id:129331,arena_id:91579,tcgplayer_id:559502,cardmarket_id:778489,name:"Calamitous Tide",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/178bc8b2-ffa0-4549-aead-aacb3db3cf19",scryfall_uri:"https://scryfall.com/card/blb/43/calamitous-tide?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/7/178bc8b2-ffa0-4549-aead-aacb3db3cf19.jpg?1721431233",normal:"https://cards.scryfall.io/normal/front/1/7/178bc8b2-ffa0-4549-aead-aacb3db3cf19.jpg?1721431233",large:"https://cards.scryfall.io/large/front/1/7/178bc8b2-ffa0-4549-aead-aacb3db3cf19.jpg?1721431233",png:"https://cards.scryfall.io/png/front/1/7/178bc8b2-ffa0-4549-aead-aacb3db3cf19.png?1721431233",art_crop:"https://cards.scryfall.io/art_crop/front/1/7/178bc8b2-ffa0-4549-aead-aacb3db3cf19.jpg?1721431233",border_crop:"https://cards.scryfall.io/border_crop/front/1/7/178bc8b2-ffa0-4549-aead-aacb3db3cf19.jpg?1721431233"},mana_cost:"{4}{U}{U}",cmc:6,type_line:"Sorcery",oracle_text:"Return up to two target creatures to their owners' hands. Draw two cards, then discard a card.",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/178bc8b2-ffa0-4549-aead-aacb3db3cf19/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ad605d9d1-c01a-4ef6-89f9-06fae8cd57e6&unique=prints",collector_number:"43",digital:!1,rarity:"uncommon",flavor_text:"Zoraline turned her attention to the shore. Helga and Ral's conversation quickly faded from her mind as she watched the gigantic wave approach.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Samuele Bandini",artist_ids:["f16f5903-990f-4ffe-88fb-fd54d0d8752b"],illustration_id:"900576b0-16aa-4bee-afd1-312a198de60d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:15219,preview:{source:"Press Start",source_uri:"https://press-start.com.au/news/2024/07/16/magic-the-gathering-mtg-bloomburrow-calamitous-tide/",previewed_at:"2024-07-15"},prices:{usd:"0.06",usd_foil:"0.06",usd_etched:null,eur:"0.12",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668957&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCalamitous%2BTide",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCalamitous%2BTide",edhrec:"https://edhrec.com/route/?cc=Calamitous+Tide"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559502%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Calamitous-Tide?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129331?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"2c16eaec-924c-42f6-9fea-07edd7ed93b9",oracle_id:"312c7a7b-2084-42b0-9b13-0a6d3e43a73d",multiverse_ids:[669121],mtgo_id:129659,arena_id:91743,tcgplayer_id:558320,cardmarket_id:777659,name:"Camellia, the Seedmiser",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/2c16eaec-924c-42f6-9fea-07edd7ed93b9",scryfall_uri:"https://scryfall.com/card/blb/207/camellia-the-seedmiser?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",normal:"https://cards.scryfall.io/normal/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",large:"https://cards.scryfall.io/large/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",png:"https://cards.scryfall.io/png/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.png?1721933903",art_crop:"https://cards.scryfall.io/art_crop/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",border_crop:"https://cards.scryfall.io/border_crop/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903"},mana_cost:"{1}{B}{G}",cmc:3,type_line:"Legendary Creature — Squirrel Warlock",oracle_text:`Menace
Other Squirrels you control have menace.
Whenever you sacrifice one or more Foods, create a 1/1 green Squirrel creature token.
{2}, Forage: Put a +1/+1 counter on each other Squirrel you control. (To forage, exile three cards from your graveyard or sacrifice a Food.)`,power:"3",toughness:"3",colors:["B","G"],color_identity:["B","G"],keywords:["Forage","Menace"],all_parts:[{object:"related_card",id:"44f59ece-1ba5-422b-820d-e80c83f46290",component:"combo_piece",name:"Camellia, the Seedmiser",type_line:"Legendary Creature — Squirrel Warlock",uri:"https://api.scryfall.com/cards/44f59ece-1ba5-422b-820d-e80c83f46290"},{object:"related_card",id:"5a6ec62e-0e9b-4312-bfe8-cc85d76fd9e0",component:"token",name:"Squirrel",type_line:"Token Creature — Squirrel",uri:"https://api.scryfall.com/cards/5a6ec62e-0e9b-4312-bfe8-cc85d76fd9e0"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/2c16eaec-924c-42f6-9fea-07edd7ed93b9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A312c7a7b-2084-42b0-9b13-0a6d3e43a73d&unique=prints",collector_number:"207",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Steve Prescott",artist_ids:["a1139fb8-41f5-4a9e-9a74-f662e1a23b35"],illustration_id:"9da16d35-aa5b-40db-badf-78e6f77c96df",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3454,penny_rank:4348,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.93",usd_foil:"1.47",usd_etched:null,eur:"0.98",eur_foil:"0.99",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669121&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCamellia%252C%2Bthe%2BSeedmiser",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCamellia%252C%2Bthe%2BSeedmiser",edhrec:"https://edhrec.com/route/?cc=Camellia%2C+the+Seedmiser"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558320%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Camellia-the-Seedmiser?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129659?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ad5ea98a-e36e-4ab9-b4da-cc572f3777db",oracle_id:"c97957a2-8310-4cff-8aad-871b7901d124",multiverse_ids:[668920],mtgo_id:129257,arena_id:91542,tcgplayer_id:559638,cardmarket_id:778525,name:"Caretaker's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ad5ea98a-e36e-4ab9-b4da-cc572f3777db",scryfall_uri:"https://scryfall.com/card/blb/6/caretakers-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/d/ad5ea98a-e36e-4ab9-b4da-cc572f3777db.jpg?1721425789",normal:"https://cards.scryfall.io/normal/front/a/d/ad5ea98a-e36e-4ab9-b4da-cc572f3777db.jpg?1721425789",large:"https://cards.scryfall.io/large/front/a/d/ad5ea98a-e36e-4ab9-b4da-cc572f3777db.jpg?1721425789",png:"https://cards.scryfall.io/png/front/a/d/ad5ea98a-e36e-4ab9-b4da-cc572f3777db.png?1721425789",art_crop:"https://cards.scryfall.io/art_crop/front/a/d/ad5ea98a-e36e-4ab9-b4da-cc572f3777db.jpg?1721425789",border_crop:"https://cards.scryfall.io/border_crop/front/a/d/ad5ea98a-e36e-4ab9-b4da-cc572f3777db.jpg?1721425789"},mana_cost:"{2}{W}",cmc:3,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
Whenever one or more tokens you control enter, draw a card. This ability triggers only once each turn.
{W}: Level 2
When this Class becomes level 2, create a token that's a copy of target token you control.
{3}{W}: Level 3
Creature tokens you control get +2/+2.`,colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ad5ea98a-e36e-4ab9-b4da-cc572f3777db/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac97957a2-8310-4cff-8aad-871b7901d124&unique=prints",collector_number:"6",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Lindsey Look",artist_ids:["95bc132d-37aa-4063-8ed8-04d489e826cd"],illustration_id:"ddaa7b7b-fa05-44a2-af84-2ebd7c12f657",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1076,preview:{source:"IGN",source_uri:"https://es.ign.com/magic-the-gathering-6/205528/news/exclusiva-revelamos-cartas-de-bloomburrow-la-nueva-expansion-de-magic-the-gathering",previewed_at:"2024-07-17"},prices:{usd:"10.48",usd_foil:"12.68",usd_etched:null,eur:"10.58",eur_foil:"11.59",tix:"0.79"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668920&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCaretaker%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCaretaker%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Caretaker%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559638%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Caretakers-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129257?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"eb03bb4f-8b4b-417e-bfc6-294cd2186b2e",oracle_id:"5fe3aabd-3271-41bf-ae50-f6efaba7c4ae",multiverse_ids:[668921],mtgo_id:129259,arena_id:91543,tcgplayer_id:558593,cardmarket_id:776453,name:"Carrot Cake",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e",scryfall_uri:"https://scryfall.com/card/blb/7/carrot-cake?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",normal:"https://cards.scryfall.io/normal/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",large:"https://cards.scryfall.io/large/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",png:"https://cards.scryfall.io/png/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.png?1721425791",art_crop:"https://cards.scryfall.io/art_crop/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",border_crop:"https://cards.scryfall.io/border_crop/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791"},mana_cost:"{1}{W}",cmc:2,type_line:"Artifact — Food",oracle_text:`When this artifact enters and when you sacrifice it, create a 1/1 white Rabbit creature token and scry 1. (Look at the top card of your library. You may put that card on the bottom.)
{2}, {T}, Sacrifice this artifact: You gain 3 life.`,colors:["W"],color_identity:["W"],keywords:["Scry"],all_parts:[{object:"related_card",id:"eb03bb4f-8b4b-417e-bfc6-294cd2186b2e",component:"combo_piece",name:"Carrot Cake",type_line:"Artifact — Food",uri:"https://api.scryfall.com/cards/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e"},{object:"related_card",id:"81de52ef-7515-4958-abea-fb8ebdcef93c",component:"token",name:"Rabbit",type_line:"Token Creature — Rabbit",uri:"https://api.scryfall.com/cards/81de52ef-7515-4958-abea-fb8ebdcef93c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5fe3aabd-3271-41bf-ae50-f6efaba7c4ae&unique=prints",collector_number:"7",digital:!1,rarity:"common",flavor_text:`"Secret ingredient? What do you think?"
—Ms. Bumbleflower`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Forrest Imel",artist_ids:["64fc383d-de34-4151-87d6-27b82e58086e"],illustration_id:"8ae92ab9-6cc5-4173-8707-f5ba2853cfdf",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8955,penny_rank:1534,preview:{source:"Wizards of the Coast",source_uri:"https://twitter.com/wizards_magic/status/1806657538680926493",previewed_at:"2024-06-28"},prices:{usd:"0.04",usd_foil:"0.13",usd_etched:null,eur:"0.09",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668921&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCarrot%2BCake",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCarrot%2BCake",edhrec:"https://edhrec.com/route/?cc=Carrot+Cake"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558593%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Carrot-Cake?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129259?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7d171802-2604-45a5-a0f2-ab5afa1db5d5",oracle_id:"cb33edaf-b604-48b8-8b9c-d6e462a8bebb",multiverse_ids:[670763],arena_id:91801,tcgplayer_id:559549,name:"Charmed Sleep",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7d171802-2604-45a5-a0f2-ab5afa1db5d5",scryfall_uri:"https://scryfall.com/card/blb/388/charmed-sleep?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/d/7d171802-2604-45a5-a0f2-ab5afa1db5d5.jpg?1721428082",normal:"https://cards.scryfall.io/normal/front/7/d/7d171802-2604-45a5-a0f2-ab5afa1db5d5.jpg?1721428082",large:"https://cards.scryfall.io/large/front/7/d/7d171802-2604-45a5-a0f2-ab5afa1db5d5.jpg?1721428082",png:"https://cards.scryfall.io/png/front/7/d/7d171802-2604-45a5-a0f2-ab5afa1db5d5.png?1721428082",art_crop:"https://cards.scryfall.io/art_crop/front/7/d/7d171802-2604-45a5-a0f2-ab5afa1db5d5.jpg?1721428082",border_crop:"https://cards.scryfall.io/border_crop/front/7/d/7d171802-2604-45a5-a0f2-ab5afa1db5d5.jpg?1721428082"},mana_cost:"{1}{U}{U}",cmc:3,type_line:"Enchantment — Aura",oracle_text:`Enchant creature
When this Aura enters, tap enchanted creature.
Enchanted creature doesn't untap during its controller's untap step.`,colors:["U"],color_identity:["U"],keywords:["Enchant"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7d171802-2604-45a5-a0f2-ab5afa1db5d5/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Acb33edaf-b604-48b8-8b9c-d6e462a8bebb&unique=prints",collector_number:"388",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Titus Lunter",artist_ids:["b11e6b3a-f4ca-4cf1-8fd7-475696de5f5c"],illustration_id:"d2eabe56-8a61-4902-a5ba-4de280f955ca",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:14256,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.06",usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670763&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCharmed%2BSleep",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCharmed%2BSleep",edhrec:"https://edhrec.com/route/?cc=Charmed+Sleep"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559549%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Charmed+Sleep&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards?affiliate_id=scryfall&data%5Bsearch%5D=Charmed+Sleep&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b2ea10dd-21ea-4622-be27-79d03a802b85",oracle_id:"46e8bec0-1a09-4e6e-b78a-7ba161686ca9",multiverse_ids:[669122],mtgo_id:129661,arena_id:91744,tcgplayer_id:558401,cardmarket_id:777682,name:"Cindering Cutthroat",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b2ea10dd-21ea-4622-be27-79d03a802b85",scryfall_uri:"https://scryfall.com/card/blb/208/cindering-cutthroat?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/2/b2ea10dd-21ea-4622-be27-79d03a802b85.jpg?1721427019",normal:"https://cards.scryfall.io/normal/front/b/2/b2ea10dd-21ea-4622-be27-79d03a802b85.jpg?1721427019",large:"https://cards.scryfall.io/large/front/b/2/b2ea10dd-21ea-4622-be27-79d03a802b85.jpg?1721427019",png:"https://cards.scryfall.io/png/front/b/2/b2ea10dd-21ea-4622-be27-79d03a802b85.png?1721427019",art_crop:"https://cards.scryfall.io/art_crop/front/b/2/b2ea10dd-21ea-4622-be27-79d03a802b85.jpg?1721427019",border_crop:"https://cards.scryfall.io/border_crop/front/b/2/b2ea10dd-21ea-4622-be27-79d03a802b85.jpg?1721427019"},mana_cost:"{2}{B/R}",cmc:3,type_line:"Creature — Lizard Assassin",oracle_text:`This creature enters with a +1/+1 counter on it if an opponent lost life this turn.
{1}{B/R}: This creature gains menace until end of turn. (It can't be blocked except by two or more creatures.)`,power:"3",toughness:"2",colors:["B","R"],color_identity:["B","R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b2ea10dd-21ea-4622-be27-79d03a802b85/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A46e8bec0-1a09-4e6e-b78a-7ba161686ca9&unique=prints",collector_number:"208",digital:!1,rarity:"common",flavor_text:`"We don't 'play' with fire. It is strictly business."`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Wayne Reynolds",artist_ids:["afc47cec-3ccc-404e-a8c6-4d83dd504271"],illustration_id:"23139abb-5901-4886-829f-28310340df85",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12505,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.04",usd_foil:"0.12",usd_etched:null,eur:"0.05",eur_foil:"0.10",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669122&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCindering%2BCutthroat",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCindering%2BCutthroat",edhrec:"https://edhrec.com/route/?cc=Cindering+Cutthroat"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558401%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Cindering-Cutthroat?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129661?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7028130c-c91d-4bf7-b0b0-450f71107d7a",oracle_id:"57ce5ebd-cfac-4bb9-b010-04d0c285be27",multiverse_ids:[669123],mtgo_id:129663,arena_id:91745,tcgplayer_id:558580,cardmarket_id:777683,name:"Clement, the Worrywort",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7028130c-c91d-4bf7-b0b0-450f71107d7a",scryfall_uri:"https://scryfall.com/card/blb/209/clement-the-worrywort?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/0/7028130c-c91d-4bf7-b0b0-450f71107d7a.jpg?1721427029",normal:"https://cards.scryfall.io/normal/front/7/0/7028130c-c91d-4bf7-b0b0-450f71107d7a.jpg?1721427029",large:"https://cards.scryfall.io/large/front/7/0/7028130c-c91d-4bf7-b0b0-450f71107d7a.jpg?1721427029",png:"https://cards.scryfall.io/png/front/7/0/7028130c-c91d-4bf7-b0b0-450f71107d7a.png?1721427029",art_crop:"https://cards.scryfall.io/art_crop/front/7/0/7028130c-c91d-4bf7-b0b0-450f71107d7a.jpg?1721427029",border_crop:"https://cards.scryfall.io/border_crop/front/7/0/7028130c-c91d-4bf7-b0b0-450f71107d7a.jpg?1721427029"},mana_cost:"{1}{G}{U}",cmc:3,type_line:"Legendary Creature — Frog Druid",oracle_text:`Vigilance
Whenever Clement or another creature you control enters, return up to one target creature you control with lesser mana value to its owner's hand.
Frogs you control have "{T}: Add {G} or {U}. Spend this mana only to cast a creature spell."`,power:"3",toughness:"3",colors:["G","U"],color_identity:["G","U"],keywords:["Vigilance"],produced_mana:["G","U"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7028130c-c91d-4bf7-b0b0-450f71107d7a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A57ce5ebd-cfac-4bb9-b010-04d0c285be27&unique=prints",collector_number:"209",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Ekaterina Burmak",artist_ids:["2a9f3780-fcc8-4ec5-b403-ee1d1370d3b4"],illustration_id:"cfb001c6-ecb6-4c9c-baad-d3a9aa675c4f",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7348,penny_rank:11083,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/news/making-magic/the-bloom-of-the-burrow-part-1",previewed_at:"2024-07-09"},prices:{usd:"0.22",usd_foil:"0.30",usd_etched:null,eur:"0.22",eur_foil:"0.45",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669123&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DClement%252C%2Bthe%2BWorrywort",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DClement%252C%2Bthe%2BWorrywort",edhrec:"https://edhrec.com/route/?cc=Clement%2C+the+Worrywort"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558580%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Clement-the-Worrywort?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129663?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"662d3bcc-65f3-4c69-8ea1-446870a1193d",oracle_id:"446db5a4-21b0-44c1-b12b-d365313dd67a",multiverse_ids:[669082],mtgo_id:129581,arena_id:91704,tcgplayer_id:559074,cardmarket_id:778120,name:"Clifftop Lookout",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/662d3bcc-65f3-4c69-8ea1-446870a1193d",scryfall_uri:"https://scryfall.com/card/blb/168/clifftop-lookout?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/6/662d3bcc-65f3-4c69-8ea1-446870a1193d.jpg?1721426786",normal:"https://cards.scryfall.io/normal/front/6/6/662d3bcc-65f3-4c69-8ea1-446870a1193d.jpg?1721426786",large:"https://cards.scryfall.io/large/front/6/6/662d3bcc-65f3-4c69-8ea1-446870a1193d.jpg?1721426786",png:"https://cards.scryfall.io/png/front/6/6/662d3bcc-65f3-4c69-8ea1-446870a1193d.png?1721426786",art_crop:"https://cards.scryfall.io/art_crop/front/6/6/662d3bcc-65f3-4c69-8ea1-446870a1193d.jpg?1721426786",border_crop:"https://cards.scryfall.io/border_crop/front/6/6/662d3bcc-65f3-4c69-8ea1-446870a1193d.jpg?1721426786"},mana_cost:"{2}{G}",cmc:3,type_line:"Creature — Frog Scout",oracle_text:`Reach
When this creature enters, reveal cards from the top of your library until you reveal a land card. Put that card onto the battlefield tapped and the rest on the bottom of your library in a random order.`,power:"1",toughness:"2",colors:["G"],color_identity:["G"],keywords:["Reach"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/662d3bcc-65f3-4c69-8ea1-446870a1193d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A446db5a4-21b0-44c1-b12b-d365313dd67a&unique=prints",collector_number:"168",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"John Thacker",artist_ids:["38ee615a-e59f-4e2e-b894-2b74c6e75541"],illustration_id:"b35a0c8e-d89e-4df1-9567-baf0db3b8660",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3724,penny_rank:2598,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.11",usd_foil:"0.28",usd_etched:null,eur:"0.13",eur_foil:"0.26",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669082&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DClifftop%2BLookout",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DClifftop%2BLookout",edhrec:"https://edhrec.com/route/?cc=Clifftop+Lookout"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559074%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Clifftop-Lookout?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129581?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"96d5de3e-0440-4dd1-899c-ab40c0752343",oracle_id:"27a91ebd-39f4-432d-b6cc-cd86b4a3979a",multiverse_ids:[669e3],mtgo_id:129417,arena_id:91622,tcgplayer_id:559671,cardmarket_id:778519,name:"Coiling Rebirth",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/96d5de3e-0440-4dd1-899c-ab40c0752343",scryfall_uri:"https://scryfall.com/card/blb/86/coiling-rebirth?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/9/6/96d5de3e-0440-4dd1-899c-ab40c0752343.jpg?1721426359",normal:"https://cards.scryfall.io/normal/front/9/6/96d5de3e-0440-4dd1-899c-ab40c0752343.jpg?1721426359",large:"https://cards.scryfall.io/large/front/9/6/96d5de3e-0440-4dd1-899c-ab40c0752343.jpg?1721426359",png:"https://cards.scryfall.io/png/front/9/6/96d5de3e-0440-4dd1-899c-ab40c0752343.png?1721426359",art_crop:"https://cards.scryfall.io/art_crop/front/9/6/96d5de3e-0440-4dd1-899c-ab40c0752343.jpg?1721426359",border_crop:"https://cards.scryfall.io/border_crop/front/9/6/96d5de3e-0440-4dd1-899c-ab40c0752343.jpg?1721426359"},mana_cost:"{3}{B}{B}",cmc:5,type_line:"Sorcery",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
Return target creature card from your graveyard to the battlefield. Then if the gift was promised and that creature isn't legendary, create a token that's a copy of that creature, except it's 1/1.`,colors:["B"],color_identity:["B"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/96d5de3e-0440-4dd1-899c-ab40c0752343/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A27a91ebd-39f4-432d-b6cc-cd86b4a3979a&unique=prints",collector_number:"86",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Rovina Cai",artist_ids:["b64d0979-4028-4409-8285-eec2fa282dd4"],illustration_id:"5914b1f8-6e8f-48c7-96ad-b861782f16ac",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4883,penny_rank:7364,preview:{source:"MTG ROOM",source_uri:"https://www.youtube.com/watch?v=kkcWYlaqZmc",previewed_at:"2024-07-16"},prices:{usd:"0.22",usd_foil:"0.33",usd_etched:null,eur:"0.32",eur_foil:"0.37",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669000&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCoiling%2BRebirth",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCoiling%2BRebirth",edhrec:"https://edhrec.com/route/?cc=Coiling+Rebirth"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559671%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Coiling-Rebirth?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129417?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c2cad902-ffd2-4bab-b114-b4b6df2ac6b3",oracle_id:"05c5ee65-651b-4bfb-b57f-305026507135",multiverse_ids:[670767],arena_id:91805,tcgplayer_id:559540,name:"Colossification",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3",scryfall_uri:"https://scryfall.com/card/blb/392/colossification?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/2/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3.jpg?1721428099",normal:"https://cards.scryfall.io/normal/front/c/2/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3.jpg?1721428099",large:"https://cards.scryfall.io/large/front/c/2/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3.jpg?1721428099",png:"https://cards.scryfall.io/png/front/c/2/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3.png?1721428099",art_crop:"https://cards.scryfall.io/art_crop/front/c/2/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3.jpg?1721428099",border_crop:"https://cards.scryfall.io/border_crop/front/c/2/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3.jpg?1721428099"},mana_cost:"{5}{G}{G}",cmc:7,type_line:"Enchantment — Aura",oracle_text:`Enchant creature
When this Aura enters, tap enchanted creature.
Enchanted creature gets +20/+20.`,colors:["G"],color_identity:["G"],keywords:["Enchant"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c2cad902-ffd2-4bab-b114-b4b6df2ac6b3/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A05c5ee65-651b-4bfb-b57f-305026507135&unique=prints",collector_number:"392",digital:!1,rarity:"rare",flavor_text:`"Turns out the case of the flattened outpost and the case of the missing kitten *were* related."
—Endris, Drannith magistrate`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Johan Grenier",artist_ids:["465e38b8-7eed-4d22-a6d2-d3603ee0c00b"],illustration_id:"c7b82a6a-f727-44b2-a8a8-a4444e98a5c6",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:3338,penny_rank:3544,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/news/announcements/bloomburrow-starter-kit-decklists",previewed_at:"2024-07-16"},prices:{usd:"0.24",usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670767&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DColossification",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DColossification",edhrec:"https://edhrec.com/route/?cc=Colossification"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559540%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Colossification&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards?affiliate_id=scryfall&data%5Bsearch%5D=Colossification&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"2f373dd6-2412-453c-85ba-10230dfe473a",oracle_id:"0369627e-3b83-4e5b-a8af-a99f944443b3",multiverse_ids:[669044],mtgo_id:129505,arena_id:91667,tcgplayer_id:558703,cardmarket_id:777792,name:"Conduct Electricity",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/2f373dd6-2412-453c-85ba-10230dfe473a",scryfall_uri:"https://scryfall.com/card/blb/130/conduct-electricity?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/f/2f373dd6-2412-453c-85ba-10230dfe473a.jpg?1721426597",normal:"https://cards.scryfall.io/normal/front/2/f/2f373dd6-2412-453c-85ba-10230dfe473a.jpg?1721426597",large:"https://cards.scryfall.io/large/front/2/f/2f373dd6-2412-453c-85ba-10230dfe473a.jpg?1721426597",png:"https://cards.scryfall.io/png/front/2/f/2f373dd6-2412-453c-85ba-10230dfe473a.png?1721426597",art_crop:"https://cards.scryfall.io/art_crop/front/2/f/2f373dd6-2412-453c-85ba-10230dfe473a.jpg?1721426597",border_crop:"https://cards.scryfall.io/border_crop/front/2/f/2f373dd6-2412-453c-85ba-10230dfe473a.jpg?1721426597"},mana_cost:"{4}{R}",cmc:5,type_line:"Instant",oracle_text:"Conduct Electricity deals 6 damage to target creature and 2 damage to up to one target creature token.",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/2f373dd6-2412-453c-85ba-10230dfe473a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0369627e-3b83-4e5b-a8af-a99f944443b3&unique=prints",collector_number:"130",digital:!1,rarity:"common",flavor_text:'"Give me a lightning rod, something I can use as a channel!" Ral called above the mayhem. Nodding, Finneas drew a copperleaf arrow from his emptying quiver and shot.',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Chris Seaman",artist_ids:["b9c49463-6f55-4039-9d32-c02a658af100"],illustration_id:"6c917582-94de-4439-9b46-077ec59ef851",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:14804,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.01",usd_foil:"0.03",usd_etched:null,eur:"0.05",eur_foil:"0.08",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669044&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DConduct%2BElectricity",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DConduct%2BElectricity",edhrec:"https://edhrec.com/route/?cc=Conduct+Electricity"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558703%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Conduct-Electricity?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129505?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e50acc41-3517-42db-b1d3-1bdfd7294d84",oracle_id:"b548578c-4910-402c-8e78-498924e0a9be",multiverse_ids:[669001],mtgo_id:129419,arena_id:91623,tcgplayer_id:558696,cardmarket_id:777760,name:"Consumed by Greed",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e50acc41-3517-42db-b1d3-1bdfd7294d84",scryfall_uri:"https://scryfall.com/card/blb/87/consumed-by-greed?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/5/e50acc41-3517-42db-b1d3-1bdfd7294d84.jpg?1721426362",normal:"https://cards.scryfall.io/normal/front/e/5/e50acc41-3517-42db-b1d3-1bdfd7294d84.jpg?1721426362",large:"https://cards.scryfall.io/large/front/e/5/e50acc41-3517-42db-b1d3-1bdfd7294d84.jpg?1721426362",png:"https://cards.scryfall.io/png/front/e/5/e50acc41-3517-42db-b1d3-1bdfd7294d84.png?1721426362",art_crop:"https://cards.scryfall.io/art_crop/front/e/5/e50acc41-3517-42db-b1d3-1bdfd7294d84.jpg?1721426362",border_crop:"https://cards.scryfall.io/border_crop/front/e/5/e50acc41-3517-42db-b1d3-1bdfd7294d84.jpg?1721426362"},mana_cost:"{1}{B}{B}",cmc:3,type_line:"Instant",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
Target opponent sacrifices a creature with the greatest power among creatures they control. If the gift was promised, return target creature card from your graveyard to your hand.`,colors:["B"],color_identity:["B"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e50acc41-3517-42db-b1d3-1bdfd7294d84/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab548578c-4910-402c-8e78-498924e0a9be&unique=prints",collector_number:"87",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mathias Kollros",artist_ids:["2ae0dd12-047c-4efb-80d7-bccc3bac5fba"],illustration_id:"61d8735f-ecd0-4d29-91af-4cbd1a529732",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8019,penny_rank:11084,preview:{source:"Lords of Limited",source_uri:"https://twitter.com/LordsofLimited/status/1811060983244173580",previewed_at:"2024-07-10"},prices:{usd:"0.11",usd_foil:"0.12",usd_etched:null,eur:"0.09",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669001&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DConsumed%2Bby%2BGreed",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DConsumed%2Bby%2BGreed",edhrec:"https://edhrec.com/route/?cc=Consumed+by+Greed"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558696%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Consumed-by-Greed?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129419?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c911a759-ed7b-452b-88a3-663478357610",oracle_id:"5ded56df-c7d5-4043-85df-410f47219faa",multiverse_ids:[669124],mtgo_id:129665,arena_id:91746,tcgplayer_id:558402,cardmarket_id:777684,name:"Corpseberry Cultivator",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c911a759-ed7b-452b-88a3-663478357610",scryfall_uri:"https://scryfall.com/card/blb/210/corpseberry-cultivator?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/9/c911a759-ed7b-452b-88a3-663478357610.jpg?1721427036",normal:"https://cards.scryfall.io/normal/front/c/9/c911a759-ed7b-452b-88a3-663478357610.jpg?1721427036",large:"https://cards.scryfall.io/large/front/c/9/c911a759-ed7b-452b-88a3-663478357610.jpg?1721427036",png:"https://cards.scryfall.io/png/front/c/9/c911a759-ed7b-452b-88a3-663478357610.png?1721427036",art_crop:"https://cards.scryfall.io/art_crop/front/c/9/c911a759-ed7b-452b-88a3-663478357610.jpg?1721427036",border_crop:"https://cards.scryfall.io/border_crop/front/c/9/c911a759-ed7b-452b-88a3-663478357610.jpg?1721427036"},mana_cost:"{1}{B/G}{B/G}",cmc:3,type_line:"Creature — Squirrel Warlock",oracle_text:`At the beginning of combat on your turn, you may forage. (Exile three cards from your graveyard or sacrifice a Food.)
Whenever you forage, put a +1/+1 counter on this creature.`,power:"2",toughness:"3",colors:["B","G"],color_identity:["B","G"],keywords:["Forage"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c911a759-ed7b-452b-88a3-663478357610/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5ded56df-c7d5-4043-85df-410f47219faa&unique=prints",collector_number:"210",digital:!1,rarity:"common",flavor_text:"A rare fruit grows from the corpses of Calamity Beasts, with nectar the flavor of strength and skin as fragile as life.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Izzy",artist_ids:["2c3d2473-ff5d-4309-8194-e0b2def2ab65"],illustration_id:"3c64f20f-00d3-4c1f-a9ec-682cabd25886",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11817,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.04",usd_foil:"0.06",usd_etched:null,eur:"0.10",eur_foil:"0.07",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669124&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCorpseberry%2BCultivator",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCorpseberry%2BCultivator",edhrec:"https://edhrec.com/route/?cc=Corpseberry+Cultivator"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558402%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Corpseberry-Cultivator?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129665?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"dc2c1de0-6233-469a-be72-a050b97d2c8f",oracle_id:"88bb91b5-2ccd-4ce9-8cd4-e54d63c12abf",multiverse_ids:[669045],mtgo_id:129507,arena_id:91666,tcgplayer_id:559072,cardmarket_id:778105,name:"Coruscation Mage",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/dc2c1de0-6233-469a-be72-a050b97d2c8f",scryfall_uri:"https://scryfall.com/card/blb/131/coruscation-mage?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/c/dc2c1de0-6233-469a-be72-a050b97d2c8f.jpg?1721426600",normal:"https://cards.scryfall.io/normal/front/d/c/dc2c1de0-6233-469a-be72-a050b97d2c8f.jpg?1721426600",large:"https://cards.scryfall.io/large/front/d/c/dc2c1de0-6233-469a-be72-a050b97d2c8f.jpg?1721426600",png:"https://cards.scryfall.io/png/front/d/c/dc2c1de0-6233-469a-be72-a050b97d2c8f.png?1721426600",art_crop:"https://cards.scryfall.io/art_crop/front/d/c/dc2c1de0-6233-469a-be72-a050b97d2c8f.jpg?1721426600",border_crop:"https://cards.scryfall.io/border_crop/front/d/c/dc2c1de0-6233-469a-be72-a050b97d2c8f.jpg?1721426600"},mana_cost:"{1}{R}",cmc:2,type_line:"Creature — Otter Wizard",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
Whenever you cast a noncreature spell, this creature deals 1 damage to each opponent.`,power:"2",toughness:"2",colors:["R"],color_identity:["R"],keywords:["Offspring"],all_parts:[{object:"related_card",id:"6674c208-4d8d-4833-bee2-bfc87c93049d",component:"token",name:"Coruscation Mage",type_line:"Token Creature — Otter Wizard",uri:"https://api.scryfall.com/cards/6674c208-4d8d-4833-bee2-bfc87c93049d"},{object:"related_card",id:"dc2c1de0-6233-469a-be72-a050b97d2c8f",component:"combo_piece",name:"Coruscation Mage",type_line:"Creature — Otter Wizard",uri:"https://api.scryfall.com/cards/dc2c1de0-6233-469a-be72-a050b97d2c8f"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/dc2c1de0-6233-469a-be72-a050b97d2c8f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A88bb91b5-2ccd-4ce9-8cd4-e54d63c12abf&unique=prints",collector_number:"131",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Gaboleps",artist_ids:["0c37cdfe-5651-4ae6-a3c8-e7153509f970"],illustration_id:"5d6f898c-93b9-4c5e-ab7e-b8f91e8dfded",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1601,penny_rank:3118,preview:{source:"WellPlayed",source_uri:"https://www.well-played.com.au/we-preview-the-cutest-little-lutrinae-coming-to-magic-the-gatherings-bloomburrow/",previewed_at:"2024-07-11"},prices:{usd:"0.31",usd_foil:"3.79",usd_etched:null,eur:"0.44",eur_foil:"1.04",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669045&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCoruscation%2BMage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCoruscation%2BMage",edhrec:"https://edhrec.com/route/?cc=Coruscation+Mage"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559072%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Coruscation-Mage?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129507?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"cab4539a-0157-4cbe-b50f-6e2575df74e9",oracle_id:"7a0bc265-6b40-48d6-a588-c9624df7d1bc",multiverse_ids:[669002],mtgo_id:129421,arena_id:91624,tcgplayer_id:559649,cardmarket_id:778517,name:"Cruelclaw's Heist",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/cab4539a-0157-4cbe-b50f-6e2575df74e9",scryfall_uri:"https://scryfall.com/card/blb/88/cruelclaws-heist?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/a/cab4539a-0157-4cbe-b50f-6e2575df74e9.jpg?1721426377",normal:"https://cards.scryfall.io/normal/front/c/a/cab4539a-0157-4cbe-b50f-6e2575df74e9.jpg?1721426377",large:"https://cards.scryfall.io/large/front/c/a/cab4539a-0157-4cbe-b50f-6e2575df74e9.jpg?1721426377",png:"https://cards.scryfall.io/png/front/c/a/cab4539a-0157-4cbe-b50f-6e2575df74e9.png?1721426377",art_crop:"https://cards.scryfall.io/art_crop/front/c/a/cab4539a-0157-4cbe-b50f-6e2575df74e9.jpg?1721426377",border_crop:"https://cards.scryfall.io/border_crop/front/c/a/cab4539a-0157-4cbe-b50f-6e2575df74e9.jpg?1721426377"},mana_cost:"{B}{B}",cmc:2,type_line:"Sorcery",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
Target opponent reveals their hand. You choose a nonland card from it. Exile that card. If the gift was promised, you may cast that card for as long as it remains exiled, and mana of any type can be spent to cast it.`,colors:["B"],color_identity:["B"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/cab4539a-0157-4cbe-b50f-6e2575df74e9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A7a0bc265-6b40-48d6-a588-c9624df7d1bc&unique=prints",collector_number:"88",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Brian Valeza",artist_ids:["bb2a9339-bbe4-445f-9736-3c43379ee076"],illustration_id:"2d2ee236-e4ed-465c-9245-06dffae276e4",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:6584,penny_rank:133,preview:{source:"iYingdi",source_uri:"https://www.bilibili.com/opus/955094542208466979",previewed_at:"2024-07-17"},prices:{usd:"0.29",usd_foil:"0.43",usd_etched:null,eur:"0.63",eur_foil:"0.87",tix:"0.09"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669002&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCruelclaw%2527s%2BHeist",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCruelclaw%2527s%2BHeist",edhrec:"https://edhrec.com/route/?cc=Cruelclaw%27s+Heist"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559649%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Cruelclaws-Heist?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129421?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"3c7b3b25-d4b3-4451-9f5c-6eb369541175",oracle_id:"93596258-bb44-4aa3-833d-9a0ab16b5ec1",multiverse_ids:[668922],mtgo_id:129261,arena_id:91544,tcgplayer_id:559740,cardmarket_id:778932,name:"Crumb and Get It",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/3c7b3b25-d4b3-4451-9f5c-6eb369541175",scryfall_uri:"https://scryfall.com/card/blb/8/crumb-and-get-it?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/c/3c7b3b25-d4b3-4451-9f5c-6eb369541175.jpg?1721429540",normal:"https://cards.scryfall.io/normal/front/3/c/3c7b3b25-d4b3-4451-9f5c-6eb369541175.jpg?1721429540",large:"https://cards.scryfall.io/large/front/3/c/3c7b3b25-d4b3-4451-9f5c-6eb369541175.jpg?1721429540",png:"https://cards.scryfall.io/png/front/3/c/3c7b3b25-d4b3-4451-9f5c-6eb369541175.png?1721429540",art_crop:"https://cards.scryfall.io/art_crop/front/3/c/3c7b3b25-d4b3-4451-9f5c-6eb369541175.jpg?1721429540",border_crop:"https://cards.scryfall.io/border_crop/front/3/c/3c7b3b25-d4b3-4451-9f5c-6eb369541175.jpg?1721429540"},mana_cost:"{W}",cmc:1,type_line:"Instant",oracle_text:`Gift a Food (You may promise an opponent a gift as you cast this spell. If you do, they create a Food token before its other effects. It's an artifact with "{2}, {T}, Sacrifice this token: You gain 3 life.")
Target creature you control gets +2/+2 until end of turn. If the gift was promised, that creature also gains indestructible until end of turn.`,colors:["W"],color_identity:["W"],keywords:["Gift","Food"],all_parts:[{object:"related_card",id:"3c7b3b25-d4b3-4451-9f5c-6eb369541175",component:"combo_piece",name:"Crumb and Get It",type_line:"Instant",uri:"https://api.scryfall.com/cards/3c7b3b25-d4b3-4451-9f5c-6eb369541175"},{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/3c7b3b25-d4b3-4451-9f5c-6eb369541175/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A93596258-bb44-4aa3-833d-9a0ab16b5ec1&unique=prints",collector_number:"8",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Justyna Dura",artist_ids:["d2340aef-8ca9-4e0d-864c-6a4e8d5e350a"],illustration_id:"b3ca0d48-5412-4bf1-a96c-2367948550b4",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7443,penny_rank:5252,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.06",usd_foil:"0.05",usd_etched:null,eur:"0.08",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668922&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCrumb%2Band%2BGet%2BIt",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCrumb%2Band%2BGet%2BIt",edhrec:"https://edhrec.com/route/?cc=Crumb+and+Get+It"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559740%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Crumb-and-Get-It?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129261?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"64653b4a-e139-45f9-a915-ab49afb6b795",oracle_id:"30af656a-99ab-4e0a-81fe-3cdb0ea6a0cc",multiverse_ids:[669083],mtgo_id:129583,arena_id:91705,tcgplayer_id:559117,cardmarket_id:778336,name:"Curious Forager",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/64653b4a-e139-45f9-a915-ab49afb6b795",scryfall_uri:"https://scryfall.com/card/blb/169/curious-forager?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/4/64653b4a-e139-45f9-a915-ab49afb6b795.jpg?1721426795",normal:"https://cards.scryfall.io/normal/front/6/4/64653b4a-e139-45f9-a915-ab49afb6b795.jpg?1721426795",large:"https://cards.scryfall.io/large/front/6/4/64653b4a-e139-45f9-a915-ab49afb6b795.jpg?1721426795",png:"https://cards.scryfall.io/png/front/6/4/64653b4a-e139-45f9-a915-ab49afb6b795.png?1721426795",art_crop:"https://cards.scryfall.io/art_crop/front/6/4/64653b4a-e139-45f9-a915-ab49afb6b795.jpg?1721426795",border_crop:"https://cards.scryfall.io/border_crop/front/6/4/64653b4a-e139-45f9-a915-ab49afb6b795.jpg?1721426795"},mana_cost:"{2}{G}",cmc:3,type_line:"Creature — Squirrel Druid",oracle_text:"When this creature enters, you may forage. When you do, return target permanent card from your graveyard to your hand. (To forage, exile three cards from your graveyard or sacrifice a Food.)",power:"3",toughness:"2",colors:["G"],color_identity:["G"],keywords:["Forage"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/64653b4a-e139-45f9-a915-ab49afb6b795/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A30af656a-99ab-4e0a-81fe-3cdb0ea6a0cc&unique=prints",collector_number:"169",digital:!1,rarity:"uncommon",flavor_text:"The bones of Calamity Beasts are sometimes buried in caches where their power can grow quietly.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mariah Tekulve",artist_ids:["1014b405-f81d-4f37-97df-e04ef62eacf4"],illustration_id:"65c75e1c-2b10-48b1-a12f-0de57d08c0bd",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10215,penny_rank:7926,preview:{source:"MTGRocks",source_uri:"https://mtgrocks.com/two-exclusive-bloomburrow-previews-showcase-potential-uncommon-bomb/",previewed_at:"2024-07-12"},prices:{usd:"0.11",usd_foil:"0.16",usd_etched:null,eur:"0.16",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669083&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCurious%2BForager",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCurious%2BForager",edhrec:"https://edhrec.com/route/?cc=Curious+Forager"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559117%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Curious-Forager?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129583?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"cea2bb34-e328-44fb-918a-72208c9457e4",oracle_id:"43ccc568-2509-49b6-99d7-c56900d1565a",multiverse_ids:[669003],mtgo_id:129423,arena_id:91625,tcgplayer_id:559765,cardmarket_id:778930,name:"Daggerfang Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/cea2bb34-e328-44fb-918a-72208c9457e4",scryfall_uri:"https://scryfall.com/card/blb/89/daggerfang-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/e/cea2bb34-e328-44fb-918a-72208c9457e4.jpg?1721426379",normal:"https://cards.scryfall.io/normal/front/c/e/cea2bb34-e328-44fb-918a-72208c9457e4.jpg?1721426379",large:"https://cards.scryfall.io/large/front/c/e/cea2bb34-e328-44fb-918a-72208c9457e4.jpg?1721426379",png:"https://cards.scryfall.io/png/front/c/e/cea2bb34-e328-44fb-918a-72208c9457e4.png?1721426379",art_crop:"https://cards.scryfall.io/art_crop/front/c/e/cea2bb34-e328-44fb-918a-72208c9457e4.jpg?1721426379",border_crop:"https://cards.scryfall.io/border_crop/front/c/e/cea2bb34-e328-44fb-918a-72208c9457e4.jpg?1721426379"},mana_cost:"{2}{B}",cmc:3,type_line:"Creature — Rat Squirrel",oracle_text:`Deathtouch
When this creature enters, you may mill two cards. (You may put the top two cards of your library into your graveyard.)`,power:"3",toughness:"2",colors:["B"],color_identity:["B"],keywords:["Mill","Deathtouch"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/cea2bb34-e328-44fb-918a-72208c9457e4/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A43ccc568-2509-49b6-99d7-c56900d1565a&unique=prints",collector_number:"89",digital:!1,rarity:"common",flavor_text:'"Should we act now or later?" the rat asked. "Both," whispered the squirrel.',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Nereida",artist_ids:["bcab6d8a-e3eb-4502-9cc4-23b92bc8c4d1"],illustration_id:"1f02c0dd-4fbc-4dc2-aa73-3f26047f499e",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10441,penny_rank:9662,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.06",usd_foil:"0.09",usd_etched:null,eur:"0.07",eur_foil:"0.11",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669003&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDaggerfang%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDaggerfang%2BDuo",edhrec:"https://edhrec.com/route/?cc=Daggerfang+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559765%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Daggerfang-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129423?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"19422406-0c1a-497e-bed1-708bc556491a",oracle_id:"e4d52559-7624-48b2-96ba-e52ada6c507a",multiverse_ids:[668958],mtgo_id:129333,arena_id:91580,tcgplayer_id:559135,cardmarket_id:778349,name:"Daring Waverider",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/19422406-0c1a-497e-bed1-708bc556491a",scryfall_uri:"https://scryfall.com/card/blb/44/daring-waverider?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/9/19422406-0c1a-497e-bed1-708bc556491a.jpg?1721426039",normal:"https://cards.scryfall.io/normal/front/1/9/19422406-0c1a-497e-bed1-708bc556491a.jpg?1721426039",large:"https://cards.scryfall.io/large/front/1/9/19422406-0c1a-497e-bed1-708bc556491a.jpg?1721426039",png:"https://cards.scryfall.io/png/front/1/9/19422406-0c1a-497e-bed1-708bc556491a.png?1721426039",art_crop:"https://cards.scryfall.io/art_crop/front/1/9/19422406-0c1a-497e-bed1-708bc556491a.jpg?1721426039",border_crop:"https://cards.scryfall.io/border_crop/front/1/9/19422406-0c1a-497e-bed1-708bc556491a.jpg?1721426039"},mana_cost:"{4}{U}{U}",cmc:6,type_line:"Creature — Otter Wizard",oracle_text:"When this creature enters, you may cast target instant or sorcery card with mana value 4 or less from your graveyard without paying its mana cost. If that spell would be put into your graveyard, exile it instead.",power:"4",toughness:"4",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/19422406-0c1a-497e-bed1-708bc556491a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ae4d52559-7624-48b2-96ba-e52ada6c507a&unique=prints",collector_number:"44",digital:!1,rarity:"uncommon",flavor_text:'"Look what I found!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Wisnu Tan",artist_ids:["f2d36cdd-a4e9-43ba-b2ad-9d514f6706d4"],illustration_id:"958dc91d-9dec-42b3-b518-a13069f6a44a",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9448,penny_rank:6896,preview:{source:"Jack Torrance",source_uri:"https://www.instagram.com/jacktorrance90/p/C9VLvi7iJmk/?img_index=1",previewed_at:"2024-07-12"},prices:{usd:"0.05",usd_foil:"0.07",usd_etched:null,eur:"0.18",eur_foil:"0.22",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668958&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDaring%2BWaverider",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDaring%2BWaverider",edhrec:"https://edhrec.com/route/?cc=Daring+Waverider"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559135%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Daring-Waverider?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129333?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1c603751-1e2b-4c8e-a8d2-5c0876e7254f",oracle_id:"67d2a021-a042-4e5f-b6e4-39cb35514794",multiverse_ids:[669004],mtgo_id:129425,arena_id:91626,tcgplayer_id:559055,cardmarket_id:778122,name:"Darkstar Augur",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1c603751-1e2b-4c8e-a8d2-5c0876e7254f",scryfall_uri:"https://scryfall.com/card/blb/90/darkstar-augur?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/c/1c603751-1e2b-4c8e-a8d2-5c0876e7254f.jpg?1721426387",normal:"https://cards.scryfall.io/normal/front/1/c/1c603751-1e2b-4c8e-a8d2-5c0876e7254f.jpg?1721426387",large:"https://cards.scryfall.io/large/front/1/c/1c603751-1e2b-4c8e-a8d2-5c0876e7254f.jpg?1721426387",png:"https://cards.scryfall.io/png/front/1/c/1c603751-1e2b-4c8e-a8d2-5c0876e7254f.png?1721426387",art_crop:"https://cards.scryfall.io/art_crop/front/1/c/1c603751-1e2b-4c8e-a8d2-5c0876e7254f.jpg?1721426387",border_crop:"https://cards.scryfall.io/border_crop/front/1/c/1c603751-1e2b-4c8e-a8d2-5c0876e7254f.jpg?1721426387"},mana_cost:"{2}{B}",cmc:3,type_line:"Creature — Bat Warlock",oracle_text:`Offspring {B} (You may pay an additional {B} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
Flying
At the beginning of your upkeep, reveal the top card of your library and put that card into your hand. You lose life equal to its mana value.`,power:"2",toughness:"3",colors:["B"],color_identity:["B"],keywords:["Flying","Offspring"],all_parts:[{object:"related_card",id:"01b55966-0910-484d-9b2b-0a59233c44c4",component:"token",name:"Darkstar Augur",type_line:"Token Creature — Bat Warlock",uri:"https://api.scryfall.com/cards/01b55966-0910-484d-9b2b-0a59233c44c4"},{object:"related_card",id:"8e9abfd1-59ba-46f4-ad1d-cf0e125dd4b9",component:"combo_piece",name:"Darkstar Augur",type_line:"Creature — Bat Warlock",uri:"https://api.scryfall.com/cards/8e9abfd1-59ba-46f4-ad1d-cf0e125dd4b9"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1c603751-1e2b-4c8e-a8d2-5c0876e7254f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A67d2a021-a042-4e5f-b6e4-39cb35514794&unique=prints",collector_number:"90",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aurore Folny",artist_ids:["02f6cdda-7a80-4184-853d-20b28d580868"],illustration_id:"6f90c6dc-d810-4c6c-960e-66dd780f62ef",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4492,penny_rank:2207,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.41",usd_foil:"0.82",usd_etched:null,eur:"0.61",eur_foil:"1.07",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669004&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDarkstar%2BAugur",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDarkstar%2BAugur",edhrec:"https://edhrec.com/route/?cc=Darkstar+Augur"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559055%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Darkstar-Augur?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129425?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8f72bfa0-efef-48ce-aff8-d5818ed71ba6",oracle_id:"37c06f89-db36-4937-9404-2b07cd22e1a6",multiverse_ids:[668923],mtgo_id:129263,arena_id:91545,tcgplayer_id:559037,cardmarket_id:778134,name:"Dawn's Truce",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8f72bfa0-efef-48ce-aff8-d5818ed71ba6",scryfall_uri:"https://scryfall.com/card/blb/9/dawns-truce?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/f/8f72bfa0-efef-48ce-aff8-d5818ed71ba6.jpg?1721425804",normal:"https://cards.scryfall.io/normal/front/8/f/8f72bfa0-efef-48ce-aff8-d5818ed71ba6.jpg?1721425804",large:"https://cards.scryfall.io/large/front/8/f/8f72bfa0-efef-48ce-aff8-d5818ed71ba6.jpg?1721425804",png:"https://cards.scryfall.io/png/front/8/f/8f72bfa0-efef-48ce-aff8-d5818ed71ba6.png?1721425804",art_crop:"https://cards.scryfall.io/art_crop/front/8/f/8f72bfa0-efef-48ce-aff8-d5818ed71ba6.jpg?1721425804",border_crop:"https://cards.scryfall.io/border_crop/front/8/f/8f72bfa0-efef-48ce-aff8-d5818ed71ba6.jpg?1721425804"},mana_cost:"{1}{W}",cmc:2,type_line:"Instant",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
You and permanents you control gain hexproof until end of turn. If the gift was promised, permanents you control also gain indestructible until end of turn.`,colors:["W"],color_identity:["W"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8f72bfa0-efef-48ce-aff8-d5818ed71ba6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A37c06f89-db36-4937-9404-2b07cd22e1a6&unique=prints",collector_number:"9",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Justin Gerard",artist_ids:["7548479e-1d37-42e1-ade0-9d88748f2f47"],illustration_id:"2d9af1e3-e6df-4f31-a98c-4968ecb1a281",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:620,penny_rank:8852,preview:{source:"Giraffa Nat",source_uri:"https://twitter.com/giraffanat/status/1811474111681397010",previewed_at:"2024-07-11"},prices:{usd:"7.15",usd_foil:"8.13",usd_etched:null,eur:"6.20",eur_foil:"6.99",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668923&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDawn%2527s%2BTruce",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDawn%2527s%2BTruce",edhrec:"https://edhrec.com/route/?cc=Dawn%27s+Truce"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559037%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dawns-Truce?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129263?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8739f1ac-2e57-4b52-a7ff-cc8df5936aad",oracle_id:"6d56bd32-f47a-4e54-a88e-b69d16283ea4",multiverse_ids:[668959],mtgo_id:129335,arena_id:91581,tcgplayer_id:559748,cardmarket_id:778935,name:"Dazzling Denial",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8739f1ac-2e57-4b52-a7ff-cc8df5936aad",scryfall_uri:"https://scryfall.com/card/blb/45/dazzling-denial?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/7/8739f1ac-2e57-4b52-a7ff-cc8df5936aad.jpg?1721426047",normal:"https://cards.scryfall.io/normal/front/8/7/8739f1ac-2e57-4b52-a7ff-cc8df5936aad.jpg?1721426047",large:"https://cards.scryfall.io/large/front/8/7/8739f1ac-2e57-4b52-a7ff-cc8df5936aad.jpg?1721426047",png:"https://cards.scryfall.io/png/front/8/7/8739f1ac-2e57-4b52-a7ff-cc8df5936aad.png?1721426047",art_crop:"https://cards.scryfall.io/art_crop/front/8/7/8739f1ac-2e57-4b52-a7ff-cc8df5936aad.jpg?1721426047",border_crop:"https://cards.scryfall.io/border_crop/front/8/7/8739f1ac-2e57-4b52-a7ff-cc8df5936aad.jpg?1721426047"},mana_cost:"{1}{U}",cmc:2,type_line:"Instant",oracle_text:"Counter target spell unless its controller pays {2}. If you control a Bird, counter that spell unless its controller pays {4} instead.",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8739f1ac-2e57-4b52-a7ff-cc8df5936aad/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A6d56bd32-f47a-4e54-a88e-b69d16283ea4&unique=prints",collector_number:"45",digital:!1,rarity:"common",flavor_text:"Maintaining brilliant plumage isn't just a statement. It's a tactic.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Kisung Koh",artist_ids:["435df22f-e389-4366-86e9-0b4c62fcde8b"],illustration_id:"fb06782c-b98f-452a-ab46-c187e262c588",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6036,penny_rank:815,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.07",usd_foil:"0.13",usd_etched:null,eur:"0.10",eur_foil:"0.12",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668959&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDazzling%2BDenial",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDazzling%2BDenial",edhrec:"https://edhrec.com/route/?cc=Dazzling+Denial"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559748%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dazzling-Denial?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129335?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"666aefc2-44e0-4c27-88d5-7906f245a71f",oracle_id:"07634620-a83a-4ca0-8a60-2a21368a2661",multiverse_ids:[668924],mtgo_id:129265,arena_id:91546,tcgplayer_id:558685,cardmarket_id:777761,name:"Dewdrop Cure",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/666aefc2-44e0-4c27-88d5-7906f245a71f",scryfall_uri:"https://scryfall.com/card/blb/10/dewdrop-cure?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/6/666aefc2-44e0-4c27-88d5-7906f245a71f.jpg?1721425815",normal:"https://cards.scryfall.io/normal/front/6/6/666aefc2-44e0-4c27-88d5-7906f245a71f.jpg?1721425815",large:"https://cards.scryfall.io/large/front/6/6/666aefc2-44e0-4c27-88d5-7906f245a71f.jpg?1721425815",png:"https://cards.scryfall.io/png/front/6/6/666aefc2-44e0-4c27-88d5-7906f245a71f.png?1721425815",art_crop:"https://cards.scryfall.io/art_crop/front/6/6/666aefc2-44e0-4c27-88d5-7906f245a71f.jpg?1721425815",border_crop:"https://cards.scryfall.io/border_crop/front/6/6/666aefc2-44e0-4c27-88d5-7906f245a71f.jpg?1721425815"},mana_cost:"{2}{W}",cmc:3,type_line:"Sorcery",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
Return up to two target creature cards each with mana value 2 or less from your graveyard to the battlefield. If the gift was promised, instead return up to three target creature cards each with mana value 2 or less from your graveyard to the battlefield.`,colors:["W"],color_identity:["W"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/666aefc2-44e0-4c27-88d5-7906f245a71f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A07634620-a83a-4ca0-8a60-2a21368a2661&unique=prints",collector_number:"10",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Chris Rallis",artist_ids:["a8e7b854-b15a-421a-b66d-6e68187ae285"],illustration_id:"d350ecb5-3a3e-4251-82c8-63525af2a54d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8216,penny_rank:2684,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.15",usd_foil:"0.25",usd_etched:null,eur:"0.14",eur_foil:"0.31",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668924&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDewdrop%2BCure",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDewdrop%2BCure",edhrec:"https://edhrec.com/route/?cc=Dewdrop+Cure"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558685%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dewdrop-Cure?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129265?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"f1931f22-974c-43ad-911e-684bf3f9995d",oracle_id:"a45065e9-951a-4c6d-80b6-bd86a49f7439",multiverse_ids:[668960],mtgo_id:129337,arena_id:91582,tcgplayer_id:559749,cardmarket_id:778933,name:"Dire Downdraft",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/f1931f22-974c-43ad-911e-684bf3f9995d",scryfall_uri:"https://scryfall.com/card/blb/46/dire-downdraft?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/1/f1931f22-974c-43ad-911e-684bf3f9995d.jpg?1721426060",normal:"https://cards.scryfall.io/normal/front/f/1/f1931f22-974c-43ad-911e-684bf3f9995d.jpg?1721426060",large:"https://cards.scryfall.io/large/front/f/1/f1931f22-974c-43ad-911e-684bf3f9995d.jpg?1721426060",png:"https://cards.scryfall.io/png/front/f/1/f1931f22-974c-43ad-911e-684bf3f9995d.png?1721426060",art_crop:"https://cards.scryfall.io/art_crop/front/f/1/f1931f22-974c-43ad-911e-684bf3f9995d.jpg?1721426060",border_crop:"https://cards.scryfall.io/border_crop/front/f/1/f1931f22-974c-43ad-911e-684bf3f9995d.jpg?1721426060"},mana_cost:"{3}{U}",cmc:4,type_line:"Instant",oracle_text:`This spell costs {1} less to cast if it targets an attacking or tapped creature.
Target creature's owner puts it on their choice of the top or bottom of their library.`,colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/f1931f22-974c-43ad-911e-684bf3f9995d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa45065e9-951a-4c6d-80b6-bd86a49f7439&unique=prints",collector_number:"46",digital:!1,rarity:"common",flavor_text:"Quickwing's elite flyers were more than capable of navigating ordinary storms, but Dragonhawk's storms were anything but ordinary.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Martin Wittfooth",artist_ids:["9f549ccf-d237-47c5-ab39-1b2bbbb164fc"],illustration_id:"9ee9a4e0-18e7-45ac-b8b6-ba4a49341674",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:15691,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.01",usd_foil:"0.02",usd_etched:null,eur:"0.07",eur_foil:"0.07",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668960&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDire%2BDowndraft",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDire%2BDowndraft",edhrec:"https://edhrec.com/route/?cc=Dire+Downdraft"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559749%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dire-Downdraft?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129337?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"fada29c0-5293-40a4-b36d-d073ee99e650",oracle_id:"a7b12df9-fddd-4cd4-8c09-d54a47867ab6",multiverse_ids:[669005],mtgo_id:129427,arena_id:91627,tcgplayer_id:558698,cardmarket_id:777778,name:"Diresight",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/fada29c0-5293-40a4-b36d-d073ee99e650",scryfall_uri:"https://scryfall.com/card/blb/91/diresight?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/a/fada29c0-5293-40a4-b36d-d073ee99e650.jpg?1721426397",normal:"https://cards.scryfall.io/normal/front/f/a/fada29c0-5293-40a4-b36d-d073ee99e650.jpg?1721426397",large:"https://cards.scryfall.io/large/front/f/a/fada29c0-5293-40a4-b36d-d073ee99e650.jpg?1721426397",png:"https://cards.scryfall.io/png/front/f/a/fada29c0-5293-40a4-b36d-d073ee99e650.png?1721426397",art_crop:"https://cards.scryfall.io/art_crop/front/f/a/fada29c0-5293-40a4-b36d-d073ee99e650.jpg?1721426397",border_crop:"https://cards.scryfall.io/border_crop/front/f/a/fada29c0-5293-40a4-b36d-d073ee99e650.jpg?1721426397"},mana_cost:"{2}{B}",cmc:3,type_line:"Sorcery",oracle_text:"Surveil 2, then draw two cards. You lose 2 life. (To surveil 2, look at the top two cards of your library, then put any number of them into your graveyard and the rest on top of your library in any order.)",colors:["B"],color_identity:["B"],keywords:["Surveil"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/fada29c0-5293-40a4-b36d-d073ee99e650/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa7b12df9-fddd-4cd4-8c09-d54a47867ab6&unique=prints",collector_number:"91",digital:!1,rarity:"common",flavor_text:"There is a fine line between predicting the future and causing it.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alix Branwyn",artist_ids:["4f0a0e38-d74c-4e0b-ad91-fecccb1afa5d"],illustration_id:"c135451e-0ec7-43bf-9f1b-a61f3adf6bb7",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3664,penny_rank:2958,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.09",usd_foil:"0.32",usd_etched:null,eur:"0.11",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669005&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDiresight",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDiresight",edhrec:"https://edhrec.com/route/?cc=Diresight"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558698%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Diresight?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129427?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"6402133e-eed1-4a46-9667-8b7a310362c1",oracle_id:"cf58e309-00e8-438e-813e-2e1c1002db23",multiverse_ids:[668961],mtgo_id:129339,arena_id:91583,tcgplayer_id:559503,cardmarket_id:778439,name:"Dour Port-Mage",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/6402133e-eed1-4a46-9667-8b7a310362c1",scryfall_uri:"https://scryfall.com/card/blb/47/dour-port-mage?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/4/6402133e-eed1-4a46-9667-8b7a310362c1.jpg?1721426066",normal:"https://cards.scryfall.io/normal/front/6/4/6402133e-eed1-4a46-9667-8b7a310362c1.jpg?1721426066",large:"https://cards.scryfall.io/large/front/6/4/6402133e-eed1-4a46-9667-8b7a310362c1.jpg?1721426066",png:"https://cards.scryfall.io/png/front/6/4/6402133e-eed1-4a46-9667-8b7a310362c1.png?1721426066",art_crop:"https://cards.scryfall.io/art_crop/front/6/4/6402133e-eed1-4a46-9667-8b7a310362c1.jpg?1721426066",border_crop:"https://cards.scryfall.io/border_crop/front/6/4/6402133e-eed1-4a46-9667-8b7a310362c1.jpg?1721426066"},mana_cost:"{1}{U}",cmc:2,type_line:"Creature — Frog Wizard",oracle_text:`Whenever one or more other creatures you control leave the battlefield without dying, draw a card.
{1}{U}, {T}: Return another target creature you control to its owner's hand.`,power:"1",toughness:"3",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/6402133e-eed1-4a46-9667-8b7a310362c1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Acf58e309-00e8-438e-813e-2e1c1002db23&unique=prints",collector_number:"47",digital:!1,rarity:"rare",flavor_text:'"Find your mooring and stop clogging the shipping lanes!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Ryan Pancoast",artist_ids:["89cc9475-dda2-4d13-bf88-54b92867a25c"],illustration_id:"962c2703-fe83-411e-a1fd-2669cdec5561",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2302,penny_rank:1185,preview:{source:"Wizards of the Coast",source_uri:"https://www.bilibili.com/opus/954647530566582281",previewed_at:"2024-07-16"},prices:{usd:"2.35",usd_foil:"3.11",usd_etched:null,eur:"1.92",eur_foil:"2.27",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668961&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDour%2BPort-Mage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDour%2BPort-Mage",edhrec:"https://edhrec.com/route/?cc=Dour+Port-Mage"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559503%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dour-Port-Mage?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129339?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"55cfd628-933a-4d3d-b2e5-70bc86960d1c",oracle_id:"1e0a2709-2cd2-4954-81ca-60654ab03d7c",multiverse_ids:[669006],mtgo_id:129429,arena_id:91628,tcgplayer_id:559058,cardmarket_id:778123,name:"Downwind Ambusher",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/55cfd628-933a-4d3d-b2e5-70bc86960d1c",scryfall_uri:"https://scryfall.com/card/blb/92/downwind-ambusher?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/5/55cfd628-933a-4d3d-b2e5-70bc86960d1c.jpg?1721426398",normal:"https://cards.scryfall.io/normal/front/5/5/55cfd628-933a-4d3d-b2e5-70bc86960d1c.jpg?1721426398",large:"https://cards.scryfall.io/large/front/5/5/55cfd628-933a-4d3d-b2e5-70bc86960d1c.jpg?1721426398",png:"https://cards.scryfall.io/png/front/5/5/55cfd628-933a-4d3d-b2e5-70bc86960d1c.png?1721426398",art_crop:"https://cards.scryfall.io/art_crop/front/5/5/55cfd628-933a-4d3d-b2e5-70bc86960d1c.jpg?1721426398",border_crop:"https://cards.scryfall.io/border_crop/front/5/5/55cfd628-933a-4d3d-b2e5-70bc86960d1c.jpg?1721426398"},mana_cost:"{3}{B}",cmc:4,type_line:"Creature — Skunk Assassin",oracle_text:`Flash
When this creature enters, choose one —
• Target creature an opponent controls gets -1/-1 until end of turn.
• Destroy target creature an opponent controls that was dealt damage this turn.`,power:"4",toughness:"2",colors:["B"],color_identity:["B"],keywords:["Flash"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/55cfd628-933a-4d3d-b2e5-70bc86960d1c/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A1e0a2709-2cd2-4954-81ca-60654ab03d7c&unique=prints",collector_number:"92",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aaron Miller",artist_ids:["fc021f3d-773a-4706-bbe7-f602324f511f"],illustration_id:"4fe830ce-219b-40f6-9bb3-21e609f67e82",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:19189,preview:{source:"Air Bubbles Cosplay",source_uri:"https://twitter.com/AirBubbles/status/1811476577781436623",previewed_at:"2024-07-11"},prices:{usd:"0.01",usd_foil:"0.08",usd_etched:null,eur:"0.07",eur_foil:"0.22",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669006&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDownwind%2BAmbusher",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDownwind%2BAmbusher",edhrec:"https://edhrec.com/route/?cc=Downwind+Ambusher"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559058%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Downwind-Ambusher?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129429?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8659789c-6a2c-439f-a348-b9b1b06c55b8",oracle_id:"f7f435bc-1716-4412-9505-a1f2f2d83d08",multiverse_ids:[669046],mtgo_id:129509,arena_id:91671,tcgplayer_id:559761,cardmarket_id:778918,name:"Dragonhawk, Fate's Tempest",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8659789c-6a2c-439f-a348-b9b1b06c55b8",scryfall_uri:"https://scryfall.com/card/blb/132/dragonhawk-fates-tempest?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/6/8659789c-6a2c-439f-a348-b9b1b06c55b8.jpg?1721426605",normal:"https://cards.scryfall.io/normal/front/8/6/8659789c-6a2c-439f-a348-b9b1b06c55b8.jpg?1721426605",large:"https://cards.scryfall.io/large/front/8/6/8659789c-6a2c-439f-a348-b9b1b06c55b8.jpg?1721426605",png:"https://cards.scryfall.io/png/front/8/6/8659789c-6a2c-439f-a348-b9b1b06c55b8.png?1721426605",art_crop:"https://cards.scryfall.io/art_crop/front/8/6/8659789c-6a2c-439f-a348-b9b1b06c55b8.jpg?1721426605",border_crop:"https://cards.scryfall.io/border_crop/front/8/6/8659789c-6a2c-439f-a348-b9b1b06c55b8.jpg?1721426605"},mana_cost:"{3}{R}{R}",cmc:5,type_line:"Legendary Creature — Bird Dragon",oracle_text:`Flying
Whenever Dragonhawk enters or attacks, exile the top X cards of your library, where X is the number of creatures you control with power 4 or greater. You may play those cards until your next end step. At the beginning of your next end step, Dragonhawk deals 2 damage to each opponent for each of those cards that are still exiled.`,power:"5",toughness:"5",colors:["R"],color_identity:["R"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8659789c-6a2c-439f-a348-b9b1b06c55b8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af7f435bc-1716-4412-9505-a1f2f2d83d08&unique=prints",collector_number:"132",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Victor Adame Minguez",artist_ids:["bd8f7368-5b10-4554-b6b8-d052c6aca89f"],illustration_id:"d2a11f8b-5b9c-4a68-9acd-04add6106659",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:3122,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-17"},prices:{usd:"5.92",usd_foil:"9.99",usd_etched:null,eur:"5.51",eur_foil:"6.54",tix:"0.09"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669046&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDragonhawk%252C%2BFate%2527s%2BTempest",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDragonhawk%252C%2BFate%2527s%2BTempest",edhrec:"https://edhrec.com/route/?cc=Dragonhawk%2C+Fate%27s+Tempest"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559761%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dragonhawk-Fates-Tempest?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129509?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"26bd6b0d-8606-4a37-8be3-a852f1a8e99c",oracle_id:"b6b2d63f-5b8c-47ee-8712-58596e0e9e94",multiverse_ids:[669125],mtgo_id:129667,arena_id:91747,tcgplayer_id:558584,cardmarket_id:777685,name:"Dreamdew Entrancer",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/26bd6b0d-8606-4a37-8be3-a852f1a8e99c",scryfall_uri:"https://scryfall.com/card/blb/211/dreamdew-entrancer?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/6/26bd6b0d-8606-4a37-8be3-a852f1a8e99c.jpg?1721427040",normal:"https://cards.scryfall.io/normal/front/2/6/26bd6b0d-8606-4a37-8be3-a852f1a8e99c.jpg?1721427040",large:"https://cards.scryfall.io/large/front/2/6/26bd6b0d-8606-4a37-8be3-a852f1a8e99c.jpg?1721427040",png:"https://cards.scryfall.io/png/front/2/6/26bd6b0d-8606-4a37-8be3-a852f1a8e99c.png?1721427040",art_crop:"https://cards.scryfall.io/art_crop/front/2/6/26bd6b0d-8606-4a37-8be3-a852f1a8e99c.jpg?1721427040",border_crop:"https://cards.scryfall.io/border_crop/front/2/6/26bd6b0d-8606-4a37-8be3-a852f1a8e99c.jpg?1721427040"},mana_cost:"{2}{G}{U}",cmc:4,type_line:"Creature — Frog Wizard",oracle_text:`Reach
When this creature enters, tap up to one target creature and put three stun counters on it. If you control that creature, draw two cards.`,power:"3",toughness:"4",colors:["G","U"],color_identity:["G","U"],keywords:["Reach"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/26bd6b0d-8606-4a37-8be3-a852f1a8e99c/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab6b2d63f-5b8c-47ee-8712-58596e0e9e94&unique=prints",collector_number:"211",digital:!1,rarity:"rare",flavor_text:'"Your dreams are too precious to leave to chance."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Zoltan Boros",artist_ids:["1885e6cb-c827-4896-994e-3d0a027d602f"],illustration_id:"aa672c0b-ad55-4d24-80ae-dfe4fc467c5f",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7754,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/news/making-magic/the-bloom-of-the-burrow-part-1",previewed_at:"2024-07-09"},prices:{usd:"0.25",usd_foil:"0.34",usd_etched:null,eur:"0.18",eur_foil:"0.39",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669125&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDreamdew%2BEntrancer",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDreamdew%2BEntrancer",edhrec:"https://edhrec.com/route/?cc=Dreamdew+Entrancer"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558584%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Dreamdew-Entrancer?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129667?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"d7ab2de3-3aea-461a-a74f-fb742cf8a198",oracle_id:"f76a86f3-568a-40b3-8e2c-f84db4141293",multiverse_ids:[668925],mtgo_id:129267,arena_id:91547,tcgplayer_id:559039,cardmarket_id:778119,name:"Driftgloom Coyote",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/d7ab2de3-3aea-461a-a74f-fb742cf8a198",scryfall_uri:"https://scryfall.com/card/blb/11/driftgloom-coyote?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/7/d7ab2de3-3aea-461a-a74f-fb742cf8a198.jpg?1721425819",normal:"https://cards.scryfall.io/normal/front/d/7/d7ab2de3-3aea-461a-a74f-fb742cf8a198.jpg?1721425819",large:"https://cards.scryfall.io/large/front/d/7/d7ab2de3-3aea-461a-a74f-fb742cf8a198.jpg?1721425819",png:"https://cards.scryfall.io/png/front/d/7/d7ab2de3-3aea-461a-a74f-fb742cf8a198.png?1721425819",art_crop:"https://cards.scryfall.io/art_crop/front/d/7/d7ab2de3-3aea-461a-a74f-fb742cf8a198.jpg?1721425819",border_crop:"https://cards.scryfall.io/border_crop/front/d/7/d7ab2de3-3aea-461a-a74f-fb742cf8a198.jpg?1721425819"},mana_cost:"{3}{W}{W}",cmc:5,type_line:"Creature — Elemental Coyote",oracle_text:"When this creature enters, exile target creature an opponent controls until this creature leaves the battlefield. If that creature had power 2 or less, put a +1/+1 counter on this creature.",power:"3",toughness:"4",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/d7ab2de3-3aea-461a-a74f-fb742cf8a198/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af76a86f3-568a-40b3-8e2c-f84db4141293&unique=prints",collector_number:"11",digital:!1,rarity:"uncommon",flavor_text:'"The fog is descending like a starving beast. I believe our expedition ends here."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Betty Jiang",artist_ids:["2e823b11-7bf4-49b6-986a-8a6fb10d74eb"],illustration_id:"c1b71de8-e03c-4d20-9ccd-4e589e3013a8",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:19645,preview:{source:"Limited Resources",source_uri:"https://twitter.com/Marshall_LR/status/1811570808604807458",previewed_at:"2024-07-11"},prices:{usd:"0.01",usd_foil:"0.05",usd_etched:null,eur:"0.04",eur_foil:"0.06",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668925&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDriftgloom%2BCoyote",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDriftgloom%2BCoyote",edhrec:"https://edhrec.com/route/?cc=Driftgloom+Coyote"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559039%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Driftgloom-Coyote?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129267?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"6b485cf7-bad0-4824-9ba7-cb112ce4769f",oracle_id:"9740ce6d-ef6b-4d70-839a-8bd5e0e1e0a1",multiverse_ids:[669084],mtgo_id:129585,arena_id:91706,tcgplayer_id:559552,cardmarket_id:778441,name:"Druid of the Spade",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/6b485cf7-bad0-4824-9ba7-cb112ce4769f",scryfall_uri:"https://scryfall.com/card/blb/170/druid-of-the-spade?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/b/6b485cf7-bad0-4824-9ba7-cb112ce4769f.jpg?1721426796",normal:"https://cards.scryfall.io/normal/front/6/b/6b485cf7-bad0-4824-9ba7-cb112ce4769f.jpg?1721426796",large:"https://cards.scryfall.io/large/front/6/b/6b485cf7-bad0-4824-9ba7-cb112ce4769f.jpg?1721426796",png:"https://cards.scryfall.io/png/front/6/b/6b485cf7-bad0-4824-9ba7-cb112ce4769f.png?1721426796",art_crop:"https://cards.scryfall.io/art_crop/front/6/b/6b485cf7-bad0-4824-9ba7-cb112ce4769f.jpg?1721426796",border_crop:"https://cards.scryfall.io/border_crop/front/6/b/6b485cf7-bad0-4824-9ba7-cb112ce4769f.jpg?1721426796"},mana_cost:"{2}{G}",cmc:3,type_line:"Creature — Rabbit Druid",oracle_text:"As long as you control a token, this creature gets +2/+0 and has trample.",power:"2",toughness:"3",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/6b485cf7-bad0-4824-9ba7-cb112ce4769f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A9740ce6d-ef6b-4d70-839a-8bd5e0e1e0a1&unique=prints",collector_number:"170",digital:!1,rarity:"common",flavor_text:"The druid brought the best out of the soil and, in turn, the best out of the fluffle.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Andrey Kuzinskiy",artist_ids:["c04ff0b2-67a1-4238-82f7-6c67de734b56"],illustration_id:"f72582ec-c4eb-4732-8d2b-dea3f368e0d0",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13732,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.03",usd_foil:"0.04",usd_etched:null,eur:"0.10",eur_foil:"0.08",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669084&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DDruid%2Bof%2Bthe%2BSpade",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DDruid%2Bof%2Bthe%2BSpade",edhrec:"https://edhrec.com/route/?cc=Druid+of+the+Spade"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559552%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Druid-of-the-Spade?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129585?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"5030e6ac-211d-4145-8c87-998a8351a467",oracle_id:"fbf2653e-9cc4-442f-bc73-6e2ba6e067cb",multiverse_ids:[669007],mtgo_id:129431,arena_id:91629,tcgplayer_id:558600,cardmarket_id:776456,name:"Early Winter",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/5030e6ac-211d-4145-8c87-998a8351a467",scryfall_uri:"https://scryfall.com/card/blb/93/early-winter?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/0/5030e6ac-211d-4145-8c87-998a8351a467.jpg?1721426407",normal:"https://cards.scryfall.io/normal/front/5/0/5030e6ac-211d-4145-8c87-998a8351a467.jpg?1721426407",large:"https://cards.scryfall.io/large/front/5/0/5030e6ac-211d-4145-8c87-998a8351a467.jpg?1721426407",png:"https://cards.scryfall.io/png/front/5/0/5030e6ac-211d-4145-8c87-998a8351a467.png?1721426407",art_crop:"https://cards.scryfall.io/art_crop/front/5/0/5030e6ac-211d-4145-8c87-998a8351a467.jpg?1721426407",border_crop:"https://cards.scryfall.io/border_crop/front/5/0/5030e6ac-211d-4145-8c87-998a8351a467.jpg?1721426407"},mana_cost:"{4}{B}",cmc:5,type_line:"Instant",oracle_text:`Choose one —
• Exile target creature.
• Target opponent exiles an enchantment they control.`,colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/5030e6ac-211d-4145-8c87-998a8351a467/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Afbf2653e-9cc4-442f-bc73-6e2ba6e067cb&unique=prints",collector_number:"93",digital:!1,rarity:"common",flavor_text:"The climate changed and the world suffered.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Andrew Mar",artist_ids:["adad79bf-cd52-456a-b170-740ed8bff0fc"],illustration_id:"cc7d5fa0-d56b-40ea-b694-9c4df3cfdd44",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:14789,preview:{source:"Wizards of the Coast",source_uri:"https://twitter.com/wizards_magic/status/1806657697900867947/photo/1",previewed_at:"2024-06-28"},prices:{usd:"0.02",usd_foil:"0.04",usd_etched:null,eur:"0.06",eur_foil:"0.06",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669007&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DEarly%2BWinter",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DEarly%2BWinter",edhrec:"https://edhrec.com/route/?cc=Early+Winter"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558600%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Early-Winter?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129431?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e6d45abe-4962-47d9-a54e-7e623ea8647c",oracle_id:"3c345e24-1726-45ac-91ca-e348d1e7acfe",multiverse_ids:[668962],mtgo_id:129341,arena_id:91584,tcgplayer_id:559642,cardmarket_id:778527,name:"Eddymurk Crab",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e6d45abe-4962-47d9-a54e-7e623ea8647c",scryfall_uri:"https://scryfall.com/card/blb/48/eddymurk-crab?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/6/e6d45abe-4962-47d9-a54e-7e623ea8647c.jpg?1721426076",normal:"https://cards.scryfall.io/normal/front/e/6/e6d45abe-4962-47d9-a54e-7e623ea8647c.jpg?1721426076",large:"https://cards.scryfall.io/large/front/e/6/e6d45abe-4962-47d9-a54e-7e623ea8647c.jpg?1721426076",png:"https://cards.scryfall.io/png/front/e/6/e6d45abe-4962-47d9-a54e-7e623ea8647c.png?1721426076",art_crop:"https://cards.scryfall.io/art_crop/front/e/6/e6d45abe-4962-47d9-a54e-7e623ea8647c.jpg?1721426076",border_crop:"https://cards.scryfall.io/border_crop/front/e/6/e6d45abe-4962-47d9-a54e-7e623ea8647c.jpg?1721426076"},mana_cost:"{5}{U}{U}",cmc:7,type_line:"Creature — Elemental Crab",oracle_text:`Flash
This spell costs {1} less to cast for each instant and sorcery card in your graveyard.
This creature enters tapped if it's not your turn.
When this creature enters, tap up to two target creatures.`,power:"5",toughness:"5",colors:["U"],color_identity:["U"],keywords:["Flash"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e6d45abe-4962-47d9-a54e-7e623ea8647c/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A3c345e24-1726-45ac-91ca-e348d1e7acfe&unique=prints",collector_number:"48",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"PINDURSKI",artist_ids:["f333a7f0-7330-40e9-8c58-667eea2f0f60"],illustration_id:"badef1c5-abcd-4dc8-85d6-318ec4ba5659",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:14167,penny_rank:1725,preview:{source:"Wizards of the Coast",source_uri:"https://x.com/wizards_magic/status/1813302589162668386",previewed_at:"2024-07-16"},prices:{usd:"0.17",usd_foil:"0.19",usd_etched:null,eur:"0.33",eur_foil:"0.48",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668962&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DEddymurk%2BCrab",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DEddymurk%2BCrab",edhrec:"https://edhrec.com/route/?cc=Eddymurk+Crab"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559642%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Eddymurk-Crab?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129341?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6",oracle_id:"027989e7-20c4-4773-b6b4-20337cc5fe8c",multiverse_ids:[668963],mtgo_id:129343,arena_id:91585,tcgplayer_id:559644,cardmarket_id:778536,name:"Eluge, the Shoreless Sea",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6",scryfall_uri:"https://scryfall.com/card/blb/49/eluge-the-shoreless-sea?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/f/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6.jpg?1721426077",normal:"https://cards.scryfall.io/normal/front/1/f/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6.jpg?1721426077",large:"https://cards.scryfall.io/large/front/1/f/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6.jpg?1721426077",png:"https://cards.scryfall.io/png/front/1/f/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6.png?1721426077",art_crop:"https://cards.scryfall.io/art_crop/front/1/f/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6.jpg?1721426077",border_crop:"https://cards.scryfall.io/border_crop/front/1/f/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6.jpg?1721426077"},mana_cost:"{1}{U}{U}{U}",cmc:4,type_line:"Legendary Creature — Elemental Fish",oracle_text:`Eluge's power and toughness are each equal to the number of Islands you control.
Whenever Eluge enters or attacks, put a flood counter on target land. It's an Island in addition to its other types for as long as it has a flood counter on it.
The first instant or sorcery spell you cast each turn costs {U} (or {1}) less to cast for each land you control with a flood counter on it.`,power:"*",toughness:"*",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1f2bf6ba-cd1a-4382-9572-6dfbcf6ed0c6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A027989e7-20c4-4773-b6b4-20337cc5fe8c&unique=prints",collector_number:"49",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Chase Stone",artist_ids:["2d753f61-5f5b-468e-97ea-8e0fdd347340"],illustration_id:"1dcc8ab0-6708-4b63-b70e-e1115fa20ace",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4206,preview:{source:"Wizards of the Coast",source_uri:"https://www.twitch.tv/videos/2199222387",previewed_at:"2024-07-16"},prices:{usd:"2.34",usd_foil:"2.43",usd_etched:null,eur:"2.29",eur_foil:"3.12",tix:"0.30"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668963&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DEluge%252C%2Bthe%2BShoreless%2BSea",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DEluge%252C%2Bthe%2BShoreless%2BSea",edhrec:"https://edhrec.com/route/?cc=Eluge%2C+the+Shoreless+Sea"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559644%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Eluge-the-Shoreless-Sea?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129343?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0035082e-bb86-4f95-be48-ffc87fe5286d",oracle_id:"5b4b21ed-c24e-4038-83fb-bd7f3c3426cd",multiverse_ids:[669047],mtgo_id:129511,arena_id:91668,tcgplayer_id:559076,cardmarket_id:778135,name:"Emberheart Challenger",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0035082e-bb86-4f95-be48-ffc87fe5286d",scryfall_uri:"https://scryfall.com/card/blb/133/emberheart-challenger?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/0/0035082e-bb86-4f95-be48-ffc87fe5286d.jpg?1721426609",normal:"https://cards.scryfall.io/normal/front/0/0/0035082e-bb86-4f95-be48-ffc87fe5286d.jpg?1721426609",large:"https://cards.scryfall.io/large/front/0/0/0035082e-bb86-4f95-be48-ffc87fe5286d.jpg?1721426609",png:"https://cards.scryfall.io/png/front/0/0/0035082e-bb86-4f95-be48-ffc87fe5286d.png?1721426609",art_crop:"https://cards.scryfall.io/art_crop/front/0/0/0035082e-bb86-4f95-be48-ffc87fe5286d.jpg?1721426609",border_crop:"https://cards.scryfall.io/border_crop/front/0/0/0035082e-bb86-4f95-be48-ffc87fe5286d.jpg?1721426609"},mana_cost:"{1}{R}",cmc:2,type_line:"Creature — Mouse Warrior",oracle_text:`Haste
Prowess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)
Valiant — Whenever this creature becomes the target of a spell or ability you control for the first time each turn, exile the top card of your library. Until end of turn, you may play that card.`,power:"2",toughness:"2",colors:["R"],color_identity:["R"],keywords:["Prowess","Valiant","Haste"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0035082e-bb86-4f95-be48-ffc87fe5286d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5b4b21ed-c24e-4038-83fb-bd7f3c3426cd&unique=prints",collector_number:"133",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Chris Rahn",artist_ids:["7742047e-0f80-4c0f-a530-d07460165e86"],illustration_id:"c918aaeb-d1ee-4e67-89de-8b47e327236f",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9990,preview:{source:"BIG MAGIC",source_uri:"https://www.youtube.com/watch?v=yiL-iRxB8m8",previewed_at:"2024-07-11"},prices:{usd:"1.83",usd_foil:"3.50",usd_etched:null,eur:"3.07",eur_foil:"3.44",tix:"1.38"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669047&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DEmberheart%2BChallenger",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DEmberheart%2BChallenger",edhrec:"https://edhrec.com/route/?cc=Emberheart+Challenger"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559076%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Emberheart-Challenger?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129511?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"5aaf7e4c-4d5d-4acc-a834-e6c4a7629408",oracle_id:"1473580d-7cb2-48f5-a77d-08f49244c5e8",multiverse_ids:[668926],mtgo_id:129269,arena_id:91548,tcgplayer_id:559639,cardmarket_id:778510,name:"Essence Channeler",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408",scryfall_uri:"https://scryfall.com/card/blb/12/essence-channeler?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/a/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408.jpg?1724003311",normal:"https://cards.scryfall.io/normal/front/5/a/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408.jpg?1724003311",large:"https://cards.scryfall.io/large/front/5/a/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408.jpg?1724003311",png:"https://cards.scryfall.io/png/front/5/a/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408.png?1724003311",art_crop:"https://cards.scryfall.io/art_crop/front/5/a/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408.jpg?1724003311",border_crop:"https://cards.scryfall.io/border_crop/front/5/a/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408.jpg?1724003311"},mana_cost:"{1}{W}",cmc:2,type_line:"Creature — Bat Cleric",oracle_text:`As long as you've lost life this turn, this creature has flying and vigilance.
Whenever you gain life, put a +1/+1 counter on this creature.
When this creature dies, put its counters on target creature you control.`,power:"2",toughness:"1",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/5aaf7e4c-4d5d-4acc-a834-e6c4a7629408/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A1473580d-7cb2-48f5-a77d-08f49244c5e8&unique=prints",collector_number:"12",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Wylie Beckert",artist_ids:["074daf3d-0849-4c4a-b5a5-c276384e81e5"],illustration_id:"173f2b86-6b07-47e7-830d-9f116f546389",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5394,penny_rank:3443,prices:{usd:"0.64",usd_foil:"1.00",usd_etched:null,eur:"1.08",eur_foil:"1.08",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668926&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DEssence%2BChanneler",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DEssence%2BChanneler",edhrec:"https://edhrec.com/route/?cc=Essence+Channeler"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559639%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Essence-Channeler?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129269?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8809830f-d8e1-4603-9652-0ad8b00234e9",oracle_id:"0c85b8f7-0bd0-4680-9ec5-d4b110460a54",multiverse_ids:[669166],mtgo_id:129749,arena_id:91788,tcgplayer_id:559476,cardmarket_id:778502,name:"Fabled Passage",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8809830f-d8e1-4603-9652-0ad8b00234e9",scryfall_uri:"https://scryfall.com/card/blb/252/fabled-passage?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/8/8809830f-d8e1-4603-9652-0ad8b00234e9.jpg?1721427315",normal:"https://cards.scryfall.io/normal/front/8/8/8809830f-d8e1-4603-9652-0ad8b00234e9.jpg?1721427315",large:"https://cards.scryfall.io/large/front/8/8/8809830f-d8e1-4603-9652-0ad8b00234e9.jpg?1721427315",png:"https://cards.scryfall.io/png/front/8/8/8809830f-d8e1-4603-9652-0ad8b00234e9.png?1721427315",art_crop:"https://cards.scryfall.io/art_crop/front/8/8/8809830f-d8e1-4603-9652-0ad8b00234e9.jpg?1721427315",border_crop:"https://cards.scryfall.io/border_crop/front/8/8/8809830f-d8e1-4603-9652-0ad8b00234e9.jpg?1721427315"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:"{T}, Sacrifice this land: Search your library for a basic land card, put it onto the battlefield tapped, then shuffle. Then if you control four or more lands, untap that land.",colors:[],color_identity:[],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8809830f-d8e1-4603-9652-0ad8b00234e9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0c85b8f7-0bd0-4680-9ec5-d4b110460a54&unique=prints",collector_number:"252",digital:!1,rarity:"rare",flavor_text:"Beyond Valley lies danger—and promise.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Adam Paquette",artist_ids:["89023dad-e6c0-41e0-83fb-eb2bfbbdc3f2"],illustration_id:"9c871c61-4ed2-425f-b817-99ccfa1411f2",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:73,preview:{source:"Xunshuilu",source_uri:"https://www.bilibili.com/opus/954456748133974025",previewed_at:"2024-07-15"},prices:{usd:"4.74",usd_foil:"4.95",usd_etched:null,eur:"4.58",eur_foil:"5.12",tix:"0.10"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669166&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFabled%2BPassage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFabled%2BPassage",edhrec:"https://edhrec.com/route/?cc=Fabled+Passage"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559476%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fabled-Passage?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129749?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"9fb41503-8632-4bf1-9bfe-6d9b9993c337",oracle_id:"c61b05b8-00f1-4371-9856-c65852b4ca02",multiverse_ids:[668927],mtgo_id:129271,arena_id:91549,tcgplayer_id:559040,cardmarket_id:778107,name:"Feather of Flight",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/9fb41503-8632-4bf1-9bfe-6d9b9993c337",scryfall_uri:"https://scryfall.com/card/blb/13/feather-of-flight?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/9/f/9fb41503-8632-4bf1-9bfe-6d9b9993c337.jpg?1721425833",normal:"https://cards.scryfall.io/normal/front/9/f/9fb41503-8632-4bf1-9bfe-6d9b9993c337.jpg?1721425833",large:"https://cards.scryfall.io/large/front/9/f/9fb41503-8632-4bf1-9bfe-6d9b9993c337.jpg?1721425833",png:"https://cards.scryfall.io/png/front/9/f/9fb41503-8632-4bf1-9bfe-6d9b9993c337.png?1721425833",art_crop:"https://cards.scryfall.io/art_crop/front/9/f/9fb41503-8632-4bf1-9bfe-6d9b9993c337.jpg?1721425833",border_crop:"https://cards.scryfall.io/border_crop/front/9/f/9fb41503-8632-4bf1-9bfe-6d9b9993c337.jpg?1721425833"},mana_cost:"{1}{W}",cmc:2,type_line:"Enchantment — Aura",oracle_text:`Flash
Enchant creature
When this Aura enters, draw a card.
Enchanted creature gets +1/+0 and has flying.`,colors:["W"],color_identity:["W"],keywords:["Enchant","Flash"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/9fb41503-8632-4bf1-9bfe-6d9b9993c337/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac61b05b8-00f1-4371-9856-c65852b4ca02&unique=prints",collector_number:"13",digital:!1,rarity:"uncommon",flavor_text:"As he grasped the glowing feather, the lizard's heart soared, and the rest of him quickly followed.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Borja Pindado",artist_ids:["1624a1a8-3492-4c0b-9abc-83dcf2653111"],illustration_id:"62324b47-c545-4818-848f-8a98f5ffc10e",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5875,penny_rank:1067,preview:{source:"Giraffa Nat",source_uri:"https://twitter.com/giraffanat/status/1811392062371119267",previewed_at:"2024-07-11"},prices:{usd:"0.19",usd_foil:"0.25",usd_etched:null,eur:"0.10",eur_foil:"0.22",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668927&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFeather%2Bof%2BFlight",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFeather%2Bof%2BFlight",edhrec:"https://edhrec.com/route/?cc=Feather+of+Flight"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559040%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Feather-of-Flight?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129271?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"80b3e815-0e2e-4325-b1d5-5531b7b92da6",oracle_id:"a090be5a-b0f2-4c17-8f7d-e742f9de8f6b",multiverse_ids:[669085],mtgo_id:129587,arena_id:91707,tcgplayer_id:559635,cardmarket_id:778521,name:"Fecund Greenshell",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/80b3e815-0e2e-4325-b1d5-5531b7b92da6",scryfall_uri:"https://scryfall.com/card/blb/171/fecund-greenshell?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804",normal:"https://cards.scryfall.io/normal/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804",large:"https://cards.scryfall.io/large/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804",png:"https://cards.scryfall.io/png/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.png?1721426804",art_crop:"https://cards.scryfall.io/art_crop/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804",border_crop:"https://cards.scryfall.io/border_crop/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804"},mana_cost:"{3}{G}{G}",cmc:5,type_line:"Creature — Elemental Turtle",oracle_text:`Reach
As long as you control ten or more lands, creatures you control get +2/+2.
Whenever this creature or another creature you control with toughness greater than its power enters, look at the top card of your library. If it's a land card, you may put it onto the battlefield tapped. Otherwise, put it into your hand.`,power:"4",toughness:"6",colors:["G"],color_identity:["G"],keywords:["Reach"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/80b3e815-0e2e-4325-b1d5-5531b7b92da6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa090be5a-b0f2-4c17-8f7d-e742f9de8f6b&unique=prints",collector_number:"171",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Kisung Koh",artist_ids:["435df22f-e389-4366-86e9-0b4c62fcde8b"],illustration_id:"e9408dd8-b86f-4247-ac64-373beef3ff44",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4078,penny_rank:8040,preview:{source:"Destructoid",source_uri:"https://www.destructoid.com/exclusive-brand-new-beautiful-mtg-bloomburrow-cards-revealed/",previewed_at:"2024-07-16"},prices:{usd:"0.54",usd_foil:"0.98",usd_etched:null,eur:"0.36",eur_foil:"0.49",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669085&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFecund%2BGreenshell",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFecund%2BGreenshell",edhrec:"https://edhrec.com/route/?cc=Fecund+Greenshell"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559635%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fecund-Greenshell?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129587?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7e017ff8-2936-4a1b-bece-00004cfbad06",oracle_id:"c338eedb-9b70-4b77-b5d6-8ea74b7bea3e",multiverse_ids:[669008],mtgo_id:129433,arena_id:91630,tcgplayer_id:559509,cardmarket_id:778442,name:"Feed the Cycle",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7e017ff8-2936-4a1b-bece-00004cfbad06",scryfall_uri:"https://scryfall.com/card/blb/94/feed-the-cycle?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/e/7e017ff8-2936-4a1b-bece-00004cfbad06.jpg?1721426413",normal:"https://cards.scryfall.io/normal/front/7/e/7e017ff8-2936-4a1b-bece-00004cfbad06.jpg?1721426413",large:"https://cards.scryfall.io/large/front/7/e/7e017ff8-2936-4a1b-bece-00004cfbad06.jpg?1721426413",png:"https://cards.scryfall.io/png/front/7/e/7e017ff8-2936-4a1b-bece-00004cfbad06.png?1721426413",art_crop:"https://cards.scryfall.io/art_crop/front/7/e/7e017ff8-2936-4a1b-bece-00004cfbad06.jpg?1721426413",border_crop:"https://cards.scryfall.io/border_crop/front/7/e/7e017ff8-2936-4a1b-bece-00004cfbad06.jpg?1721426413"},mana_cost:"{1}{B}",cmc:2,type_line:"Instant",oracle_text:`As an additional cost to cast this spell, forage or pay {B}. (To forage, exile three cards from your graveyard or sacrifice a Food.)
Destroy target creature or planeswalker.`,colors:["B"],color_identity:["B"],keywords:["Forage"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7e017ff8-2936-4a1b-bece-00004cfbad06/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac338eedb-9b70-4b77-b5d6-8ea74b7bea3e&unique=prints",collector_number:"94",digital:!1,rarity:"uncommon",flavor_text:`Sleeping beneath the sumac
—Squirrelfolk expression meaning "death"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Donato Giancola",artist_ids:["90332db2-aecb-4d79-917b-95cbeb8d0cb6"],illustration_id:"46708040-55c8-4f28-b1a2-77331f7cd981",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7822,penny_rank:1363,preview:{source:"GCORES",source_uri:"https://www.gcores.com/articles/185038",previewed_at:"2024-07-16"},prices:{usd:"0.14",usd_foil:"0.18",usd_etched:null,eur:"0.35",eur_foil:"0.34",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669008&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFeed%2Bthe%2BCycle",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFeed%2Bthe%2BCycle",edhrec:"https://edhrec.com/route/?cc=Feed+the+Cycle"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559509%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Feed-the-Cycle?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129433?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c96ac326-de44-470b-a592-a4c2a052c091",oracle_id:"8f968470-ce00-43a3-95f5-2e3fe987be19",multiverse_ids:[669009],mtgo_id:129435,arena_id:91631,tcgplayer_id:558602,cardmarket_id:777572,name:"Fell",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c96ac326-de44-470b-a592-a4c2a052c091",scryfall_uri:"https://scryfall.com/card/blb/95/fell?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/9/c96ac326-de44-470b-a592-a4c2a052c091.jpg?1721426418",normal:"https://cards.scryfall.io/normal/front/c/9/c96ac326-de44-470b-a592-a4c2a052c091.jpg?1721426418",large:"https://cards.scryfall.io/large/front/c/9/c96ac326-de44-470b-a592-a4c2a052c091.jpg?1721426418",png:"https://cards.scryfall.io/png/front/c/9/c96ac326-de44-470b-a592-a4c2a052c091.png?1721426418",art_crop:"https://cards.scryfall.io/art_crop/front/c/9/c96ac326-de44-470b-a592-a4c2a052c091.jpg?1721426418",border_crop:"https://cards.scryfall.io/border_crop/front/c/9/c96ac326-de44-470b-a592-a4c2a052c091.jpg?1721426418"},mana_cost:"{1}{B}",cmc:2,type_line:"Sorcery",oracle_text:"Destroy target creature.",colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c96ac326-de44-470b-a592-a4c2a052c091/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A8f968470-ce00-43a3-95f5-2e3fe987be19&unique=prints",collector_number:"95",digital:!1,rarity:"uncommon",flavor_text:"When Glarb ordered the egg stolen, the Great Maha communicated its anger in a universal language.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"A. M. Sartor",artist_ids:["d01bfbdc-5442-482a-a339-933e0808c697"],illustration_id:"3a350c9f-9d11-4569-8f92-291fcd0c2bc0",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3626,penny_rank:859,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.36",usd_foil:"1.03",usd_etched:null,eur:"0.49",eur_foil:"0.77",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669009&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFell",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFell",edhrec:"https://edhrec.com/route/?cc=Fell"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558602%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fell?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129435?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"4433ee12-2013-4fdc-979f-ae065f63a527",oracle_id:"2de138b0-3159-4a0c-a474-a4e5600b2e51",multiverse_ids:[669048],mtgo_id:129513,arena_id:91669,tcgplayer_id:559655,cardmarket_id:778528,name:"Festival of Embers",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/4433ee12-2013-4fdc-979f-ae065f63a527",scryfall_uri:"https://scryfall.com/card/blb/134/festival-of-embers?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/4/4433ee12-2013-4fdc-979f-ae065f63a527.jpg?1721426613",normal:"https://cards.scryfall.io/normal/front/4/4/4433ee12-2013-4fdc-979f-ae065f63a527.jpg?1721426613",large:"https://cards.scryfall.io/large/front/4/4/4433ee12-2013-4fdc-979f-ae065f63a527.jpg?1721426613",png:"https://cards.scryfall.io/png/front/4/4/4433ee12-2013-4fdc-979f-ae065f63a527.png?1721426613",art_crop:"https://cards.scryfall.io/art_crop/front/4/4/4433ee12-2013-4fdc-979f-ae065f63a527.jpg?1721426613",border_crop:"https://cards.scryfall.io/border_crop/front/4/4/4433ee12-2013-4fdc-979f-ae065f63a527.jpg?1721426613"},mana_cost:"{4}{R}",cmc:5,type_line:"Enchantment",oracle_text:`During your turn, you may cast instant and sorcery spells from your graveyard by paying 1 life in addition to their other costs.
If a card or token would be put into your graveyard from anywhere, exile it instead.
{1}{R}: Sacrifice this enchantment.`,colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/4433ee12-2013-4fdc-979f-ae065f63a527/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A2de138b0-3159-4a0c-a474-a4e5600b2e51&unique=prints",collector_number:"134",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Greg Staples",artist_ids:["93d65564-bf00-447b-8406-e2031f03b6b1"],illustration_id:"0471bf82-0f0d-4843-ba2c-bdbb1d01ad04",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11453,preview:{source:"Destructoid",source_uri:"https://www.destructoid.com/exclusive-brand-new-beautiful-mtg-bloomburrow-cards-revealed/",previewed_at:"2024-07-16"},prices:{usd:"0.12",usd_foil:"0.18",usd_etched:null,eur:"0.21",eur_foil:"0.29",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669048&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFestival%2Bof%2BEmbers",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFestival%2Bof%2BEmbers",edhrec:"https://edhrec.com/route/?cc=Festival+of+Embers"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559655%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Festival-of-Embers?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129513?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1c671eab-d1ef-4d79-94eb-8b85f0d18699",oracle_id:"76c2e0b4-d4fa-4e98-b363-0a76eb481304",multiverse_ids:[668964],mtgo_id:129345,arena_id:91586,tcgplayer_id:558689,cardmarket_id:777773,name:"Finch Formation",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1c671eab-d1ef-4d79-94eb-8b85f0d18699",scryfall_uri:"https://scryfall.com/card/blb/50/finch-formation?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/c/1c671eab-d1ef-4d79-94eb-8b85f0d18699.jpg?1721426087",normal:"https://cards.scryfall.io/normal/front/1/c/1c671eab-d1ef-4d79-94eb-8b85f0d18699.jpg?1721426087",large:"https://cards.scryfall.io/large/front/1/c/1c671eab-d1ef-4d79-94eb-8b85f0d18699.jpg?1721426087",png:"https://cards.scryfall.io/png/front/1/c/1c671eab-d1ef-4d79-94eb-8b85f0d18699.png?1721426087",art_crop:"https://cards.scryfall.io/art_crop/front/1/c/1c671eab-d1ef-4d79-94eb-8b85f0d18699.jpg?1721426087",border_crop:"https://cards.scryfall.io/border_crop/front/1/c/1c671eab-d1ef-4d79-94eb-8b85f0d18699.jpg?1721426087"},mana_cost:"{2}{U}",cmc:3,type_line:"Creature — Bird Scout",oracle_text:`Offspring {3} (You may pay an additional {3} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
Flying
When this creature enters, target creature you control gains flying until end of turn.`,power:"2",toughness:"2",colors:["U"],color_identity:["U"],keywords:["Flying","Offspring"],all_parts:[{object:"related_card",id:"1c671eab-d1ef-4d79-94eb-8b85f0d18699",component:"combo_piece",name:"Finch Formation",type_line:"Creature — Bird Scout",uri:"https://api.scryfall.com/cards/1c671eab-d1ef-4d79-94eb-8b85f0d18699"},{object:"related_card",id:"c8be9b74-6f1a-4692-a09a-1013cae4da18",component:"token",name:"Finch Formation",type_line:"Token Creature — Bird Scout",uri:"https://api.scryfall.com/cards/c8be9b74-6f1a-4692-a09a-1013cae4da18"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1c671eab-d1ef-4d79-94eb-8b85f0d18699/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A76c2e0b4-d4fa-4e98-b363-0a76eb481304&unique=prints",collector_number:"50",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Rhonda Libbey",artist_ids:["9b3fac11-04d4-4896-8005-ad255df63704"],illustration_id:"ad3830e0-1d6e-4d68-a406-9c2ca106b41e",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:18518,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.03",usd_foil:"0.03",usd_etched:null,eur:"0.04",eur_foil:"0.08",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668964&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFinch%2BFormation",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFinch%2BFormation",edhrec:"https://edhrec.com/route/?cc=Finch+Formation"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558689%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Finch-Formation?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129345?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0dee197d-c313-4364-b52c-f83d5f579bc3",oracle_id:"69924636-138e-4baa-a378-0fd7df5b847d",multiverse_ids:[669126],mtgo_id:129669,arena_id:91748,tcgplayer_id:558324,cardmarket_id:777686,name:"Finneas, Ace Archer",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0dee197d-c313-4364-b52c-f83d5f579bc3",scryfall_uri:"https://scryfall.com/card/blb/212/finneas-ace-archer?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/d/0dee197d-c313-4364-b52c-f83d5f579bc3.jpg?1721427047",normal:"https://cards.scryfall.io/normal/front/0/d/0dee197d-c313-4364-b52c-f83d5f579bc3.jpg?1721427047",large:"https://cards.scryfall.io/large/front/0/d/0dee197d-c313-4364-b52c-f83d5f579bc3.jpg?1721427047",png:"https://cards.scryfall.io/png/front/0/d/0dee197d-c313-4364-b52c-f83d5f579bc3.png?1721427047",art_crop:"https://cards.scryfall.io/art_crop/front/0/d/0dee197d-c313-4364-b52c-f83d5f579bc3.jpg?1721427047",border_crop:"https://cards.scryfall.io/border_crop/front/0/d/0dee197d-c313-4364-b52c-f83d5f579bc3.jpg?1721427047"},mana_cost:"{G}{W}",cmc:2,type_line:"Legendary Creature — Rabbit Archer",oracle_text:`Vigilance, reach
Whenever Finneas attacks, put a +1/+1 counter on each other creature you control that's a token or a Rabbit. Then if creatures you control have total power 10 or greater, draw a card.`,power:"2",toughness:"2",colors:["G","W"],color_identity:["G","W"],keywords:["Reach","Vigilance"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0dee197d-c313-4364-b52c-f83d5f579bc3/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A69924636-138e-4baa-a378-0fd7df5b847d&unique=prints",collector_number:"212",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Victor Adame Minguez",artist_ids:["bd8f7368-5b10-4554-b6b8-d052c6aca89f"],illustration_id:"0a5e821e-6dee-48a2-8067-a2d7ec64e46f",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5651,penny_rank:6048,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.13",usd_foil:"0.27",usd_etched:null,eur:"0.24",eur_foil:"0.46",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669126&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFinneas%252C%2BAce%2BArcher",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFinneas%252C%2BAce%2BArcher",edhrec:"https://edhrec.com/route/?cc=Finneas%2C+Ace+Archer"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558324%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Finneas-Ace-Archer?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129669?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b78fbaa3-c580-4290-9c28-b74169aab2fc",oracle_id:"b173245e-2009-48ff-ac42-5f28d12aec79",multiverse_ids:[669127],mtgo_id:129671,arena_id:91749,tcgplayer_id:558329,cardmarket_id:777687,name:"Fireglass Mentor",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b78fbaa3-c580-4290-9c28-b74169aab2fc",scryfall_uri:"https://scryfall.com/card/blb/213/fireglass-mentor?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/7/b78fbaa3-c580-4290-9c28-b74169aab2fc.jpg?1721427057",normal:"https://cards.scryfall.io/normal/front/b/7/b78fbaa3-c580-4290-9c28-b74169aab2fc.jpg?1721427057",large:"https://cards.scryfall.io/large/front/b/7/b78fbaa3-c580-4290-9c28-b74169aab2fc.jpg?1721427057",png:"https://cards.scryfall.io/png/front/b/7/b78fbaa3-c580-4290-9c28-b74169aab2fc.png?1721427057",art_crop:"https://cards.scryfall.io/art_crop/front/b/7/b78fbaa3-c580-4290-9c28-b74169aab2fc.jpg?1721427057",border_crop:"https://cards.scryfall.io/border_crop/front/b/7/b78fbaa3-c580-4290-9c28-b74169aab2fc.jpg?1721427057"},mana_cost:"{B}{R}",cmc:2,type_line:"Creature — Lizard Warlock",oracle_text:"At the beginning of your second main phase, if an opponent lost life this turn, exile the top two cards of your library. Choose one of them. Until end of turn, you may play that card.",power:"2",toughness:"1",colors:["B","R"],color_identity:["B","R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b78fbaa3-c580-4290-9c28-b74169aab2fc/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab173245e-2009-48ff-ac42-5f28d12aec79&unique=prints",collector_number:"213",digital:!1,rarity:"uncommon",flavor_text:'"Nothing focuses the mind quite like a flame."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Henry Peters",artist_ids:["2ffd9e06-94af-44f5-bec6-06f781941a6c"],illustration_id:"a222962b-b1dc-46bd-821a-d7dd12156ef3",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9875,penny_rank:4645,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.06",usd_foil:"0.15",usd_etched:null,eur:"0.16",eur_foil:"0.25",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669127&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFireglass%2BMentor",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFireglass%2BMentor",edhrec:"https://edhrec.com/route/?cc=Fireglass+Mentor"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558329%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fireglass-Mentor?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129671?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4",oracle_id:"d767463b-0fc9-43fc-a85f-e60f030f9b96",multiverse_ids:[669049],mtgo_id:129515,arena_id:91670,tcgplayer_id:559657,cardmarket_id:778522,name:"Flamecache Gecko",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4",scryfall_uri:"https://scryfall.com/card/blb/135/flamecache-gecko?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/b/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4.jpg?1721426619",normal:"https://cards.scryfall.io/normal/front/f/b/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4.jpg?1721426619",large:"https://cards.scryfall.io/large/front/f/b/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4.jpg?1721426619",png:"https://cards.scryfall.io/png/front/f/b/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4.png?1721426619",art_crop:"https://cards.scryfall.io/art_crop/front/f/b/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4.jpg?1721426619",border_crop:"https://cards.scryfall.io/border_crop/front/f/b/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4.jpg?1721426619"},mana_cost:"{1}{R}",cmc:2,type_line:"Creature — Lizard Warlock",oracle_text:`When this creature enters, if an opponent lost life this turn, add {B}{R}.
{1}{R}, Discard a card: Draw a card.`,power:"2",toughness:"2",colors:["R"],color_identity:["B","R"],keywords:[],produced_mana:["B","R"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/fb8e7c97-8393-41b8-bb0b-3983dcc5e7f4/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ad767463b-0fc9-43fc-a85f-e60f030f9b96&unique=prints",collector_number:"135",digital:!1,rarity:"uncommon",flavor_text:"Wood holds a flame for only so long before it crumbles into ash. But stone can burn forever.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Brian Valeza",artist_ids:["bb2a9339-bbe4-445f-9736-3c43379ee076"],illustration_id:"7ebdd6ff-4fb5-4ec9-a3e3-68f04d7612f7",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10560,penny_rank:4919,preview:{source:"IGN",source_uri:"https://es.ign.com/magic-the-gathering-6/205528/news/exclusiva-revelamos-cartas-de-bloomburrow-la-nueva-expansion-de-magic-the-gathering",previewed_at:"2024-07-17"},prices:{usd:"0.05",usd_foil:"0.07",usd_etched:null,eur:"0.16",eur_foil:"0.30",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669049&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFlamecache%2BGecko",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFlamecache%2BGecko",edhrec:"https://edhrec.com/route/?cc=Flamecache+Gecko"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559657%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Flamecache-Gecko?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129515?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c6440439-7178-4a97-9e18-7fdef4b02678",oracle_id:"c65e804b-9222-4fa8-88d1-df06a3279f22",multiverse_ids:[670766],arena_id:91804,tcgplayer_id:559563,name:"Flame Lash",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c6440439-7178-4a97-9e18-7fdef4b02678",scryfall_uri:"https://scryfall.com/card/blb/391/flame-lash?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/6/c6440439-7178-4a97-9e18-7fdef4b02678.jpg?1721428094",normal:"https://cards.scryfall.io/normal/front/c/6/c6440439-7178-4a97-9e18-7fdef4b02678.jpg?1721428094",large:"https://cards.scryfall.io/large/front/c/6/c6440439-7178-4a97-9e18-7fdef4b02678.jpg?1721428094",png:"https://cards.scryfall.io/png/front/c/6/c6440439-7178-4a97-9e18-7fdef4b02678.png?1721428094",art_crop:"https://cards.scryfall.io/art_crop/front/c/6/c6440439-7178-4a97-9e18-7fdef4b02678.jpg?1721428094",border_crop:"https://cards.scryfall.io/border_crop/front/c/6/c6440439-7178-4a97-9e18-7fdef4b02678.jpg?1721428094"},mana_cost:"{3}{R}",cmc:4,type_line:"Instant",oracle_text:"Flame Lash deals 4 damage to any target.",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c6440439-7178-4a97-9e18-7fdef4b02678/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac65e804b-9222-4fa8-88d1-df06a3279f22&unique=prints",collector_number:"391",digital:!1,rarity:"common",flavor_text:'"This is just my warm-up."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Viktor Titov",artist_ids:["2270c0b0-afb4-42b0-bcb6-25fe4ad6eef2"],illustration_id:"da115e38-7cc8-42c3-a762-3b4e85b9f5b1",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:17599,prices:{usd:"0.11",usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670766&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFlame%2BLash",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFlame%2BLash",edhrec:"https://edhrec.com/route/?cc=Flame+Lash"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559563%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Flame+Lash&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards?affiliate_id=scryfall&data%5Bsearch%5D=Flame+Lash&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"97ff118f-9c3c-43a2-8085-980c7fe7d227",oracle_id:"523d075d-b577-4f24-8c14-9a76761a2eaf",multiverse_ids:[668928],mtgo_id:129273,arena_id:91550,tcgplayer_id:558330,cardmarket_id:777546,name:"Flowerfoot Swordmaster",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/97ff118f-9c3c-43a2-8085-980c7fe7d227",scryfall_uri:"https://scryfall.com/card/blb/14/flowerfoot-swordmaster?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/9/7/97ff118f-9c3c-43a2-8085-980c7fe7d227.jpg?1721425843",normal:"https://cards.scryfall.io/normal/front/9/7/97ff118f-9c3c-43a2-8085-980c7fe7d227.jpg?1721425843",large:"https://cards.scryfall.io/large/front/9/7/97ff118f-9c3c-43a2-8085-980c7fe7d227.jpg?1721425843",png:"https://cards.scryfall.io/png/front/9/7/97ff118f-9c3c-43a2-8085-980c7fe7d227.png?1721425843",art_crop:"https://cards.scryfall.io/art_crop/front/9/7/97ff118f-9c3c-43a2-8085-980c7fe7d227.jpg?1721425843",border_crop:"https://cards.scryfall.io/border_crop/front/9/7/97ff118f-9c3c-43a2-8085-980c7fe7d227.jpg?1721425843"},mana_cost:"{W}",cmc:1,type_line:"Creature — Mouse Soldier",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
Valiant — Whenever this creature becomes the target of a spell or ability you control for the first time each turn, Mice you control get +1/+0 until end of turn.`,power:"1",toughness:"2",colors:["W"],color_identity:["W"],keywords:["Offspring","Valiant"],all_parts:[{object:"related_card",id:"97ff118f-9c3c-43a2-8085-980c7fe7d227",component:"combo_piece",name:"Flowerfoot Swordmaster",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/97ff118f-9c3c-43a2-8085-980c7fe7d227"},{object:"related_card",id:"31c977b7-12cb-4e6f-8260-a7399b60940f",component:"token",name:"Flowerfoot Swordmaster",type_line:"Token Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/31c977b7-12cb-4e6f-8260-a7399b60940f"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/97ff118f-9c3c-43a2-8085-980c7fe7d227/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A523d075d-b577-4f24-8c14-9a76761a2eaf&unique=prints",collector_number:"14",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aaron Miller",artist_ids:["fc021f3d-773a-4706-bbe7-f602324f511f"],illustration_id:"3634566c-9ee0-4871-b50a-f61c17525088",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12035,penny_rank:4646,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.10",usd_foil:"0.13",usd_etched:null,eur:"0.16",eur_foil:"0.12",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668928&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFlowerfoot%2BSwordmaster",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFlowerfoot%2BSwordmaster",edhrec:"https://edhrec.com/route/?cc=Flowerfoot+Swordmaster"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558330%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Flowerfoot-Swordmaster?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129273?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"43b3be4a-973d-4aeb-a94e-37e2710ac178",oracle_id:"b34bb2dc-c1af-4d77-b0b3-a0fb342a5fc6",multiverse_ids:[668674],mtgo_id:129785,arena_id:91839,tcgplayer_id:559542,name:"Forest",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/43b3be4a-973d-4aeb-a94e-37e2710ac178",scryfall_uri:"https://scryfall.com/card/blb/377/forest?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/3/43b3be4a-973d-4aeb-a94e-37e2710ac178.jpg?1721428022",normal:"https://cards.scryfall.io/normal/front/4/3/43b3be4a-973d-4aeb-a94e-37e2710ac178.jpg?1721428022",large:"https://cards.scryfall.io/large/front/4/3/43b3be4a-973d-4aeb-a94e-37e2710ac178.jpg?1721428022",png:"https://cards.scryfall.io/png/front/4/3/43b3be4a-973d-4aeb-a94e-37e2710ac178.png?1721428022",art_crop:"https://cards.scryfall.io/art_crop/front/4/3/43b3be4a-973d-4aeb-a94e-37e2710ac178.jpg?1721428022",border_crop:"https://cards.scryfall.io/border_crop/front/4/3/43b3be4a-973d-4aeb-a94e-37e2710ac178.jpg?1721428022"},mana_cost:"",cmc:0,type_line:"Basic Land — Forest",oracle_text:"({T}: Add {G}.)",colors:[],color_identity:["G"],keywords:[],produced_mana:["G"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"legal",predh:"legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/43b3be4a-973d-4aeb-a94e-37e2710ac178/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab34bb2dc-c1af-4d77-b0b3-a0fb342a5fc6&unique=prints",collector_number:"377",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alayna Danner",artist_ids:["bb677b1a-ce51-4888-83d6-5a94de461ff9"],illustration_id:"b4345afd-540d-4f5b-8f2a-2125a9f7cfdc",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,prices:{usd:"0.08",usd_foil:"0.17",usd_etched:null,eur:null,eur_foil:null,tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668674&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DForest",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DForest",edhrec:"https://edhrec.com/route/?cc=Forest"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559542%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Forest&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129785?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"3ec72a27-b622-47d7-bdf3-970ccaef0d2a",oracle_id:"de6e4aa2-23f1-46e5-a061-05522944e0c6",multiverse_ids:[669086],mtgo_id:129589,arena_id:91708,tcgplayer_id:559118,cardmarket_id:778353,name:"For the Common Good",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/3ec72a27-b622-47d7-bdf3-970ccaef0d2a",scryfall_uri:"https://scryfall.com/card/blb/172/for-the-common-good?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/e/3ec72a27-b622-47d7-bdf3-970ccaef0d2a.jpg?1721426807",normal:"https://cards.scryfall.io/normal/front/3/e/3ec72a27-b622-47d7-bdf3-970ccaef0d2a.jpg?1721426807",large:"https://cards.scryfall.io/large/front/3/e/3ec72a27-b622-47d7-bdf3-970ccaef0d2a.jpg?1721426807",png:"https://cards.scryfall.io/png/front/3/e/3ec72a27-b622-47d7-bdf3-970ccaef0d2a.png?1721426807",art_crop:"https://cards.scryfall.io/art_crop/front/3/e/3ec72a27-b622-47d7-bdf3-970ccaef0d2a.jpg?1721426807",border_crop:"https://cards.scryfall.io/border_crop/front/3/e/3ec72a27-b622-47d7-bdf3-970ccaef0d2a.jpg?1721426807"},mana_cost:"{X}{X}{G}",cmc:1,type_line:"Sorcery",oracle_text:"Create X tokens that are copies of target token you control. Then tokens you control gain indestructible until your next turn. You gain 1 life for each token you control.",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/3ec72a27-b622-47d7-bdf3-970ccaef0d2a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ade6e4aa2-23f1-46e5-a061-05522944e0c6&unique=prints",collector_number:"172",digital:!1,rarity:"rare",flavor_text:"Despite their differences, every creature and culture of Valley stood in unison against the threat.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Serena Malyon",artist_ids:["d9fee7a6-7c5e-48a5-8639-bba25abc8a06"],illustration_id:"8e4d2aa9-140f-4e86-a8bc-139aaf68ebf8",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3167,preview:{source:"PC Gamer",source_uri:"https://www.pcgamer.com/games/card-games/magic-the-gatherings-next-main-set-is-going-full-watership-down/",previewed_at:"2024-07-12"},prices:{usd:"0.72",usd_foil:"1.50",usd_etched:null,eur:"0.59",eur_foil:"0.84",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669086&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFor%2Bthe%2BCommon%2BGood",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFor%2Bthe%2BCommon%2BGood",edhrec:"https://edhrec.com/route/?cc=For+the+Common+Good"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559118%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/For-the-Common-Good?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129589?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"658cfcb7-81b7-48c6-9dd2-1663d06108cf",oracle_id:"94e8b0a9-44a1-4dce-8d44-78681ae638a1",multiverse_ids:[669167],mtgo_id:129751,arena_id:91789,tcgplayer_id:559627,cardmarket_id:778531,name:"Fountainport",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/658cfcb7-81b7-48c6-9dd2-1663d06108cf",scryfall_uri:"https://scryfall.com/card/blb/253/fountainport?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",normal:"https://cards.scryfall.io/normal/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",large:"https://cards.scryfall.io/large/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",png:"https://cards.scryfall.io/png/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.png?1721427323",art_crop:"https://cards.scryfall.io/art_crop/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",border_crop:"https://cards.scryfall.io/border_crop/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{2}, {T}, Sacrifice a token: Draw a card.
{3}, {T}, Pay 1 life: Create a 1/1 blue Fish creature token.
{4}, {T}: Create a Treasure token.`,colors:[],color_identity:[],keywords:["Treasure"],produced_mana:["C"],all_parts:[{object:"related_card",id:"ff0357fb-d90c-49c7-b16a-8b52ac686c3b",component:"token",name:"Treasure",type_line:"Token Artifact — Treasure",uri:"https://api.scryfall.com/cards/ff0357fb-d90c-49c7-b16a-8b52ac686c3b"},{object:"related_card",id:"dd04367b-59d8-4ee6-8b5a-abfb1373c226",component:"combo_piece",name:"Fountainport",type_line:"Land",uri:"https://api.scryfall.com/cards/dd04367b-59d8-4ee6-8b5a-abfb1373c226"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/658cfcb7-81b7-48c6-9dd2-1663d06108cf/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A94e8b0a9-44a1-4dce-8d44-78681ae638a1&unique=prints",collector_number:"253",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Leon Tukker",artist_ids:["669b8b90-758d-4f9e-b4f7-98cd6742eb97"],illustration_id:"f1154003-ac02-42a4-9827-29483935ecf9",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1518,preview:{source:"Rapsolo",source_uri:"https://twitter.com/RapsoloM/status/1813274426122600899",previewed_at:"2024-07-16"},prices:{usd:"2.62",usd_foil:"4.02",usd_etched:null,eur:"4.82",eur_foil:"5.62",tix:"2.54"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669167&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFountainport",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFountainport",edhrec:"https://edhrec.com/route/?cc=Fountainport"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559627%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fountainport?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129751?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"a5c94bc0-a49d-451b-8e8d-64d46b8b8603",oracle_id:"ea4c5b8f-a5ff-47dd-8e47-5ae7b21926b4",multiverse_ids:[669159],mtgo_id:129735,arena_id:91781,tcgplayer_id:559114,cardmarket_id:778328,name:"Fountainport Bell",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/a5c94bc0-a49d-451b-8e8d-64d46b8b8603",scryfall_uri:"https://scryfall.com/card/blb/245/fountainport-bell?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/5/a5c94bc0-a49d-451b-8e8d-64d46b8b8603.jpg?1721427270",normal:"https://cards.scryfall.io/normal/front/a/5/a5c94bc0-a49d-451b-8e8d-64d46b8b8603.jpg?1721427270",large:"https://cards.scryfall.io/large/front/a/5/a5c94bc0-a49d-451b-8e8d-64d46b8b8603.jpg?1721427270",png:"https://cards.scryfall.io/png/front/a/5/a5c94bc0-a49d-451b-8e8d-64d46b8b8603.png?1721427270",art_crop:"https://cards.scryfall.io/art_crop/front/a/5/a5c94bc0-a49d-451b-8e8d-64d46b8b8603.jpg?1721427270",border_crop:"https://cards.scryfall.io/border_crop/front/a/5/a5c94bc0-a49d-451b-8e8d-64d46b8b8603.jpg?1721427270"},mana_cost:"{1}",cmc:1,type_line:"Artifact",oracle_text:`When this artifact enters, you may search your library for a basic land card, reveal it, then shuffle and put that card on top.
{1}, Sacrifice this artifact: Draw a card.`,colors:[],color_identity:[],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/a5c94bc0-a49d-451b-8e8d-64d46b8b8603/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aea4c5b8f-a5ff-47dd-8e47-5ae7b21926b4&unique=prints",collector_number:"245",digital:!1,rarity:"common",flavor_text:"Fountainport's town crier once saved the townsfolk from predation by a rottenmouth viper with only their bell.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Néstor Ossandón Leal",artist_ids:["7a6f1667-a8ac-47f5-a302-f71cb54b2adf"],illustration_id:"a3bf7554-5241-491b-8aba-5417c0ecff98",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6279,penny_rank:4158,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.05",usd_foil:"0.12",usd_etched:null,eur:"0.10",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669159&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFountainport%2BBell",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFountainport%2BBell",edhrec:"https://edhrec.com/route/?cc=Fountainport+Bell"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559114%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fountainport-Bell?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129735?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"674bbd6d-e329-42cf-963d-88d1ce8fe51e",oracle_id:"69038520-7156-48d9-aae8-ba3cc76a5993",multiverse_ids:[669050],mtgo_id:129517,arena_id:91672,tcgplayer_id:559080,cardmarket_id:778106,name:"Frilled Sparkshooter",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/674bbd6d-e329-42cf-963d-88d1ce8fe51e",scryfall_uri:"https://scryfall.com/card/blb/136/frilled-sparkshooter?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/7/674bbd6d-e329-42cf-963d-88d1ce8fe51e.jpg?1721426623",normal:"https://cards.scryfall.io/normal/front/6/7/674bbd6d-e329-42cf-963d-88d1ce8fe51e.jpg?1721426623",large:"https://cards.scryfall.io/large/front/6/7/674bbd6d-e329-42cf-963d-88d1ce8fe51e.jpg?1721426623",png:"https://cards.scryfall.io/png/front/6/7/674bbd6d-e329-42cf-963d-88d1ce8fe51e.png?1721426623",art_crop:"https://cards.scryfall.io/art_crop/front/6/7/674bbd6d-e329-42cf-963d-88d1ce8fe51e.jpg?1721426623",border_crop:"https://cards.scryfall.io/border_crop/front/6/7/674bbd6d-e329-42cf-963d-88d1ce8fe51e.jpg?1721426623"},mana_cost:"{3}{R}",cmc:4,type_line:"Creature — Lizard Archer",oracle_text:`Menace, reach
This creature enters with a +1/+1 counter on it if an opponent lost life this turn.`,power:"3",toughness:"3",colors:["R"],color_identity:["R"],keywords:["Reach","Menace"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/674bbd6d-e329-42cf-963d-88d1ce8fe51e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A69038520-7156-48d9-aae8-ba3cc76a5993&unique=prints",collector_number:"136",digital:!1,rarity:"common",flavor_text:"Its frills keep it steady, making its aim impeccable.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Danny Schwartz",artist_ids:["48e30a4a-5b4d-48e2-9c53-03125085374e"],illustration_id:"1420893c-3101-4838-98fe-bfc05cae1f74",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13501,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.01",usd_foil:"0.04",usd_etched:null,eur:"0.05",eur_foil:"0.07",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669050&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFrilled%2BSparkshooter",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFrilled%2BSparkshooter",edhrec:"https://edhrec.com/route/?cc=Frilled+Sparkshooter"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559080%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Frilled-Sparkshooter?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129517?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"58706bd8-558a-43b9-9f1e-c1ff0044203b",oracle_id:"b0747a4f-d041-4750-aef5-a5d101696f65",multiverse_ids:[669087],mtgo_id:129591,arena_id:91709,tcgplayer_id:558693,cardmarket_id:777777,name:"Galewind Moose",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/58706bd8-558a-43b9-9f1e-c1ff0044203b",scryfall_uri:"https://scryfall.com/card/blb/173/galewind-moose?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/8/58706bd8-558a-43b9-9f1e-c1ff0044203b.jpg?1721426814",normal:"https://cards.scryfall.io/normal/front/5/8/58706bd8-558a-43b9-9f1e-c1ff0044203b.jpg?1721426814",large:"https://cards.scryfall.io/large/front/5/8/58706bd8-558a-43b9-9f1e-c1ff0044203b.jpg?1721426814",png:"https://cards.scryfall.io/png/front/5/8/58706bd8-558a-43b9-9f1e-c1ff0044203b.png?1721426814",art_crop:"https://cards.scryfall.io/art_crop/front/5/8/58706bd8-558a-43b9-9f1e-c1ff0044203b.jpg?1721426814",border_crop:"https://cards.scryfall.io/border_crop/front/5/8/58706bd8-558a-43b9-9f1e-c1ff0044203b.jpg?1721426814"},mana_cost:"{4}{G}{G}",cmc:6,type_line:"Creature — Elemental Elk",oracle_text:`Flash
Vigilance, reach, trample`,power:"6",toughness:"6",colors:["G"],color_identity:["G"],keywords:["Reach","Vigilance","Trample","Flash"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/58706bd8-558a-43b9-9f1e-c1ff0044203b/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab0747a4f-d041-4750-aef5-a5d101696f65&unique=prints",collector_number:"173",digital:!1,rarity:"uncommon",flavor_text:`"Something has stirred the Calamity Beasts, and they are wreaking havoc. Anyone who wishes to help, come forth! Whether it's with your swords in the fight or your shovels in the field, join me!"
—Mabel, heir to Cragflame`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Valera Lutfullina",artist_ids:["76bc57c7-47c6-40c5-8797-8ffcce430ac7"],illustration_id:"ce1f57f2-3778-47c0-9f28-0a889aa33fbf",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12228,penny_rank:9687,preview:{source:"Anna Margaret",source_uri:"https://x.com/itsannamargaret/status/1811153920657387742",previewed_at:"2024-07-10"},prices:{usd:"0.05",usd_foil:"0.12",usd_etched:null,eur:"0.12",eur_foil:"0.13",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669087&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGalewind%2BMoose",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGalewind%2BMoose",edhrec:"https://edhrec.com/route/?cc=Galewind+Moose"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558693%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Galewind-Moose?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129591?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"131ea976-289e-4f32-896d-27bbfd423ba9",oracle_id:"77b832a8-a3af-44fe-bc67-72510d292667",multiverse_ids:[669128],mtgo_id:129673,arena_id:91750,tcgplayer_id:559632,cardmarket_id:778530,name:"Gev, Scaled Scorch",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/131ea976-289e-4f32-896d-27bbfd423ba9",scryfall_uri:"https://scryfall.com/card/blb/214/gev-scaled-scorch?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",normal:"https://cards.scryfall.io/normal/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",large:"https://cards.scryfall.io/large/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",png:"https://cards.scryfall.io/png/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.png?1721427059",art_crop:"https://cards.scryfall.io/art_crop/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",border_crop:"https://cards.scryfall.io/border_crop/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059"},mana_cost:"{B}{R}",cmc:2,type_line:"Legendary Creature — Lizard Mercenary",oracle_text:`Ward—Pay 2 life.
Other creatures you control enter with an additional +1/+1 counter on them for each opponent who lost life this turn.
Whenever you cast a Lizard spell, Gev deals 1 damage to target opponent.`,power:"3",toughness:"2",colors:["B","R"],color_identity:["B","R"],keywords:["Ward"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/131ea976-289e-4f32-896d-27bbfd423ba9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A77b832a8-a3af-44fe-bc67-72510d292667&unique=prints",collector_number:"214",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mark Zug",artist_ids:["48e2b98c-5467-4671-bd42-4c3746115117"],illustration_id:"ecaf7eb2-f362-4928-9e07-b8cda12bb91d",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7001,preview:{source:"Mistystep",source_uri:"https://www.instagram.com/reel/C9fXP3iR8-X/",previewed_at:"2024-07-16"},prices:{usd:"0.42",usd_foil:"0.61",usd_etched:null,eur:"0.56",eur_foil:"0.98",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669128&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGev%252C%2BScaled%2BScorch",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGev%252C%2BScaled%2BScorch",edhrec:"https://edhrec.com/route/?cc=Gev%2C+Scaled+Scorch"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559632%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Gev-Scaled-Scorch?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129673?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd",oracle_id:"5748ebf1-24e3-499d-ab7c-c2cebd462a24",multiverse_ids:[670768],arena_id:91806,tcgplayer_id:559550,name:"Giant Growth",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd",scryfall_uri:"https://scryfall.com/card/blb/393/giant-growth?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/7/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd.jpg?1721428103",normal:"https://cards.scryfall.io/normal/front/e/7/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd.jpg?1721428103",large:"https://cards.scryfall.io/large/front/e/7/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd.jpg?1721428103",png:"https://cards.scryfall.io/png/front/e/7/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd.png?1721428103",art_crop:"https://cards.scryfall.io/art_crop/front/e/7/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd.jpg?1721428103",border_crop:"https://cards.scryfall.io/border_crop/front/e/7/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd.jpg?1721428103"},mana_cost:"{G}",cmc:1,type_line:"Instant",oracle_text:"Target creature gets +3/+3 until end of turn.",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"legal",predh:"legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e70722d6-b4d5-45c2-9488-9a5eb0bdb9bd/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5748ebf1-24e3-499d-ab7c-c2cebd462a24&unique=prints",collector_number:"393",digital:!1,rarity:"common",flavor_text:`"Sometimes Mowu is content to gnaw on a bone. Sometimes he wants the whole skeleton."
—Jiang Yanggu`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Dmitry Burmak",artist_ids:["9872f5c0-274a-48ce-a9ad-6f0d5654e29c"],illustration_id:"e38b3ddf-549b-4557-9fda-963d801ea6c0",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:4199,penny_rank:3481,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.10",usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670768&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGiant%2BGrowth",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGiant%2BGrowth",edhrec:"https://edhrec.com/route/?cc=Giant+Growth"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559550%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Giant+Growth&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards?affiliate_id=scryfall&data%5Bsearch%5D=Giant+Growth&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ffc70b2d-5a3a-49ea-97db-175a62248302",oracle_id:"df9409e6-bd6d-4b5b-b807-fcf347ee940a",multiverse_ids:[669129],mtgo_id:129675,arena_id:91751,tcgplayer_id:558331,cardmarket_id:777688,name:"Glarb, Calamity's Augur",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ffc70b2d-5a3a-49ea-97db-175a62248302",scryfall_uri:"https://scryfall.com/card/blb/215/glarb-calamitys-augur?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/f/ffc70b2d-5a3a-49ea-97db-175a62248302.jpg?1721427068",normal:"https://cards.scryfall.io/normal/front/f/f/ffc70b2d-5a3a-49ea-97db-175a62248302.jpg?1721427068",large:"https://cards.scryfall.io/large/front/f/f/ffc70b2d-5a3a-49ea-97db-175a62248302.jpg?1721427068",png:"https://cards.scryfall.io/png/front/f/f/ffc70b2d-5a3a-49ea-97db-175a62248302.png?1721427068",art_crop:"https://cards.scryfall.io/art_crop/front/f/f/ffc70b2d-5a3a-49ea-97db-175a62248302.jpg?1721427068",border_crop:"https://cards.scryfall.io/border_crop/front/f/f/ffc70b2d-5a3a-49ea-97db-175a62248302.jpg?1721427068"},mana_cost:"{B}{G}{U}",cmc:3,type_line:"Legendary Creature — Frog Wizard Noble",oracle_text:`Deathtouch
You may look at the top card of your library any time.
You may play lands and cast spells with mana value 4 or greater from the top of your library.
{T}: Surveil 2.`,power:"2",toughness:"4",colors:["B","G","U"],color_identity:["B","G","U"],keywords:["Surveil","Deathtouch"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ffc70b2d-5a3a-49ea-97db-175a62248302/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Adf9409e6-bd6d-4b5b-b807-fcf347ee940a&unique=prints",collector_number:"215",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Bram Sels",artist_ids:["2e90d3c1-e8ac-45c7-9d5a-63385c1a384d"],illustration_id:"2770af48-32cd-42d2-a65a-85656da21cf8",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4860,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"4.26",usd_foil:"4.69",usd_etched:null,eur:"3.28",eur_foil:"9.62",tix:"0.25"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669129&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGlarb%252C%2BCalamity%2527s%2BAugur",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGlarb%252C%2BCalamity%2527s%2BAugur",edhrec:"https://edhrec.com/route/?cc=Glarb%2C+Calamity%27s+Augur"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558331%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Glarb-Calamitys-Augur?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129675?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"4831e7ae-54e3-4bd9-b5af-52dc29f81715",oracle_id:"33c06c11-8d0a-45ce-adea-c9a7a8ac8779",multiverse_ids:[669010],mtgo_id:129437,arena_id:91632,tcgplayer_id:559151,cardmarket_id:778332,name:"Glidedive Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/4831e7ae-54e3-4bd9-b5af-52dc29f81715",scryfall_uri:"https://scryfall.com/card/blb/96/glidedive-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/8/4831e7ae-54e3-4bd9-b5af-52dc29f81715.jpg?1721426425",normal:"https://cards.scryfall.io/normal/front/4/8/4831e7ae-54e3-4bd9-b5af-52dc29f81715.jpg?1721426425",large:"https://cards.scryfall.io/large/front/4/8/4831e7ae-54e3-4bd9-b5af-52dc29f81715.jpg?1721426425",png:"https://cards.scryfall.io/png/front/4/8/4831e7ae-54e3-4bd9-b5af-52dc29f81715.png?1721426425",art_crop:"https://cards.scryfall.io/art_crop/front/4/8/4831e7ae-54e3-4bd9-b5af-52dc29f81715.jpg?1721426425",border_crop:"https://cards.scryfall.io/border_crop/front/4/8/4831e7ae-54e3-4bd9-b5af-52dc29f81715.jpg?1721426425"},mana_cost:"{4}{B}",cmc:5,type_line:"Creature — Bat Lizard",oracle_text:`Flying
When this creature enters, each opponent loses 2 life and you gain 2 life.`,power:"3",toughness:"3",colors:["B"],color_identity:["B"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/4831e7ae-54e3-4bd9-b5af-52dc29f81715/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A33c06c11-8d0a-45ce-adea-c9a7a8ac8779&unique=prints",collector_number:"96",digital:!1,rarity:"common",flavor_text:`"Catch the thermal!" called the bat.
"What's a thermal?!" cried the lizard.`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Manuel Castañón",artist_ids:["35f11eeb-36ff-4059-bb70-d1274f5bd858"],illustration_id:"525fb9ca-7336-48ae-9b0d-672ad06cd51a",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11426,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.04",usd_foil:"0.09",usd_etched:null,eur:"0.07",eur_foil:"0.08",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669010&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGlidedive%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGlidedive%2BDuo",edhrec:"https://edhrec.com/route/?cc=Glidedive+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559151%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Glidedive-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129437?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b299889a-03d6-4659-b0e1-f0830842e40f",oracle_id:"96e6d220-87db-4dab-abaa-e80c9577d89a",multiverse_ids:[668965],mtgo_id:129347,arena_id:91587,tcgplayer_id:559136,cardmarket_id:778325,name:"Gossip's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b299889a-03d6-4659-b0e1-f0830842e40f",scryfall_uri:"https://scryfall.com/card/blb/51/gossips-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/2/b299889a-03d6-4659-b0e1-f0830842e40f.jpg?1721426095",normal:"https://cards.scryfall.io/normal/front/b/2/b299889a-03d6-4659-b0e1-f0830842e40f.jpg?1721426095",large:"https://cards.scryfall.io/large/front/b/2/b299889a-03d6-4659-b0e1-f0830842e40f.jpg?1721426095",png:"https://cards.scryfall.io/png/front/b/2/b299889a-03d6-4659-b0e1-f0830842e40f.png?1721426095",art_crop:"https://cards.scryfall.io/art_crop/front/b/2/b299889a-03d6-4659-b0e1-f0830842e40f.jpg?1721426095",border_crop:"https://cards.scryfall.io/border_crop/front/b/2/b299889a-03d6-4659-b0e1-f0830842e40f.jpg?1721426095"},mana_cost:"{1}{U}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
Whenever a creature you control enters, surveil 1.
{1}{U}: Level 2
Whenever you attack, target attacking creature with power 3 or less can't be blocked this turn.
{3}{U}: Level 3
Whenever a creature you control deals combat damage to a player, you may exile it, then return it to the battlefield under its owner's control.`,colors:["U"],color_identity:["U"],keywords:["Surveil"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b299889a-03d6-4659-b0e1-f0830842e40f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A96e6d220-87db-4dab-abaa-e80c9577d89a&unique=prints",collector_number:"51",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Andrea Sipl",artist_ids:["8fc642af-8ec0-4ed1-921f-140323446142"],illustration_id:"b4716ba8-04c5-4b8a-b303-ea028281f93b",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5425,preview:{source:"VeggieWagon",source_uri:"https://twitter.com/VeggieWagonYee/status/1811806160506486817",previewed_at:"2024-07-12"},prices:{usd:"0.18",usd_foil:"0.25",usd_etched:null,eur:"0.15",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668965&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGossip%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGossip%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Gossip%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559136%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Gossips-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129347?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b56beeb6-88ca-475e-8654-1d4e8b4aa3c0",oracle_id:"fb8f7047-280b-464f-aca2-6add3e21df8f",multiverse_ids:[669051],mtgo_id:129519,arena_id:91673,tcgplayer_id:559081,cardmarket_id:778115,name:"Harnesser of Storms",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0",scryfall_uri:"https://scryfall.com/card/blb/137/harnesser-of-storms?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",normal:"https://cards.scryfall.io/normal/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",large:"https://cards.scryfall.io/large/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",png:"https://cards.scryfall.io/png/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.png?1721426630",art_crop:"https://cards.scryfall.io/art_crop/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",border_crop:"https://cards.scryfall.io/border_crop/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630"},mana_cost:"{2}{R}",cmc:3,type_line:"Creature — Otter Wizard",oracle_text:"Whenever you cast a noncreature or Otter spell, you may exile the top card of your library. Until end of turn, you may play that card. This ability triggers only once each turn.",power:"1",toughness:"4",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Afb8f7047-280b-464f-aca2-6add3e21df8f&unique=prints",collector_number:"137",digital:!1,rarity:"uncommon",flavor_text:"She feeds and powers her entire village.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Bram Sels",artist_ids:["2e90d3c1-e8ac-45c7-9d5a-63385c1a384d"],illustration_id:"4f24de7f-fb2c-4175-aaba-887b919ae668",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9185,preview:{source:"Limited Resources",source_uri:"https://twitter.com/Marshall_LR/status/1811570808604807458",previewed_at:"2024-07-11"},prices:{usd:"0.09",usd_foil:"0.08",usd_etched:null,eur:"0.15",eur_foil:"0.30",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669051&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHarnesser%2Bof%2BStorms",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHarnesser%2Bof%2BStorms",edhrec:"https://edhrec.com/route/?cc=Harnesser+of+Storms"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559081%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Harnesser-of-Storms?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129519?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"41762689-0c13-4d45-9d81-ba2afad980f8",oracle_id:"56208bdc-2eed-4ccc-8c34-c0eba9db0aa9",multiverse_ids:[668929],mtgo_id:129275,arena_id:91551,tcgplayer_id:559129,cardmarket_id:778352,name:"Harvestrite Host",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/41762689-0c13-4d45-9d81-ba2afad980f8",scryfall_uri:"https://scryfall.com/card/blb/15/harvestrite-host?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",normal:"https://cards.scryfall.io/normal/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",large:"https://cards.scryfall.io/large/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",png:"https://cards.scryfall.io/png/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.png?1721425845",art_crop:"https://cards.scryfall.io/art_crop/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",border_crop:"https://cards.scryfall.io/border_crop/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845"},mana_cost:"{2}{W}",cmc:3,type_line:"Creature — Rabbit Citizen",oracle_text:"Whenever this creature or another Rabbit you control enters, target creature you control gets +1/+0 until end of turn. Then draw a card if this is the second time this ability has resolved this turn.",power:"3",toughness:"3",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/41762689-0c13-4d45-9d81-ba2afad980f8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A56208bdc-2eed-4ccc-8c34-c0eba9db0aa9&unique=prints",collector_number:"15",digital:!1,rarity:"uncommon",flavor_text:'"Many paws grew this feast, and many paws should share it!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Julie Dillon",artist_ids:["ce8605ad-6d5a-45a3-a7b6-84be4f5209cd"],illustration_id:"d99238a4-da52-4bba-a85b-03b2b2ba99d5",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11242,penny_rank:6213,preview:{source:"mtgso",source_uri:"https://mp.weixin.qq.com/s/19XmF8S6jBQgjp2yYPU4Bw",previewed_at:"2024-07-12"},prices:{usd:"0.08",usd_foil:"0.07",usd_etched:null,eur:"0.09",eur_foil:"0.28",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668929&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHarvestrite%2BHost",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHarvestrite%2BHost",edhrec:"https://edhrec.com/route/?cc=Harvestrite+Host"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559129%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Harvestrite-Host?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129275?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e2882982-b3a3-4762-a550-6b82db1038e8",oracle_id:"f40cb1af-3db6-4e90-830f-86ff4b60e239",multiverse_ids:[669088],mtgo_id:129593,arena_id:91710,tcgplayer_id:559483,cardmarket_id:778508,name:"Hazardroot Herbalist",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e2882982-b3a3-4762-a550-6b82db1038e8",scryfall_uri:"https://scryfall.com/card/blb/174/hazardroot-herbalist?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/2/e2882982-b3a3-4762-a550-6b82db1038e8.jpg?1721426818",normal:"https://cards.scryfall.io/normal/front/e/2/e2882982-b3a3-4762-a550-6b82db1038e8.jpg?1721426818",large:"https://cards.scryfall.io/large/front/e/2/e2882982-b3a3-4762-a550-6b82db1038e8.jpg?1721426818",png:"https://cards.scryfall.io/png/front/e/2/e2882982-b3a3-4762-a550-6b82db1038e8.png?1721426818",art_crop:"https://cards.scryfall.io/art_crop/front/e/2/e2882982-b3a3-4762-a550-6b82db1038e8.jpg?1721426818",border_crop:"https://cards.scryfall.io/border_crop/front/e/2/e2882982-b3a3-4762-a550-6b82db1038e8.jpg?1721426818"},mana_cost:"{2}{G}",cmc:3,type_line:"Creature — Rabbit Druid",oracle_text:"Whenever you attack, target creature you control gets +1/+0 until end of turn. If that creature is a token, it also gains deathtouch until end of turn.",power:"1",toughness:"4",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e2882982-b3a3-4762-a550-6b82db1038e8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af40cb1af-3db6-4e90-830f-86ff4b60e239&unique=prints",collector_number:"174",digital:!1,rarity:"uncommon",flavor_text:"Just because it's natural doesn't mean it's healthy.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:'Josiah "Jo" Cameron',artist_ids:["2a8b4b91-ddff-4477-ba10-b92bc04a4358"],illustration_id:"04f2ec7b-e56c-429f-8db4-f2f8cc206ed7",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13425,preview:{source:"Good Games",source_uri:"https://www.goodgames.com.au/articles/bloomburrow-spoiler-hazardroot-herbalist/",previewed_at:"2024-07-14"},prices:{usd:"0.04",usd_foil:"0.07",usd_etched:null,eur:"0.10",eur_foil:"0.11",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669088&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHazardroot%2BHerbalist",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHazardroot%2BHerbalist",edhrec:"https://edhrec.com/route/?cc=Hazardroot+Herbalist"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559483%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hazardroot-Herbalist?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129593?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"239363df-4de8-4b64-80fc-a1f4b5c36027",oracle_id:"2a74a055-ff7f-434b-8dfb-d9fb72579cee",multiverse_ids:[669011],mtgo_id:129439,arena_id:91633,tcgplayer_id:559510,cardmarket_id:778493,name:"Hazel's Nocturne",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/239363df-4de8-4b64-80fc-a1f4b5c36027",scryfall_uri:"https://scryfall.com/card/blb/97/hazels-nocturne?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/3/239363df-4de8-4b64-80fc-a1f4b5c36027.jpg?1721426431",normal:"https://cards.scryfall.io/normal/front/2/3/239363df-4de8-4b64-80fc-a1f4b5c36027.jpg?1721426431",large:"https://cards.scryfall.io/large/front/2/3/239363df-4de8-4b64-80fc-a1f4b5c36027.jpg?1721426431",png:"https://cards.scryfall.io/png/front/2/3/239363df-4de8-4b64-80fc-a1f4b5c36027.png?1721426431",art_crop:"https://cards.scryfall.io/art_crop/front/2/3/239363df-4de8-4b64-80fc-a1f4b5c36027.jpg?1721426431",border_crop:"https://cards.scryfall.io/border_crop/front/2/3/239363df-4de8-4b64-80fc-a1f4b5c36027.jpg?1721426431"},mana_cost:"{3}{B}",cmc:4,type_line:"Instant",oracle_text:"Return up to two target creature cards from your graveyard to your hand. Each opponent loses 2 life and you gain 2 life.",colors:["B"],color_identity:["B"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/239363df-4de8-4b64-80fc-a1f4b5c36027/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A2a74a055-ff7f-434b-8dfb-d9fb72579cee&unique=prints",collector_number:"97",digital:!1,rarity:"uncommon",flavor_text:"On stormy autumn days, the leaves in the trees chitter and whisper.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Dominik Mayer",artist_ids:["c3439c4a-1fee-4e33-9b89-18dac27ac927"],illustration_id:"3ea5ddc9-abdf-400f-b3ca-f9075b265b09",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8060,preview:{source:"IslandsInFront",source_uri:"https://twitter.com/IslandsInFront/status/1812910771623350447",previewed_at:"2024-07-15"},prices:{usd:"0.13",usd_foil:"0.13",usd_etched:null,eur:"0.16",eur_foil:"0.16",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669011&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHazel%2527s%2BNocturne",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHazel%2527s%2BNocturne",edhrec:"https://edhrec.com/route/?cc=Hazel%27s+Nocturne"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559510%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hazels-Nocturne?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129439?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"2fc20157-edd3-484d-8864-925c071c0551",oracle_id:"467d6acb-9a3c-433f-836d-54e0e670b7d0",multiverse_ids:[669130],mtgo_id:129677,arena_id:91752,tcgplayer_id:558434,cardmarket_id:777689,name:"Head of the Homestead",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/2fc20157-edd3-484d-8864-925c071c0551",scryfall_uri:"https://scryfall.com/card/blb/216/head-of-the-homestead?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",normal:"https://cards.scryfall.io/normal/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",large:"https://cards.scryfall.io/large/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",png:"https://cards.scryfall.io/png/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.png?1721427071",art_crop:"https://cards.scryfall.io/art_crop/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",border_crop:"https://cards.scryfall.io/border_crop/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071"},mana_cost:"{3}{G/W}{G/W}",cmc:5,type_line:"Creature — Rabbit Citizen",oracle_text:"When this creature enters, create two 1/1 white Rabbit creature tokens.",power:"3",toughness:"2",colors:["G","W"],color_identity:["G","W"],keywords:[],all_parts:[{object:"related_card",id:"2fc20157-edd3-484d-8864-925c071c0551",component:"combo_piece",name:"Head of the Homestead",type_line:"Creature — Rabbit Citizen",uri:"https://api.scryfall.com/cards/2fc20157-edd3-484d-8864-925c071c0551"},{object:"related_card",id:"81de52ef-7515-4958-abea-fb8ebdcef93c",component:"token",name:"Rabbit",type_line:"Token Creature — Rabbit",uri:"https://api.scryfall.com/cards/81de52ef-7515-4958-abea-fb8ebdcef93c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/2fc20157-edd3-484d-8864-925c071c0551/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A467d6acb-9a3c-433f-836d-54e0e670b7d0&unique=prints",collector_number:"216",digital:!1,rarity:"common",flavor_text:`"Interrupting a rabbitfolk dinner is a most grievous offense. If you must do so, bring gifts for the little ones, or bring a shield."
—*Giddy's Guide to Valley*`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Omar Rayyan",artist_ids:["256b61a2-b9af-4ff5-b485-47a61818f818"],illustration_id:"a1bf59be-be6d-4312-a59d-1b497ef85cc7",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11223,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.03",usd_foil:"0.08",usd_etched:null,eur:"0.11",eur_foil:"0.09",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669130&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHead%2Bof%2Bthe%2BHomestead",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHead%2Bof%2Bthe%2BHomestead",edhrec:"https://edhrec.com/route/?cc=Head+of+the+Homestead"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558434%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Head-of-the-Homestead?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129677?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"3b5349db-0e0a-4b15-886e-0db403ef49cb",oracle_id:"bbfc5011-a9b7-442d-a443-974a5a64de46",multiverse_ids:[669089],mtgo_id:129595,arena_id:91711,tcgplayer_id:559774,cardmarket_id:778922,name:"Heaped Harvest",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/3b5349db-0e0a-4b15-886e-0db403ef49cb",scryfall_uri:"https://scryfall.com/card/blb/175/heaped-harvest?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/b/3b5349db-0e0a-4b15-886e-0db403ef49cb.jpg?1721426825",normal:"https://cards.scryfall.io/normal/front/3/b/3b5349db-0e0a-4b15-886e-0db403ef49cb.jpg?1721426825",large:"https://cards.scryfall.io/large/front/3/b/3b5349db-0e0a-4b15-886e-0db403ef49cb.jpg?1721426825",png:"https://cards.scryfall.io/png/front/3/b/3b5349db-0e0a-4b15-886e-0db403ef49cb.png?1721426825",art_crop:"https://cards.scryfall.io/art_crop/front/3/b/3b5349db-0e0a-4b15-886e-0db403ef49cb.jpg?1721426825",border_crop:"https://cards.scryfall.io/border_crop/front/3/b/3b5349db-0e0a-4b15-886e-0db403ef49cb.jpg?1721426825"},mana_cost:"{2}{G}",cmc:3,type_line:"Artifact — Food",oracle_text:`When this artifact enters and when you sacrifice it, you may search your library for a basic land card, put it onto the battlefield tapped, then shuffle.
{2}, {T}, Sacrifice this artifact: You gain 3 life.`,colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/3b5349db-0e0a-4b15-886e-0db403ef49cb/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abbfc5011-a9b7-442d-a443-974a5a64de46&unique=prints",collector_number:"175",digital:!1,rarity:"common",flavor_text:"One can travel all of Valley and never eat the same meal twice.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Daniel Ljunggren",artist_ids:["0fbd4798-76eb-46d5-a5d4-1e3a25870e34"],illustration_id:"012cc70c-9768-4ac4-9bd4-4679f4be19ca",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3945,penny_rank:4648,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.09",usd_foil:"0.29",usd_etched:null,eur:"0.15",eur_foil:"0.25",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669089&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHeaped%2BHarvest",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHeaped%2BHarvest",edhrec:"https://edhrec.com/route/?cc=Heaped+Harvest"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559774%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Heaped-Harvest?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129595?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"48ace959-66b2-40c8-9bff-fd7ed9c99a82",oracle_id:"49e1e202-37bf-46ed-93d1-1adb13726039",multiverse_ids:[669052],mtgo_id:129521,arena_id:91674,tcgplayer_id:558704,cardmarket_id:777769,name:"Heartfire Hero",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/48ace959-66b2-40c8-9bff-fd7ed9c99a82",scryfall_uri:"https://scryfall.com/card/blb/138/heartfire-hero?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/8/48ace959-66b2-40c8-9bff-fd7ed9c99a82.jpg?1738269538",normal:"https://cards.scryfall.io/normal/front/4/8/48ace959-66b2-40c8-9bff-fd7ed9c99a82.jpg?1738269538",large:"https://cards.scryfall.io/large/front/4/8/48ace959-66b2-40c8-9bff-fd7ed9c99a82.jpg?1738269538",png:"https://cards.scryfall.io/png/front/4/8/48ace959-66b2-40c8-9bff-fd7ed9c99a82.png?1738269538",art_crop:"https://cards.scryfall.io/art_crop/front/4/8/48ace959-66b2-40c8-9bff-fd7ed9c99a82.jpg?1738269538",border_crop:"https://cards.scryfall.io/border_crop/front/4/8/48ace959-66b2-40c8-9bff-fd7ed9c99a82.jpg?1738269538"},mana_cost:"{R}",cmc:1,type_line:"Creature — Mouse Soldier",oracle_text:`Valiant — Whenever this creature becomes the target of a spell or ability you control for the first time each turn, put a +1/+1 counter on it.
When this creature dies, it deals damage equal to its power to each opponent.`,power:"1",toughness:"1",colors:["R"],color_identity:["R"],keywords:["Valiant"],all_parts:[{object:"related_card",id:"48ace959-66b2-40c8-9bff-fd7ed9c99a82",component:"combo_piece",name:"Heartfire Hero",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/48ace959-66b2-40c8-9bff-fd7ed9c99a82"},{object:"related_card",id:"b24c3e9c-2aff-45fd-9c87-3ebd33bbe807",component:"combo_piece",name:"A-Heartfire Hero",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/b24c3e9c-2aff-45fd-9c87-3ebd33bbe807"}],legalities:{standard:"legal",future:"legal",historic:"not_legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"not_legal",alchemy:"not_legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/48ace959-66b2-40c8-9bff-fd7ed9c99a82/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A49e1e202-37bf-46ed-93d1-1adb13726039&unique=prints",collector_number:"138",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakub Kasper",artist_ids:["36901417-ce61-4636-8b77-6db14a9cb68a"],illustration_id:"fe052f41-65c4-40dc-b004-78ad4367746a",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9249,preview:{source:"BrujajaGaming",source_uri:"https://twitter.com/BrujajaGaming/status/1811091814381678696",previewed_at:"2024-07-10"},prices:{usd:"0.58",usd_foil:"2.29",usd_etched:null,eur:"2.24",eur_foil:"2.66",tix:"0.41"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669052&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHeartfire%2BHero",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHeartfire%2BHero",edhrec:"https://edhrec.com/route/?cc=Heartfire+Hero"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558704%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Heartfire-Hero?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129521?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"bef1cf5c-9738-4062-8cb1-87a372d36687",oracle_id:"beb02f49-95a6-49bf-b176-4e4b2ab5b651",multiverse_ids:[669053],mtgo_id:129523,arena_id:91675,tcgplayer_id:559125,cardmarket_id:778338,name:"Hearthborn Battler",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/bef1cf5c-9738-4062-8cb1-87a372d36687",scryfall_uri:"https://scryfall.com/card/blb/139/hearthborn-battler?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/e/bef1cf5c-9738-4062-8cb1-87a372d36687.jpg?1721426641",normal:"https://cards.scryfall.io/normal/front/b/e/bef1cf5c-9738-4062-8cb1-87a372d36687.jpg?1721426641",large:"https://cards.scryfall.io/large/front/b/e/bef1cf5c-9738-4062-8cb1-87a372d36687.jpg?1721426641",png:"https://cards.scryfall.io/png/front/b/e/bef1cf5c-9738-4062-8cb1-87a372d36687.png?1721426641",art_crop:"https://cards.scryfall.io/art_crop/front/b/e/bef1cf5c-9738-4062-8cb1-87a372d36687.jpg?1721426641",border_crop:"https://cards.scryfall.io/border_crop/front/b/e/bef1cf5c-9738-4062-8cb1-87a372d36687.jpg?1721426641"},mana_cost:"{2}{R}",cmc:3,type_line:"Creature — Lizard Warlock",oracle_text:`Haste
Whenever a player casts their second spell each turn, this creature deals 2 damage to target opponent.`,power:"2",toughness:"3",colors:["R"],color_identity:["R"],keywords:["Haste"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/bef1cf5c-9738-4062-8cb1-87a372d36687/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abeb02f49-95a6-49bf-b176-4e4b2ab5b651&unique=prints",collector_number:"139",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Zoltan Boros",artist_ids:["1885e6cb-c827-4896-994e-3d0a027d602f"],illustration_id:"0a219c2a-8dc2-4b5a-85f0-fe177d59215b",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7310,penny_rank:9191,preview:{source:"Gamerbraves",source_uri:"https://www.gamerbraves.com/mtg-bloomburrow-introduces-hearthborn-battler/",previewed_at:"2024-07-12"},prices:{usd:"0.19",usd_foil:"0.22",usd_etched:null,eur:"0.29",eur_foil:"0.26",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669053&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHearthborn%2BBattler",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHearthborn%2BBattler",edhrec:"https://edhrec.com/route/?cc=Hearthborn+Battler"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559125%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hearthborn-Battler?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129523?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7839ce48-0175-494a-ab89-9bdfb7a50cb1",oracle_id:"43037ef5-09e8-4881-beff-ed38cf7574c6",multiverse_ids:[669160],mtgo_id:129737,arena_id:91782,tcgplayer_id:559629,cardmarket_id:778514,name:"Heirloom Epic",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7839ce48-0175-494a-ab89-9bdfb7a50cb1",scryfall_uri:"https://scryfall.com/card/blb/246/heirloom-epic?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/8/7839ce48-0175-494a-ab89-9bdfb7a50cb1.jpg?1721427279",normal:"https://cards.scryfall.io/normal/front/7/8/7839ce48-0175-494a-ab89-9bdfb7a50cb1.jpg?1721427279",large:"https://cards.scryfall.io/large/front/7/8/7839ce48-0175-494a-ab89-9bdfb7a50cb1.jpg?1721427279",png:"https://cards.scryfall.io/png/front/7/8/7839ce48-0175-494a-ab89-9bdfb7a50cb1.png?1721427279",art_crop:"https://cards.scryfall.io/art_crop/front/7/8/7839ce48-0175-494a-ab89-9bdfb7a50cb1.jpg?1721427279",border_crop:"https://cards.scryfall.io/border_crop/front/7/8/7839ce48-0175-494a-ab89-9bdfb7a50cb1.jpg?1721427279"},mana_cost:"{1}",cmc:1,type_line:"Artifact",oracle_text:"{4}, {T}: Draw a card. For each mana in this ability's activation cost, you may tap an untapped creature you control rather than pay that mana. Activate only as a sorcery.",colors:[],color_identity:[],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7839ce48-0175-494a-ab89-9bdfb7a50cb1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A43037ef5-09e8-4881-beff-ed38cf7574c6&unique=prints",collector_number:"246",digital:!1,rarity:"uncommon",flavor_text:'"The beasts feared fire, and little else. Lily of Valley raised Cragflame and..."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Fiona Hsieh",artist_ids:["22211c1d-e15e-4db3-9350-e4a9862928bb"],illustration_id:"e363508e-f176-4f27-8263-112eaf044140",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11117,preview:{source:"Rubee",source_uri:"https://twitter.com/RubeePlays/status/1813008406422429803",previewed_at:"2024-07-15"},prices:{usd:"0.06",usd_foil:"0.08",usd_etched:null,eur:"0.08",eur_foil:"0.20",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669160&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHeirloom%2BEpic",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHeirloom%2BEpic",edhrec:"https://edhrec.com/route/?cc=Heirloom+Epic"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559629%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Heirloom-Epic?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129737?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"40339715-22d0-4f99-822b-a00d9824f27a",oracle_id:"0a0d25a8-4f28-453b-9270-4d449fe0ca65",multiverse_ids:[669131],mtgo_id:129679,arena_id:91753,tcgplayer_id:559059,cardmarket_id:778138,name:"Helga, Skittish Seer",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/40339715-22d0-4f99-822b-a00d9824f27a",scryfall_uri:"https://scryfall.com/card/blb/217/helga-skittish-seer?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/0/40339715-22d0-4f99-822b-a00d9824f27a.jpg?1721427078",normal:"https://cards.scryfall.io/normal/front/4/0/40339715-22d0-4f99-822b-a00d9824f27a.jpg?1721427078",large:"https://cards.scryfall.io/large/front/4/0/40339715-22d0-4f99-822b-a00d9824f27a.jpg?1721427078",png:"https://cards.scryfall.io/png/front/4/0/40339715-22d0-4f99-822b-a00d9824f27a.png?1721427078",art_crop:"https://cards.scryfall.io/art_crop/front/4/0/40339715-22d0-4f99-822b-a00d9824f27a.jpg?1721427078",border_crop:"https://cards.scryfall.io/border_crop/front/4/0/40339715-22d0-4f99-822b-a00d9824f27a.jpg?1721427078"},mana_cost:"{G}{W}{U}",cmc:3,type_line:"Legendary Creature — Frog Druid",oracle_text:`Whenever you cast a creature spell with mana value 4 or greater, you draw a card, gain 1 life, and put a +1/+1 counter on Helga.
{T}: Add X mana of any one color, where X is Helga's power. Spend this mana only to cast creature spells with mana value 4 or greater or creature spells with {X} in their mana costs.`,power:"1",toughness:"3",colors:["G","U","W"],color_identity:["G","U","W"],keywords:[],produced_mana:["B","G","R","U","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/40339715-22d0-4f99-822b-a00d9824f27a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0a0d25a8-4f28-453b-9270-4d449fe0ca65&unique=prints",collector_number:"217",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Andrea Piparo",artist_ids:["e8ab9604-1b3c-4bb5-9290-dfb3fd3cf01d"],illustration_id:"d28b5a6f-6dbf-4b0c-84f7-e6f53bfea5ca",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6138,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"1.73",usd_foil:"2.44",usd_etched:null,eur:"1.77",eur_foil:"3.26",tix:"0.49"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669131&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHelga%252C%2BSkittish%2BSeer",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHelga%252C%2BSkittish%2BSeer",edhrec:"https://edhrec.com/route/?cc=Helga%2C+Skittish+Seer"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559059%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Helga-Skittish-Seer?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129679?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"4ba8f2e7-8357-4862-97dc-1942d066023a",oracle_id:"382d18a2-438e-4ae7-a83f-1658ef1f9b07",multiverse_ids:[669168],mtgo_id:129753,arena_id:91790,tcgplayer_id:559050,cardmarket_id:778110,name:"Hidden Grotto",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/4ba8f2e7-8357-4862-97dc-1942d066023a",scryfall_uri:"https://scryfall.com/card/blb/254/hidden-grotto?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/b/4ba8f2e7-8357-4862-97dc-1942d066023a.jpg?1721427326",normal:"https://cards.scryfall.io/normal/front/4/b/4ba8f2e7-8357-4862-97dc-1942d066023a.jpg?1721427326",large:"https://cards.scryfall.io/large/front/4/b/4ba8f2e7-8357-4862-97dc-1942d066023a.jpg?1721427326",png:"https://cards.scryfall.io/png/front/4/b/4ba8f2e7-8357-4862-97dc-1942d066023a.png?1721427326",art_crop:"https://cards.scryfall.io/art_crop/front/4/b/4ba8f2e7-8357-4862-97dc-1942d066023a.jpg?1721427326",border_crop:"https://cards.scryfall.io/border_crop/front/4/b/4ba8f2e7-8357-4862-97dc-1942d066023a.jpg?1721427326"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`When this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)
{T}: Add {C}.
{1}, {T}: Add one mana of any color.`,colors:[],color_identity:[],keywords:["Surveil"],produced_mana:["B","C","G","R","U","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/4ba8f2e7-8357-4862-97dc-1942d066023a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A382d18a2-438e-4ae7-a83f-1658ef1f9b07&unique=prints",collector_number:"254",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Fiona Hsieh",artist_ids:["22211c1d-e15e-4db3-9350-e4a9862928bb"],illustration_id:"f235d603-9d51-4a99-8a5d-5fb9bd7fd564",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3472,penny_rank:928,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.08",usd_foil:"0.17",usd_etched:null,eur:"0.13",eur_foil:"0.19",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669168&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHidden%2BGrotto",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHidden%2BGrotto",edhrec:"https://edhrec.com/route/?cc=Hidden+Grotto"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559050%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hidden-Grotto?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129753?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"09c8cf4b-8e65-4a1c-b458-28b5ab56b390",oracle_id:"ab0aea13-1dbc-424a-ab7e-cdb303036a56",multiverse_ids:[669090],mtgo_id:129597,arena_id:91712,tcgplayer_id:559775,cardmarket_id:778923,name:"High Stride",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/09c8cf4b-8e65-4a1c-b458-28b5ab56b390",scryfall_uri:"https://scryfall.com/card/blb/176/high-stride?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/9/09c8cf4b-8e65-4a1c-b458-28b5ab56b390.jpg?1721426829",normal:"https://cards.scryfall.io/normal/front/0/9/09c8cf4b-8e65-4a1c-b458-28b5ab56b390.jpg?1721426829",large:"https://cards.scryfall.io/large/front/0/9/09c8cf4b-8e65-4a1c-b458-28b5ab56b390.jpg?1721426829",png:"https://cards.scryfall.io/png/front/0/9/09c8cf4b-8e65-4a1c-b458-28b5ab56b390.png?1721426829",art_crop:"https://cards.scryfall.io/art_crop/front/0/9/09c8cf4b-8e65-4a1c-b458-28b5ab56b390.jpg?1721426829",border_crop:"https://cards.scryfall.io/border_crop/front/0/9/09c8cf4b-8e65-4a1c-b458-28b5ab56b390.jpg?1721426829"},mana_cost:"{G}",cmc:1,type_line:"Instant",oracle_text:"Target creature gets +1/+3 and gains reach until end of turn. Untap it.",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/09c8cf4b-8e65-4a1c-b458-28b5ab56b390/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aab0aea13-1dbc-424a-ab7e-cdb303036a56&unique=prints",collector_number:"176",digital:!1,rarity:"common",flavor_text:`"It takes a moment to find your stride, but once you do, you'll feel like a giant!"
—Brisco, river guide`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Dan Murayama Scott",artist_ids:["f852fa13-137e-40f2-bbc1-0f01df09c0e0"],illustration_id:"6c77a87b-3e56-40a1-96ea-f64d55558206",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12631,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.03",usd_foil:"0.03",usd_etched:null,eur:"0.06",eur_foil:"0.08",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669090&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHigh%2BStride",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHigh%2BStride",edhrec:"https://edhrec.com/route/?cc=High+Stride"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559775%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/High-Stride?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129597?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1ae41080-0d67-4719-adb2-49bf2a268b6c",oracle_id:"031cfc7d-8bda-454b-b88a-15d3f5fe47e2",multiverse_ids:[669054],mtgo_id:129525,arena_id:91676,tcgplayer_id:559082,cardmarket_id:778125,name:"Hired Claw",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1ae41080-0d67-4719-adb2-49bf2a268b6c",scryfall_uri:"https://scryfall.com/card/blb/140/hired-claw?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/a/1ae41080-0d67-4719-adb2-49bf2a268b6c.jpg?1721426641",normal:"https://cards.scryfall.io/normal/front/1/a/1ae41080-0d67-4719-adb2-49bf2a268b6c.jpg?1721426641",large:"https://cards.scryfall.io/large/front/1/a/1ae41080-0d67-4719-adb2-49bf2a268b6c.jpg?1721426641",png:"https://cards.scryfall.io/png/front/1/a/1ae41080-0d67-4719-adb2-49bf2a268b6c.png?1721426641",art_crop:"https://cards.scryfall.io/art_crop/front/1/a/1ae41080-0d67-4719-adb2-49bf2a268b6c.jpg?1721426641",border_crop:"https://cards.scryfall.io/border_crop/front/1/a/1ae41080-0d67-4719-adb2-49bf2a268b6c.jpg?1721426641"},mana_cost:"{R}",cmc:1,type_line:"Creature — Lizard Mercenary",oracle_text:`Whenever you attack with one or more Lizards, this creature deals 1 damage to target opponent.
{1}{R}: Put a +1/+1 counter on this creature. Activate only if an opponent lost life this turn and only once each turn.`,power:"1",toughness:"2",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1ae41080-0d67-4719-adb2-49bf2a268b6c/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A031cfc7d-8bda-454b-b88a-15d3f5fe47e2&unique=prints",collector_number:"140",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Quintin Gleim",artist_ids:["25fbebee-23a4-4431-bd63-14ec82f3c2b9"],illustration_id:"897cd30a-2bac-4461-b579-1e001ca4d42a",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11152,preview:{source:"Vincent (@ins_ekt)",source_uri:"https://www.instagram.com/stories/highlights/17875888881053955/",previewed_at:"2024-07-11"},prices:{usd:"1.36",usd_foil:"1.66",usd_etched:null,eur:"1.89",eur_foil:"2.20",tix:"0.25"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669054&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHired%2BClaw",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHired%2BClaw",edhrec:"https://edhrec.com/route/?cc=Hired+Claw"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559082%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hired-Claw?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129525?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"821970a3-a291-4fe9-bb13-dfc54f9c3caf",oracle_id:"312be209-dba5-4e6c-938e-1287642f67d4",multiverse_ids:[669091],mtgo_id:129599,arena_id:91713,tcgplayer_id:559075,cardmarket_id:778136,name:"Hivespine Wolverine",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/821970a3-a291-4fe9-bb13-dfc54f9c3caf",scryfall_uri:"https://scryfall.com/card/blb/177/hivespine-wolverine?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/2/821970a3-a291-4fe9-bb13-dfc54f9c3caf.jpg?1721426835",normal:"https://cards.scryfall.io/normal/front/8/2/821970a3-a291-4fe9-bb13-dfc54f9c3caf.jpg?1721426835",large:"https://cards.scryfall.io/large/front/8/2/821970a3-a291-4fe9-bb13-dfc54f9c3caf.jpg?1721426835",png:"https://cards.scryfall.io/png/front/8/2/821970a3-a291-4fe9-bb13-dfc54f9c3caf.png?1721426835",art_crop:"https://cards.scryfall.io/art_crop/front/8/2/821970a3-a291-4fe9-bb13-dfc54f9c3caf.jpg?1721426835",border_crop:"https://cards.scryfall.io/border_crop/front/8/2/821970a3-a291-4fe9-bb13-dfc54f9c3caf.jpg?1721426835"},mana_cost:"{3}{G}{G}",cmc:5,type_line:"Creature — Elemental Wolverine",oracle_text:`When this creature enters, choose one —
• Put a +1/+1 counter on target creature you control.
• This creature fights target creature token.
• Destroy target artifact or enchantment.`,power:"5",toughness:"4",colors:["G"],color_identity:["G"],keywords:["Fight"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/821970a3-a291-4fe9-bb13-dfc54f9c3caf/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A312be209-dba5-4e6c-938e-1287642f67d4&unique=prints",collector_number:"177",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Lars Grant-West",artist_ids:["21ed6499-c4d3-4965-ab02-6c7228275bec"],illustration_id:"92904b35-48e1-4b33-b565-cc09b192457d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13429,penny_rank:9704,preview:{source:"Vincent (@ins_ekt)",source_uri:"https://www.instagram.com/stories/highlights/17875888881053955/",previewed_at:"2024-07-11"},prices:{usd:"0.05",usd_foil:"0.04",usd_etched:null,eur:"0.06",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669091&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHivespine%2BWolverine",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHivespine%2BWolverine",edhrec:"https://edhrec.com/route/?cc=Hivespine+Wolverine"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559075%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hivespine-Wolverine?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129599?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c2ed5079-07b4-4575-a2c8-5f0cbff888c3",oracle_id:"75f7d9c7-5d52-4bfe-a730-62fef187b8b8",multiverse_ids:[669055],mtgo_id:129527,arena_id:91677,tcgplayer_id:559493,cardmarket_id:778507,name:"Hoarder's Overflow",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c2ed5079-07b4-4575-a2c8-5f0cbff888c3",scryfall_uri:"https://scryfall.com/card/blb/141/hoarders-overflow?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/2/c2ed5079-07b4-4575-a2c8-5f0cbff888c3.jpg?1721426652",normal:"https://cards.scryfall.io/normal/front/c/2/c2ed5079-07b4-4575-a2c8-5f0cbff888c3.jpg?1721426652",large:"https://cards.scryfall.io/large/front/c/2/c2ed5079-07b4-4575-a2c8-5f0cbff888c3.jpg?1721426652",png:"https://cards.scryfall.io/png/front/c/2/c2ed5079-07b4-4575-a2c8-5f0cbff888c3.png?1721426652",art_crop:"https://cards.scryfall.io/art_crop/front/c/2/c2ed5079-07b4-4575-a2c8-5f0cbff888c3.jpg?1721426652",border_crop:"https://cards.scryfall.io/border_crop/front/c/2/c2ed5079-07b4-4575-a2c8-5f0cbff888c3.jpg?1721426652"},mana_cost:"{1}{R}",cmc:2,type_line:"Enchantment",oracle_text:`When this enchantment enters and whenever you expend 4, put a stash counter on it. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)
{1}{R}, Sacrifice this enchantment: Discard your hand, then draw cards equal to the number of stash counters on this enchantment.`,colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c2ed5079-07b4-4575-a2c8-5f0cbff888c3/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A75f7d9c7-5d52-4bfe-a730-62fef187b8b8&unique=prints",collector_number:"141",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Andrea Radeck",artist_ids:["2560b932-96b5-4308-9d32-298641ef326e"],illustration_id:"d8ee4d37-b092-4ada-9e16-d3d9a18da520",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12938,preview:{source:"Shopee Mall",source_uri:"https://shopee.sg/wizardsofthecoast",previewed_at:"2024-07-15"},prices:{usd:"0.03",usd_foil:"0.06",usd_etched:null,eur:"0.10",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669055&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHoarder%2527s%2BOverflow",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHoarder%2527s%2BOverflow",edhrec:"https://edhrec.com/route/?cc=Hoarder%27s+Overflow"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559493%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hoarders-Overflow?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129527?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"bc5ee537-52e1-474a-9326-dfacc2a758ab",oracle_id:"44bffa3e-4d31-4f9b-829c-e2066ab2f641",multiverse_ids:[669092],mtgo_id:129601,arena_id:91714,tcgplayer_id:559634,cardmarket_id:778512,name:"Honored Dreyleader",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/bc5ee537-52e1-474a-9326-dfacc2a758ab",scryfall_uri:"https://scryfall.com/card/blb/178/honored-dreyleader?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",normal:"https://cards.scryfall.io/normal/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",large:"https://cards.scryfall.io/large/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",png:"https://cards.scryfall.io/png/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.png?1721426839",art_crop:"https://cards.scryfall.io/art_crop/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",border_crop:"https://cards.scryfall.io/border_crop/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839"},mana_cost:"{2}{G}",cmc:3,type_line:"Creature — Squirrel Warrior",oracle_text:`Trample
When this creature enters, put a +1/+1 counter on it for each other Squirrel and/or Food you control.
Whenever another Squirrel or Food you control enters, put a +1/+1 counter on this creature.`,power:"1",toughness:"1",colors:["G"],color_identity:["G"],keywords:["Trample"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/bc5ee537-52e1-474a-9326-dfacc2a758ab/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A44bffa3e-4d31-4f9b-829c-e2066ab2f641&unique=prints",collector_number:"178",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aurore Folny",artist_ids:["02f6cdda-7a80-4184-853d-20b28d580868"],illustration_id:"3caeed38-1b97-4a07-9a7f-29a45e1a335d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4534,penny_rank:4923,preview:{source:"Vault Games",source_uri:"https://www.youtube.com/watch?v=ny6dPYYigaw",previewed_at:"2024-07-15"},prices:{usd:"0.11",usd_foil:"0.22",usd_etched:null,eur:"0.15",eur_foil:"0.14",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669092&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHonored%2BDreyleader",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHonored%2BDreyleader",edhrec:"https://edhrec.com/route/?cc=Honored+Dreyleader"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559634%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Honored-Dreyleader?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129601?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ee7207f8-5daa-42af-aeea-7a489047110b",oracle_id:"e8a9350a-07c1-47ed-8c4f-88e4b3b17545",multiverse_ids:[668930],mtgo_id:129277,arena_id:91552,tcgplayer_id:558432,cardmarket_id:777548,name:"Hop to It",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ee7207f8-5daa-42af-aeea-7a489047110b",scryfall_uri:"https://scryfall.com/card/blb/16/hop-to-it?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",normal:"https://cards.scryfall.io/normal/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",large:"https://cards.scryfall.io/large/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",png:"https://cards.scryfall.io/png/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.png?1721425854",art_crop:"https://cards.scryfall.io/art_crop/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",border_crop:"https://cards.scryfall.io/border_crop/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854"},mana_cost:"{2}{W}",cmc:3,type_line:"Sorcery",oracle_text:"Create three 1/1 white Rabbit creature tokens.",colors:["W"],color_identity:["W"],keywords:[],all_parts:[{object:"related_card",id:"684614e3-5454-4e68-87da-a2027b6af6d7",component:"combo_piece",name:"Hop to It",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/684614e3-5454-4e68-87da-a2027b6af6d7"},{object:"related_card",id:"81de52ef-7515-4958-abea-fb8ebdcef93c",component:"token",name:"Rabbit",type_line:"Token Creature — Rabbit",uri:"https://api.scryfall.com/cards/81de52ef-7515-4958-abea-fb8ebdcef93c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ee7207f8-5daa-42af-aeea-7a489047110b/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ae8a9350a-07c1-47ed-8c4f-88e4b3b17545&unique=prints",collector_number:"16",digital:!1,rarity:"uncommon",flavor_text:`"Finding a hidden patch of glowberries is almost as joyful as eating them. Almost."
—Ms. Bumbleflower`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Eelis Kyttanen",artist_ids:["699b24be-cde0-4da8-bc0f-7a3ecd60ab01"],illustration_id:"0dca258c-92b0-4b56-bba4-2954e912d8d6",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5846,penny_rank:2056,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.05",usd_foil:"0.16",usd_etched:null,eur:"0.15",eur_foil:"0.32",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668930&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHop%2Bto%2BIt",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHop%2Bto%2BIt",edhrec:"https://edhrec.com/route/?cc=Hop+to+It"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558432%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hop-to-It?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129277?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"f09d7f4a-c947-4389-befa-1d547d0d1237",oracle_id:"3c5c227a-335b-4995-9821-d4269a0a233a",multiverse_ids:[669132],mtgo_id:129681,arena_id:91754,tcgplayer_id:558601,cardmarket_id:777690,name:"Hugs, Grisly Guardian",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/f09d7f4a-c947-4389-befa-1d547d0d1237",scryfall_uri:"https://scryfall.com/card/blb/218/hugs-grisly-guardian?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/0/f09d7f4a-c947-4389-befa-1d547d0d1237.jpg?1721427081",normal:"https://cards.scryfall.io/normal/front/f/0/f09d7f4a-c947-4389-befa-1d547d0d1237.jpg?1721427081",large:"https://cards.scryfall.io/large/front/f/0/f09d7f4a-c947-4389-befa-1d547d0d1237.jpg?1721427081",png:"https://cards.scryfall.io/png/front/f/0/f09d7f4a-c947-4389-befa-1d547d0d1237.png?1721427081",art_crop:"https://cards.scryfall.io/art_crop/front/f/0/f09d7f4a-c947-4389-befa-1d547d0d1237.jpg?1721427081",border_crop:"https://cards.scryfall.io/border_crop/front/f/0/f09d7f4a-c947-4389-befa-1d547d0d1237.jpg?1721427081"},mana_cost:"{X}{R}{R}{G}{G}",cmc:4,type_line:"Legendary Creature — Badger Warrior",oracle_text:`Trample
When Hugs enters, exile the top X cards of your library. Until the end of your next turn, you may play those cards.
You may play an additional land on each of your turns.`,power:"5",toughness:"5",colors:["G","R"],color_identity:["G","R"],keywords:["Trample"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/f09d7f4a-c947-4389-befa-1d547d0d1237/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A3c5c227a-335b-4995-9821-d4269a0a233a&unique=prints",collector_number:"218",digital:!1,rarity:"mythic",flavor_text:"Most of his scars tell tales. A few tell jokes.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Steve Prescott",artist_ids:["a1139fb8-41f5-4a9e-9a74-f662e1a23b35"],illustration_id:"106c8aab-3334-4819-962f-e00a61cd1ab0",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5873,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/news/magic-story/episode-3-the-lost-and-the-found",previewed_at:"2024-07-03"},prices:{usd:"1.00",usd_foil:"1.42",usd_etched:null,eur:"1.24",eur_foil:"1.41",tix:"0.44"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669132&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHugs%252C%2BGrisly%2BGuardian",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHugs%252C%2BGrisly%2BGuardian",edhrec:"https://edhrec.com/route/?cc=Hugs%2C+Grisly+Guardian"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558601%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hugs-Grisly-Guardian?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129681?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e9a31863-9649-4a4f-99e4-c93729938bd7",oracle_id:"a8a9b103-0cb8-4810-a2d7-42f6a10f80bd",multiverse_ids:[669093],mtgo_id:129603,arena_id:91715,tcgplayer_id:558387,cardmarket_id:777614,name:"Hunter's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e9a31863-9649-4a4f-99e4-c93729938bd7",scryfall_uri:"https://scryfall.com/card/blb/179/hunters-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/9/e9a31863-9649-4a4f-99e4-c93729938bd7.jpg?1739659559",normal:"https://cards.scryfall.io/normal/front/e/9/e9a31863-9649-4a4f-99e4-c93729938bd7.jpg?1739659559",large:"https://cards.scryfall.io/large/front/e/9/e9a31863-9649-4a4f-99e4-c93729938bd7.jpg?1739659559",png:"https://cards.scryfall.io/png/front/e/9/e9a31863-9649-4a4f-99e4-c93729938bd7.png?1739659559",art_crop:"https://cards.scryfall.io/art_crop/front/e/9/e9a31863-9649-4a4f-99e4-c93729938bd7.jpg?1739659559",border_crop:"https://cards.scryfall.io/border_crop/front/e/9/e9a31863-9649-4a4f-99e4-c93729938bd7.jpg?1739659559"},mana_cost:"{1}{G}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
When this Class enters, target creature you control deals damage equal to its power to target creature you don't control.
{1}{G}: Level 2
Whenever you attack, target attacking creature gets +1/+0 and gains trample until end of turn.
{3}{G}: Level 3
At the beginning of your end step, if you control a creature with power 4 or greater, draw a card.`,colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e9a31863-9649-4a4f-99e4-c93729938bd7/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa8a9b103-0cb8-4810-a2d7-42f6a10f80bd&unique=prints",collector_number:"179",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Kisung Koh",artist_ids:["435df22f-e389-4366-86e9-0b4c62fcde8b"],illustration_id:"d88f9acf-6488-4f07-a688-8941dd32be3e",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4646,penny_rank:2167,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.24",usd_foil:"0.38",usd_etched:null,eur:"0.26",eur_foil:"0.34",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669093&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHunter%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHunter%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Hunter%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558387%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hunters-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129603?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ed2f61d7-4eb0-41c5-8a34-a0793c2abc51",oracle_id:"faefb352-575c-49f7-9f7a-96f2279a077b",multiverse_ids:[669012],mtgo_id:129441,arena_id:91634,tcgplayer_id:559060,cardmarket_id:778124,name:"Huskburster Swarm",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51",scryfall_uri:"https://scryfall.com/card/blb/98/huskburster-swarm?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/d/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51.jpg?1721426437",normal:"https://cards.scryfall.io/normal/front/e/d/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51.jpg?1721426437",large:"https://cards.scryfall.io/large/front/e/d/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51.jpg?1721426437",png:"https://cards.scryfall.io/png/front/e/d/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51.png?1721426437",art_crop:"https://cards.scryfall.io/art_crop/front/e/d/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51.jpg?1721426437",border_crop:"https://cards.scryfall.io/border_crop/front/e/d/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51.jpg?1721426437"},mana_cost:"{7}{B}",cmc:8,type_line:"Creature — Elemental Insect",oracle_text:`This spell costs {1} less to cast for each creature card you own in exile and in your graveyard.
Menace, deathtouch`,power:"6",toughness:"6",colors:["B"],color_identity:["B"],keywords:["Menace","Deathtouch"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ed2f61d7-4eb0-41c5-8a34-a0793c2abc51/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Afaefb352-575c-49f7-9f7a-96f2279a077b&unique=prints",collector_number:"98",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"John Tedrick",artist_ids:["4da667fd-a4ad-4aea-ba20-db542810e01b"],illustration_id:"cf2f1b05-d2f9-4fad-b283-eeceefd95757",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9294,penny_rank:4649,preview:{source:"Limited Resources",source_uri:"https://twitter.com/Marshall_LR/status/1811570808604807458",previewed_at:"2024-07-11"},prices:{usd:"0.14",usd_foil:"0.18",usd_etched:null,eur:"0.12",eur_foil:"0.29",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669012&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHuskburster%2BSwarm",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHuskburster%2BSwarm",edhrec:"https://edhrec.com/route/?cc=Huskburster+Swarm"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559060%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Huskburster-Swarm?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129441?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"941b0afc-0e8f-45f2-ae7f-07595e164611",oracle_id:"915b75d1-b5e3-4aca-a54c-beaccef0a2e4",multiverse_ids:[669094],mtgo_id:129605,arena_id:91716,tcgplayer_id:558695,cardmarket_id:777759,name:"Innkeeper's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/941b0afc-0e8f-45f2-ae7f-07595e164611",scryfall_uri:"https://scryfall.com/card/blb/180/innkeepers-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/9/4/941b0afc-0e8f-45f2-ae7f-07595e164611.jpg?1721814343",normal:"https://cards.scryfall.io/normal/front/9/4/941b0afc-0e8f-45f2-ae7f-07595e164611.jpg?1721814343",large:"https://cards.scryfall.io/large/front/9/4/941b0afc-0e8f-45f2-ae7f-07595e164611.jpg?1721814343",png:"https://cards.scryfall.io/png/front/9/4/941b0afc-0e8f-45f2-ae7f-07595e164611.png?1721814343",art_crop:"https://cards.scryfall.io/art_crop/front/9/4/941b0afc-0e8f-45f2-ae7f-07595e164611.jpg?1721814343",border_crop:"https://cards.scryfall.io/border_crop/front/9/4/941b0afc-0e8f-45f2-ae7f-07595e164611.jpg?1721814343"},mana_cost:"{1}{G}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
At the beginning of combat on your turn, put a +1/+1 counter on target creature you control.
{G}: Level 2
Permanents you control with counters on them have ward {1}.
{3}{G}: Level 3
If you would put one or more counters on a permanent or player, put twice that many of each of those kinds of counters on that permanent or player instead.`,colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/941b0afc-0e8f-45f2-ae7f-07595e164611/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A915b75d1-b5e3-4aca-a54c-beaccef0a2e4&unique=prints",collector_number:"180",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alix Branwyn",artist_ids:["4f0a0e38-d74c-4e0b-ad91-fecccb1afa5d"],illustration_id:"98bf88d0-8cb0-4e59-8615-1310bc6c2add",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1173,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"11.07",usd_foil:"13.23",usd_etched:null,eur:"11.75",eur_foil:"12.19",tix:"0.09"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669094&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DInnkeeper%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DInnkeeper%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Innkeeper%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558695%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Innkeepers-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129605?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"50b9575a-53d9-4df7-b86c-cda021107d3f",oracle_id:"8cb36a67-9206-4665-a03f-64f52ba559c4",multiverse_ids:[668966],mtgo_id:129349,arena_id:91588,tcgplayer_id:559137,cardmarket_id:778345,name:"Into the Flood Maw",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/50b9575a-53d9-4df7-b86c-cda021107d3f",scryfall_uri:"https://scryfall.com/card/blb/52/into-the-flood-maw?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",normal:"https://cards.scryfall.io/normal/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",large:"https://cards.scryfall.io/large/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",png:"https://cards.scryfall.io/png/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.png?1721426097",art_crop:"https://cards.scryfall.io/art_crop/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",border_crop:"https://cards.scryfall.io/border_crop/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097"},mana_cost:"{U}",cmc:1,type_line:"Instant",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Return target creature an opponent controls to its owner's hand. If the gift was promised, instead return target nonland permanent an opponent controls to its owner's hand.`,colors:["U"],color_identity:["U"],keywords:["Gift"],all_parts:[{object:"related_card",id:"50b9575a-53d9-4df7-b86c-cda021107d3f",component:"combo_piece",name:"Into the Flood Maw",type_line:"Instant",uri:"https://api.scryfall.com/cards/50b9575a-53d9-4df7-b86c-cda021107d3f"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/50b9575a-53d9-4df7-b86c-cda021107d3f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A8cb36a67-9206-4665-a03f-64f52ba559c4&unique=prints",collector_number:"52",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Danny Schwartz",artist_ids:["48e30a4a-5b4d-48e2-9c53-03125085374e"],illustration_id:"9be40712-3155-4642-b3cf-f9c8844a7233",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1616,preview:{source:"Nerd Rage",source_uri:"https://www.facebook.com/nerdrageth/posts/pfbid02UrVoCfqeXGpKNH2dvXGJLA1TFVXnBymYEXT6CDpG392dSdJHLA7bu74S7ik3B79el",previewed_at:"2024-07-12"},prices:{usd:"4.03",usd_foil:"7.28",usd_etched:null,eur:"1.80",eur_foil:"2.61",tix:"9.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668966&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DInto%2Bthe%2BFlood%2BMaw",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DInto%2Bthe%2BFlood%2BMaw",edhrec:"https://edhrec.com/route/?cc=Into+the+Flood+Maw"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559137%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Into-the-Flood-Maw?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129349?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"4d70b99d-c8bf-4a56-8957-cf587fe60b81",oracle_id:"7ed4afc9-959a-4868-8f4a-2221bea1ba32",multiverse_ids:[668931],mtgo_id:129279,arena_id:91553,tcgplayer_id:559738,cardmarket_id:778915,name:"Intrepid Rabbit",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/4d70b99d-c8bf-4a56-8957-cf587fe60b81",scryfall_uri:"https://scryfall.com/card/blb/17/intrepid-rabbit?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/d/4d70b99d-c8bf-4a56-8957-cf587fe60b81.jpg?1721425856",normal:"https://cards.scryfall.io/normal/front/4/d/4d70b99d-c8bf-4a56-8957-cf587fe60b81.jpg?1721425856",large:"https://cards.scryfall.io/large/front/4/d/4d70b99d-c8bf-4a56-8957-cf587fe60b81.jpg?1721425856",png:"https://cards.scryfall.io/png/front/4/d/4d70b99d-c8bf-4a56-8957-cf587fe60b81.png?1721425856",art_crop:"https://cards.scryfall.io/art_crop/front/4/d/4d70b99d-c8bf-4a56-8957-cf587fe60b81.jpg?1721425856",border_crop:"https://cards.scryfall.io/border_crop/front/4/d/4d70b99d-c8bf-4a56-8957-cf587fe60b81.jpg?1721425856"},mana_cost:"{2}{W}",cmc:3,type_line:"Creature — Rabbit Soldier",oracle_text:`Offspring {1} (You may pay an additional {1} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
When this creature enters, target creature you control gets +1/+1 until end of turn.`,power:"3",toughness:"2",colors:["W"],color_identity:["W"],keywords:["Offspring"],all_parts:[{object:"related_card",id:"3b1cd58d-c0bc-48e5-b6fa-fb222fba77ab",component:"token",name:"Intrepid Rabbit",type_line:"Token Creature — Rabbit Soldier",uri:"https://api.scryfall.com/cards/3b1cd58d-c0bc-48e5-b6fa-fb222fba77ab"},{object:"related_card",id:"4d70b99d-c8bf-4a56-8957-cf587fe60b81",component:"combo_piece",name:"Intrepid Rabbit",type_line:"Creature — Rabbit Soldier",uri:"https://api.scryfall.com/cards/4d70b99d-c8bf-4a56-8957-cf587fe60b81"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/4d70b99d-c8bf-4a56-8957-cf587fe60b81/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A7ed4afc9-959a-4868-8f4a-2221bea1ba32&unique=prints",collector_number:"17",digital:!1,rarity:"common",flavor_text:`"I'll light the way, but we must walk it together."`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Artur Treffner",artist_ids:["c9afede7-43a7-4a0c-808e-55862f9ff727"],illustration_id:"729a3158-153d-4616-84a2-d4986269c48c",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12460,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-18"},prices:{usd:"0.03",usd_foil:"0.06",usd_etched:null,eur:"0.14",eur_foil:"0.10",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668931&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DIntrepid%2BRabbit",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DIntrepid%2BRabbit",edhrec:"https://edhrec.com/route/?cc=Intrepid+Rabbit"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559738%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Intrepid-Rabbit?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129279?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b2bc854c-4e72-48e0-a098-e3451d6e511d",oracle_id:"4f8c4927-46c2-4c18-b5af-c6288dbaff6d",multiverse_ids:[669013],mtgo_id:129443,arena_id:91635,tcgplayer_id:558625,cardmarket_id:777758,name:"Iridescent Vinelasher",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b2bc854c-4e72-48e0-a098-e3451d6e511d",scryfall_uri:"https://scryfall.com/card/blb/99/iridescent-vinelasher?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/2/b2bc854c-4e72-48e0-a098-e3451d6e511d.jpg?1721426442",normal:"https://cards.scryfall.io/normal/front/b/2/b2bc854c-4e72-48e0-a098-e3451d6e511d.jpg?1721426442",large:"https://cards.scryfall.io/large/front/b/2/b2bc854c-4e72-48e0-a098-e3451d6e511d.jpg?1721426442",png:"https://cards.scryfall.io/png/front/b/2/b2bc854c-4e72-48e0-a098-e3451d6e511d.png?1721426442",art_crop:"https://cards.scryfall.io/art_crop/front/b/2/b2bc854c-4e72-48e0-a098-e3451d6e511d.jpg?1721426442",border_crop:"https://cards.scryfall.io/border_crop/front/b/2/b2bc854c-4e72-48e0-a098-e3451d6e511d.jpg?1721426442"},mana_cost:"{B}",cmc:1,type_line:"Creature — Lizard Assassin",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
Landfall — Whenever a land you control enters, this creature deals 1 damage to target opponent.`,power:"1",toughness:"2",colors:["B"],color_identity:["B"],keywords:["Offspring","Landfall"],all_parts:[{object:"related_card",id:"859e34b4-6762-465f-a5c7-24e42e112fbe",component:"combo_piece",name:"Iridescent Vinelasher",type_line:"Creature — Lizard Assassin",uri:"https://api.scryfall.com/cards/859e34b4-6762-465f-a5c7-24e42e112fbe"},{object:"related_card",id:"2f55c677-dc14-4ae3-9518-0d80b528c3fb",component:"token",name:"Iridescent Vinelasher",type_line:"Token Creature — Lizard Assassin",uri:"https://api.scryfall.com/cards/2f55c677-dc14-4ae3-9518-0d80b528c3fb"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b2bc854c-4e72-48e0-a098-e3451d6e511d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A4f8c4927-46c2-4c18-b5af-c6288dbaff6d&unique=prints",collector_number:"99",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aaron Miller",artist_ids:["fc021f3d-773a-4706-bbe7-f602324f511f"],illustration_id:"1f248876-5e2d-4ac1-bcbc-f780ded3e4bd",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3888,preview:{source:"ChannelFireball",source_uri:"https://www.channelfireball.com/article/ChannelFireball-s-Exclusive-Bloomburrow-Preview-Card-Iridescent-Vinelasher/c35bfdc7-1bae-41c9-b791-bd665aba17e2/",previewed_at:"2024-07-10"},prices:{usd:"1.52",usd_foil:"1.90",usd_etched:null,eur:"1.47",eur_foil:"1.96",tix:"0.25"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669013&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DIridescent%2BVinelasher",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DIridescent%2BVinelasher",edhrec:"https://edhrec.com/route/?cc=Iridescent+Vinelasher"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558625%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Iridescent-Vinelasher?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129443?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"46848fc2-ba58-4738-b4ce-0399d9053f48",oracle_id:"b2c6aa39-2d2a-459c-a555-fb48ba993373",multiverse_ids:[668668],mtgo_id:129773,arena_id:91833,tcgplayer_id:559548,name:"Island",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/46848fc2-ba58-4738-b4ce-0399d9053f48",scryfall_uri:"https://scryfall.com/card/blb/371/island?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/6/46848fc2-ba58-4738-b4ce-0399d9053f48.jpg?1721427993",normal:"https://cards.scryfall.io/normal/front/4/6/46848fc2-ba58-4738-b4ce-0399d9053f48.jpg?1721427993",large:"https://cards.scryfall.io/large/front/4/6/46848fc2-ba58-4738-b4ce-0399d9053f48.jpg?1721427993",png:"https://cards.scryfall.io/png/front/4/6/46848fc2-ba58-4738-b4ce-0399d9053f48.png?1721427993",art_crop:"https://cards.scryfall.io/art_crop/front/4/6/46848fc2-ba58-4738-b4ce-0399d9053f48.jpg?1721427993",border_crop:"https://cards.scryfall.io/border_crop/front/4/6/46848fc2-ba58-4738-b4ce-0399d9053f48.jpg?1721427993"},mana_cost:"",cmc:0,type_line:"Basic Land — Island",oracle_text:"({T}: Add {U}.)",colors:[],color_identity:["U"],keywords:[],produced_mana:["U"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"legal",predh:"legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/46848fc2-ba58-4738-b4ce-0399d9053f48/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab2c6aa39-2d2a-459c-a555-fb48ba993373&unique=prints",collector_number:"371",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alexander Forssberg",artist_ids:["85908891-3cc7-42b0-9b54-27ed0fe89c53"],illustration_id:"e0345920-67b8-4a05-978f-dfb48cc7d5e9",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,prices:{usd:"0.08",usd_foil:"0.15",usd_etched:null,eur:null,eur_foil:null,tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668668&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DIsland",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DIsland",edhrec:"https://edhrec.com/route/?cc=Island"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559548%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Island&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129773?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"121af600-6143-450a-9f87-12ce4833f1ec",oracle_id:"9e31ef54-b2f2-4f3f-9779-151b74470ce4",multiverse_ids:[668932],mtgo_id:129281,arena_id:91554,tcgplayer_id:559498,cardmarket_id:778429,name:"Jackdaw Savior",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/121af600-6143-450a-9f87-12ce4833f1ec",scryfall_uri:"https://scryfall.com/card/blb/18/jackdaw-savior?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/2/121af600-6143-450a-9f87-12ce4833f1ec.jpg?1721425865",normal:"https://cards.scryfall.io/normal/front/1/2/121af600-6143-450a-9f87-12ce4833f1ec.jpg?1721425865",large:"https://cards.scryfall.io/large/front/1/2/121af600-6143-450a-9f87-12ce4833f1ec.jpg?1721425865",png:"https://cards.scryfall.io/png/front/1/2/121af600-6143-450a-9f87-12ce4833f1ec.png?1721425865",art_crop:"https://cards.scryfall.io/art_crop/front/1/2/121af600-6143-450a-9f87-12ce4833f1ec.jpg?1721425865",border_crop:"https://cards.scryfall.io/border_crop/front/1/2/121af600-6143-450a-9f87-12ce4833f1ec.jpg?1721425865"},mana_cost:"{2}{W}",cmc:3,type_line:"Creature — Bird Cleric",oracle_text:`Flying
Whenever this creature or another creature you control with flying dies, return another target creature card with lesser mana value from your graveyard to the battlefield.`,power:"3",toughness:"1",colors:["W"],color_identity:["W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/121af600-6143-450a-9f87-12ce4833f1ec/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A9e31ef54-b2f2-4f3f-9779-151b74470ce4&unique=prints",collector_number:"18",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alessandra Pisano",artist_ids:["15869690-bf3c-4498-a577-409a6bde5c83"],illustration_id:"de620f96-d904-45a6-887d-8fd4b75cc738",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6783,penny_rank:6845,preview:{source:"TheGamer",source_uri:"https://www.thegamer.com/magic-the-gathering-mtg-jackdaw-savior-bloomburrow-reveal/",previewed_at:"2024-07-15"},prices:{usd:"0.35",usd_foil:"0.34",usd_etched:null,eur:"0.33",eur_foil:"0.51",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668932&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DJackdaw%2BSavior",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DJackdaw%2BSavior",edhrec:"https://edhrec.com/route/?cc=Jackdaw+Savior"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559498%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Jackdaw-Savior?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129281?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0eab51d6-ba17-4a8c-8834-25db363f2b6b",oracle_id:"8e22bf51-1b1b-459b-af78-91188b6e3f09",multiverse_ids:[668933],mtgo_id:129283,arena_id:91555,tcgplayer_id:559994,cardmarket_id:779260,name:"Jolly Gerbils",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0eab51d6-ba17-4a8c-8834-25db363f2b6b",scryfall_uri:"https://scryfall.com/card/blb/19/jolly-gerbils?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/e/0eab51d6-ba17-4a8c-8834-25db363f2b6b.jpg?1721425868",normal:"https://cards.scryfall.io/normal/front/0/e/0eab51d6-ba17-4a8c-8834-25db363f2b6b.jpg?1721425868",large:"https://cards.scryfall.io/large/front/0/e/0eab51d6-ba17-4a8c-8834-25db363f2b6b.jpg?1721425868",png:"https://cards.scryfall.io/png/front/0/e/0eab51d6-ba17-4a8c-8834-25db363f2b6b.png?1721425868",art_crop:"https://cards.scryfall.io/art_crop/front/0/e/0eab51d6-ba17-4a8c-8834-25db363f2b6b.jpg?1721425868",border_crop:"https://cards.scryfall.io/border_crop/front/0/e/0eab51d6-ba17-4a8c-8834-25db363f2b6b.jpg?1721425868"},mana_cost:"{1}{W}",cmc:2,type_line:"Creature — Hamster Citizen",oracle_text:"Whenever you give a gift, draw a card.",power:"2",toughness:"3",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0eab51d6-ba17-4a8c-8834-25db363f2b6b/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A8e22bf51-1b1b-459b-af78-91188b6e3f09&unique=prints",collector_number:"19",digital:!1,rarity:"uncommon",flavor_text:'"With all the chaos going around, we thought it might be the perfect time to take a break and have a nice picnic. Would you like to join us?"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Manuel Castañón",artist_ids:["35f11eeb-36ff-4059-bb70-d1274f5bd858"],illustration_id:"44009424-20f6-4a31-af80-201db2bd4571",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12800,preview:{source:"MTG Muddstah",source_uri:"https://www.youtube.com/watch?v=mW9zwQC9sUg",previewed_at:"2024-07-18"},prices:{usd:"0.01",usd_foil:"0.04",usd_etched:null,eur:"0.05",eur_foil:"0.12",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668933&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DJolly%2BGerbils",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DJolly%2BGerbils",edhrec:"https://edhrec.com/route/?cc=Jolly+Gerbils"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559994%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Jolly-Gerbils?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129283?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"918fd89b-5ab7-4ae2-920c-faca5e9da7b9",oracle_id:"0a2fbdd3-4940-4bbf-ae19-f6d00d7ff294",multiverse_ids:[669134],mtgo_id:129685,arena_id:91756,tcgplayer_id:558435,cardmarket_id:777691,name:"Junkblade Bruiser",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/918fd89b-5ab7-4ae2-920c-faca5e9da7b9",scryfall_uri:"https://scryfall.com/card/blb/220/junkblade-bruiser?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/9/1/918fd89b-5ab7-4ae2-920c-faca5e9da7b9.jpg?1721427100",normal:"https://cards.scryfall.io/normal/front/9/1/918fd89b-5ab7-4ae2-920c-faca5e9da7b9.jpg?1721427100",large:"https://cards.scryfall.io/large/front/9/1/918fd89b-5ab7-4ae2-920c-faca5e9da7b9.jpg?1721427100",png:"https://cards.scryfall.io/png/front/9/1/918fd89b-5ab7-4ae2-920c-faca5e9da7b9.png?1721427100",art_crop:"https://cards.scryfall.io/art_crop/front/9/1/918fd89b-5ab7-4ae2-920c-faca5e9da7b9.jpg?1721427100",border_crop:"https://cards.scryfall.io/border_crop/front/9/1/918fd89b-5ab7-4ae2-920c-faca5e9da7b9.jpg?1721427100"},mana_cost:"{3}{R/G}{R/G}",cmc:5,type_line:"Creature — Raccoon Berserker",oracle_text:`Trample
Whenever you expend 4, this creature gets +2/+1 until end of turn. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)`,power:"4",toughness:"5",colors:["G","R"],color_identity:["G","R"],keywords:["Trample"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/918fd89b-5ab7-4ae2-920c-faca5e9da7b9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0a2fbdd3-4940-4bbf-ae19-f6d00d7ff294&unique=prints",collector_number:"220",digital:!1,rarity:"common",flavor_text:"Each scrap shed from her battle-axe is more likely to end up stored permanently in an enemy's skull.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Omar Rayyan",artist_ids:["256b61a2-b9af-4ff5-b485-47a61818f818"],illustration_id:"4683a0e8-bc1c-4527-ba57-1a1412ad72a9",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:14191,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.02",usd_foil:"0.04",usd_etched:null,eur:"0.04",eur_foil:"0.10",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669134&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DJunkblade%2BBruiser",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DJunkblade%2BBruiser",edhrec:"https://edhrec.com/route/?cc=Junkblade+Bruiser"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558435%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Junkblade-Bruiser?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129685?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ebf68793-22a2-4a59-9d37-6791584edca1",oracle_id:"ced5fe9a-4237-4c89-9dd6-b133b966ebcc",multiverse_ids:[669135],mtgo_id:129687,arena_id:91757,tcgplayer_id:558334,cardmarket_id:777692,name:"Kastral, the Windcrested",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ebf68793-22a2-4a59-9d37-6791584edca1",scryfall_uri:"https://scryfall.com/card/blb/221/kastral-the-windcrested?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",normal:"https://cards.scryfall.io/normal/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",large:"https://cards.scryfall.io/large/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",png:"https://cards.scryfall.io/png/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.png?1721427101",art_crop:"https://cards.scryfall.io/art_crop/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",border_crop:"https://cards.scryfall.io/border_crop/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101"},mana_cost:"{3}{W}{U}",cmc:5,type_line:"Legendary Creature — Bird Scout",oracle_text:`Flying
Whenever one or more Birds you control deal combat damage to a player, choose one —
• You may put a Bird creature card from your hand or graveyard onto the battlefield with a finality counter on it.
• Put a +1/+1 counter on each Bird you control.
• Draw a card.`,power:"4",toughness:"5",colors:["U","W"],color_identity:["U","W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ebf68793-22a2-4a59-9d37-6791584edca1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aced5fe9a-4237-4c89-9dd6-b133b966ebcc&unique=prints",collector_number:"221",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jesper Ejsing",artist_ids:["a5f8354a-8b51-4e59-96b2-0e3aeae4fa1d"],illustration_id:"ca1d5da4-a663-4067-843b-c823c995d4bf",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7400,penny_rank:11966,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.23",usd_foil:"0.35",usd_etched:null,eur:"0.20",eur_foil:"0.42",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669135&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKastral%252C%2Bthe%2BWindcrested",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKastral%252C%2Bthe%2BWindcrested",edhrec:"https://edhrec.com/route/?cc=Kastral%2C+the+Windcrested"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558334%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Kastral-the-Windcrested?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129687?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8cf33d80-0704-4dc4-8e8d-1dcbcbc35add",oracle_id:"46ce3698-e4e6-44e9-8b99-2b12a703e91e",multiverse_ids:[669095],mtgo_id:129607,arena_id:91717,tcgplayer_id:559484,cardmarket_id:778497,name:"Keen-Eyed Curator",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add",scryfall_uri:"https://scryfall.com/card/blb/181/keen-eyed-curator?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856",normal:"https://cards.scryfall.io/normal/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856",large:"https://cards.scryfall.io/large/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856",png:"https://cards.scryfall.io/png/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.png?1721426856",art_crop:"https://cards.scryfall.io/art_crop/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856",border_crop:"https://cards.scryfall.io/border_crop/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856"},mana_cost:"{G}{G}",cmc:2,type_line:"Creature — Raccoon Scout",oracle_text:`As long as there are four or more card types among cards exiled with this creature, it gets +4/+4 and has trample.
{1}: Exile target card from a graveyard.`,power:"3",toughness:"3",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A46ce3698-e4e6-44e9-8b99-2b12a703e91e&unique=prints",collector_number:"181",digital:!1,rarity:"rare",flavor_text:`"Now this one's a real collector's item. They say Lily Emberseed herself drank from this mug when she was still Lily of Valley."`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"PINDURSKI",artist_ids:["f333a7f0-7330-40e9-8c58-667eea2f0f60"],illustration_id:"043d6468-a6b9-410b-b456-b3794c68a651",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10447,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.73",usd_foil:"0.83",usd_etched:null,eur:"0.83",eur_foil:"1.35",tix:"0.52"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669095&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKeen-Eyed%2BCurator",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKeen-Eyed%2BCurator",edhrec:"https://edhrec.com/route/?cc=Keen-Eyed+Curator"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559484%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Keen-Eyed-Curator?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129607?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"a839fba3-1b66-4dd1-bf43-9b015b44fc81",oracle_id:"980cd7d5-a511-49ab-bc52-08b71c65db76",multiverse_ids:[669056],mtgo_id:129529,arena_id:91678,tcgplayer_id:559126,cardmarket_id:778331,name:"Kindlespark Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/a839fba3-1b66-4dd1-bf43-9b015b44fc81",scryfall_uri:"https://scryfall.com/card/blb/142/kindlespark-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/8/a839fba3-1b66-4dd1-bf43-9b015b44fc81.jpg?1721426652",normal:"https://cards.scryfall.io/normal/front/a/8/a839fba3-1b66-4dd1-bf43-9b015b44fc81.jpg?1721426652",large:"https://cards.scryfall.io/large/front/a/8/a839fba3-1b66-4dd1-bf43-9b015b44fc81.jpg?1721426652",png:"https://cards.scryfall.io/png/front/a/8/a839fba3-1b66-4dd1-bf43-9b015b44fc81.png?1721426652",art_crop:"https://cards.scryfall.io/art_crop/front/a/8/a839fba3-1b66-4dd1-bf43-9b015b44fc81.jpg?1721426652",border_crop:"https://cards.scryfall.io/border_crop/front/a/8/a839fba3-1b66-4dd1-bf43-9b015b44fc81.jpg?1721426652"},mana_cost:"{2}{R}",cmc:3,type_line:"Creature — Lizard Otter",oracle_text:`{T}: This creature deals 1 damage to target opponent.
Whenever you cast a noncreature spell, untap this creature.`,power:"1",toughness:"3",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/a839fba3-1b66-4dd1-bf43-9b015b44fc81/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A980cd7d5-a511-49ab-bc52-08b71c65db76&unique=prints",collector_number:"142",digital:!1,rarity:"common",flavor_text:'"We burn like fire!" cackled the lizard. "And strike like lightning!" the otter thundered.',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Daren Bader",artist_ids:["7da1a585-c875-45e4-b322-5da9e8e1f651"],illustration_id:"d15a408d-c184-4ab7-95af-2d02b839c4c4",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6558,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.04",usd_foil:"0.07",usd_etched:null,eur:"0.10",eur_foil:"0.22",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669056&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKindlespark%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKindlespark%2BDuo",edhrec:"https://edhrec.com/route/?cc=Kindlespark+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559126%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Kindlespark-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129529?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"085be5d1-fd85-46d1-ad39-a8aa75a06a96",oracle_id:"a1bd1e83-40ac-449f-838c-ef308f275a5d",multiverse_ids:[668967],mtgo_id:129351,arena_id:91589,tcgplayer_id:558373,cardmarket_id:777556,name:"Kitnap",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/085be5d1-fd85-46d1-ad39-a8aa75a06a96",scryfall_uri:"https://scryfall.com/card/blb/53/kitnap?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/8/085be5d1-fd85-46d1-ad39-a8aa75a06a96.jpg?1721426110",normal:"https://cards.scryfall.io/normal/front/0/8/085be5d1-fd85-46d1-ad39-a8aa75a06a96.jpg?1721426110",large:"https://cards.scryfall.io/large/front/0/8/085be5d1-fd85-46d1-ad39-a8aa75a06a96.jpg?1721426110",png:"https://cards.scryfall.io/png/front/0/8/085be5d1-fd85-46d1-ad39-a8aa75a06a96.png?1721426110",art_crop:"https://cards.scryfall.io/art_crop/front/0/8/085be5d1-fd85-46d1-ad39-a8aa75a06a96.jpg?1721426110",border_crop:"https://cards.scryfall.io/border_crop/front/0/8/085be5d1-fd85-46d1-ad39-a8aa75a06a96.jpg?1721426110"},mana_cost:"{2}{U}{U}",cmc:4,type_line:"Enchantment — Aura",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, when it enters, they draw a card.)
Enchant creature
When this Aura enters, tap enchanted creature. If the gift wasn't promised, put three stun counters on it.
You control enchanted creature.`,colors:["U"],color_identity:["U"],keywords:["Gift","Enchant"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/085be5d1-fd85-46d1-ad39-a8aa75a06a96/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa1bd1e83-40ac-449f-838c-ef308f275a5d&unique=prints",collector_number:"53",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Irina Nordsol",artist_ids:["1e4cb52d-476e-4c68-ac87-2e620aede6d4"],illustration_id:"29bed23d-a08c-48c4-b35d-b9f5b9b35538",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11550,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.16",usd_foil:"0.22",usd_etched:null,eur:"0.19",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668967&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKitnap",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKitnap",edhrec:"https://edhrec.com/route/?cc=Kitnap"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558373%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Kitnap?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129351?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c8ff751a-ec64-41d5-b22c-2a483ad9a9b2",oracle_id:"16414460-11ce-481d-ab54-6f0e0ea7d83d",multiverse_ids:[668968],mtgo_id:129353,arena_id:91590,tcgplayer_id:559505,cardmarket_id:778503,name:"Kitsa, Otterball Elite",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2",scryfall_uri:"https://scryfall.com/card/blb/54/kitsa-otterball-elite?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/8/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2.jpg?1721426117",normal:"https://cards.scryfall.io/normal/front/c/8/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2.jpg?1721426117",large:"https://cards.scryfall.io/large/front/c/8/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2.jpg?1721426117",png:"https://cards.scryfall.io/png/front/c/8/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2.png?1721426117",art_crop:"https://cards.scryfall.io/art_crop/front/c/8/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2.jpg?1721426117",border_crop:"https://cards.scryfall.io/border_crop/front/c/8/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2.jpg?1721426117"},mana_cost:"{1}{U}",cmc:2,type_line:"Legendary Creature — Otter Wizard",oracle_text:`Vigilance
Prowess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)
{T}: Draw a card, then discard a card.
{2}, {T}: Copy target instant or sorcery spell you control. You may choose new targets for the copy. Activate only if Kitsa's power is 3 or greater.`,power:"1",toughness:"3",colors:["U"],color_identity:["U"],keywords:["Prowess","Vigilance"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c8ff751a-ec64-41d5-b22c-2a483ad9a9b2/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A16414460-11ce-481d-ab54-6f0e0ea7d83d&unique=prints",collector_number:"54",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Zoltan Boros",artist_ids:["1885e6cb-c827-4896-994e-3d0a027d602f"],illustration_id:"96b481b4-6dbd-4f6e-b4ac-da39630dce4a",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3032,preview:{source:"ComicBook.com",source_uri:"https://comicbook.com/gaming/news/magic-the-gathering-bloomburrow-card-preview-meet-kitsa-valley-mightcaller-exclusive/",previewed_at:"2024-07-15"},prices:{usd:"4.87",usd_foil:"8.29",usd_etched:null,eur:"5.54",eur_foil:"7.01",tix:"0.55"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668968&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKitsa%252C%2BOtterball%2BElite",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKitsa%252C%2BOtterball%2BElite",edhrec:"https://edhrec.com/route/?cc=Kitsa%2C+Otterball+Elite"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559505%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Kitsa-Otterball-Elite?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129353?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c7fb7f4f-2153-4527-8f11-adbf508d3533",oracle_id:"cb2d222c-df42-41a7-a517-0a41e47a4280",multiverse_ids:[668969],mtgo_id:129355,arena_id:91591,tcgplayer_id:559138,cardmarket_id:778330,name:"Knightfisher",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c7fb7f4f-2153-4527-8f11-adbf508d3533",scryfall_uri:"https://scryfall.com/card/blb/55/knightfisher?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",normal:"https://cards.scryfall.io/normal/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",large:"https://cards.scryfall.io/large/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",png:"https://cards.scryfall.io/png/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.png?1721426127",art_crop:"https://cards.scryfall.io/art_crop/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",border_crop:"https://cards.scryfall.io/border_crop/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127"},mana_cost:"{3}{U}{U}",cmc:5,type_line:"Creature — Bird Knight",oracle_text:`Flying
Whenever another nontoken Bird you control enters, create a 1/1 blue Fish creature token.`,power:"4",toughness:"5",colors:["U"],color_identity:["U"],keywords:["Flying"],all_parts:[{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"},{object:"related_card",id:"c7fb7f4f-2153-4527-8f11-adbf508d3533",component:"combo_piece",name:"Knightfisher",type_line:"Creature — Bird Knight",uri:"https://api.scryfall.com/cards/c7fb7f4f-2153-4527-8f11-adbf508d3533"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c7fb7f4f-2153-4527-8f11-adbf508d3533/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Acb2d222c-df42-41a7-a517-0a41e47a4280&unique=prints",collector_number:"55",digital:!1,rarity:"uncommon",flavor_text:"His keen eyes can see the glint of scales far below the river's surface.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakob Eirich",artist_ids:["982d9460-f9b9-42f6-8a25-47afa7df22e9"],illustration_id:"60eeba43-ba6d-4142-96e2-2b7358d7c533",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13889,preview:{source:"Jack Torrance",source_uri:"https://www.instagram.com/jacktorrance90/p/C9VLvi7iJmk/?img_index=1",previewed_at:"2024-07-12"},prices:{usd:"0.06",usd_foil:"0.04",usd_etched:null,eur:"0.09",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668969&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKnightfisher",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKnightfisher",edhrec:"https://edhrec.com/route/?cc=Knightfisher"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559138%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Knightfisher?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129355?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ca543405-5e12-48a0-9a77-082ac9bcb2f2",oracle_id:"63686c6b-9051-4002-aa8e-da8a3021330f",multiverse_ids:[668934],mtgo_id:129285,arena_id:91556,tcgplayer_id:558686,cardmarket_id:777768,name:"Lifecreed Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ca543405-5e12-48a0-9a77-082ac9bcb2f2",scryfall_uri:"https://scryfall.com/card/blb/20/lifecreed-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/a/ca543405-5e12-48a0-9a77-082ac9bcb2f2.jpg?1721425877",normal:"https://cards.scryfall.io/normal/front/c/a/ca543405-5e12-48a0-9a77-082ac9bcb2f2.jpg?1721425877",large:"https://cards.scryfall.io/large/front/c/a/ca543405-5e12-48a0-9a77-082ac9bcb2f2.jpg?1721425877",png:"https://cards.scryfall.io/png/front/c/a/ca543405-5e12-48a0-9a77-082ac9bcb2f2.png?1721425877",art_crop:"https://cards.scryfall.io/art_crop/front/c/a/ca543405-5e12-48a0-9a77-082ac9bcb2f2.jpg?1721425877",border_crop:"https://cards.scryfall.io/border_crop/front/c/a/ca543405-5e12-48a0-9a77-082ac9bcb2f2.jpg?1721425877"},mana_cost:"{1}{W}",cmc:2,type_line:"Creature — Bat Bird",oracle_text:`Flying
Whenever another creature you control enters, you gain 1 life.`,power:"1",toughness:"2",colors:["W"],color_identity:["W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ca543405-5e12-48a0-9a77-082ac9bcb2f2/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A63686c6b-9051-4002-aa8e-da8a3021330f&unique=prints",collector_number:"20",digital:!1,rarity:"common",flavor_text:'"Why are you eating upside down?" asked the bird. "Why are you eating upside up?" replied the bat.',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Lorenzo Mastroianni",artist_ids:["70213e7d-47e0-4543-a1ae-451009053e2d"],illustration_id:"e5dc0c09-f3f9-4b72-9488-024ee3e2a5ff",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5421,penny_rank:2603,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.09",usd_foil:"0.23",usd_etched:null,eur:"0.12",eur_foil:"0.20",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668934&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLifecreed%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLifecreed%2BDuo",edhrec:"https://edhrec.com/route/?cc=Lifecreed+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558686%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lifecreed-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129285?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"2f00c834-b4a9-45b8-bb3f-22c2a42314a0",oracle_id:"ef8fab12-d7d2-4c21-8b8c-41627048ac8b",multiverse_ids:[668970],mtgo_id:129357,arena_id:91592,tcgplayer_id:559048,cardmarket_id:778133,name:"Lightshell Duo",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/2f00c834-b4a9-45b8-bb3f-22c2a42314a0",scryfall_uri:"https://scryfall.com/card/blb/56/lightshell-duo?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/f/2f00c834-b4a9-45b8-bb3f-22c2a42314a0.jpg?1721426129",normal:"https://cards.scryfall.io/normal/front/2/f/2f00c834-b4a9-45b8-bb3f-22c2a42314a0.jpg?1721426129",large:"https://cards.scryfall.io/large/front/2/f/2f00c834-b4a9-45b8-bb3f-22c2a42314a0.jpg?1721426129",png:"https://cards.scryfall.io/png/front/2/f/2f00c834-b4a9-45b8-bb3f-22c2a42314a0.png?1721426129",art_crop:"https://cards.scryfall.io/art_crop/front/2/f/2f00c834-b4a9-45b8-bb3f-22c2a42314a0.jpg?1721426129",border_crop:"https://cards.scryfall.io/border_crop/front/2/f/2f00c834-b4a9-45b8-bb3f-22c2a42314a0.jpg?1721426129"},mana_cost:"{3}{U}",cmc:4,type_line:"Creature — Rat Otter",oracle_text:`Prowess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)
When this creature enters, surveil 2. (Look at the top two cards of your library, then put any number of them into your graveyard and the rest on top of your library in any order.)`,power:"3",toughness:"4",colors:["U"],color_identity:["U"],keywords:["Surveil","Prowess"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/2f00c834-b4a9-45b8-bb3f-22c2a42314a0/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aef8fab12-d7d2-4c21-8b8c-41627048ac8b&unique=prints",collector_number:"56",digital:!1,rarity:"common",flavor_text:`"Lightning and snail as one!" cried the rat. "It's so beautiful!" the otter gasped in awe.`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mariah Tekulve",artist_ids:["1014b405-f81d-4f37-97df-e04ef62eacf4"],illustration_id:"9e60856b-5eaa-41f1-9c7c-7f0b17cc8bfe",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10440,penny_rank:11979,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.04",usd_foil:"0.04",usd_etched:null,eur:"0.05",eur_foil:"0.11",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668970&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLightshell%2BDuo",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLightshell%2BDuo",edhrec:"https://edhrec.com/route/?cc=Lightshell+Duo"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559048%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lightshell-Duo?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129357?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7e95a7cc-ed77-4ca4-80db-61c0fc68bf50",oracle_id:"5bb06e6f-e3af-4caa-b66d-77248ad46b61",multiverse_ids:[669169],mtgo_id:129755,arena_id:91791,tcgplayer_id:558605,cardmarket_id:776460,name:"Lilypad Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50",scryfall_uri:"https://scryfall.com/card/blb/255/lilypad-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",normal:"https://cards.scryfall.io/normal/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",large:"https://cards.scryfall.io/large/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",png:"https://cards.scryfall.io/png/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.png?1721639529",art_crop:"https://cards.scryfall.io/art_crop/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",border_crop:"https://cards.scryfall.io/border_crop/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {U}. Spend this mana only to cast a creature spell.
{U}, {T}: Surveil 2. Activate only if a Bird, Frog, Otter, or Rat entered the battlefield under your control this turn.`,colors:[],color_identity:["U"],keywords:["Surveil"],produced_mana:["C","U"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5bb06e6f-e3af-4caa-b66d-77248ad46b61&unique=prints",collector_number:"255",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alexander Forssberg",artist_ids:["85908891-3cc7-42b0-9b54-27ed0fe89c53"],illustration_id:"11f1d67c-318d-4b09-8991-b5b90c13e373",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4756,penny_rank:7969,prices:{usd:"0.15",usd_foil:"0.18",usd_etched:null,eur:"0.09",eur_foil:"0.35",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669169&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLilypad%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLilypad%2BVillage",edhrec:"https://edhrec.com/route/?cc=Lilypad+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558605%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lilypad-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129755?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"64de7b1f-a03e-4407-91f1-e108a2f26735",oracle_id:"20194297-f2a4-4473-95bc-7c6835e5b6b3",multiverse_ids:[669136],mtgo_id:129689,arena_id:91758,tcgplayer_id:558339,cardmarket_id:777693,name:"Lilysplash Mentor",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/64de7b1f-a03e-4407-91f1-e108a2f26735",scryfall_uri:"https://scryfall.com/card/blb/222/lilysplash-mentor?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/4/64de7b1f-a03e-4407-91f1-e108a2f26735.jpg?1721427132",normal:"https://cards.scryfall.io/normal/front/6/4/64de7b1f-a03e-4407-91f1-e108a2f26735.jpg?1721427132",large:"https://cards.scryfall.io/large/front/6/4/64de7b1f-a03e-4407-91f1-e108a2f26735.jpg?1721427132",png:"https://cards.scryfall.io/png/front/6/4/64de7b1f-a03e-4407-91f1-e108a2f26735.png?1721427132",art_crop:"https://cards.scryfall.io/art_crop/front/6/4/64de7b1f-a03e-4407-91f1-e108a2f26735.jpg?1721427132",border_crop:"https://cards.scryfall.io/border_crop/front/6/4/64de7b1f-a03e-4407-91f1-e108a2f26735.jpg?1721427132"},mana_cost:"{2}{G}{U}",cmc:4,type_line:"Creature — Frog Druid",oracle_text:`Reach
{1}{G}{U}: Exile another target creature you control, then return it to the battlefield under its owner's control with a +1/+1 counter on it. Activate only as a sorcery.`,power:"4",toughness:"4",colors:["G","U"],color_identity:["G","U"],keywords:["Reach"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/64de7b1f-a03e-4407-91f1-e108a2f26735/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A20194297-f2a4-4473-95bc-7c6835e5b6b3&unique=prints",collector_number:"222",digital:!1,rarity:"uncommon",flavor_text:'"Splashy entrances are my specialty. And they can be yours too. Try again!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aldo Domínguez",artist_ids:["b701136e-c578-4a48-9383-1c2a5381ecb2"],illustration_id:"ee3dafa1-c10a-4c52-a8a1-68ca259ed401",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5763,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.17",usd_foil:"0.25",usd_etched:null,eur:"0.11",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669136&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLilysplash%2BMentor",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLilysplash%2BMentor",edhrec:"https://edhrec.com/route/?cc=Lilysplash+Mentor"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558339%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lilysplash-Mentor?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129689?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7c267719-cd03-4003-b281-e732d5e42a1e",oracle_id:"c65c4d01-29da-47e6-993c-a265cf1f198c",multiverse_ids:[668971],mtgo_id:129359,arena_id:91593,tcgplayer_id:559049,cardmarket_id:778118,name:"Long River Lurker",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7c267719-cd03-4003-b281-e732d5e42a1e",scryfall_uri:"https://scryfall.com/card/blb/57/long-river-lurker?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/c/7c267719-cd03-4003-b281-e732d5e42a1e.jpg?1721426137",normal:"https://cards.scryfall.io/normal/front/7/c/7c267719-cd03-4003-b281-e732d5e42a1e.jpg?1721426137",large:"https://cards.scryfall.io/large/front/7/c/7c267719-cd03-4003-b281-e732d5e42a1e.jpg?1721426137",png:"https://cards.scryfall.io/png/front/7/c/7c267719-cd03-4003-b281-e732d5e42a1e.png?1721426137",art_crop:"https://cards.scryfall.io/art_crop/front/7/c/7c267719-cd03-4003-b281-e732d5e42a1e.jpg?1721426137",border_crop:"https://cards.scryfall.io/border_crop/front/7/c/7c267719-cd03-4003-b281-e732d5e42a1e.jpg?1721426137"},mana_cost:"{2}{U}",cmc:3,type_line:"Creature — Frog Scout",oracle_text:`Ward {1}
Other Frogs you control have ward {1}.
When this creature enters, target creature you control can't be blocked this turn. Whenever that creature deals combat damage this turn, you may exile it. If you do, return it to the battlefield under its owner's control.`,power:"2",toughness:"3",colors:["U"],color_identity:["U"],keywords:["Ward"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7c267719-cd03-4003-b281-e732d5e42a1e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac65c4d01-29da-47e6-993c-a265cf1f198c&unique=prints",collector_number:"57",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Valera Lutfullina",artist_ids:["76bc57c7-47c6-40c5-8797-8ffcce430ac7"],illustration_id:"db3f9202-3df4-4edc-a033-a0e84131d660",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7187,penny_rank:9718,preview:{source:"Limited Resources",source_uri:"https://twitter.com/Marshall_LR/status/1811570808604807458",previewed_at:"2024-07-11"},prices:{usd:"0.12",usd_foil:"0.15",usd_etched:null,eur:"0.10",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668971&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLong%2BRiver%2BLurker",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLong%2BRiver%2BLurker",edhrec:"https://edhrec.com/route/?cc=Long+River+Lurker"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559049%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Long-River-Lurker?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129359?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea",oracle_id:"f1993767-1d07-49c8-b8dc-04ec9840a999",multiverse_ids:[668972],mtgo_id:129361,arena_id:91594,tcgplayer_id:559139,cardmarket_id:778344,name:"Long River's Pull",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea",scryfall_uri:"https://scryfall.com/card/blb/58/long-rivers-pull?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/c/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea.jpg?1721426147",normal:"https://cards.scryfall.io/normal/front/1/c/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea.jpg?1721426147",large:"https://cards.scryfall.io/large/front/1/c/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea.jpg?1721426147",png:"https://cards.scryfall.io/png/front/1/c/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea.png?1721426147",art_crop:"https://cards.scryfall.io/art_crop/front/1/c/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea.jpg?1721426147",border_crop:"https://cards.scryfall.io/border_crop/front/1/c/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea.jpg?1721426147"},mana_cost:"{U}{U}",cmc:2,type_line:"Instant",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
Counter target creature spell. If the gift was promised, instead counter target spell.`,colors:["U"],color_identity:["U"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1c81d0fa-81a1-4f9b-a5fd-5a648fd01dea/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af1993767-1d07-49c8-b8dc-04ec9840a999&unique=prints",collector_number:"58",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Raph Lomotan",artist_ids:["7da5333c-6b1e-48ba-ab42-1b41f09920ee"],illustration_id:"cde19d9f-1907-459a-9712-0ff6e70ffd8f",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2159,penny_rank:306,preview:{source:"VeggieWagon",source_uri:"https://vxtwitter.com/VeggieWagonYee/status/1811840449671229702",previewed_at:"2024-07-12"},prices:{usd:"0.20",usd_foil:"0.28",usd_etched:null,eur:"0.31",eur_foil:"0.30",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668972&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLong%2BRiver%2527s%2BPull",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLong%2BRiver%2527s%2BPull",edhrec:"https://edhrec.com/route/?cc=Long+River%27s+Pull"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559139%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Long-Rivers-Pull?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129361?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42",oracle_id:"adc8976a-0871-4fd6-9c4c-822ba9549b4b",multiverse_ids:[669096],mtgo_id:129609,arena_id:91718,tcgplayer_id:558697,cardmarket_id:777757,name:"Longstalk Brawl",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42",scryfall_uri:"https://scryfall.com/card/blb/182/longstalk-brawl?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",normal:"https://cards.scryfall.io/normal/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",large:"https://cards.scryfall.io/large/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",png:"https://cards.scryfall.io/png/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.png?1721426861",art_crop:"https://cards.scryfall.io/art_crop/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",border_crop:"https://cards.scryfall.io/border_crop/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861"},mana_cost:"{G}",cmc:1,type_line:"Sorcery",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Choose target creature you control and target creature you don't control. Put a +1/+1 counter on the creature you control if the gift was promised. Then those creatures fight each other.`,colors:["G"],color_identity:["G"],keywords:["Gift","Fight"],all_parts:[{object:"related_card",id:"c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42",component:"combo_piece",name:"Longstalk Brawl",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aadc8976a-0871-4fd6-9c4c-822ba9549b4b&unique=prints",collector_number:"182",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Serena Malyon",artist_ids:["d9fee7a6-7c5e-48a5-8639-bba25abc8a06"],illustration_id:"27a90e5f-0b6f-4400-84b9-7d2fdf013032",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10320,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.04",usd_foil:"0.05",usd_etched:null,eur:"0.05",eur_foil:"0.21",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669096&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLongstalk%2BBrawl",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLongstalk%2BBrawl",edhrec:"https://edhrec.com/route/?cc=Longstalk+Brawl"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558697%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Longstalk-Brawl?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129609?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ae4f3aaf-3960-48cd-b34b-32e4ae5ae088",oracle_id:"97a84e9d-bfc4-4ca2-b1e8-908dba56ccdb",multiverse_ids:[669097],mtgo_id:129611,arena_id:91719,tcgplayer_id:541369,cardmarket_id:776458,name:"Lumra, Bellow of the Woods",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088",scryfall_uri:"https://scryfall.com/card/blb/183/lumra-bellow-of-the-woods?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/e/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088.jpg?1721426865",normal:"https://cards.scryfall.io/normal/front/a/e/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088.jpg?1721426865",large:"https://cards.scryfall.io/large/front/a/e/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088.jpg?1721426865",png:"https://cards.scryfall.io/png/front/a/e/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088.png?1721426865",art_crop:"https://cards.scryfall.io/art_crop/front/a/e/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088.jpg?1721426865",border_crop:"https://cards.scryfall.io/border_crop/front/a/e/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088.jpg?1721426865"},mana_cost:"{4}{G}{G}",cmc:6,type_line:"Legendary Creature — Elemental Bear",oracle_text:`Vigilance, reach
Lumra's power and toughness are each equal to the number of lands you control.
When Lumra enters, mill four cards. Then return all land cards from your graveyard to the battlefield tapped.`,power:"*",toughness:"*",colors:["G"],color_identity:["G"],keywords:["Reach","Vigilance","Mill"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ae4f3aaf-3960-48cd-b34b-32e4ae5ae088/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A97a84e9d-bfc4-4ca2-b1e8-908dba56ccdb&unique=prints",collector_number:"183",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Matt Stewart",artist_ids:["20871267-2d8a-41d5-b03a-be3d557c5734"],illustration_id:"30239c59-a9ce-435d-9bb2-8ca7d3c3f542",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2107,prices:{usd:"11.95",usd_foil:"14.86",usd_etched:null,eur:"11.83",eur_foil:"13.42",tix:"0.33"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669097&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLumra%252C%2BBellow%2Bof%2Bthe%2BWoods",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLumra%252C%2BBellow%2Bof%2Bthe%2BWoods",edhrec:"https://edhrec.com/route/?cc=Lumra%2C+Bellow+of+the+Woods"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F541369%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lumra-Bellow-of-the-Woods?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129611?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"a9ee50d4-c878-457b-964d-29c039ce9852",oracle_id:"cb68d1e4-36aa-4a00-b671-8959e7d526d4",multiverse_ids:[669137],mtgo_id:129691,arena_id:91759,tcgplayer_id:559480,cardmarket_id:778438,name:"Lunar Convocation",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/a9ee50d4-c878-457b-964d-29c039ce9852",scryfall_uri:"https://scryfall.com/card/blb/223/lunar-convocation?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",normal:"https://cards.scryfall.io/normal/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",large:"https://cards.scryfall.io/large/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",png:"https://cards.scryfall.io/png/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.png?1721427132",art_crop:"https://cards.scryfall.io/art_crop/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",border_crop:"https://cards.scryfall.io/border_crop/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132"},mana_cost:"{W}{B}",cmc:2,type_line:"Enchantment",oracle_text:`At the beginning of your end step, if you gained life this turn, each opponent loses 1 life.
At the beginning of your end step, if you gained and lost life this turn, create a 1/1 black Bat creature token with flying.
{1}{B}, Pay 2 life: Draw a card.`,colors:["B","W"],color_identity:["B","W"],keywords:[],all_parts:[{object:"related_card",id:"4396e4c7-660d-4055-bc94-4ccea95223b7",component:"combo_piece",name:"Lunar Convocation",type_line:"Enchantment",uri:"https://api.scryfall.com/cards/4396e4c7-660d-4055-bc94-4ccea95223b7"},{object:"related_card",id:"100c0127-49dd-4a78-9c88-1881e7923674",component:"token",name:"Bat",type_line:"Token Creature — Bat",uri:"https://api.scryfall.com/cards/100c0127-49dd-4a78-9c88-1881e7923674"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/a9ee50d4-c878-457b-964d-29c039ce9852/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Acb68d1e4-36aa-4a00-b671-8959e7d526d4&unique=prints",collector_number:"223",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Pavel Kolomeyets",artist_ids:["13435e52-d47a-4143-adfa-2ae0a6858292"],illustration_id:"69f1fba6-978e-4c9c-9a86-77f3e0e5f8b4",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4100,penny_rank:3794,preview:{source:"CoolStuffInc",source_uri:"https://www.coolstuffinc.com/a/stephenjohnson-07152024-bloomburrow-preview-card-lunar-convocation",previewed_at:"2024-07-15"},prices:{usd:"0.78",usd_foil:"1.15",usd_etched:null,eur:"0.62",eur_foil:"1.00",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669137&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLunar%2BConvocation",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLunar%2BConvocation",edhrec:"https://edhrec.com/route/?cc=Lunar+Convocation"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559480%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lunar-Convocation?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129691?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d",oracle_id:"b6c7c708-5212-4100-b954-b77855b27915",multiverse_ids:[669170],mtgo_id:129757,arena_id:91792,tcgplayer_id:558607,cardmarket_id:776461,name:"Lupinflower Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d",scryfall_uri:"https://scryfall.com/card/blb/256/lupinflower-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",normal:"https://cards.scryfall.io/normal/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",large:"https://cards.scryfall.io/large/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",png:"https://cards.scryfall.io/png/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.png?1721639625",art_crop:"https://cards.scryfall.io/art_crop/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",border_crop:"https://cards.scryfall.io/border_crop/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {W}. Spend this mana only to cast a creature spell.
{1}{W}, {T}, Sacrifice this land: Look at the top six cards of your library. You may reveal a Bat, Bird, Mouse, or Rabbit card from among them and put it into your hand. Put the rest on the bottom of your library in a random order.`,colors:[],color_identity:["W"],keywords:[],produced_mana:["C","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab6c7c708-5212-4100-b954-b77855b27915&unique=prints",collector_number:"256",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alayna Danner",artist_ids:["bb677b1a-ce51-4888-83d6-5a94de461ff9"],illustration_id:"04cc1071-4cf4-4e04-ba43-3d35604dce80",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5965,penny_rank:5711,prices:{usd:"0.14",usd_foil:"0.15",usd_etched:null,eur:"0.11",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669170&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLupinflower%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLupinflower%2BVillage",edhrec:"https://edhrec.com/route/?cc=Lupinflower+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558607%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lupinflower-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129757?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"be6627fd-729d-44f2-b6bf-5299f49d1e3d",oracle_id:"4b11e435-5888-4e3b-a255-db817392163f",multiverse_ids:[669138],mtgo_id:129693,arena_id:91760,tcgplayer_id:541372,cardmarket_id:778139,name:"Mabel, Heir to Cragflame",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/be6627fd-729d-44f2-b6bf-5299f49d1e3d",scryfall_uri:"https://scryfall.com/card/blb/224/mabel-heir-to-cragflame?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/e/be6627fd-729d-44f2-b6bf-5299f49d1e3d.jpg?1721427144",normal:"https://cards.scryfall.io/normal/front/b/e/be6627fd-729d-44f2-b6bf-5299f49d1e3d.jpg?1721427144",large:"https://cards.scryfall.io/large/front/b/e/be6627fd-729d-44f2-b6bf-5299f49d1e3d.jpg?1721427144",png:"https://cards.scryfall.io/png/front/b/e/be6627fd-729d-44f2-b6bf-5299f49d1e3d.png?1721427144",art_crop:"https://cards.scryfall.io/art_crop/front/b/e/be6627fd-729d-44f2-b6bf-5299f49d1e3d.jpg?1721427144",border_crop:"https://cards.scryfall.io/border_crop/front/b/e/be6627fd-729d-44f2-b6bf-5299f49d1e3d.jpg?1721427144"},mana_cost:"{1}{R}{W}",cmc:3,type_line:"Legendary Creature — Mouse Soldier",oracle_text:`Other Mice you control get +1/+1.
When Mabel enters, create Cragflame, a legendary colorless Equipment artifact token with "Equipped creature gets +1/+1 and has vigilance, trample, and haste" and equip {2}.`,power:"3",toughness:"3",colors:["R","W"],color_identity:["R","W"],keywords:[],all_parts:[{object:"related_card",id:"cfbdaae3-acba-44e1-bdd6-9c7066143d33",component:"combo_piece",name:"Mabel, Heir to Cragflame",type_line:"Legendary Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/cfbdaae3-acba-44e1-bdd6-9c7066143d33"},{object:"related_card",id:"c76fa1c6-6000-47b2-9188-9c15b2c73f8f",component:"token",name:"Cragflame",type_line:"Token Legendary Artifact — Equipment",uri:"https://api.scryfall.com/cards/c76fa1c6-6000-47b2-9188-9c15b2c73f8f"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/be6627fd-729d-44f2-b6bf-5299f49d1e3d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A4b11e435-5888-4e3b-a255-db817392163f&unique=prints",collector_number:"224",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aurore Folny",artist_ids:["02f6cdda-7a80-4184-853d-20b28d580868"],illustration_id:"4a4e4bd9-2ab3-43d4-a2c3-bfeb9e36a954",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9497,penny_rank:5440,prices:{usd:"0.23",usd_foil:"0.38",usd_etched:null,eur:"0.31",eur_foil:"0.77",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669138&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMabel%252C%2BHeir%2Bto%2BCragflame",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMabel%252C%2BHeir%2Bto%2BCragflame",edhrec:"https://edhrec.com/route/?cc=Mabel%2C+Heir+to+Cragflame"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F541372%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mabel-Heir-to-Cragflame?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129693?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"5cfcf83f-089c-4e35-855e-b61b98bb1cd8",oracle_id:"c657626f-7444-4c26-842c-dda9b9656fa3",multiverse_ids:[668935],mtgo_id:129287,arena_id:91557,tcgplayer_id:558687,cardmarket_id:777763,name:"Mabel's Mettle",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/5cfcf83f-089c-4e35-855e-b61b98bb1cd8",scryfall_uri:"https://scryfall.com/card/blb/21/mabels-mettle?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/c/5cfcf83f-089c-4e35-855e-b61b98bb1cd8.jpg?1721425880",normal:"https://cards.scryfall.io/normal/front/5/c/5cfcf83f-089c-4e35-855e-b61b98bb1cd8.jpg?1721425880",large:"https://cards.scryfall.io/large/front/5/c/5cfcf83f-089c-4e35-855e-b61b98bb1cd8.jpg?1721425880",png:"https://cards.scryfall.io/png/front/5/c/5cfcf83f-089c-4e35-855e-b61b98bb1cd8.png?1721425880",art_crop:"https://cards.scryfall.io/art_crop/front/5/c/5cfcf83f-089c-4e35-855e-b61b98bb1cd8.jpg?1721425880",border_crop:"https://cards.scryfall.io/border_crop/front/5/c/5cfcf83f-089c-4e35-855e-b61b98bb1cd8.jpg?1721425880"},mana_cost:"{1}{W}",cmc:2,type_line:"Instant",oracle_text:"Target creature gets +2/+2 until end of turn. Up to one other target creature gets +1/+1 until end of turn.",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/5cfcf83f-089c-4e35-855e-b61b98bb1cd8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac657626f-7444-4c26-842c-dda9b9656fa3&unique=prints",collector_number:"21",digital:!1,rarity:"uncommon",flavor_text:'"You stole a child from its nest," Mabel accused. "The only calamity I see here is you."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Johan Grenier",artist_ids:["465e38b8-7eed-4d22-a6d2-d3603ee0c00b"],illustration_id:"cdb2be9f-7f95-42e4-b17e-7bf1c4beadd9",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:13731,preview:{source:"The Vorthos Cast",source_uri:"https://x.com/TheVorthosCast/status/1811052766594273311",previewed_at:"2024-07-10"},prices:{usd:"0.05",usd_foil:"0.06",usd_etched:null,eur:"0.08",eur_foil:"0.19",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668935&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMabel%2527s%2BMettle",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMabel%2527s%2BMettle",edhrec:"https://edhrec.com/route/?cc=Mabel%27s+Mettle"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558687%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mabels-Mettle?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129287?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"cf3320ec-c4e8-405a-982d-e009c58c9e21",oracle_id:"129476ae-9dab-4e04-8e8e-f249afd56ff9",multiverse_ids:[669014],mtgo_id:129445,arena_id:91636,tcgplayer_id:558342,cardmarket_id:777574,name:"Maha, Its Feathers Night",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/cf3320ec-c4e8-405a-982d-e009c58c9e21",scryfall_uri:"https://scryfall.com/card/blb/100/maha-its-feathers-night?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/f/cf3320ec-c4e8-405a-982d-e009c58c9e21.jpg?1721426449",normal:"https://cards.scryfall.io/normal/front/c/f/cf3320ec-c4e8-405a-982d-e009c58c9e21.jpg?1721426449",large:"https://cards.scryfall.io/large/front/c/f/cf3320ec-c4e8-405a-982d-e009c58c9e21.jpg?1721426449",png:"https://cards.scryfall.io/png/front/c/f/cf3320ec-c4e8-405a-982d-e009c58c9e21.png?1721426449",art_crop:"https://cards.scryfall.io/art_crop/front/c/f/cf3320ec-c4e8-405a-982d-e009c58c9e21.jpg?1721426449",border_crop:"https://cards.scryfall.io/border_crop/front/c/f/cf3320ec-c4e8-405a-982d-e009c58c9e21.jpg?1721426449"},mana_cost:"{3}{B}{B}",cmc:5,type_line:"Legendary Creature — Elemental Bird",oracle_text:`Flying, trample
Ward—Discard a card.
Creatures your opponents control have base toughness 1.`,power:"6",toughness:"5",colors:["B"],color_identity:["B"],keywords:["Flying","Trample","Ward"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/cf3320ec-c4e8-405a-982d-e009c58c9e21/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A129476ae-9dab-4e04-8e8e-f249afd56ff9&unique=prints",collector_number:"100",digital:!1,rarity:"mythic",flavor_text:"Its wingspan reaches from dusk to dawn.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alessandra Pisano",artist_ids:["15869690-bf3c-4498-a577-409a6bde5c83"],illustration_id:"448ee062-41ff-4804-9477-8de911cdafc7",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:3268,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"7.42",usd_foil:"7.98",usd_etched:null,eur:"7.60",eur_foil:"8.67",tix:"0.36"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669014&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMaha%252C%2BIts%2BFeathers%2BNight",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMaha%252C%2BIts%2BFeathers%2BNight",edhrec:"https://edhrec.com/route/?cc=Maha%2C+Its+Feathers+Night"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558342%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Maha-Its-Feathers-Night?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129445?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"db3832b5-e83f-4569-bd49-fb7b86fa2d47",oracle_id:"b254ca74-2a96-4590-91bc-650f407daf5d",multiverse_ids:[669057],mtgo_id:129531,arena_id:91679,tcgplayer_id:558706,cardmarket_id:777775,name:"Manifold Mouse",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/db3832b5-e83f-4569-bd49-fb7b86fa2d47",scryfall_uri:"https://scryfall.com/card/blb/143/manifold-mouse?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",normal:"https://cards.scryfall.io/normal/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",large:"https://cards.scryfall.io/large/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",png:"https://cards.scryfall.io/png/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.png?1721426663",art_crop:"https://cards.scryfall.io/art_crop/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",border_crop:"https://cards.scryfall.io/border_crop/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663"},mana_cost:"{1}{R}",cmc:2,type_line:"Creature — Mouse Soldier",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
At the beginning of combat on your turn, target Mouse you control gains your choice of double strike or trample until end of turn.`,power:"1",toughness:"2",colors:["R"],color_identity:["R"],keywords:["Offspring"],all_parts:[{object:"related_card",id:"907a990c-6ee9-44e1-85f9-83b261507308",component:"combo_piece",name:"Manifold Mouse",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/907a990c-6ee9-44e1-85f9-83b261507308"},{object:"related_card",id:"f5067c54-0f31-40e6-9ead-5d0183c9f00a",component:"token",name:"Manifold Mouse",type_line:"Token Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/f5067c54-0f31-40e6-9ead-5d0183c9f00a"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/db3832b5-e83f-4569-bd49-fb7b86fa2d47/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab254ca74-2a96-4590-91bc-650f407daf5d&unique=prints",collector_number:"143",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Randy Vargas",artist_ids:["d20672ca-0555-4238-a984-fd171d36b247"],illustration_id:"1e7f9dbc-2fa8-4dbb-820a-dd2a954ef3ca",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11297,preview:{source:"Sean Plott (Day9TV)",source_uri:"https://twitter.com/day9tv/status/1811060311342075922",previewed_at:"2024-07-10"},prices:{usd:"2.17",usd_foil:"3.03",usd_etched:null,eur:"2.50",eur_foil:"2.83",tix:"0.96"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669057&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DManifold%2BMouse",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DManifold%2BMouse",edhrec:"https://edhrec.com/route/?cc=Manifold+Mouse"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558706%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Manifold-Mouse?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129531?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"509bf254-8a2b-4dfa-9ae5-386321b35e8b",oracle_id:"19b5c94b-b4fa-41a9-b649-51c4e6f03602",multiverse_ids:[669058],mtgo_id:129533,arena_id:91680,tcgplayer_id:558604,cardmarket_id:776457,name:"Might of the Meek",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/509bf254-8a2b-4dfa-9ae5-386321b35e8b",scryfall_uri:"https://scryfall.com/card/blb/144/might-of-the-meek?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/0/509bf254-8a2b-4dfa-9ae5-386321b35e8b.jpg?1721426663",normal:"https://cards.scryfall.io/normal/front/5/0/509bf254-8a2b-4dfa-9ae5-386321b35e8b.jpg?1721426663",large:"https://cards.scryfall.io/large/front/5/0/509bf254-8a2b-4dfa-9ae5-386321b35e8b.jpg?1721426663",png:"https://cards.scryfall.io/png/front/5/0/509bf254-8a2b-4dfa-9ae5-386321b35e8b.png?1721426663",art_crop:"https://cards.scryfall.io/art_crop/front/5/0/509bf254-8a2b-4dfa-9ae5-386321b35e8b.jpg?1721426663",border_crop:"https://cards.scryfall.io/border_crop/front/5/0/509bf254-8a2b-4dfa-9ae5-386321b35e8b.jpg?1721426663"},mana_cost:"{R}",cmc:1,type_line:"Instant",oracle_text:`Target creature gains trample until end of turn. It also gets +1/+0 until end of turn if you control a Mouse.
Draw a card.`,colors:["R"],color_identity:["R"],keywords:[],all_parts:[{object:"related_card",id:"509bf254-8a2b-4dfa-9ae5-386321b35e8b",component:"combo_piece",name:"Might of the Meek",type_line:"Instant",uri:"https://api.scryfall.com/cards/509bf254-8a2b-4dfa-9ae5-386321b35e8b"},{object:"related_card",id:"4ea7d5a5-4dc3-4ea0-9b73-f57887d95910",component:"combo_piece",name:"Brave Meadowguard",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/4ea7d5a5-4dc3-4ea0-9b73-f57887d95910"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/509bf254-8a2b-4dfa-9ae5-386321b35e8b/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A19b5c94b-b4fa-41a9-b649-51c4e6f03602&unique=prints",collector_number:"144",digital:!1,rarity:"common",flavor_text:`"Fear is unavoidable. You can run from it with your tail between your legs, or charge it head on with sword in hand. I prefer the latter."
—Rho, veteran hero`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Danny Schwartz",artist_ids:["48e30a4a-5b4d-48e2-9c53-03125085374e"],illustration_id:"97de934c-dad4-4317-998f-6c4a3e91f55c",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5640,penny_rank:5974,preview:{source:"Wizards of the Coast",source_uri:"https://twitter.com/wizards_magic/status/1806657782193717345/photo/1",previewed_at:"2024-06-28"},prices:{usd:"0.09",usd_foil:"0.28",usd_etched:null,eur:"0.09",eur_foil:"0.12",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669058&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMight%2Bof%2Bthe%2BMeek",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMight%2Bof%2Bthe%2BMeek",edhrec:"https://edhrec.com/route/?cc=Might+of+the+Meek"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558604%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Might-of-the-Meek?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129533?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"507ba708-ca9b-453e-b4c2-23b6650eb5a8",oracle_id:"3b10ab39-3050-475c-af8b-f293794d498c",multiverse_ids:[669139],mtgo_id:129695,arena_id:91761,tcgplayer_id:558395,cardmarket_id:777694,name:"Mind Drill Assailant",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/507ba708-ca9b-453e-b4c2-23b6650eb5a8",scryfall_uri:"https://scryfall.com/card/blb/225/mind-drill-assailant?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/0/507ba708-ca9b-453e-b4c2-23b6650eb5a8.jpg?1721427150",normal:"https://cards.scryfall.io/normal/front/5/0/507ba708-ca9b-453e-b4c2-23b6650eb5a8.jpg?1721427150",large:"https://cards.scryfall.io/large/front/5/0/507ba708-ca9b-453e-b4c2-23b6650eb5a8.jpg?1721427150",png:"https://cards.scryfall.io/png/front/5/0/507ba708-ca9b-453e-b4c2-23b6650eb5a8.png?1721427150",art_crop:"https://cards.scryfall.io/art_crop/front/5/0/507ba708-ca9b-453e-b4c2-23b6650eb5a8.jpg?1721427150",border_crop:"https://cards.scryfall.io/border_crop/front/5/0/507ba708-ca9b-453e-b4c2-23b6650eb5a8.jpg?1721427150"},mana_cost:"{2}{U/B}{U/B}",cmc:4,type_line:"Creature — Rat Warlock",oracle_text:`Threshold — As long as seven or more cards are in your graveyard, this creature gets +3/+0.
{2}{U/B}: Surveil 1. (Look at the top card of your library. You may put it into your graveyard.)`,power:"2",toughness:"5",colors:["B","U"],color_identity:["B","U"],keywords:["Surveil","Threshold"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/507ba708-ca9b-453e-b4c2-23b6650eb5a8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A3b10ab39-3050-475c-af8b-f293794d498c&unique=prints",collector_number:"225",digital:!1,rarity:"common",flavor_text:'"If only you kept your secrets somewhere more secure than your delicate little skull."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Tuan Duong Chu",artist_ids:["d84246f9-a536-485f-a21d-a237302ed100"],illustration_id:"c445ec4d-edc9-4064-955f-38167efccc37",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:14033,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.05",usd_foil:"0.03",usd_etched:null,eur:"0.03",eur_foil:"0.16",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669139&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMind%2BDrill%2BAssailant",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMind%2BDrill%2BAssailant",edhrec:"https://edhrec.com/route/?cc=Mind+Drill+Assailant"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558395%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mind-Drill-Assailant?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129695?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7e24fe6a-607b-49b8-9fca-cecb1e40de7f",oracle_id:"03e356ae-f1e8-4730-8d2b-b9e2f32db915",multiverse_ids:[668973],mtgo_id:129363,arena_id:91595,tcgplayer_id:559140,cardmarket_id:778334,name:"Mind Spiral",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7e24fe6a-607b-49b8-9fca-cecb1e40de7f",scryfall_uri:"https://scryfall.com/card/blb/59/mind-spiral?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",normal:"https://cards.scryfall.io/normal/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",large:"https://cards.scryfall.io/large/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",png:"https://cards.scryfall.io/png/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.png?1721426147",art_crop:"https://cards.scryfall.io/art_crop/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",border_crop:"https://cards.scryfall.io/border_crop/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147"},mana_cost:"{4}{U}",cmc:5,type_line:"Sorcery",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Target player draws three cards. If the gift was promised, tap target creature an opponent controls and put a stun counter on it. (If a permanent with a stun counter would become untapped, remove one from it instead.)`,colors:["U"],color_identity:["U"],keywords:["Gift"],all_parts:[{object:"related_card",id:"7e24fe6a-607b-49b8-9fca-cecb1e40de7f",component:"combo_piece",name:"Mind Spiral",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/7e24fe6a-607b-49b8-9fca-cecb1e40de7f"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7e24fe6a-607b-49b8-9fca-cecb1e40de7f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A03e356ae-f1e8-4730-8d2b-b9e2f32db915&unique=prints",collector_number:"59",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Filip Burburan",artist_ids:["66082c3b-a623-4d34-be51-2475214b85d3"],illustration_id:"f708ba68-54b1-4218-ad09-7c042170033d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13523,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.02",usd_foil:"0.06",usd_etched:null,eur:"0.04",eur_foil:"0.13",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668973&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMind%2BSpiral",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMind%2BSpiral",edhrec:"https://edhrec.com/route/?cc=Mind+Spiral"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559140%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mind-Spiral?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129363?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7",oracle_id:"3428287b-cfd5-45bc-b5f9-1e3f5a425a68",multiverse_ids:[670764],arena_id:91802,tcgplayer_id:559545,name:"Mind Spring",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7",scryfall_uri:"https://scryfall.com/card/blb/389/mind-spring?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/7/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7.jpg?1721428086",normal:"https://cards.scryfall.io/normal/front/e/7/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7.jpg?1721428086",large:"https://cards.scryfall.io/large/front/e/7/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7.jpg?1721428086",png:"https://cards.scryfall.io/png/front/e/7/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7.png?1721428086",art_crop:"https://cards.scryfall.io/art_crop/front/e/7/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7.jpg?1721428086",border_crop:"https://cards.scryfall.io/border_crop/front/e/7/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7.jpg?1721428086"},mana_cost:"{X}{U}{U}",cmc:2,type_line:"Sorcery",oracle_text:"Draw X cards.",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!1,nonfoil:!0,finishes:["nonfoil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e7e7d174-eb7c-41ad-a241-cfbfdc71e3a7/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A3428287b-cfd5-45bc-b5f9-1e3f5a425a68&unique=prints",collector_number:"389",digital:!1,rarity:"rare",flavor_text:"Fragments of thought refract and multiply, surging in a geyser of dizzying insight.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mark Zug",artist_ids:["48e2b98c-5467-4671-bd42-4c3746115117"],illustration_id:"fd35f91e-82e9-444c-891e-77ea6b9fde16",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,promo_types:["starterdeck"],edhrec_rank:4491,penny_rank:5189,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/news/announcements/bloomburrow-starter-kit-decklists",previewed_at:"2024-07-16"},prices:{usd:"0.17",usd_foil:null,usd_etched:null,eur:null,eur_foil:null,tix:null},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=670764&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMind%2BSpring",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMind%2BSpring",edhrec:"https://edhrec.com/route/?cc=Mind+Spring"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559545%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Mind+Spring&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards?affiliate_id=scryfall&data%5Bsearch%5D=Mind+Spring&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"aaa10f34-5bfd-4d87-8f07-58de3b0f5663",oracle_id:"f823b122-94ac-42ba-b511-9e54d64db112",multiverse_ids:[668974],mtgo_id:129365,arena_id:91596,tcgplayer_id:559507,cardmarket_id:778486,name:"Mindwhisker",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/aaa10f34-5bfd-4d87-8f07-58de3b0f5663",scryfall_uri:"https://scryfall.com/card/blb/60/mindwhisker?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/a/aaa10f34-5bfd-4d87-8f07-58de3b0f5663.jpg?1721426158",normal:"https://cards.scryfall.io/normal/front/a/a/aaa10f34-5bfd-4d87-8f07-58de3b0f5663.jpg?1721426158",large:"https://cards.scryfall.io/large/front/a/a/aaa10f34-5bfd-4d87-8f07-58de3b0f5663.jpg?1721426158",png:"https://cards.scryfall.io/png/front/a/a/aaa10f34-5bfd-4d87-8f07-58de3b0f5663.png?1721426158",art_crop:"https://cards.scryfall.io/art_crop/front/a/a/aaa10f34-5bfd-4d87-8f07-58de3b0f5663.jpg?1721426158",border_crop:"https://cards.scryfall.io/border_crop/front/a/a/aaa10f34-5bfd-4d87-8f07-58de3b0f5663.jpg?1721426158"},mana_cost:"{2}{U}",cmc:3,type_line:"Creature — Rat Wizard",oracle_text:`At the beginning of your upkeep, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)
Threshold — As long as seven or more cards are in your graveyard, creatures your opponents control get -1/-0.`,power:"3",toughness:"2",colors:["U"],color_identity:["U"],keywords:["Surveil","Threshold"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/aaa10f34-5bfd-4d87-8f07-58de3b0f5663/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Af823b122-94ac-42ba-b511-9e54d64db112&unique=prints",collector_number:"60",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alexander Mokhov",artist_ids:["3a6a9d37-e62c-44bd-90f2-f5126324e3f0"],illustration_id:"39aafde9-75a4-4c0a-8fec-e47a1fba8121",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9443,preview:{source:"Xunshuilu",source_uri:"https://www.bilibili.com/video/BV1xy411B7Y1/?spm_id_from=333.999.list.card_archive.click",previewed_at:"2024-07-15"},prices:{usd:"0.07",usd_foil:"0.12",usd_etched:null,eur:"0.16",eur_foil:"0.17",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668974&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMindwhisker",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMindwhisker",edhrec:"https://edhrec.com/route/?cc=Mindwhisker"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559507%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mindwhisker?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129365?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"e5246540-5a84-41d8-9e30-8e7a6c0e84e1",oracle_id:"bf9221f5-a4b2-4074-901c-0fa3c2bda80c",multiverse_ids:[669098],mtgo_id:129613,arena_id:91720,tcgplayer_id:559078,cardmarket_id:778112,name:"Mistbreath Elder",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/e5246540-5a84-41d8-9e30-8e7a6c0e84e1",scryfall_uri:"https://scryfall.com/card/blb/184/mistbreath-elder?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/5/e5246540-5a84-41d8-9e30-8e7a6c0e84e1.jpg?1721426876",normal:"https://cards.scryfall.io/normal/front/e/5/e5246540-5a84-41d8-9e30-8e7a6c0e84e1.jpg?1721426876",large:"https://cards.scryfall.io/large/front/e/5/e5246540-5a84-41d8-9e30-8e7a6c0e84e1.jpg?1721426876",png:"https://cards.scryfall.io/png/front/e/5/e5246540-5a84-41d8-9e30-8e7a6c0e84e1.png?1721426876",art_crop:"https://cards.scryfall.io/art_crop/front/e/5/e5246540-5a84-41d8-9e30-8e7a6c0e84e1.jpg?1721426876",border_crop:"https://cards.scryfall.io/border_crop/front/e/5/e5246540-5a84-41d8-9e30-8e7a6c0e84e1.jpg?1721426876"},mana_cost:"{G}",cmc:1,type_line:"Creature — Frog Warrior",oracle_text:"At the beginning of your upkeep, return another creature you control to its owner's hand. If you do, put a +1/+1 counter on this creature. Otherwise, you may return this creature to its owner's hand.",power:"2",toughness:"2",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/e5246540-5a84-41d8-9e30-8e7a6c0e84e1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abf9221f5-a4b2-4074-901c-0fa3c2bda80c&unique=prints",collector_number:"184",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jason Kang",artist_ids:["064b9176-e325-44f6-a413-2cadb7505851"],illustration_id:"f94084d8-c279-4ed3-b4b5-9b87dddb882b",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8211,penny_rank:6850,preview:{source:"k0ppk0pp",source_uri:"https://twitter.com/k0ppk0pp/status/1811422891902382484",previewed_at:"2024-07-11"},prices:{usd:"0.20",usd_foil:"0.41",usd_etched:null,eur:"0.35",eur_foil:"0.38",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669098&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMistbreath%2BElder",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMistbreath%2BElder",edhrec:"https://edhrec.com/route/?cc=Mistbreath+Elder"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559078%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mistbreath-Elder?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129613?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ade32396-8841-4ba4-8852-d11146607f21",oracle_id:"b9df2cdf-397c-458d-89cf-911568737ffa",multiverse_ids:[668975],mtgo_id:129367,arena_id:91597,tcgplayer_id:559141,cardmarket_id:778346,name:"Mockingbird",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ade32396-8841-4ba4-8852-d11146607f21",scryfall_uri:"https://scryfall.com/card/blb/61/mockingbird?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",normal:"https://cards.scryfall.io/normal/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",large:"https://cards.scryfall.io/large/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",png:"https://cards.scryfall.io/png/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.png?1722388218",art_crop:"https://cards.scryfall.io/art_crop/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",border_crop:"https://cards.scryfall.io/border_crop/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218"},mana_cost:"{X}{U}",cmc:1,type_line:"Creature — Bird Bard",oracle_text:`Flying
You may have this creature enter as a copy of any creature on the battlefield with mana value less than or equal to the amount of mana spent to cast this creature, except it's a Bird in addition to its other types and it has flying.`,power:"1",toughness:"1",colors:["U"],color_identity:["U"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ade32396-8841-4ba4-8852-d11146607f21/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab9df2cdf-397c-458d-89cf-911568737ffa&unique=prints",collector_number:"61",digital:!1,rarity:"rare",flavor_text:`"Laughing at you? No, no, I'm laughing *as* you!"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aurore Folny",artist_ids:["02f6cdda-7a80-4184-853d-20b28d580868"],illustration_id:"e16b596c-b6df-40dd-a4aa-9ed2f98350e8",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1482,preview:{source:"CulturaPop",source_uri:"https://cpop.it/articoli/bozzamagic-the-gathering-vi-sveliamo-in-esclusiva-3-nuove-carte-di-bloomburrow",previewed_at:"2024-07-12"},prices:{usd:"1.61",usd_foil:"2.94",usd_etched:null,eur:"3.29",eur_foil:"5.55",tix:"0.53"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668975&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMockingbird",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMockingbird",edhrec:"https://edhrec.com/route/?cc=Mockingbird"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559141%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mockingbird?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129367?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"35f2a71f-31e8-4b51-9dd4-51a5336b3b86",oracle_id:"d8067f42-68c0-42da-a1d6-859953939555",multiverse_ids:[669140],mtgo_id:129697,arena_id:91762,tcgplayer_id:558394,cardmarket_id:777695,name:"Moonrise Cleric",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/35f2a71f-31e8-4b51-9dd4-51a5336b3b86",scryfall_uri:"https://scryfall.com/card/blb/226/moonrise-cleric?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/5/35f2a71f-31e8-4b51-9dd4-51a5336b3b86.jpg?1721427155",normal:"https://cards.scryfall.io/normal/front/3/5/35f2a71f-31e8-4b51-9dd4-51a5336b3b86.jpg?1721427155",large:"https://cards.scryfall.io/large/front/3/5/35f2a71f-31e8-4b51-9dd4-51a5336b3b86.jpg?1721427155",png:"https://cards.scryfall.io/png/front/3/5/35f2a71f-31e8-4b51-9dd4-51a5336b3b86.png?1721427155",art_crop:"https://cards.scryfall.io/art_crop/front/3/5/35f2a71f-31e8-4b51-9dd4-51a5336b3b86.jpg?1721427155",border_crop:"https://cards.scryfall.io/border_crop/front/3/5/35f2a71f-31e8-4b51-9dd4-51a5336b3b86.jpg?1721427155"},mana_cost:"{1}{W/B}{W/B}",cmc:3,type_line:"Creature — Bat Cleric",oracle_text:`Flying
Whenever this creature attacks, you gain 1 life.`,power:"2",toughness:"3",colors:["B","W"],color_identity:["B","W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/35f2a71f-31e8-4b51-9dd4-51a5336b3b86/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ad8067f42-68c0-42da-a1d6-859953939555&unique=prints",collector_number:"226",digital:!1,rarity:"common",flavor_text:'"The sunrisers have entrusted me with their life force. I intend to repay them bountifully."',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Simon Dominic",artist_ids:["b0e80135-db5a-4b88-a0bc-815a0e94faa1"],illustration_id:"e3fcf68a-4b8b-493b-8299-894e343e0b30",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11316,penny_rank:9731,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.03",usd_foil:"0.10",usd_etched:null,eur:"0.06",eur_foil:"0.09",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669140&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMoonrise%2BCleric",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMoonrise%2BCleric",edhrec:"https://edhrec.com/route/?cc=Moonrise+Cleric"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558394%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Moonrise-Cleric?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129697?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"59e4aa8d-1d06-48db-b205-aa2f1392bbcb",oracle_id:"fcae4f9d-8f81-42f9-93a3-82a482851bdd",multiverse_ids:[669015],mtgo_id:129447,arena_id:91637,tcgplayer_id:559063,cardmarket_id:778109,name:"Moonstone Harbinger",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/59e4aa8d-1d06-48db-b205-aa2f1392bbcb",scryfall_uri:"https://scryfall.com/card/blb/101/moonstone-harbinger?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/9/59e4aa8d-1d06-48db-b205-aa2f1392bbcb.jpg?1721426452",normal:"https://cards.scryfall.io/normal/front/5/9/59e4aa8d-1d06-48db-b205-aa2f1392bbcb.jpg?1721426452",large:"https://cards.scryfall.io/large/front/5/9/59e4aa8d-1d06-48db-b205-aa2f1392bbcb.jpg?1721426452",png:"https://cards.scryfall.io/png/front/5/9/59e4aa8d-1d06-48db-b205-aa2f1392bbcb.png?1721426452",art_crop:"https://cards.scryfall.io/art_crop/front/5/9/59e4aa8d-1d06-48db-b205-aa2f1392bbcb.jpg?1721426452",border_crop:"https://cards.scryfall.io/border_crop/front/5/9/59e4aa8d-1d06-48db-b205-aa2f1392bbcb.jpg?1721426452"},mana_cost:"{2}{B}",cmc:3,type_line:"Creature — Bat Warrior",oracle_text:`Flying, deathtouch
Whenever you gain or lose life during your turn, Bats you control get +1/+0 and gain deathtouch until end of turn. This ability triggers only once each turn.`,power:"1",toughness:"3",colors:["B"],color_identity:["B"],keywords:["Deathtouch","Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/59e4aa8d-1d06-48db-b205-aa2f1392bbcb/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Afcae4f9d-8f81-42f9-93a3-82a482851bdd&unique=prints",collector_number:"101",digital:!1,rarity:"uncommon",flavor_text:"Moonstone weapons drink in the last light of dusk to give their wielders an edge in combat.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Kevin Sidharta",artist_ids:["e0bcff21-4a2b-4151-86a2-a462da7b5aaa"],illustration_id:"ae33d983-e4f8-4412-bd1f-5f5e078962c6",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11661,penny_rank:9732,preview:{source:"Air Bubbles Cosplay",source_uri:"https://twitter.com/AirBubbles/status/1811522203739214326/photo/1",previewed_at:"2024-07-11"},prices:{usd:"0.08",usd_foil:"0.10",usd_etched:null,eur:"0.15",eur_foil:"0.27",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669015&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMoonstone%2BHarbinger",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMoonstone%2BHarbinger",edhrec:"https://edhrec.com/route/?cc=Moonstone+Harbinger"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559063%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Moonstone-Harbinger?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129447?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"4b827c54-8bfe-4ef5-830e-e17b8690bbe7",oracle_id:"a3fb7228-e76b-4e96-a40e-20b5fed75685",multiverse_ids:[668672],mtgo_id:129781,arena_id:91837,tcgplayer_id:559558,name:"Mountain",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/4b827c54-8bfe-4ef5-830e-e17b8690bbe7",scryfall_uri:"https://scryfall.com/card/blb/375/mountain?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/b/4b827c54-8bfe-4ef5-830e-e17b8690bbe7.jpg?1721428012",normal:"https://cards.scryfall.io/normal/front/4/b/4b827c54-8bfe-4ef5-830e-e17b8690bbe7.jpg?1721428012",large:"https://cards.scryfall.io/large/front/4/b/4b827c54-8bfe-4ef5-830e-e17b8690bbe7.jpg?1721428012",png:"https://cards.scryfall.io/png/front/4/b/4b827c54-8bfe-4ef5-830e-e17b8690bbe7.png?1721428012",art_crop:"https://cards.scryfall.io/art_crop/front/4/b/4b827c54-8bfe-4ef5-830e-e17b8690bbe7.jpg?1721428012",border_crop:"https://cards.scryfall.io/border_crop/front/4/b/4b827c54-8bfe-4ef5-830e-e17b8690bbe7.jpg?1721428012"},mana_cost:"",cmc:0,type_line:"Basic Land — Mountain",oracle_text:"({T}: Add {R}.)",colors:[],color_identity:["R"],keywords:[],produced_mana:["R"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"legal",predh:"legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/4b827c54-8bfe-4ef5-830e-e17b8690bbe7/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aa3fb7228-e76b-4e96-a40e-20b5fed75685&unique=prints",collector_number:"375",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Samuele Bandini",artist_ids:["f16f5903-990f-4ffe-88fb-fd54d0d8752b"],illustration_id:"745d2b2c-d448-452e-9f2f-6ffcc7ccddbf",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,prices:{usd:"0.07",usd_foil:"0.11",usd_etched:null,eur:null,eur_foil:null,tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668672&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMountain",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMountain",edhrec:"https://edhrec.com/route/?cc=Mountain"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559558%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Mountain&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129781?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8ba1bc5a-03e7-44ec-893e-44042cbc02ef",oracle_id:"5b0a4530-6e19-41a2-9ea6-e4c8cf85b6c4",multiverse_ids:[668936],mtgo_id:129289,arena_id:91558,tcgplayer_id:559130,cardmarket_id:778347,name:"Mouse Trapper",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8ba1bc5a-03e7-44ec-893e-44042cbc02ef",scryfall_uri:"https://scryfall.com/card/blb/22/mouse-trapper?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/b/8ba1bc5a-03e7-44ec-893e-44042cbc02ef.jpg?1721425888",normal:"https://cards.scryfall.io/normal/front/8/b/8ba1bc5a-03e7-44ec-893e-44042cbc02ef.jpg?1721425888",large:"https://cards.scryfall.io/large/front/8/b/8ba1bc5a-03e7-44ec-893e-44042cbc02ef.jpg?1721425888",png:"https://cards.scryfall.io/png/front/8/b/8ba1bc5a-03e7-44ec-893e-44042cbc02ef.png?1721425888",art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8ba1bc5a-03e7-44ec-893e-44042cbc02ef.jpg?1721425888",border_crop:"https://cards.scryfall.io/border_crop/front/8/b/8ba1bc5a-03e7-44ec-893e-44042cbc02ef.jpg?1721425888"},mana_cost:"{2}{W}",cmc:3,type_line:"Creature — Mouse Soldier",oracle_text:`Flash
Valiant — Whenever this creature becomes the target of a spell or ability you control for the first time each turn, tap target creature an opponent controls.`,power:"3",toughness:"2",colors:["W"],color_identity:["W"],keywords:["Valiant","Flash"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8ba1bc5a-03e7-44ec-893e-44042cbc02ef/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5b0a4530-6e19-41a2-9ea6-e4c8cf85b6c4&unique=prints",collector_number:"22",digital:!1,rarity:"uncommon",flavor_text:`"I'm not here to hurt you, but I will stop you from hurting others."`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakub Kasper",artist_ids:["36901417-ce61-4636-8b77-6db14a9cb68a"],illustration_id:"a8bfc78a-9fb3-4722-a748-a806956dae00",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12551,penny_rank:6221,preview:{source:"Queen Honey Games",source_uri:"https://www.youtube.com/watch?v=qVJkOp1P2bo",previewed_at:"2024-07-12"},prices:{usd:"0.05",usd_foil:"0.07",usd_etched:null,eur:"0.07",eur_foil:"0.21",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668936&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMouse%2BTrapper",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMouse%2BTrapper",edhrec:"https://edhrec.com/route/?cc=Mouse+Trapper"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559130%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mouse-Trapper?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129289?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"53ec4ad3-9cf0-4f1b-a9db-d63feee594ab",oracle_id:"aeeab1df-0b8b-4bc4-a5f9-aac413449bec",multiverse_ids:[669171],mtgo_id:129759,arena_id:91793,tcgplayer_id:558609,cardmarket_id:776462,name:"Mudflat Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab",scryfall_uri:"https://scryfall.com/card/blb/257/mudflat-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",normal:"https://cards.scryfall.io/normal/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",large:"https://cards.scryfall.io/large/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",png:"https://cards.scryfall.io/png/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.png?1721639657",art_crop:"https://cards.scryfall.io/art_crop/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",border_crop:"https://cards.scryfall.io/border_crop/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {B}. Spend this mana only to cast a creature spell.
{1}{B}, {T}, Sacrifice this land: Return target Bat, Lizard, Rat, or Squirrel card from your graveyard to your hand.`,colors:[],color_identity:["B"],keywords:[],produced_mana:["B","C"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aaeeab1df-0b8b-4bc4-a5f9-aac413449bec&unique=prints",collector_number:"257",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Samuele Bandini",artist_ids:["f16f5903-990f-4ffe-88fb-fd54d0d8752b"],illustration_id:"55b394e9-4067-4652-94df-0681c5ed6a81",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3583,penny_rank:3452,prices:{usd:"0.24",usd_foil:"0.30",usd_etched:null,eur:"0.11",eur_foil:"0.33",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669171&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMudflat%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMudflat%2BVillage",edhrec:"https://edhrec.com/route/?cc=Mudflat+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558609%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mudflat-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129759?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b40e4658-fd68-46d0-9a89-25570a023d19",oracle_id:"c115159c-6991-4812-b3b6-6ed80221cab4",multiverse_ids:[669141],mtgo_id:129699,arena_id:91763,tcgplayer_id:558344,cardmarket_id:777696,name:"Muerra, Trash Tactician",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b40e4658-fd68-46d0-9a89-25570a023d19",scryfall_uri:"https://scryfall.com/card/blb/227/muerra-trash-tactician?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",normal:"https://cards.scryfall.io/normal/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",large:"https://cards.scryfall.io/large/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",png:"https://cards.scryfall.io/png/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.png?1721427159",art_crop:"https://cards.scryfall.io/art_crop/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",border_crop:"https://cards.scryfall.io/border_crop/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159"},mana_cost:"{1}{R}{G}",cmc:3,type_line:"Legendary Creature — Raccoon Warrior",oracle_text:`At the beginning of your first main phase, add {R} or {G} for each Raccoon you control.
Whenever you expend 4, you gain 3 life. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)
Whenever you expend 8, exile the top two cards of your library. Until the end of your next turn, you may play those cards.`,power:"2",toughness:"4",colors:["G","R"],color_identity:["G","R"],keywords:[],produced_mana:["G","R"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b40e4658-fd68-46d0-9a89-25570a023d19/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac115159c-6991-4812-b3b6-6ed80221cab4&unique=prints",collector_number:"227",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Volkan Baǵa",artist_ids:["93bec3c0-0260-4d31-8064-5d01efb4153f"],illustration_id:"db3c96ee-2354-488a-8b8b-391549fee6f0",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9891,penny_rank:9223,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.17",usd_foil:"0.32",usd_etched:null,eur:"0.22",eur_foil:"0.32",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669141&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMuerra%252C%2BTrash%2BTactician",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMuerra%252C%2BTrash%2BTactician",edhrec:"https://edhrec.com/route/?cc=Muerra%2C+Trash+Tactician"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558344%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Muerra-Trash-Tactician?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129699?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9",oracle_id:"9ac2dcb6-dacc-4fcb-b820-9fc6744ec503",multiverse_ids:[668937],mtgo_id:129291,arena_id:91559,tcgplayer_id:559041,cardmarket_id:778113,name:"Nettle Guard",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9",scryfall_uri:"https://scryfall.com/card/blb/23/nettle-guard?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/c/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9.jpg?1721425890",normal:"https://cards.scryfall.io/normal/front/8/c/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9.jpg?1721425890",large:"https://cards.scryfall.io/large/front/8/c/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9.jpg?1721425890",png:"https://cards.scryfall.io/png/front/8/c/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9.png?1721425890",art_crop:"https://cards.scryfall.io/art_crop/front/8/c/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9.jpg?1721425890",border_crop:"https://cards.scryfall.io/border_crop/front/8/c/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9.jpg?1721425890"},mana_cost:"{1}{W}",cmc:2,type_line:"Creature — Mouse Soldier",oracle_text:`Valiant — Whenever this creature becomes the target of a spell or ability you control for the first time each turn, it gets +0/+2 until end of turn.
{1}, Sacrifice this creature: Destroy target artifact or enchantment.`,power:"3",toughness:"1",colors:["W"],color_identity:["W"],keywords:["Valiant"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8c9c3cc3-2aa2-453e-a17c-2baeeaabe0a9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A9ac2dcb6-dacc-4fcb-b820-9fc6744ec503&unique=prints",collector_number:"23",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Rob Rey",artist_ids:["17ec946e-bb99-4f0d-af75-c296eb4145be"],illustration_id:"05d4ce76-47bd-4cfb-bce2-1936413aa20b",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11237,penny_rank:3407,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.06",usd_foil:"0.03",usd_etched:null,eur:"0.04",eur_foil:"0.07",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668937&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DNettle%2BGuard",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DNettle%2BGuard",edhrec:"https://edhrec.com/route/?cc=Nettle+Guard"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559041%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Nettle-Guard?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129291?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0928e04f-2568-41e8-b603-7a25cf5f94d0",oracle_id:"99007c40-1eb5-4c3a-9889-6d12417d8191",multiverse_ids:[668976],mtgo_id:129369,arena_id:91598,tcgplayer_id:559508,cardmarket_id:778430,name:"Nightwhorl Hermit",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0928e04f-2568-41e8-b603-7a25cf5f94d0",scryfall_uri:"https://scryfall.com/card/blb/62/nightwhorl-hermit?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/9/0928e04f-2568-41e8-b603-7a25cf5f94d0.jpg?1721426168",normal:"https://cards.scryfall.io/normal/front/0/9/0928e04f-2568-41e8-b603-7a25cf5f94d0.jpg?1721426168",large:"https://cards.scryfall.io/large/front/0/9/0928e04f-2568-41e8-b603-7a25cf5f94d0.jpg?1721426168",png:"https://cards.scryfall.io/png/front/0/9/0928e04f-2568-41e8-b603-7a25cf5f94d0.png?1721426168",art_crop:"https://cards.scryfall.io/art_crop/front/0/9/0928e04f-2568-41e8-b603-7a25cf5f94d0.jpg?1721426168",border_crop:"https://cards.scryfall.io/border_crop/front/0/9/0928e04f-2568-41e8-b603-7a25cf5f94d0.jpg?1721426168"},mana_cost:"{2}{U}",cmc:3,type_line:"Creature — Rat Rogue",oracle_text:`Vigilance
Threshold — As long as seven or more cards are in your graveyard, this creature gets +1/+0 and can't be blocked.`,power:"1",toughness:"4",colors:["U"],color_identity:["U"],keywords:["Vigilance","Threshold"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0928e04f-2568-41e8-b603-7a25cf5f94d0/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A99007c40-1eb5-4c3a-9889-6d12417d8191&unique=prints",collector_number:"62",digital:!1,rarity:"common",flavor_text:"He etches his secrets onto the shimmering shells of mussels, saving them to share with the Great Snail.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Valera Lutfullina",artist_ids:["76bc57c7-47c6-40c5-8797-8ffcce430ac7"],illustration_id:"bbf91587-13bb-4061-be61-f5da779d44dd",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13952,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.04",usd_foil:"0.04",usd_etched:null,eur:"0.04",eur_foil:"0.11",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668976&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DNightwhorl%2BHermit",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DNightwhorl%2BHermit",edhrec:"https://edhrec.com/route/?cc=Nightwhorl+Hermit"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559508%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Nightwhorl-Hermit?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129369?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"742c0409-9abd-4559-b52e-932cc90c531a",oracle_id:"ed7f64d1-69ba-40f5-9863-3edba10e23c7",multiverse_ids:[669016],mtgo_id:129449,arena_id:91638,tcgplayer_id:559511,cardmarket_id:778500,name:"Nocturnal Hunger",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/742c0409-9abd-4559-b52e-932cc90c531a",scryfall_uri:"https://scryfall.com/card/blb/102/nocturnal-hunger?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/4/742c0409-9abd-4559-b52e-932cc90c531a.jpg?1721426459",normal:"https://cards.scryfall.io/normal/front/7/4/742c0409-9abd-4559-b52e-932cc90c531a.jpg?1721426459",large:"https://cards.scryfall.io/large/front/7/4/742c0409-9abd-4559-b52e-932cc90c531a.jpg?1721426459",png:"https://cards.scryfall.io/png/front/7/4/742c0409-9abd-4559-b52e-932cc90c531a.png?1721426459",art_crop:"https://cards.scryfall.io/art_crop/front/7/4/742c0409-9abd-4559-b52e-932cc90c531a.jpg?1721426459",border_crop:"https://cards.scryfall.io/border_crop/front/7/4/742c0409-9abd-4559-b52e-932cc90c531a.jpg?1721426459"},mana_cost:"{2}{B}",cmc:3,type_line:"Instant",oracle_text:`Gift a Food (You may promise an opponent a gift as you cast this spell. If you do, they create a Food token before its other effects. It's an artifact with "{2}, {T}, Sacrifice this token: You gain 3 life.")
Destroy target creature. If the gift wasn't promised, you lose 2 life.`,colors:["B"],color_identity:["B"],keywords:["Gift","Food"],all_parts:[{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"},{object:"related_card",id:"742c0409-9abd-4559-b52e-932cc90c531a",component:"combo_piece",name:"Nocturnal Hunger",type_line:"Instant",uri:"https://api.scryfall.com/cards/742c0409-9abd-4559-b52e-932cc90c531a"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/742c0409-9abd-4559-b52e-932cc90c531a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aed7f64d1-69ba-40f5-9863-3edba10e23c7&unique=prints",collector_number:"102",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Sam Guay",artist_ids:["2409a097-87a3-486f-9d16-c69217e264c6"],illustration_id:"4498c7b3-4828-459c-b237-d3718cc82e19",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:12528,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-16"},prices:{usd:"0.03",usd_foil:"0.08",usd_etched:null,eur:"0.04",eur_foil:"0.06",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669016&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DNocturnal%2BHunger",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DNocturnal%2BHunger",edhrec:"https://edhrec.com/route/?cc=Nocturnal+Hunger"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559511%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Nocturnal-Hunger?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129449?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0d49b016-b02b-459f-85e9-c04f6bdcb94e",oracle_id:"177b7fe4-8565-4631-b4d9-8b2b4282f3ac",multiverse_ids:[669172],mtgo_id:129761,arena_id:91794,tcgplayer_id:558611,cardmarket_id:776463,name:"Oakhollow Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0d49b016-b02b-459f-85e9-c04f6bdcb94e",scryfall_uri:"https://scryfall.com/card/blb/258/oakhollow-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",normal:"https://cards.scryfall.io/normal/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",large:"https://cards.scryfall.io/large/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",png:"https://cards.scryfall.io/png/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.png?1721639587",art_crop:"https://cards.scryfall.io/art_crop/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",border_crop:"https://cards.scryfall.io/border_crop/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {G}. Spend this mana only to cast a creature spell.
{G}, {T}: Put a +1/+1 counter on each Frog, Rabbit, Raccoon, or Squirrel you control that entered the battlefield this turn.`,colors:[],color_identity:["G"],keywords:[],produced_mana:["C","G"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0d49b016-b02b-459f-85e9-c04f6bdcb94e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A177b7fe4-8565-4631-b4d9-8b2b4282f3ac&unique=prints",collector_number:"258",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Julian Kok Joon Wen",artist_ids:["7f1868e3-325f-4df9-8f27-a381fed4f0fc"],illustration_id:"999d8162-2505-4203-b279-29c7b6ac9d19",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3854,penny_rank:5265,prices:{usd:"0.24",usd_foil:"0.37",usd_etched:null,eur:"0.46",eur_foil:"0.61",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669172&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DOakhollow%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DOakhollow%2BVillage",edhrec:"https://edhrec.com/route/?cc=Oakhollow+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558611%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Oakhollow-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129761?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7d8238dd-858f-466c-96de-986bd66861d7",oracle_id:"791cbb7c-7935-4902-b050-9ea9d030e9fa",multiverse_ids:[669017],mtgo_id:129451,arena_id:91639,tcgplayer_id:558345,cardmarket_id:777584,name:"Osteomancer Adept",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7d8238dd-858f-466c-96de-986bd66861d7",scryfall_uri:"https://scryfall.com/card/blb/103/osteomancer-adept?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/d/7d8238dd-858f-466c-96de-986bd66861d7.jpg?1721426463",normal:"https://cards.scryfall.io/normal/front/7/d/7d8238dd-858f-466c-96de-986bd66861d7.jpg?1721426463",large:"https://cards.scryfall.io/large/front/7/d/7d8238dd-858f-466c-96de-986bd66861d7.jpg?1721426463",png:"https://cards.scryfall.io/png/front/7/d/7d8238dd-858f-466c-96de-986bd66861d7.png?1721426463",art_crop:"https://cards.scryfall.io/art_crop/front/7/d/7d8238dd-858f-466c-96de-986bd66861d7.jpg?1721426463",border_crop:"https://cards.scryfall.io/border_crop/front/7/d/7d8238dd-858f-466c-96de-986bd66861d7.jpg?1721426463"},mana_cost:"{1}{B}",cmc:2,type_line:"Creature — Squirrel Warlock",oracle_text:`Deathtouch
{T}: Until end of turn, you may cast creature spells from your graveyard by foraging in addition to paying their other costs. If you cast a spell this way, that creature enters with a finality counter on it. (To forage, exile three cards from your graveyard or sacrifice a Food. If a creature with a finality counter on it would die, exile it instead.)`,power:"2",toughness:"2",colors:["B"],color_identity:["B"],keywords:["Deathtouch"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7d8238dd-858f-466c-96de-986bd66861d7/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A791cbb7c-7935-4902-b050-9ea9d030e9fa&unique=prints",collector_number:"103",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Daniel Zrom",artist_ids:["826eea7d-7381-42e0-b21d-60ec2d79b588"],illustration_id:"62196651-3811-4933-a4ea-a3f132d399be",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6406,penny_rank:6439,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.27",usd_foil:"0.50",usd_etched:null,eur:"0.51",eur_foil:"0.75",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669017&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DOsteomancer%2BAdept",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DOsteomancer%2BAdept",edhrec:"https://edhrec.com/route/?cc=Osteomancer+Adept"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558345%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Osteomancer-Adept?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129451?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"3ff83ff7-e428-4ccc-8341-f223dab76bd1",oracle_id:"43a6de3e-152e-4af1-acec-53405742425c",multiverse_ids:[668977],mtgo_id:129371,arena_id:91599,tcgplayer_id:559143,cardmarket_id:778354,name:"Otterball Antics",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/3ff83ff7-e428-4ccc-8341-f223dab76bd1",scryfall_uri:"https://scryfall.com/card/blb/63/otterball-antics?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",normal:"https://cards.scryfall.io/normal/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",large:"https://cards.scryfall.io/large/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",png:"https://cards.scryfall.io/png/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.png?1721426185",art_crop:"https://cards.scryfall.io/art_crop/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",border_crop:"https://cards.scryfall.io/border_crop/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185"},mana_cost:"{1}{U}",cmc:2,type_line:"Sorcery",oracle_text:`Create a 1/1 blue and red Otter creature token with prowess. If this spell was cast from anywhere other than your hand, put a +1/+1 counter on that creature. (Whenever you cast a noncreature spell, a creature with prowess gets +1/+1 until end of turn.)
Flashback {3}{U} (You may cast this card from your graveyard for its flashback cost. Then exile it.)`,colors:["U"],color_identity:["U"],keywords:["Flashback"],all_parts:[{object:"related_card",id:"3ff83ff7-e428-4ccc-8341-f223dab76bd1",component:"combo_piece",name:"Otterball Antics",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/3ff83ff7-e428-4ccc-8341-f223dab76bd1"},{object:"related_card",id:"e6b2c465-c446-4dee-9101-763105dcf813",component:"token",name:"Otter",type_line:"Token Creature — Otter",uri:"https://api.scryfall.com/cards/e6b2c465-c446-4dee-9101-763105dcf813"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/3ff83ff7-e428-4ccc-8341-f223dab76bd1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A43a6de3e-152e-4af1-acec-53405742425c&unique=prints",collector_number:"63",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Rhonda Libbey",artist_ids:["9b3fac11-04d4-4896-8005-ad255df63704"],illustration_id:"feedc4f1-639d-4917-b51a-d11279de6c71",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9727,penny_rank:7973,preview:{source:"CulturaPop",source_uri:"https://cpop.it/articoli/bozzamagic-the-gathering-vi-sveliamo-in-esclusiva-3-nuove-carte-di-bloomburrow",previewed_at:"2024-07-12"},prices:{usd:"0.11",usd_foil:"0.12",usd_etched:null,eur:"0.16",eur_foil:"0.38",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668977&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DOtterball%2BAntics",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DOtterball%2BAntics",edhrec:"https://edhrec.com/route/?cc=Otterball+Antics"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559143%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Otterball-Antics?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129371?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"079e979f-b618-4625-989c-e0ea5b61ed8a",oracle_id:"c8c3a293-ae6d-4c52-be2d-2d4b6a8edb66",multiverse_ids:[669099],mtgo_id:129615,arena_id:91721,tcgplayer_id:559120,cardmarket_id:778341,name:"Overprotect",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/079e979f-b618-4625-989c-e0ea5b61ed8a",scryfall_uri:"https://scryfall.com/card/blb/185/overprotect?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/7/079e979f-b618-4625-989c-e0ea5b61ed8a.jpg?1721426880",normal:"https://cards.scryfall.io/normal/front/0/7/079e979f-b618-4625-989c-e0ea5b61ed8a.jpg?1721426880",large:"https://cards.scryfall.io/large/front/0/7/079e979f-b618-4625-989c-e0ea5b61ed8a.jpg?1721426880",png:"https://cards.scryfall.io/png/front/0/7/079e979f-b618-4625-989c-e0ea5b61ed8a.png?1721426880",art_crop:"https://cards.scryfall.io/art_crop/front/0/7/079e979f-b618-4625-989c-e0ea5b61ed8a.jpg?1721426880",border_crop:"https://cards.scryfall.io/border_crop/front/0/7/079e979f-b618-4625-989c-e0ea5b61ed8a.jpg?1721426880"},mana_cost:"{1}{G}",cmc:2,type_line:"Instant",oracle_text:"Target creature you control gets +3/+3 and gains trample, hexproof, and indestructible until end of turn.",colors:["G"],color_identity:["G"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/079e979f-b618-4625-989c-e0ea5b61ed8a/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac8c3a293-ae6d-4c52-be2d-2d4b6a8edb66&unique=prints",collector_number:"185",digital:!1,rarity:"uncommon",flavor_text:`"Blor's defenses are impervious!"
—Blor the Impervious`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Pavel Kolomeyets",artist_ids:["13435e52-d47a-4143-adfa-2ae0a6858292"],illustration_id:"890969f2-830b-4540-b1a4-298018d86bee",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2379,penny_rank:3834,preview:{source:"MissBunFee",source_uri:"https://x.com/MissBunFee/status/1811909413516558392",previewed_at:"2024-07-12"},prices:{usd:"1.29",usd_foil:"1.59",usd_etched:null,eur:"1.45",eur_foil:"1.63",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669099&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DOverprotect",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DOverprotect",edhrec:"https://edhrec.com/route/?cc=Overprotect"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559120%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Overprotect?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129615?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1086e826-94b8-4398-8a38-d8eacca56a43",oracle_id:"367bb252-41e1-4f98-9d22-442dd332cccf",multiverse_ids:[668938],mtgo_id:129293,arena_id:91560,tcgplayer_id:558346,cardmarket_id:777550,name:"Parting Gust",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1086e826-94b8-4398-8a38-d8eacca56a43",scryfall_uri:"https://scryfall.com/card/blb/24/parting-gust?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",normal:"https://cards.scryfall.io/normal/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",large:"https://cards.scryfall.io/large/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",png:"https://cards.scryfall.io/png/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.png?1721425901",art_crop:"https://cards.scryfall.io/art_crop/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",border_crop:"https://cards.scryfall.io/border_crop/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901"},mana_cost:"{W}{W}",cmc:2,type_line:"Instant",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Exile target nontoken creature. If the gift wasn't promised, return that card to the battlefield under its owner's control with a +1/+1 counter on it at the beginning of the next end step.`,colors:["W"],color_identity:["W"],keywords:["Gift"],all_parts:[{object:"related_card",id:"1086e826-94b8-4398-8a38-d8eacca56a43",component:"combo_piece",name:"Parting Gust",type_line:"Instant",uri:"https://api.scryfall.com/cards/1086e826-94b8-4398-8a38-d8eacca56a43"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1086e826-94b8-4398-8a38-d8eacca56a43/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A367bb252-41e1-4f98-9d22-442dd332cccf&unique=prints",collector_number:"24",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Nils Hamm",artist_ids:["c540d1fc-1500-457f-93cf-d6069ee66546"],illustration_id:"39a45dad-eb19-4807-bcc1-05fb6ab34f14",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2975,penny_rank:690,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.52",usd_foil:"0.77",usd_etched:null,eur:"0.67",eur_foil:"0.59",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668938&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DParting%2BGust",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DParting%2BGust",edhrec:"https://edhrec.com/route/?cc=Parting+Gust"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558346%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Parting-Gust?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129293?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"a8a982c8-bc08-44ba-b3ed-9e4b124615d6",oracle_id:"4fb00dbe-1f82-4ba6-b18c-97e816d10d3a",multiverse_ids:[669161],mtgo_id:129739,arena_id:91783,tcgplayer_id:559478,cardmarket_id:778436,name:"Patchwork Banner",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/a8a982c8-bc08-44ba-b3ed-9e4b124615d6",scryfall_uri:"https://scryfall.com/card/blb/247/patchwork-banner?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/8/a8a982c8-bc08-44ba-b3ed-9e4b124615d6.jpg?1721427285",normal:"https://cards.scryfall.io/normal/front/a/8/a8a982c8-bc08-44ba-b3ed-9e4b124615d6.jpg?1721427285",large:"https://cards.scryfall.io/large/front/a/8/a8a982c8-bc08-44ba-b3ed-9e4b124615d6.jpg?1721427285",png:"https://cards.scryfall.io/png/front/a/8/a8a982c8-bc08-44ba-b3ed-9e4b124615d6.png?1721427285",art_crop:"https://cards.scryfall.io/art_crop/front/a/8/a8a982c8-bc08-44ba-b3ed-9e4b124615d6.jpg?1721427285",border_crop:"https://cards.scryfall.io/border_crop/front/a/8/a8a982c8-bc08-44ba-b3ed-9e4b124615d6.jpg?1721427285"},mana_cost:"{3}",cmc:3,type_line:"Artifact",oracle_text:`As this artifact enters, choose a creature type.
Creatures you control of the chosen type get +1/+1.
{T}: Add one mana of any color.`,colors:[],color_identity:[],keywords:[],produced_mana:["B","G","R","U","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/a8a982c8-bc08-44ba-b3ed-9e4b124615d6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A4fb00dbe-1f82-4ba6-b18c-97e816d10d3a&unique=prints",collector_number:"247",digital:!1,rarity:"uncommon",flavor_text:"With thistle, quill, twig, and beak, the finest artisans of each animalfolk society stitched unique quilts, patched together as a symbol of harmony.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Sarah Finnigan",artist_ids:["e31f5891-08f7-4e5a-bac9-8b4570b8c1ab"],illustration_id:"2b93720c-97d1-4e28-b05a-4b7ca975585d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:392,penny_rank:7975,preview:{source:"IslandsInFront",source_uri:"https://twitter.com/IslandsInFront/status/1812910771623350447",previewed_at:"2024-07-15"},prices:{usd:"4.46",usd_foil:"5.30",usd_etched:null,eur:"3.10",eur_foil:"3.92",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669161&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPatchwork%2BBanner",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPatchwork%2BBanner",edhrec:"https://edhrec.com/route/?cc=Patchwork+Banner"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559478%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Patchwork-Banner?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129739?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b82c20ad-0f69-4822-ae76-770832cccdf7",oracle_id:"fa99cf82-ebf1-4526-ab9c-b24eb2970f2a",multiverse_ids:[669100],mtgo_id:129617,arena_id:91722,tcgplayer_id:559121,cardmarket_id:778326,name:"Pawpatch Formation",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b82c20ad-0f69-4822-ae76-770832cccdf7",scryfall_uri:"https://scryfall.com/card/blb/186/pawpatch-formation?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/8/b82c20ad-0f69-4822-ae76-770832cccdf7.jpg?1721426886",normal:"https://cards.scryfall.io/normal/front/b/8/b82c20ad-0f69-4822-ae76-770832cccdf7.jpg?1721426886",large:"https://cards.scryfall.io/large/front/b/8/b82c20ad-0f69-4822-ae76-770832cccdf7.jpg?1721426886",png:"https://cards.scryfall.io/png/front/b/8/b82c20ad-0f69-4822-ae76-770832cccdf7.png?1721426886",art_crop:"https://cards.scryfall.io/art_crop/front/b/8/b82c20ad-0f69-4822-ae76-770832cccdf7.jpg?1721426886",border_crop:"https://cards.scryfall.io/border_crop/front/b/8/b82c20ad-0f69-4822-ae76-770832cccdf7.jpg?1721426886"},mana_cost:"{1}{G}",cmc:2,type_line:"Instant",oracle_text:`Choose one —
• Destroy target creature with flying.
• Destroy target enchantment.
• Draw a card. Create a Food token. (It's an artifact with "{2}, {T}, Sacrifice this token: You gain 3 life.")`,colors:["G"],color_identity:["G"],keywords:["Food"],all_parts:[{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"},{object:"related_card",id:"b82c20ad-0f69-4822-ae76-770832cccdf7",component:"combo_piece",name:"Pawpatch Formation",type_line:"Instant",uri:"https://api.scryfall.com/cards/b82c20ad-0f69-4822-ae76-770832cccdf7"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b82c20ad-0f69-4822-ae76-770832cccdf7/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Afa99cf82-ebf1-4526-ab9c-b24eb2970f2a&unique=prints",collector_number:"186",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Julia Griffin",artist_ids:["35d4a4a6-ac7d-4c48-8060-97325f1a2a85"],illustration_id:"c4a49179-a96e-455d-9ba0-e4128338a488",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6096,penny_rank:4703,preview:{source:"thatgamingfish",source_uri:"https://www.instagram.com/thatgamingfish/p/C9UYzHyvTQk/?img_index=1",previewed_at:"2024-07-12"},prices:{usd:"0.56",usd_foil:"0.86",usd_etched:null,eur:"1.97",eur_foil:"1.84",tix:"0.11"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669100&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPawpatch%2BFormation",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPawpatch%2BFormation",edhrec:"https://edhrec.com/route/?cc=Pawpatch+Formation"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559121%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Pawpatch-Formation?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129617?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7d4d88ba-0ee4-4f66-995b-2e50614f50ee",oracle_id:"50ab0194-c7dc-4f11-abc0-1a82393cc42e",multiverse_ids:[669101],mtgo_id:129619,arena_id:91723,tcgplayer_id:559486,cardmarket_id:778495,name:"Pawpatch Recruit",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7d4d88ba-0ee4-4f66-995b-2e50614f50ee",scryfall_uri:"https://scryfall.com/card/blb/187/pawpatch-recruit?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/d/7d4d88ba-0ee4-4f66-995b-2e50614f50ee.jpg?1721426891",normal:"https://cards.scryfall.io/normal/front/7/d/7d4d88ba-0ee4-4f66-995b-2e50614f50ee.jpg?1721426891",large:"https://cards.scryfall.io/large/front/7/d/7d4d88ba-0ee4-4f66-995b-2e50614f50ee.jpg?1721426891",png:"https://cards.scryfall.io/png/front/7/d/7d4d88ba-0ee4-4f66-995b-2e50614f50ee.png?1721426891",art_crop:"https://cards.scryfall.io/art_crop/front/7/d/7d4d88ba-0ee4-4f66-995b-2e50614f50ee.jpg?1721426891",border_crop:"https://cards.scryfall.io/border_crop/front/7/d/7d4d88ba-0ee4-4f66-995b-2e50614f50ee.jpg?1721426891"},mana_cost:"{G}",cmc:1,type_line:"Creature — Rabbit Warrior",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
Trample
Whenever a creature you control becomes the target of a spell or ability an opponent controls, put a +1/+1 counter on target creature you control other than that creature.`,power:"2",toughness:"1",colors:["G"],color_identity:["G"],keywords:["Offspring","Trample"],all_parts:[{object:"related_card",id:"7cdd8679-93a7-4e58-a6f3-b48897697e89",component:"token",name:"Pawpatch Recruit",type_line:"Token Creature — Rabbit Warrior",uri:"https://api.scryfall.com/cards/7cdd8679-93a7-4e58-a6f3-b48897697e89"},{object:"related_card",id:"7fc5b558-4470-4bd7-9458-fbd275ded168",component:"combo_piece",name:"Pawpatch Recruit",type_line:"Creature — Rabbit Warrior",uri:"https://api.scryfall.com/cards/7fc5b558-4470-4bd7-9458-fbd275ded168"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7d4d88ba-0ee4-4f66-995b-2e50614f50ee/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A50ab0194-c7dc-4f11-abc0-1a82393cc42e&unique=prints",collector_number:"187",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Johan Grenier",artist_ids:["465e38b8-7eed-4d22-a6d2-d3603ee0c00b"],illustration_id:"4d6bd70b-73ad-44ae-947f-e017a0cec97a",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9470,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/news/making-magic/the-bloom-of-the-burrow-part-2",previewed_at:"2024-07-15"},prices:{usd:"0.65",usd_foil:"1.43",usd_etched:null,eur:"1.72",eur_foil:"2.40",tix:"0.06"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669101&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPawpatch%2BRecruit",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPawpatch%2BRecruit",edhrec:"https://edhrec.com/route/?cc=Pawpatch+Recruit"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559486%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Pawpatch-Recruit?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129619?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"13cb9575-1138-4f99-8e90-0eaf00bdf4a1",oracle_id:"91ddd2bd-2dec-4670-8edb-e89c009b2187",multiverse_ids:[668978],mtgo_id:129373,arena_id:91600,tcgplayer_id:558588,cardmarket_id:776455,name:"Pearl of Wisdom",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/13cb9575-1138-4f99-8e90-0eaf00bdf4a1",scryfall_uri:"https://scryfall.com/card/blb/64/pearl-of-wisdom?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/3/13cb9575-1138-4f99-8e90-0eaf00bdf4a1.jpg?1721426185",normal:"https://cards.scryfall.io/normal/front/1/3/13cb9575-1138-4f99-8e90-0eaf00bdf4a1.jpg?1721426185",large:"https://cards.scryfall.io/large/front/1/3/13cb9575-1138-4f99-8e90-0eaf00bdf4a1.jpg?1721426185",png:"https://cards.scryfall.io/png/front/1/3/13cb9575-1138-4f99-8e90-0eaf00bdf4a1.png?1721426185",art_crop:"https://cards.scryfall.io/art_crop/front/1/3/13cb9575-1138-4f99-8e90-0eaf00bdf4a1.jpg?1721426185",border_crop:"https://cards.scryfall.io/border_crop/front/1/3/13cb9575-1138-4f99-8e90-0eaf00bdf4a1.jpg?1721426185"},mana_cost:"{2}{U}",cmc:3,type_line:"Sorcery",oracle_text:`This spell costs {1} less to cast if you control an Otter.
Draw two cards.`,colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/13cb9575-1138-4f99-8e90-0eaf00bdf4a1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A91ddd2bd-2dec-4670-8edb-e89c009b2187&unique=prints",collector_number:"64",digital:!1,rarity:"common",flavor_text:"Otterfolk divers compete to bring up the biggest, purest pearls they can find. Storing elemental magic in them is a bonus.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Julie Dillon",artist_ids:["ce8605ad-6d5a-45a3-a7b6-84be4f5209cd"],illustration_id:"33c93b09-17b2-4153-b000-0ff48b30ef3f",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7907,penny_rank:6342,preview:{source:"Wizards of the Coast",source_uri:"https://twitter.com/wizards_magic/status/1806657630888431739/photo/1",previewed_at:"2024-06-28"},prices:{usd:"0.02",usd_foil:"0.07",usd_etched:null,eur:"0.05",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668978&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPearl%2Bof%2BWisdom",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPearl%2Bof%2BWisdom",edhrec:"https://edhrec.com/route/?cc=Pearl+of+Wisdom"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558588%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Pearl-of-Wisdom?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129373?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"5f72466c-505b-4371-9366-0fde525a37e6",oracle_id:"938c03fc-8adf-4c7a-8ae1-eca8401f7a83",multiverse_ids:[669102],mtgo_id:129621,arena_id:91724,tcgplayer_id:559071,cardmarket_id:778132,name:"Peerless Recycling",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/5f72466c-505b-4371-9366-0fde525a37e6",scryfall_uri:"https://scryfall.com/card/blb/188/peerless-recycling?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/f/5f72466c-505b-4371-9366-0fde525a37e6.jpg?1721426897",normal:"https://cards.scryfall.io/normal/front/5/f/5f72466c-505b-4371-9366-0fde525a37e6.jpg?1721426897",large:"https://cards.scryfall.io/large/front/5/f/5f72466c-505b-4371-9366-0fde525a37e6.jpg?1721426897",png:"https://cards.scryfall.io/png/front/5/f/5f72466c-505b-4371-9366-0fde525a37e6.png?1721426897",art_crop:"https://cards.scryfall.io/art_crop/front/5/f/5f72466c-505b-4371-9366-0fde525a37e6.jpg?1721426897",border_crop:"https://cards.scryfall.io/border_crop/front/5/f/5f72466c-505b-4371-9366-0fde525a37e6.jpg?1721426897"},mana_cost:"{1}{G}",cmc:2,type_line:"Instant",oracle_text:`Gift a card (You may promise an opponent a gift as you cast this spell. If you do, they draw a card before its other effects.)
Return target permanent card from your graveyard to your hand. If the gift was promised, instead return two target permanent cards from your graveyard to your hand.`,colors:["G"],color_identity:["G"],keywords:["Gift"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/5f72466c-505b-4371-9366-0fde525a37e6/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A938c03fc-8adf-4c7a-8ae1-eca8401f7a83&unique=prints",collector_number:"188",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jeff Miracola",artist_ids:["9b465bde-3656-4495-ace4-af4ce29999ed"],illustration_id:"5ada20dd-5725-4a2f-90da-a1b950b73a57",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3621,penny_rank:6929,preview:{source:"Vincent (@ins_ekt)",source_uri:"https://www.instagram.com/stories/highlights/17875888881053955/",previewed_at:"2024-07-11"},prices:{usd:"0.09",usd_foil:"0.17",usd_etched:null,eur:"0.09",eur_foil:"0.17",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669102&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPeerless%2BRecycling",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPeerless%2BRecycling",edhrec:"https://edhrec.com/route/?cc=Peerless+Recycling"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559071%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Peerless-Recycling?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129621?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8b900c71-713b-4b7e-b4be-ad9f4aa0c139",oracle_id:"77eb76cf-a361-44e0-aeee-e8ef4b695799",multiverse_ids:[669018],mtgo_id:129453,arena_id:91640,tcgplayer_id:559152,cardmarket_id:778324,name:"Persistent Marshstalker",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8b900c71-713b-4b7e-b4be-ad9f4aa0c139",scryfall_uri:"https://scryfall.com/card/blb/104/persistent-marshstalker?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",normal:"https://cards.scryfall.io/normal/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",large:"https://cards.scryfall.io/large/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",png:"https://cards.scryfall.io/png/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.png?1721426469",art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",border_crop:"https://cards.scryfall.io/border_crop/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469"},mana_cost:"{1}{B}",cmc:2,type_line:"Creature — Rat Berserker",oracle_text:`This creature gets +1/+0 for each other Rat you control.
Threshold — Whenever you attack with one or more Rats, if seven or more cards are in your graveyard, you may pay {2}{B}. If you do, return this card from your graveyard to the battlefield tapped and attacking.`,power:"3",toughness:"1",colors:["B"],color_identity:["B"],keywords:["Threshold"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8b900c71-713b-4b7e-b4be-ad9f4aa0c139/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A77eb76cf-a361-44e0-aeee-e8ef4b695799&unique=prints",collector_number:"104",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Greg Staples",artist_ids:["93d65564-bf00-447b-8406-e2031f03b6b1"],illustration_id:"a237732d-f932-4b8e-b709-78daee2f4254",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6617,penny_rank:2551,preview:{source:"Good Games",source_uri:"https://twitter.com/GoodGamesMorley/status/1811604835357073487",previewed_at:"2024-07-12"},prices:{usd:"0.19",usd_foil:"0.19",usd_etched:null,eur:"0.11",eur_foil:"0.20",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669018&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPersistent%2BMarshstalker",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPersistent%2BMarshstalker",edhrec:"https://edhrec.com/route/?cc=Persistent+Marshstalker"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559152%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Persistent-Marshstalker?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129453?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ae442cd6-c4df-4aad-9b1d-ccd936c5ec96",oracle_id:"0534e20d-8352-4d9f-a617-378070602673",multiverse_ids:[668939],mtgo_id:129295,arena_id:91561,tcgplayer_id:559131,cardmarket_id:778333,name:"Pileated Provisioner",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96",scryfall_uri:"https://scryfall.com/card/blb/25/pileated-provisioner?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/e/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96.jpg?1721425901",normal:"https://cards.scryfall.io/normal/front/a/e/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96.jpg?1721425901",large:"https://cards.scryfall.io/large/front/a/e/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96.jpg?1721425901",png:"https://cards.scryfall.io/png/front/a/e/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96.png?1721425901",art_crop:"https://cards.scryfall.io/art_crop/front/a/e/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96.jpg?1721425901",border_crop:"https://cards.scryfall.io/border_crop/front/a/e/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96.jpg?1721425901"},mana_cost:"{4}{W}",cmc:5,type_line:"Creature — Bird Scout",oracle_text:`Flying
When this creature enters, put a +1/+1 counter on target creature you control without flying.`,power:"3",toughness:"4",colors:["W"],color_identity:["W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ae442cd6-c4df-4aad-9b1d-ccd936c5ec96/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0534e20d-8352-4d9f-a617-378070602673&unique=prints",collector_number:"25",digital:!1,rarity:"common",flavor_text:"Aerial supporters train for years to make sure the weapons they drop land in the hands of mice and not on their heads.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Eelis Kyttanen",artist_ids:["699b24be-cde0-4da8-bc0f-7a3ecd60ab01"],illustration_id:"fa4346ae-d748-4138-984b-da9ce22646df",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:17889,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.02",usd_foil:"0.03",usd_etched:null,eur:"0.06",eur_foil:"0.05",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668939&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPileated%2BProvisioner",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPileated%2BProvisioner",edhrec:"https://edhrec.com/route/?cc=Pileated+Provisioner"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559131%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Pileated-Provisioner?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129295?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"449d4122-ee9d-477c-976a-809ba8cb1443",oracle_id:"bc71ebf6-2056-41f7-be35-b2e5c34afa99",multiverse_ids:[668666],mtgo_id:129769,arena_id:91831,tcgplayer_id:559539,name:"Plains",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/449d4122-ee9d-477c-976a-809ba8cb1443",scryfall_uri:"https://scryfall.com/card/blb/369/plains?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/4/449d4122-ee9d-477c-976a-809ba8cb1443.jpg?1721427984",normal:"https://cards.scryfall.io/normal/front/4/4/449d4122-ee9d-477c-976a-809ba8cb1443.jpg?1721427984",large:"https://cards.scryfall.io/large/front/4/4/449d4122-ee9d-477c-976a-809ba8cb1443.jpg?1721427984",png:"https://cards.scryfall.io/png/front/4/4/449d4122-ee9d-477c-976a-809ba8cb1443.png?1721427984",art_crop:"https://cards.scryfall.io/art_crop/front/4/4/449d4122-ee9d-477c-976a-809ba8cb1443.jpg?1721427984",border_crop:"https://cards.scryfall.io/border_crop/front/4/4/449d4122-ee9d-477c-976a-809ba8cb1443.jpg?1721427984"},mana_cost:"",cmc:0,type_line:"Basic Land — Plains",oracle_text:"({T}: Add {W}.)",colors:[],color_identity:["W"],keywords:[],produced_mana:["W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"legal",predh:"legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!0,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/449d4122-ee9d-477c-976a-809ba8cb1443/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Abc71ebf6-2056-41f7-be35-b2e5c34afa99&unique=prints",collector_number:"369",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Piotr Dura",artist_ids:["aff176e8-1d15-432e-ad1d-207a474decba"],illustration_id:"65d672b3-a62e-4609-91ce-f0be7c9f4169",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!1,story_spotlight:!1,prices:{usd:"0.09",usd_foil:"0.16",usd_etched:null,eur:null,eur_foil:null,tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668666&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPlains",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPlains",edhrec:"https://edhrec.com/route/?cc=Plains"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559539%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=Plains&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129769?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"07956edf-34c1-4218-9784-ddbca13e380c",oracle_id:"2094fb68-3859-401f-97f2-c8bae64a4822",multiverse_ids:[669059],mtgo_id:129535,arena_id:91681,tcgplayer_id:559658,cardmarket_id:778534,name:"Playful Shove",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/07956edf-34c1-4218-9784-ddbca13e380c",scryfall_uri:"https://scryfall.com/card/blb/145/playful-shove?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/7/07956edf-34c1-4218-9784-ddbca13e380c.jpg?1721426672",normal:"https://cards.scryfall.io/normal/front/0/7/07956edf-34c1-4218-9784-ddbca13e380c.jpg?1721426672",large:"https://cards.scryfall.io/large/front/0/7/07956edf-34c1-4218-9784-ddbca13e380c.jpg?1721426672",png:"https://cards.scryfall.io/png/front/0/7/07956edf-34c1-4218-9784-ddbca13e380c.png?1721426672",art_crop:"https://cards.scryfall.io/art_crop/front/0/7/07956edf-34c1-4218-9784-ddbca13e380c.jpg?1721426672",border_crop:"https://cards.scryfall.io/border_crop/front/0/7/07956edf-34c1-4218-9784-ddbca13e380c.jpg?1721426672"},mana_cost:"{1}{R}",cmc:2,type_line:"Sorcery",oracle_text:`Playful Shove deals 1 damage to any target.
Draw a card.`,colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/07956edf-34c1-4218-9784-ddbca13e380c/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A2094fb68-3859-401f-97f2-c8bae64a4822&unique=prints",collector_number:"145",digital:!1,rarity:"uncommon",flavor_text:"The boisterous pat on the back was painful, but not nearly as painful as the joke that inspired it.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Zoltan Boros",artist_ids:["1885e6cb-c827-4896-994e-3d0a027d602f"],illustration_id:"aa5db78b-67ed-47f0-b6b2-bac3ea830147",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8315,preview:{source:"HobbyConsolas",source_uri:"https://www.hobbyconsolas.com/noticias/presentamos-exclusiva-mundial-dos-nuevas-cartas-magic-gathering-bloomburrow-1395782",previewed_at:"2024-07-16"},prices:{usd:"0.10",usd_foil:"0.11",usd_etched:null,eur:"0.14",eur_foil:"0.33",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669059&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPlayful%2BShove",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPlayful%2BShove",edhrec:"https://edhrec.com/route/?cc=Playful+Shove"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559658%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Playful-Shove?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129535?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"f71320ed-2f30-49ce-bcb0-19aebba3f0e8",oracle_id:"04669a6f-6299-465b-a26e-6cae37cdc081",multiverse_ids:[668979],mtgo_id:129375,arena_id:91601,tcgplayer_id:559144,cardmarket_id:778335,name:"Plumecreed Escort",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/f71320ed-2f30-49ce-bcb0-19aebba3f0e8",scryfall_uri:"https://scryfall.com/card/blb/65/plumecreed-escort?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/7/f71320ed-2f30-49ce-bcb0-19aebba3f0e8.jpg?1721426204",normal:"https://cards.scryfall.io/normal/front/f/7/f71320ed-2f30-49ce-bcb0-19aebba3f0e8.jpg?1721426204",large:"https://cards.scryfall.io/large/front/f/7/f71320ed-2f30-49ce-bcb0-19aebba3f0e8.jpg?1721426204",png:"https://cards.scryfall.io/png/front/f/7/f71320ed-2f30-49ce-bcb0-19aebba3f0e8.png?1721426204",art_crop:"https://cards.scryfall.io/art_crop/front/f/7/f71320ed-2f30-49ce-bcb0-19aebba3f0e8.jpg?1721426204",border_crop:"https://cards.scryfall.io/border_crop/front/f/7/f71320ed-2f30-49ce-bcb0-19aebba3f0e8.jpg?1721426204"},mana_cost:"{1}{U}",cmc:2,type_line:"Creature — Bird Scout",oracle_text:`Flash
Flying
When this creature enters, target creature you control gains hexproof until end of turn.`,power:"2",toughness:"1",colors:["U"],color_identity:["U"],keywords:["Flying","Flash"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/f71320ed-2f30-49ce-bcb0-19aebba3f0e8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A04669a6f-6299-465b-a26e-6cae37cdc081&unique=prints",collector_number:"65",digital:!1,rarity:"uncommon",flavor_text:'"I defend Valley and its beauty. What better weapon to wield than beauty itself?"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Manuel Castañón",artist_ids:["35f11eeb-36ff-4059-bb70-d1274f5bd858"],illustration_id:"95b9a517-20ac-41df-9094-e8f75b89048d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6790,penny_rank:4929,preview:{source:"MTGRocks",source_uri:"https://mtgrocks.com/two-exclusive-bloomburrow-previews-showcase-potential-uncommon-bomb/",previewed_at:"2024-07-12"},prices:{usd:"0.09",usd_foil:"0.13",usd_etched:null,eur:"0.15",eur_foil:"0.33",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668979&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPlumecreed%2BEscort",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPlumecreed%2BEscort",edhrec:"https://edhrec.com/route/?cc=Plumecreed+Escort"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559144%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Plumecreed-Escort?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129375?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b1aa988f-547e-449a-9f1a-296c01d68d96",oracle_id:"0eb8983e-4e44-4bfe-81dd-ddb41007a166",multiverse_ids:[669142],mtgo_id:129701,arena_id:91764,tcgplayer_id:558347,cardmarket_id:777697,name:"Plumecreed Mentor",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b1aa988f-547e-449a-9f1a-296c01d68d96",scryfall_uri:"https://scryfall.com/card/blb/228/plumecreed-mentor?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/1/b1aa988f-547e-449a-9f1a-296c01d68d96.jpg?1721427166",normal:"https://cards.scryfall.io/normal/front/b/1/b1aa988f-547e-449a-9f1a-296c01d68d96.jpg?1721427166",large:"https://cards.scryfall.io/large/front/b/1/b1aa988f-547e-449a-9f1a-296c01d68d96.jpg?1721427166",png:"https://cards.scryfall.io/png/front/b/1/b1aa988f-547e-449a-9f1a-296c01d68d96.png?1721427166",art_crop:"https://cards.scryfall.io/art_crop/front/b/1/b1aa988f-547e-449a-9f1a-296c01d68d96.jpg?1721427166",border_crop:"https://cards.scryfall.io/border_crop/front/b/1/b1aa988f-547e-449a-9f1a-296c01d68d96.jpg?1721427166"},mana_cost:"{1}{W}{U}",cmc:3,type_line:"Creature — Bird Scout",oracle_text:`Flying
Whenever this creature or another creature you control with flying enters, put a +1/+1 counter on target creature you control without flying.`,power:"2",toughness:"3",colors:["U","W"],color_identity:["U","W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b1aa988f-547e-449a-9f1a-296c01d68d96/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0eb8983e-4e44-4bfe-81dd-ddb41007a166&unique=prints",collector_number:"228",digital:!1,rarity:"uncommon",flavor_text:'"Any fledgling can flap their wings. But a true windscout must soar!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Henry Peters",artist_ids:["2ffd9e06-94af-44f5-bec6-06f781941a6c"],illustration_id:"64e9a921-3277-4b3f-9f64-d01b3d5f7b33",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:17267,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.06",usd_foil:"0.05",usd_etched:null,eur:"0.11",eur_foil:"0.27",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669142&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPlumecreed%2BMentor",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPlumecreed%2BMentor",edhrec:"https://edhrec.com/route/?cc=Plumecreed+Mentor"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558347%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Plumecreed-Mentor?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129701?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"6bc4963c-d90b-4588-bdb7-85956e42a623",oracle_id:"efd2a4ca-1bd0-4762-a997-f099326b1746",multiverse_ids:[669103],mtgo_id:129623,arena_id:91725,tcgplayer_id:559069,cardmarket_id:778103,name:"Polliwallop",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/6bc4963c-d90b-4588-bdb7-85956e42a623",scryfall_uri:"https://scryfall.com/card/blb/189/polliwallop?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",normal:"https://cards.scryfall.io/normal/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",large:"https://cards.scryfall.io/large/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",png:"https://cards.scryfall.io/png/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.png?1721426903",art_crop:"https://cards.scryfall.io/art_crop/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",border_crop:"https://cards.scryfall.io/border_crop/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903"},mana_cost:"{3}{G}",cmc:4,type_line:"Instant",oracle_text:`Affinity for Frogs (This spell costs {1} less to cast for each Frog you control.)
Target creature you control deals damage equal to twice its power to target creature you don't control.`,colors:["G"],color_identity:["G"],keywords:["Affinity"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/6bc4963c-d90b-4588-bdb7-85956e42a623/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aefd2a4ca-1bd0-4762-a997-f099326b1746&unique=prints",collector_number:"189",digital:!1,rarity:"common",flavor_text:`"We'll see who croaks first!"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Martin Wittfooth",artist_ids:["9f549ccf-d237-47c5-ab39-1b2bbbb164fc"],illustration_id:"37900963-bb1b-4bce-ac34-40b7414e3771",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9093,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.07",usd_foil:"0.05",usd_etched:null,eur:"0.08",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669103&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPolliwallop",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPolliwallop",edhrec:"https://edhrec.com/route/?cc=Polliwallop"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559069%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Polliwallop?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129623?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"fb959e74-61ea-453d-bb9f-ad0183c0e1b1",oracle_id:"6eabebdf-c1a3-4789-a67f-859f0957c5df",multiverse_ids:[669143],mtgo_id:129703,arena_id:91765,tcgplayer_id:558431,cardmarket_id:777698,name:"Pond Prophet",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/fb959e74-61ea-453d-bb9f-ad0183c0e1b1",scryfall_uri:"https://scryfall.com/card/blb/229/pond-prophet?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/b/fb959e74-61ea-453d-bb9f-ad0183c0e1b1.jpg?1721427169",normal:"https://cards.scryfall.io/normal/front/f/b/fb959e74-61ea-453d-bb9f-ad0183c0e1b1.jpg?1721427169",large:"https://cards.scryfall.io/large/front/f/b/fb959e74-61ea-453d-bb9f-ad0183c0e1b1.jpg?1721427169",png:"https://cards.scryfall.io/png/front/f/b/fb959e74-61ea-453d-bb9f-ad0183c0e1b1.png?1721427169",art_crop:"https://cards.scryfall.io/art_crop/front/f/b/fb959e74-61ea-453d-bb9f-ad0183c0e1b1.jpg?1721427169",border_crop:"https://cards.scryfall.io/border_crop/front/f/b/fb959e74-61ea-453d-bb9f-ad0183c0e1b1.jpg?1721427169"},mana_cost:"{G/U}{G/U}",cmc:2,type_line:"Creature — Frog Advisor",oracle_text:"When this creature enters, draw a card.",power:"1",toughness:"1",colors:["G","U"],color_identity:["G","U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/fb959e74-61ea-453d-bb9f-ad0183c0e1b1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A6eabebdf-c1a3-4789-a67f-859f0957c5df&unique=prints",collector_number:"229",digital:!1,rarity:"common",flavor_text:`"The rainfall brings us news of the world around us. I've learned a lot, but most of all I've learned that it's very exciting out there!"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Simon Dominic",artist_ids:["b0e80135-db5a-4b88-a0bc-815a0e94faa1"],illustration_id:"68fc49ce-2171-4656-82a3-6e22a10a6752",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7089,penny_rank:4769,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.07",usd_foil:"0.18",usd_etched:null,eur:"0.06",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669143&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPond%2BProphet",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPond%2BProphet",edhrec:"https://edhrec.com/route/?cc=Pond+Prophet"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558431%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Pond-Prophet?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129703?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8599e2dd-9164-4da3-814f-adccef3b9497",oracle_id:"0d49187a-1c37-4c3a-afc2-fac2bbc6b29a",multiverse_ids:[668980],mtgo_id:129377,arena_id:91602,tcgplayer_id:559645,cardmarket_id:778518,name:"Portent of Calamity",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8599e2dd-9164-4da3-814f-adccef3b9497",scryfall_uri:"https://scryfall.com/card/blb/66/portent-of-calamity?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/5/8599e2dd-9164-4da3-814f-adccef3b9497.jpg?1721426215",normal:"https://cards.scryfall.io/normal/front/8/5/8599e2dd-9164-4da3-814f-adccef3b9497.jpg?1721426215",large:"https://cards.scryfall.io/large/front/8/5/8599e2dd-9164-4da3-814f-adccef3b9497.jpg?1721426215",png:"https://cards.scryfall.io/png/front/8/5/8599e2dd-9164-4da3-814f-adccef3b9497.png?1721426215",art_crop:"https://cards.scryfall.io/art_crop/front/8/5/8599e2dd-9164-4da3-814f-adccef3b9497.jpg?1721426215",border_crop:"https://cards.scryfall.io/border_crop/front/8/5/8599e2dd-9164-4da3-814f-adccef3b9497.jpg?1721426215"},mana_cost:"{X}{U}",cmc:1,type_line:"Sorcery",oracle_text:"Reveal the top X cards of your library. For each card type, you may exile a card of that type from among them. Put the rest into your graveyard. You may cast a spell from among the exiled cards without paying its mana cost if you exiled four or more cards this way. Then put the rest of the exiled cards into your hand.",colors:["U"],color_identity:["U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8599e2dd-9164-4da3-814f-adccef3b9497/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0d49187a-1c37-4c3a-afc2-fac2bbc6b29a&unique=prints",collector_number:"66",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Sam Guay",artist_ids:["2409a097-87a3-486f-9d16-c69217e264c6"],illustration_id:"687deafc-cc14-4d3f-8902-4c8ed985c1bb",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!0,edhrec_rank:10509,penny_rank:6345,preview:{source:"Laughing Dragon",source_uri:"https://twitter.com/LaughingMtg/status/1813258547435630700",previewed_at:"2024-07-16"},prices:{usd:"0.16",usd_foil:"0.23",usd_etched:null,eur:"0.25",eur_foil:"0.39",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668980&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPortent%2Bof%2BCalamity",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPortent%2Bof%2BCalamity",edhrec:"https://edhrec.com/route/?cc=Portent+of+Calamity"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559645%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Portent-of-Calamity?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129377?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}}],code:`let cards = from.m.cards;

let filterRegex = new RegExp(from.m.filter.join(' |'), '');

return cards.filter(card => {
    return filterRegex.test(card.oracle_text);
});`,filter:["Time Lord","Advisor","Aetherborn","Alien","Ally","Angel","Antelope","Ape","Archer","Archon","Armadillo","Army","Artificer","Assassin","Assembly-Worker","Astartes","Atog","Aurochs","Avatar","Azra","Badger","Balloon","Barbarian","Bard","Basilisk","Bat","Bear","Beast","Beaver","Beeble","Beholder","Berserker","Bird","Blinkmoth","Boar","Bringer","Brushwagg","Camarid","Camel","Capybara","Caribou","Carrier","Cat","Centaur","Child","Chimera","Citizen","Cleric","Clown","Cockatrice","Construct","Coward","Coyote","Crab","Crocodile","C’tan","Custodes","Cyberman","Cyclops","Dalek","Dauthi","Demigod","Demon","Deserter","Detective","Devil","Dinosaur","Djinn","Doctor","Dog","Dragon","Drake","Dreadnought","Drone","Druid","Dryad","Dwarf","Efreet","Egg","Elder","Eldrazi","Elemental","Elephant","Elf","Elk","Employee","Eye","Faerie","Ferret","Fish","Flagbearer","Fox","Fractal","Frog","Fungus","Gamer","Gargoyle","Germ","Giant","Gith","Glimmer","Gnoll","Gnome","Goat","Goblin","God","Golem","Gorgon","Graveborn","Gremlin","Griffin","Guest","Hag","Halfling","Hamster","Harpy","Hellion","Hippo","Hippogriff","Homarid","Homunculus","Horror","Horse","Human","Hydra","Hyena","Illusion","Imp","Incarnation","Inkling","Inquisitor","Insect","Jackal","Jellyfish","Juggernaut","Kavu","Kirin","Kithkin","Knight","Kobold","Kor","Kraken","Llama","Lamia","Lammasu","Leech","Leviathan","Lhurgoyf","Licid","Lizard","Manticore","Masticore","Mercenary","Merfolk","Metathran","Minion","Minotaur","Mite","Mole","Monger","Mongoose","Monk","Monkey","Moonfolk","Mount","Mouse","Mutant","Myr","Mystic","Nautilus","Necron","Nephilim","Nightmare","Nightstalker","Ninja","Noble","Noggle","Nomad","Nymph","Octopus","Ogre","Ooze","Orb","Orc","Orgg","Otter","Ouphe","Ox","Oyster","Pangolin","Peasant","Pegasus","Pentavite","Performer","Pest","Phelddagrif","Phoenix","Phyrexian","Pilot","Pincher","Pirate","Plant","Porcupine","Possum","Praetor","Primarch","Prism","Processor","Rabbit","Raccoon","Ranger","Rat","Rebel","Reflection","Rhino","Rigger","Robot","Rogue","Sable","Salamander","Samurai","Sand","Saproling","Satyr","Scarecrow","Scientist","Scion","Scorpion","Scout","Sculpture","Seal","Serf","Serpent","Servo","Shade","Shaman","Shapeshifter","Shark","Sheep","Siren","Skeleton","Skunk","Slith","Sliver","Sloth","Slug","Snail","Snake","Soldier","Soltari","Spawn","Specter","Spellshaper","Sphinx","Spider","Spike","Spirit","Splinter","Sponge","Squid","Squirrel","Starfish","Surrakar","Survivor","Synth","Tentacle","Tetravite","Thalakos","Thopter","Thrull","Tiefling","Toy","Treefolk","Trilobite","Triskelavite","Troll","Turtle","Tyranid","Unicorn","Vampire","Varmint","Vedalken","Volver","Wall","Walrus","Warlock","Warrior","Weasel","Weird","Werewolf","Whale","Wizard","Wolf","Wolverine","Wombat","Worm","Wraith","Wurm","Yeti","Zombie","Zubera"]},id:"shape:W76wd0dk9cVaJkIqxOT7Q",type:"geo",props:{w:430,h:80,geo:"rectangle",color:"blue",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"Filter cards by X",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aH",typeName:"shape"},"shape:WRJ9L6CRzJ9aAc7mmDwcN":{x:-2950,y:610,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:WRJ9L6CRzJ9aAc7mmDwcN",type:"geo",props:{w:1658.6376698209565,h:550,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"draw",text:`let cards = from.m.cards;

let filterRegex = new RegExp(from.m.filter.join(' |'), '');

return cards.filter(card => {
    return filterRegex.test(card.oracle_text);
});`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"a9",typeName:"shape"},"shape:XYg91jvuY8Ml2xX1QVNE0":{x:49.54073765134035,y:116.42521676889089,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:XYg91jvuY8Ml2xX1QVNE0",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aV",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:-241.60967952003648,y:-276.43452382386585},end:{x:-109.16098719451927,y:279.06547862506113},arrowheadStart:"none",arrowheadEnd:"arrow",text:'click { m:{filter: await new Function("from","to",from.m.code)(from,to)}}',labelPosition:.5380722292493028,font:"draw"},typeName:"shape"},"shape:Zijuv5X5jVkqaB8a34tp1":{x:-5493.315997404028,y:-463.8248685821957,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Zijuv5X5jVkqaB8a34tp1",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aX",props:{dash:"draw",size:"m",fill:"solid",color:"yellow",labelColor:"black",bend:0,start:{x:1328.5010990900691,y:-49.46315687292864},end:{x:1680.3159751727862,y:93.46890380227887},arrowheadStart:"none",arrowheadEnd:"arrow",text:"{text: from.m.cards.map(card => card.name).join('\\n')}",labelPosition:.5,font:"draw"},typeName:"shape"},"shape:bNubwlq-qXccVjLyoidp0":{x:610,y:-80,rotation:0,isLocked:!1,opacity:1,meta:{code:`const params = from.text.split('\\n')[2];
const urlSearchParams = params.replaceAll(":","%3A").replaceAll(' ','+');
const url = "https://api.scryfall.com/cards/search?q=" + urlSearchParams;

return fetch(url)
.then((response) => {
return response.json();
})
.then((json) => {
return json.data;
});`},id:"shape:bNubwlq-qXccVjLyoidp0",type:"geo",props:{w:370,h:150,geo:"rectangle",color:"blue",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:`Search Scryfall:

set:blb`,align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"a1",typeName:"shape"},"shape:eDAgR2rJnC2oEgolsGsvI":{x:32.036716534188145,y:506.1322118634118,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:eDAgR2rJnC2oEgolsGsvI",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aZ",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:-56.15221106648869,y:-15.111493879473983},end:{x:-47.03671653418807,y:266.0190005637624},arrowheadStart:"none",arrowheadEnd:"arrow",text:'{ m:{ cards: await new Function("from","to",from.m.code)(from,to)}}',labelPosition:.3991669689559675,font:"draw"},typeName:"shape"},"shape:h05HZKPjaEsfYqteVi99Q":{x:950,y:370,rotation:0,isLocked:!1,opacity:1,meta:{update:'return "test";',code:"return {text: to.x};"},id:"shape:h05HZKPjaEsfYqteVi99Q",type:"geo",props:{w:925.3023528932806,h:569.4681623883255,geo:"rectangle",color:"light-green",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"950",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ah",typeName:"shape"},"shape:jmDix1D4E6qeIBp5IH9CH":{x:2610,y:210,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:jmDix1D4E6qeIBp5IH9CH",type:"geo",props:{w:1658.6376698209565,h:550,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"draw",text:`let cards = from.m.cards;

let filterRegex = new RegExp(from.m.filter.join(' |'), '');

return cards.filter(card => {
    return filterRegex.test(card.oracle_text);
});`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ag",typeName:"shape"},"shape:lwW1TtNDtYhtRqErmci03":{x:-2520,y:1790,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lwW1TtNDtYhtRqErmci03",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"a6",props:{dash:"draw",size:"m",fill:"pattern",color:"black",labelColor:"black",bend:6.576602783674604,start:{x:440.7083280023519,y:-1494.8960883955692},end:{x:399.3188349104785,y:-1629.2514374349573},arrowheadStart:"none",arrowheadEnd:"arrow",text:"click {m: {code:from.text}}",labelPosition:.31636135696794454,font:"draw"},typeName:"shape"},"shape:lz8maMu1VCx4PuivF3xbk":{x:-1520,y:600,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lz8maMu1VCx4PuivF3xbk",type:"text",props:{color:"black",size:"xl",w:1662.234375,text:`Ideas:

button to update server state?
new name/favicon
"prefab"s? meta tag for 'prefab' id, click to set own state to prefab state
'api' scope(?) for easy async calls
'setup' scope for first run`,font:"draw",textAlign:"start",autoSize:!0,scale:1},parentId:"page:page",index:"aD",typeName:"shape"},"shape:mcHdVaeB8EW-7fVFAp-lb":{x:2670,y:1040,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:mcHdVaeB8EW-7fVFAp-lb",type:"geo",props:{w:1e3,h:1131.015625,geo:"rectangle",color:"yellow",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:`{
  "id": "shape:h05HZKPjaEsfYqteVi99Q",
  "type": "geo",
  "x": 950,
  "y": 370,
  "rotation": 0,
  "w": 925.3023528932806,
  "h": 569.4681623883255,
  "geo": "rectangle",
  "color": "light-green",
  "labelColor": "black",
  "fill": "solid",
  "dash": "draw",
  "size": "m",
  "font": "draw",
  "text": "950",
  "align": "middle",
  "verticalAlign": "middle",
  "growY": 0,
  "url": "",
  "m": {
    "update": "return \\"test\\";",
    "code": "return {text: to.x};"
  }
}`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aF",typeName:"shape"},"shape:myPVvFX_H6W5UneNKjje0":{x:-2950,y:-540,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:myPVvFX_H6W5UneNKjje0",type:"geo",props:{w:1658.6376698209565,h:536.953125,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"draw",size:"m",font:"mono",text:`let cards = from.m.cards;

let filterRegex = new RegExp(from.m.filter.join(' |'), '');

return cards.filter(card => {
    return filterRegex.test(card.oracle_text);
});`,align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"a5",typeName:"shape"},"shape:oLTZ-sF4S5JFbs--dreCI":{x:-750,y:20,rotation:0,isLocked:!1,opacity:1,meta:{code:`const url = "https://api.academyruins.com/cr/205.3m";

function GetCreatureTypes(listString){
  let allTypes = listString.split(',').map(type => type.trim());
  if(allTypes.length > 1){
  let lastType = allTypes.at(-1).substring(4);
  allTypes = allTypes.with(-1,lastType);
  }
  return allTypes;
}


return fetch(url)
.then((response) => {
return response.json();
})
.then((json) => {
var ruleText = json.ruleText;
var twoWordList = ruleText.split(':')[1].split('.')[0];
var typeList = ruleText.split(':')[2].split('.')[0];
let allCreatureTypes = [];
allCreatureTypes = allCreatureTypes.concat(GetCreatureTypes(twoWordList));
allCreatureTypes = allCreatureTypes.concat(GetCreatureTypes(typeList));
return allCreatureTypes;
});`},id:"shape:oLTZ-sF4S5JFbs--dreCI",type:"geo",props:{w:419.99999999999994,h:90,geo:"rectangle",color:"blue",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"All Creature Types (cr 205.3m)",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aU",typeName:"shape"},"shape:uT5Exwuh_RBQvFbSLLZCD":{x:-399.8363787025892,y:103.75753252479223,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:uT5Exwuh_RBQvFbSLLZCD",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aH0V",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:-56.85322590660394,y:239.0791632350289},end:{x:494.0271026110122,y:285.83883225201356},arrowheadStart:"none",arrowheadEnd:"arrow",text:'click { m:{ cards: await new Function("from","to",from.m.code)(from,to)}}',labelPosition:.4932458625665682,font:"draw"},typeName:"shape"},"shape:zl1iYinaSTusxcTrnVy6h":{x:-170,y:840,rotation:0,isLocked:!1,opacity:1,meta:{cards:[{object:"card",id:"436d6a84-4cea-4ca7-94aa-9d08280652af",oracle_id:"63d50d5e-56de-44c4-b906-b2a21a56e3f3",multiverse_ids:[669118],mtgo_id:129653,arena_id:91740,tcgplayer_id:558439,cardmarket_id:777656,name:"Alania, Divergent Storm",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/436d6a84-4cea-4ca7-94aa-9d08280652af",scryfall_uri:"https://scryfall.com/card/blb/204/alania-divergent-storm?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",normal:"https://cards.scryfall.io/normal/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",large:"https://cards.scryfall.io/large/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",png:"https://cards.scryfall.io/png/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.png?1721426997",art_crop:"https://cards.scryfall.io/art_crop/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997",border_crop:"https://cards.scryfall.io/border_crop/front/4/3/436d6a84-4cea-4ca7-94aa-9d08280652af.jpg?1721426997"},mana_cost:"{3}{U}{R}",cmc:5,type_line:"Legendary Creature — Otter Wizard",oracle_text:"Whenever you cast a spell, if it's the first instant spell, the first sorcery spell, or the first Otter spell other than Alania you've cast this turn, you may have target opponent draw a card. If you do, copy that spell. You may choose new targets for the copy.",power:"3",toughness:"5",colors:["R","U"],color_identity:["R","U"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/436d6a84-4cea-4ca7-94aa-9d08280652af/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A63d50d5e-56de-44c4-b906-b2a21a56e3f3&unique=prints",collector_number:"204",digital:!1,rarity:"rare",flavor_text:'"Why would I chase the storm? Does a cloud chase the rain? Does the sun chase the light?"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Joshua Raphael",artist_ids:["553b2a73-780f-414b-b2d7-3b7888821082"],illustration_id:"2746db34-3fd2-4c86-989c-dd1512da6638",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5666,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.07",usd_foil:"0.19",usd_etched:null,eur:"0.16",eur_foil:"0.32",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669118&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DAlania%252C%2BDivergent%2BStorm",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DAlania%252C%2BDivergent%2BStorm",edhrec:"https://edhrec.com/route/?cc=Alania%2C+Divergent+Storm"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558439%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Alania-Divergent-Storm?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129653?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"fc310a26-b6a0-4e42-98ab-bdfd7b06cb63",oracle_id:"020de6d7-f5a2-4036-ad25-451e5977b4d4",multiverse_ids:[668916],mtgo_id:129249,arena_id:91538,tcgplayer_id:558421,cardmarket_id:777543,name:"Beza, the Bounding Spring",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63",scryfall_uri:"https://scryfall.com/card/blb/2/beza-the-bounding-spring?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",normal:"https://cards.scryfall.io/normal/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",large:"https://cards.scryfall.io/large/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",png:"https://cards.scryfall.io/png/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.png?1721425768",art_crop:"https://cards.scryfall.io/art_crop/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768",border_crop:"https://cards.scryfall.io/border_crop/front/f/c/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63.jpg?1721425768"},mana_cost:"{2}{W}{W}",cmc:4,type_line:"Legendary Creature — Elemental Elk",oracle_text:"When Beza enters, create a Treasure token if an opponent controls more lands than you. You gain 4 life if an opponent has more life than you. Create two 1/1 blue Fish creature tokens if an opponent controls more creatures than you. Draw a card if an opponent has more cards in hand than you.",power:"4",toughness:"5",colors:["W"],color_identity:["W"],keywords:["Treasure"],all_parts:[{object:"related_card",id:"0fc98b72-d268-4ce5-93b4-57c812a24eff",component:"combo_piece",name:"Beza, the Bounding Spring",type_line:"Legendary Creature — Elemental Elk",uri:"https://api.scryfall.com/cards/0fc98b72-d268-4ce5-93b4-57c812a24eff"},{object:"related_card",id:"ff0357fb-d90c-49c7-b16a-8b52ac686c3b",component:"token",name:"Treasure",type_line:"Token Artifact — Treasure",uri:"https://api.scryfall.com/cards/ff0357fb-d90c-49c7-b16a-8b52ac686c3b"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/fc310a26-b6a0-4e42-98ab-bdfd7b06cb63/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A020de6d7-f5a2-4036-ad25-451e5977b4d4&unique=prints",collector_number:"2",digital:!1,rarity:"mythic",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Martin Wittfooth",artist_ids:["9f549ccf-d237-47c5-ab39-1b2bbbb164fc"],illustration_id:"ef24c61f-ae89-4267-a90c-1771b13edea9",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5831,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"9.93",usd_foil:"11.04",usd_etched:null,eur:"12.62",eur_foil:"13.69",tix:"7.99"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668916&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBeza%252C%2Bthe%2BBounding%2BSpring",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBeza%252C%2Bthe%2BBounding%2BSpring",edhrec:"https://edhrec.com/route/?cc=Beza%2C+the+Bounding+Spring"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558421%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Beza-the-Bounding-Spring?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129249?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"15fa581a-724e-4196-a9a3-ff84c54bdb7d",oracle_id:"0b19082c-8f80-448b-9e1b-0f324a159409",multiverse_ids:[668919],mtgo_id:129255,arena_id:91541,tcgplayer_id:559637,cardmarket_id:778523,name:"Builder's Talent",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/15fa581a-724e-4196-a9a3-ff84c54bdb7d",scryfall_uri:"https://scryfall.com/card/blb/5/builders-talent?utm_source=api",layout:"class",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",normal:"https://cards.scryfall.io/normal/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",large:"https://cards.scryfall.io/large/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",png:"https://cards.scryfall.io/png/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.png?1739650809",art_crop:"https://cards.scryfall.io/art_crop/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809",border_crop:"https://cards.scryfall.io/border_crop/front/1/5/15fa581a-724e-4196-a9a3-ff84c54bdb7d.jpg?1739650809"},mana_cost:"{1}{W}",cmc:2,type_line:"Enchantment — Class",oracle_text:`(Gain the next level as a sorcery to add its ability.)
When this Class enters, create a 0/4 white Wall creature token with defender.
{W}: Level 2
Whenever one or more noncreature, nonland permanents you control enter, put a +1/+1 counter on target creature you control.
{4}{W}: Level 3
When this Class becomes level 3, return target noncreature, nonland permanent card from your graveyard to the battlefield.`,colors:["W"],color_identity:["W"],keywords:[],all_parts:[{object:"related_card",id:"15fa581a-724e-4196-a9a3-ff84c54bdb7d",component:"combo_piece",name:"Builder's Talent",type_line:"Enchantment — Class",uri:"https://api.scryfall.com/cards/15fa581a-724e-4196-a9a3-ff84c54bdb7d"},{object:"related_card",id:"229a41de-91dd-4696-bfc1-10d702787c3e",component:"token",name:"Wall",type_line:"Token Creature — Wall",uri:"https://api.scryfall.com/cards/229a41de-91dd-4696-bfc1-10d702787c3e"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/15fa581a-724e-4196-a9a3-ff84c54bdb7d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A0b19082c-8f80-448b-9e1b-0f324a159409&unique=prints",collector_number:"5",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Ovidio Cartagena",artist_ids:["7de94887-7f8b-4642-922c-1fa6b4568d07"],illustration_id:"5902a882-1e62-4015-92e2-e89978a5f6aa",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11542,penny_rank:3829,preview:{source:"Invictus Forge",source_uri:"https://www.facebook.com/invictusforgeMY/posts/pfbid086TaRez3sxUBhyy4DDBJQxXwNs1ZULKhwkcEsRnuVk7PR5CfmUw1aMcnHCgtnLc9l",previewed_at:"2024-07-16"},prices:{usd:"0.13",usd_foil:"0.11",usd_etched:null,eur:"0.09",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668919&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DBuilder%2527s%2BTalent",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DBuilder%2527s%2BTalent",edhrec:"https://edhrec.com/route/?cc=Builder%27s+Talent"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559637%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Builders-Talent?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129255?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"dfd977dc-a7c3-4d0a-aca7-b25bd154e963",oracle_id:"06ccec61-27d2-4079-80b5-29ebd3a980ee",multiverse_ids:[669081],mtgo_id:129579,arena_id:91703,tcgplayer_id:558407,cardmarket_id:777613,name:"Cache Grab",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/dfd977dc-a7c3-4d0a-aca7-b25bd154e963",scryfall_uri:"https://scryfall.com/card/blb/167/cache-grab?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",normal:"https://cards.scryfall.io/normal/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",large:"https://cards.scryfall.io/large/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",png:"https://cards.scryfall.io/png/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.png?1721426785",art_crop:"https://cards.scryfall.io/art_crop/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785",border_crop:"https://cards.scryfall.io/border_crop/front/d/f/dfd977dc-a7c3-4d0a-aca7-b25bd154e963.jpg?1721426785"},mana_cost:"{1}{G}",cmc:2,type_line:"Instant",oracle_text:'Mill four cards. You may put a permanent card from among the cards milled this way into your hand. If you control a Squirrel or returned a Squirrel card to your hand this way, create a Food token. (To mill four cards, put the top four cards of your library into your graveyard. A Food token is an artifact with "{2}, {T}, Sacrifice this token: You gain 3 life.")',colors:["G"],color_identity:["G"],keywords:["Food","Mill"],all_parts:[{object:"related_card",id:"dfd977dc-a7c3-4d0a-aca7-b25bd154e963",component:"combo_piece",name:"Cache Grab",type_line:"Instant",uri:"https://api.scryfall.com/cards/dfd977dc-a7c3-4d0a-aca7-b25bd154e963"},{object:"related_card",id:"0dce2241-e58b-41d4-b57c-9794fc8ee004",component:"token",name:"Food",type_line:"Token Artifact — Food",uri:"https://api.scryfall.com/cards/0dce2241-e58b-41d4-b57c-9794fc8ee004"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/dfd977dc-a7c3-4d0a-aca7-b25bd154e963/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A06ccec61-27d2-4079-80b5-29ebd3a980ee&unique=prints",collector_number:"167",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Loïc Canavaggia",artist_ids:["f1e2e10b-08be-4e92-8f50-95a72850a811"],illustration_id:"8f1fd037-a96c-4477-affc-08f94d67a589",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6529,penny_rank:1887,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.11",usd_foil:"0.18",usd_etched:null,eur:"0.08",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669081&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCache%2BGrab",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCache%2BGrab",edhrec:"https://edhrec.com/route/?cc=Cache+Grab"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558407%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Cache-Grab?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129579?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"2c16eaec-924c-42f6-9fea-07edd7ed93b9",oracle_id:"312c7a7b-2084-42b0-9b13-0a6d3e43a73d",multiverse_ids:[669121],mtgo_id:129659,arena_id:91743,tcgplayer_id:558320,cardmarket_id:777659,name:"Camellia, the Seedmiser",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/2c16eaec-924c-42f6-9fea-07edd7ed93b9",scryfall_uri:"https://scryfall.com/card/blb/207/camellia-the-seedmiser?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",normal:"https://cards.scryfall.io/normal/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",large:"https://cards.scryfall.io/large/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",png:"https://cards.scryfall.io/png/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.png?1721933903",art_crop:"https://cards.scryfall.io/art_crop/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903",border_crop:"https://cards.scryfall.io/border_crop/front/2/c/2c16eaec-924c-42f6-9fea-07edd7ed93b9.jpg?1721933903"},mana_cost:"{1}{B}{G}",cmc:3,type_line:"Legendary Creature — Squirrel Warlock",oracle_text:`Menace
Other Squirrels you control have menace.
Whenever you sacrifice one or more Foods, create a 1/1 green Squirrel creature token.
{2}, Forage: Put a +1/+1 counter on each other Squirrel you control. (To forage, exile three cards from your graveyard or sacrifice a Food.)`,power:"3",toughness:"3",colors:["B","G"],color_identity:["B","G"],keywords:["Forage","Menace"],all_parts:[{object:"related_card",id:"44f59ece-1ba5-422b-820d-e80c83f46290",component:"combo_piece",name:"Camellia, the Seedmiser",type_line:"Legendary Creature — Squirrel Warlock",uri:"https://api.scryfall.com/cards/44f59ece-1ba5-422b-820d-e80c83f46290"},{object:"related_card",id:"5a6ec62e-0e9b-4312-bfe8-cc85d76fd9e0",component:"token",name:"Squirrel",type_line:"Token Creature — Squirrel",uri:"https://api.scryfall.com/cards/5a6ec62e-0e9b-4312-bfe8-cc85d76fd9e0"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/2c16eaec-924c-42f6-9fea-07edd7ed93b9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A312c7a7b-2084-42b0-9b13-0a6d3e43a73d&unique=prints",collector_number:"207",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Steve Prescott",artist_ids:["a1139fb8-41f5-4a9e-9a74-f662e1a23b35"],illustration_id:"9da16d35-aa5b-40db-badf-78e6f77c96df",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3454,penny_rank:4348,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.93",usd_foil:"1.47",usd_etched:null,eur:"0.98",eur_foil:"0.99",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669121&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCamellia%252C%2Bthe%2BSeedmiser",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCamellia%252C%2Bthe%2BSeedmiser",edhrec:"https://edhrec.com/route/?cc=Camellia%2C+the+Seedmiser"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558320%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Camellia-the-Seedmiser?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129659?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"eb03bb4f-8b4b-417e-bfc6-294cd2186b2e",oracle_id:"5fe3aabd-3271-41bf-ae50-f6efaba7c4ae",multiverse_ids:[668921],mtgo_id:129259,arena_id:91543,tcgplayer_id:558593,cardmarket_id:776453,name:"Carrot Cake",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e",scryfall_uri:"https://scryfall.com/card/blb/7/carrot-cake?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",normal:"https://cards.scryfall.io/normal/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",large:"https://cards.scryfall.io/large/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",png:"https://cards.scryfall.io/png/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.png?1721425791",art_crop:"https://cards.scryfall.io/art_crop/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791",border_crop:"https://cards.scryfall.io/border_crop/front/e/b/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e.jpg?1721425791"},mana_cost:"{1}{W}",cmc:2,type_line:"Artifact — Food",oracle_text:`When this artifact enters and when you sacrifice it, create a 1/1 white Rabbit creature token and scry 1. (Look at the top card of your library. You may put that card on the bottom.)
{2}, {T}, Sacrifice this artifact: You gain 3 life.`,colors:["W"],color_identity:["W"],keywords:["Scry"],all_parts:[{object:"related_card",id:"eb03bb4f-8b4b-417e-bfc6-294cd2186b2e",component:"combo_piece",name:"Carrot Cake",type_line:"Artifact — Food",uri:"https://api.scryfall.com/cards/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e"},{object:"related_card",id:"81de52ef-7515-4958-abea-fb8ebdcef93c",component:"token",name:"Rabbit",type_line:"Token Creature — Rabbit",uri:"https://api.scryfall.com/cards/81de52ef-7515-4958-abea-fb8ebdcef93c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/eb03bb4f-8b4b-417e-bfc6-294cd2186b2e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5fe3aabd-3271-41bf-ae50-f6efaba7c4ae&unique=prints",collector_number:"7",digital:!1,rarity:"common",flavor_text:`"Secret ingredient? What do you think?"
—Ms. Bumbleflower`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Forrest Imel",artist_ids:["64fc383d-de34-4151-87d6-27b82e58086e"],illustration_id:"8ae92ab9-6cc5-4173-8707-f5ba2853cfdf",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:8955,penny_rank:1534,preview:{source:"Wizards of the Coast",source_uri:"https://twitter.com/wizards_magic/status/1806657538680926493",previewed_at:"2024-06-28"},prices:{usd:"0.04",usd_foil:"0.13",usd_etched:null,eur:"0.09",eur_foil:"0.26",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668921&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DCarrot%2BCake",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DCarrot%2BCake",edhrec:"https://edhrec.com/route/?cc=Carrot+Cake"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558593%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Carrot-Cake?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129259?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"658cfcb7-81b7-48c6-9dd2-1663d06108cf",oracle_id:"94e8b0a9-44a1-4dce-8d44-78681ae638a1",multiverse_ids:[669167],mtgo_id:129751,arena_id:91789,tcgplayer_id:559627,cardmarket_id:778531,name:"Fountainport",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/658cfcb7-81b7-48c6-9dd2-1663d06108cf",scryfall_uri:"https://scryfall.com/card/blb/253/fountainport?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",normal:"https://cards.scryfall.io/normal/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",large:"https://cards.scryfall.io/large/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",png:"https://cards.scryfall.io/png/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.png?1721427323",art_crop:"https://cards.scryfall.io/art_crop/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",border_crop:"https://cards.scryfall.io/border_crop/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{2}, {T}, Sacrifice a token: Draw a card.
{3}, {T}, Pay 1 life: Create a 1/1 blue Fish creature token.
{4}, {T}: Create a Treasure token.`,colors:[],color_identity:[],keywords:["Treasure"],produced_mana:["C"],all_parts:[{object:"related_card",id:"ff0357fb-d90c-49c7-b16a-8b52ac686c3b",component:"token",name:"Treasure",type_line:"Token Artifact — Treasure",uri:"https://api.scryfall.com/cards/ff0357fb-d90c-49c7-b16a-8b52ac686c3b"},{object:"related_card",id:"dd04367b-59d8-4ee6-8b5a-abfb1373c226",component:"combo_piece",name:"Fountainport",type_line:"Land",uri:"https://api.scryfall.com/cards/dd04367b-59d8-4ee6-8b5a-abfb1373c226"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/658cfcb7-81b7-48c6-9dd2-1663d06108cf/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A94e8b0a9-44a1-4dce-8d44-78681ae638a1&unique=prints",collector_number:"253",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Leon Tukker",artist_ids:["669b8b90-758d-4f9e-b4f7-98cd6742eb97"],illustration_id:"f1154003-ac02-42a4-9827-29483935ecf9",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1518,preview:{source:"Rapsolo",source_uri:"https://twitter.com/RapsoloM/status/1813274426122600899",previewed_at:"2024-07-16"},prices:{usd:"2.62",usd_foil:"4.02",usd_etched:null,eur:"4.82",eur_foil:"5.62",tix:"2.54"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669167&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DFountainport",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DFountainport",edhrec:"https://edhrec.com/route/?cc=Fountainport"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559627%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Fountainport?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129751?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"131ea976-289e-4f32-896d-27bbfd423ba9",oracle_id:"77b832a8-a3af-44fe-bc67-72510d292667",multiverse_ids:[669128],mtgo_id:129673,arena_id:91750,tcgplayer_id:559632,cardmarket_id:778530,name:"Gev, Scaled Scorch",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/131ea976-289e-4f32-896d-27bbfd423ba9",scryfall_uri:"https://scryfall.com/card/blb/214/gev-scaled-scorch?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",normal:"https://cards.scryfall.io/normal/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",large:"https://cards.scryfall.io/large/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",png:"https://cards.scryfall.io/png/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.png?1721427059",art_crop:"https://cards.scryfall.io/art_crop/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059",border_crop:"https://cards.scryfall.io/border_crop/front/1/3/131ea976-289e-4f32-896d-27bbfd423ba9.jpg?1721427059"},mana_cost:"{B}{R}",cmc:2,type_line:"Legendary Creature — Lizard Mercenary",oracle_text:`Ward—Pay 2 life.
Other creatures you control enter with an additional +1/+1 counter on them for each opponent who lost life this turn.
Whenever you cast a Lizard spell, Gev deals 1 damage to target opponent.`,power:"3",toughness:"2",colors:["B","R"],color_identity:["B","R"],keywords:["Ward"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/131ea976-289e-4f32-896d-27bbfd423ba9/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A77b832a8-a3af-44fe-bc67-72510d292667&unique=prints",collector_number:"214",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Mark Zug",artist_ids:["48e2b98c-5467-4671-bd42-4c3746115117"],illustration_id:"ecaf7eb2-f362-4928-9e07-b8cda12bb91d",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7001,preview:{source:"Mistystep",source_uri:"https://www.instagram.com/reel/C9fXP3iR8-X/",previewed_at:"2024-07-16"},prices:{usd:"0.42",usd_foil:"0.61",usd_etched:null,eur:"0.56",eur_foil:"0.98",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669128&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DGev%252C%2BScaled%2BScorch",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DGev%252C%2BScaled%2BScorch",edhrec:"https://edhrec.com/route/?cc=Gev%2C+Scaled+Scorch"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559632%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Gev-Scaled-Scorch?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129673?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b56beeb6-88ca-475e-8654-1d4e8b4aa3c0",oracle_id:"fb8f7047-280b-464f-aca2-6add3e21df8f",multiverse_ids:[669051],mtgo_id:129519,arena_id:91673,tcgplayer_id:559081,cardmarket_id:778115,name:"Harnesser of Storms",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0",scryfall_uri:"https://scryfall.com/card/blb/137/harnesser-of-storms?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",normal:"https://cards.scryfall.io/normal/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",large:"https://cards.scryfall.io/large/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",png:"https://cards.scryfall.io/png/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.png?1721426630",art_crop:"https://cards.scryfall.io/art_crop/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630",border_crop:"https://cards.scryfall.io/border_crop/front/b/5/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0.jpg?1721426630"},mana_cost:"{2}{R}",cmc:3,type_line:"Creature — Otter Wizard",oracle_text:"Whenever you cast a noncreature or Otter spell, you may exile the top card of your library. Until end of turn, you may play that card. This ability triggers only once each turn.",power:"1",toughness:"4",colors:["R"],color_identity:["R"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b56beeb6-88ca-475e-8654-1d4e8b4aa3c0/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Afb8f7047-280b-464f-aca2-6add3e21df8f&unique=prints",collector_number:"137",digital:!1,rarity:"uncommon",flavor_text:"She feeds and powers her entire village.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Bram Sels",artist_ids:["2e90d3c1-e8ac-45c7-9d5a-63385c1a384d"],illustration_id:"4f24de7f-fb2c-4175-aaba-887b919ae668",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9185,preview:{source:"Limited Resources",source_uri:"https://twitter.com/Marshall_LR/status/1811570808604807458",previewed_at:"2024-07-11"},prices:{usd:"0.09",usd_foil:"0.08",usd_etched:null,eur:"0.15",eur_foil:"0.30",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669051&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHarnesser%2Bof%2BStorms",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHarnesser%2Bof%2BStorms",edhrec:"https://edhrec.com/route/?cc=Harnesser+of+Storms"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559081%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Harnesser-of-Storms?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129519?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"41762689-0c13-4d45-9d81-ba2afad980f8",oracle_id:"56208bdc-2eed-4ccc-8c34-c0eba9db0aa9",multiverse_ids:[668929],mtgo_id:129275,arena_id:91551,tcgplayer_id:559129,cardmarket_id:778352,name:"Harvestrite Host",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/41762689-0c13-4d45-9d81-ba2afad980f8",scryfall_uri:"https://scryfall.com/card/blb/15/harvestrite-host?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",normal:"https://cards.scryfall.io/normal/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",large:"https://cards.scryfall.io/large/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",png:"https://cards.scryfall.io/png/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.png?1721425845",art_crop:"https://cards.scryfall.io/art_crop/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845",border_crop:"https://cards.scryfall.io/border_crop/front/4/1/41762689-0c13-4d45-9d81-ba2afad980f8.jpg?1721425845"},mana_cost:"{2}{W}",cmc:3,type_line:"Creature — Rabbit Citizen",oracle_text:"Whenever this creature or another Rabbit you control enters, target creature you control gets +1/+0 until end of turn. Then draw a card if this is the second time this ability has resolved this turn.",power:"3",toughness:"3",colors:["W"],color_identity:["W"],keywords:[],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/41762689-0c13-4d45-9d81-ba2afad980f8/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A56208bdc-2eed-4ccc-8c34-c0eba9db0aa9&unique=prints",collector_number:"15",digital:!1,rarity:"uncommon",flavor_text:'"Many paws grew this feast, and many paws should share it!"',card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Julie Dillon",artist_ids:["ce8605ad-6d5a-45a3-a7b6-84be4f5209cd"],illustration_id:"d99238a4-da52-4bba-a85b-03b2b2ba99d5",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11242,penny_rank:6213,preview:{source:"mtgso",source_uri:"https://mp.weixin.qq.com/s/19XmF8S6jBQgjp2yYPU4Bw",previewed_at:"2024-07-12"},prices:{usd:"0.08",usd_foil:"0.07",usd_etched:null,eur:"0.09",eur_foil:"0.28",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668929&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHarvestrite%2BHost",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHarvestrite%2BHost",edhrec:"https://edhrec.com/route/?cc=Harvestrite+Host"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559129%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Harvestrite-Host?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129275?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"2fc20157-edd3-484d-8864-925c071c0551",oracle_id:"467d6acb-9a3c-433f-836d-54e0e670b7d0",multiverse_ids:[669130],mtgo_id:129677,arena_id:91752,tcgplayer_id:558434,cardmarket_id:777689,name:"Head of the Homestead",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/2fc20157-edd3-484d-8864-925c071c0551",scryfall_uri:"https://scryfall.com/card/blb/216/head-of-the-homestead?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",normal:"https://cards.scryfall.io/normal/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",large:"https://cards.scryfall.io/large/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",png:"https://cards.scryfall.io/png/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.png?1721427071",art_crop:"https://cards.scryfall.io/art_crop/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071",border_crop:"https://cards.scryfall.io/border_crop/front/2/f/2fc20157-edd3-484d-8864-925c071c0551.jpg?1721427071"},mana_cost:"{3}{G/W}{G/W}",cmc:5,type_line:"Creature — Rabbit Citizen",oracle_text:"When this creature enters, create two 1/1 white Rabbit creature tokens.",power:"3",toughness:"2",colors:["G","W"],color_identity:["G","W"],keywords:[],all_parts:[{object:"related_card",id:"2fc20157-edd3-484d-8864-925c071c0551",component:"combo_piece",name:"Head of the Homestead",type_line:"Creature — Rabbit Citizen",uri:"https://api.scryfall.com/cards/2fc20157-edd3-484d-8864-925c071c0551"},{object:"related_card",id:"81de52ef-7515-4958-abea-fb8ebdcef93c",component:"token",name:"Rabbit",type_line:"Token Creature — Rabbit",uri:"https://api.scryfall.com/cards/81de52ef-7515-4958-abea-fb8ebdcef93c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/2fc20157-edd3-484d-8864-925c071c0551/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A467d6acb-9a3c-433f-836d-54e0e670b7d0&unique=prints",collector_number:"216",digital:!1,rarity:"common",flavor_text:`"Interrupting a rabbitfolk dinner is a most grievous offense. If you must do so, bring gifts for the little ones, or bring a shield."
—*Giddy's Guide to Valley*`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Omar Rayyan",artist_ids:["256b61a2-b9af-4ff5-b485-47a61818f818"],illustration_id:"a1bf59be-be6d-4312-a59d-1b497ef85cc7",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11223,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.03",usd_foil:"0.08",usd_etched:null,eur:"0.11",eur_foil:"0.09",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669130&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHead%2Bof%2Bthe%2BHomestead",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHead%2Bof%2Bthe%2BHomestead",edhrec:"https://edhrec.com/route/?cc=Head+of+the+Homestead"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558434%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Head-of-the-Homestead?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129677?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"bc5ee537-52e1-474a-9326-dfacc2a758ab",oracle_id:"44bffa3e-4d31-4f9b-829c-e2066ab2f641",multiverse_ids:[669092],mtgo_id:129601,arena_id:91714,tcgplayer_id:559634,cardmarket_id:778512,name:"Honored Dreyleader",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/bc5ee537-52e1-474a-9326-dfacc2a758ab",scryfall_uri:"https://scryfall.com/card/blb/178/honored-dreyleader?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",normal:"https://cards.scryfall.io/normal/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",large:"https://cards.scryfall.io/large/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",png:"https://cards.scryfall.io/png/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.png?1721426839",art_crop:"https://cards.scryfall.io/art_crop/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839",border_crop:"https://cards.scryfall.io/border_crop/front/b/c/bc5ee537-52e1-474a-9326-dfacc2a758ab.jpg?1721426839"},mana_cost:"{2}{G}",cmc:3,type_line:"Creature — Squirrel Warrior",oracle_text:`Trample
When this creature enters, put a +1/+1 counter on it for each other Squirrel and/or Food you control.
Whenever another Squirrel or Food you control enters, put a +1/+1 counter on this creature.`,power:"1",toughness:"1",colors:["G"],color_identity:["G"],keywords:["Trample"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/bc5ee537-52e1-474a-9326-dfacc2a758ab/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A44bffa3e-4d31-4f9b-829c-e2066ab2f641&unique=prints",collector_number:"178",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aurore Folny",artist_ids:["02f6cdda-7a80-4184-853d-20b28d580868"],illustration_id:"3caeed38-1b97-4a07-9a7f-29a45e1a335d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4534,penny_rank:4923,preview:{source:"Vault Games",source_uri:"https://www.youtube.com/watch?v=ny6dPYYigaw",previewed_at:"2024-07-15"},prices:{usd:"0.11",usd_foil:"0.22",usd_etched:null,eur:"0.15",eur_foil:"0.14",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669092&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHonored%2BDreyleader",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHonored%2BDreyleader",edhrec:"https://edhrec.com/route/?cc=Honored+Dreyleader"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559634%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Honored-Dreyleader?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129601?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ee7207f8-5daa-42af-aeea-7a489047110b",oracle_id:"e8a9350a-07c1-47ed-8c4f-88e4b3b17545",multiverse_ids:[668930],mtgo_id:129277,arena_id:91552,tcgplayer_id:558432,cardmarket_id:777548,name:"Hop to It",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ee7207f8-5daa-42af-aeea-7a489047110b",scryfall_uri:"https://scryfall.com/card/blb/16/hop-to-it?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",normal:"https://cards.scryfall.io/normal/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",large:"https://cards.scryfall.io/large/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",png:"https://cards.scryfall.io/png/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.png?1721425854",art_crop:"https://cards.scryfall.io/art_crop/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854",border_crop:"https://cards.scryfall.io/border_crop/front/e/e/ee7207f8-5daa-42af-aeea-7a489047110b.jpg?1721425854"},mana_cost:"{2}{W}",cmc:3,type_line:"Sorcery",oracle_text:"Create three 1/1 white Rabbit creature tokens.",colors:["W"],color_identity:["W"],keywords:[],all_parts:[{object:"related_card",id:"684614e3-5454-4e68-87da-a2027b6af6d7",component:"combo_piece",name:"Hop to It",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/684614e3-5454-4e68-87da-a2027b6af6d7"},{object:"related_card",id:"81de52ef-7515-4958-abea-fb8ebdcef93c",component:"token",name:"Rabbit",type_line:"Token Creature — Rabbit",uri:"https://api.scryfall.com/cards/81de52ef-7515-4958-abea-fb8ebdcef93c"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ee7207f8-5daa-42af-aeea-7a489047110b/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ae8a9350a-07c1-47ed-8c4f-88e4b3b17545&unique=prints",collector_number:"16",digital:!1,rarity:"uncommon",flavor_text:`"Finding a hidden patch of glowberries is almost as joyful as eating them. Almost."
—Ms. Bumbleflower`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Eelis Kyttanen",artist_ids:["699b24be-cde0-4da8-bc0f-7a3ecd60ab01"],illustration_id:"0dca258c-92b0-4b56-bba4-2954e912d8d6",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5846,penny_rank:2056,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.05",usd_foil:"0.16",usd_etched:null,eur:"0.15",eur_foil:"0.32",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668930&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DHop%2Bto%2BIt",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DHop%2Bto%2BIt",edhrec:"https://edhrec.com/route/?cc=Hop+to+It"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558432%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Hop-to-It?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129277?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"50b9575a-53d9-4df7-b86c-cda021107d3f",oracle_id:"8cb36a67-9206-4665-a03f-64f52ba559c4",multiverse_ids:[668966],mtgo_id:129349,arena_id:91588,tcgplayer_id:559137,cardmarket_id:778345,name:"Into the Flood Maw",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/50b9575a-53d9-4df7-b86c-cda021107d3f",scryfall_uri:"https://scryfall.com/card/blb/52/into-the-flood-maw?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",normal:"https://cards.scryfall.io/normal/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",large:"https://cards.scryfall.io/large/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",png:"https://cards.scryfall.io/png/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.png?1721426097",art_crop:"https://cards.scryfall.io/art_crop/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",border_crop:"https://cards.scryfall.io/border_crop/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097"},mana_cost:"{U}",cmc:1,type_line:"Instant",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Return target creature an opponent controls to its owner's hand. If the gift was promised, instead return target nonland permanent an opponent controls to its owner's hand.`,colors:["U"],color_identity:["U"],keywords:["Gift"],all_parts:[{object:"related_card",id:"50b9575a-53d9-4df7-b86c-cda021107d3f",component:"combo_piece",name:"Into the Flood Maw",type_line:"Instant",uri:"https://api.scryfall.com/cards/50b9575a-53d9-4df7-b86c-cda021107d3f"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/50b9575a-53d9-4df7-b86c-cda021107d3f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A8cb36a67-9206-4665-a03f-64f52ba559c4&unique=prints",collector_number:"52",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Danny Schwartz",artist_ids:["48e30a4a-5b4d-48e2-9c53-03125085374e"],illustration_id:"9be40712-3155-4642-b3cf-f9c8844a7233",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1616,preview:{source:"Nerd Rage",source_uri:"https://www.facebook.com/nerdrageth/posts/pfbid02UrVoCfqeXGpKNH2dvXGJLA1TFVXnBymYEXT6CDpG392dSdJHLA7bu74S7ik3B79el",previewed_at:"2024-07-12"},prices:{usd:"4.03",usd_foil:"7.28",usd_etched:null,eur:"1.80",eur_foil:"2.61",tix:"9.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668966&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DInto%2Bthe%2BFlood%2BMaw",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DInto%2Bthe%2BFlood%2BMaw",edhrec:"https://edhrec.com/route/?cc=Into+the+Flood+Maw"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559137%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Into-the-Flood-Maw?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129349?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ebf68793-22a2-4a59-9d37-6791584edca1",oracle_id:"ced5fe9a-4237-4c89-9dd6-b133b966ebcc",multiverse_ids:[669135],mtgo_id:129687,arena_id:91757,tcgplayer_id:558334,cardmarket_id:777692,name:"Kastral, the Windcrested",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ebf68793-22a2-4a59-9d37-6791584edca1",scryfall_uri:"https://scryfall.com/card/blb/221/kastral-the-windcrested?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",normal:"https://cards.scryfall.io/normal/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",large:"https://cards.scryfall.io/large/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",png:"https://cards.scryfall.io/png/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.png?1721427101",art_crop:"https://cards.scryfall.io/art_crop/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101",border_crop:"https://cards.scryfall.io/border_crop/front/e/b/ebf68793-22a2-4a59-9d37-6791584edca1.jpg?1721427101"},mana_cost:"{3}{W}{U}",cmc:5,type_line:"Legendary Creature — Bird Scout",oracle_text:`Flying
Whenever one or more Birds you control deal combat damage to a player, choose one —
• You may put a Bird creature card from your hand or graveyard onto the battlefield with a finality counter on it.
• Put a +1/+1 counter on each Bird you control.
• Draw a card.`,power:"4",toughness:"5",colors:["U","W"],color_identity:["U","W"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ebf68793-22a2-4a59-9d37-6791584edca1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aced5fe9a-4237-4c89-9dd6-b133b966ebcc&unique=prints",collector_number:"221",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jesper Ejsing",artist_ids:["a5f8354a-8b51-4e59-96b2-0e3aeae4fa1d"],illustration_id:"ca1d5da4-a663-4067-843b-c823c995d4bf",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:7400,penny_rank:11966,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.23",usd_foil:"0.35",usd_etched:null,eur:"0.20",eur_foil:"0.42",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669135&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKastral%252C%2Bthe%2BWindcrested",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKastral%252C%2Bthe%2BWindcrested",edhrec:"https://edhrec.com/route/?cc=Kastral%2C+the+Windcrested"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558334%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Kastral-the-Windcrested?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129687?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c7fb7f4f-2153-4527-8f11-adbf508d3533",oracle_id:"cb2d222c-df42-41a7-a517-0a41e47a4280",multiverse_ids:[668969],mtgo_id:129355,arena_id:91591,tcgplayer_id:559138,cardmarket_id:778330,name:"Knightfisher",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c7fb7f4f-2153-4527-8f11-adbf508d3533",scryfall_uri:"https://scryfall.com/card/blb/55/knightfisher?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",normal:"https://cards.scryfall.io/normal/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",large:"https://cards.scryfall.io/large/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",png:"https://cards.scryfall.io/png/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.png?1721426127",art_crop:"https://cards.scryfall.io/art_crop/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127",border_crop:"https://cards.scryfall.io/border_crop/front/c/7/c7fb7f4f-2153-4527-8f11-adbf508d3533.jpg?1721426127"},mana_cost:"{3}{U}{U}",cmc:5,type_line:"Creature — Bird Knight",oracle_text:`Flying
Whenever another nontoken Bird you control enters, create a 1/1 blue Fish creature token.`,power:"4",toughness:"5",colors:["U"],color_identity:["U"],keywords:["Flying"],all_parts:[{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"},{object:"related_card",id:"c7fb7f4f-2153-4527-8f11-adbf508d3533",component:"combo_piece",name:"Knightfisher",type_line:"Creature — Bird Knight",uri:"https://api.scryfall.com/cards/c7fb7f4f-2153-4527-8f11-adbf508d3533"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c7fb7f4f-2153-4527-8f11-adbf508d3533/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Acb2d222c-df42-41a7-a517-0a41e47a4280&unique=prints",collector_number:"55",digital:!1,rarity:"uncommon",flavor_text:"His keen eyes can see the glint of scales far below the river's surface.",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Jakob Eirich",artist_ids:["982d9460-f9b9-42f6-8a25-47afa7df22e9"],illustration_id:"60eeba43-ba6d-4142-96e2-2b7358d7c533",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13889,preview:{source:"Jack Torrance",source_uri:"https://www.instagram.com/jacktorrance90/p/C9VLvi7iJmk/?img_index=1",previewed_at:"2024-07-12"},prices:{usd:"0.06",usd_foil:"0.04",usd_etched:null,eur:"0.09",eur_foil:"0.15",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668969&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DKnightfisher",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DKnightfisher",edhrec:"https://edhrec.com/route/?cc=Knightfisher"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559138%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Knightfisher?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129355?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7e95a7cc-ed77-4ca4-80db-61c0fc68bf50",oracle_id:"5bb06e6f-e3af-4caa-b66d-77248ad46b61",multiverse_ids:[669169],mtgo_id:129755,arena_id:91791,tcgplayer_id:558605,cardmarket_id:776460,name:"Lilypad Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50",scryfall_uri:"https://scryfall.com/card/blb/255/lilypad-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",normal:"https://cards.scryfall.io/normal/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",large:"https://cards.scryfall.io/large/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",png:"https://cards.scryfall.io/png/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.png?1721639529",art_crop:"https://cards.scryfall.io/art_crop/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529",border_crop:"https://cards.scryfall.io/border_crop/front/7/e/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50.jpg?1721639529"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {U}. Spend this mana only to cast a creature spell.
{U}, {T}: Surveil 2. Activate only if a Bird, Frog, Otter, or Rat entered the battlefield under your control this turn.`,colors:[],color_identity:["U"],keywords:["Surveil"],produced_mana:["C","U"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7e95a7cc-ed77-4ca4-80db-61c0fc68bf50/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A5bb06e6f-e3af-4caa-b66d-77248ad46b61&unique=prints",collector_number:"255",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alexander Forssberg",artist_ids:["85908891-3cc7-42b0-9b54-27ed0fe89c53"],illustration_id:"11f1d67c-318d-4b09-8991-b5b90c13e373",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4756,penny_rank:7969,prices:{usd:"0.15",usd_foil:"0.18",usd_etched:null,eur:"0.09",eur_foil:"0.35",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669169&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLilypad%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLilypad%2BVillage",edhrec:"https://edhrec.com/route/?cc=Lilypad+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558605%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lilypad-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129755?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42",oracle_id:"adc8976a-0871-4fd6-9c4c-822ba9549b4b",multiverse_ids:[669096],mtgo_id:129609,arena_id:91718,tcgplayer_id:558697,cardmarket_id:777757,name:"Longstalk Brawl",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42",scryfall_uri:"https://scryfall.com/card/blb/182/longstalk-brawl?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",normal:"https://cards.scryfall.io/normal/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",large:"https://cards.scryfall.io/large/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",png:"https://cards.scryfall.io/png/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.png?1721426861",art_crop:"https://cards.scryfall.io/art_crop/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861",border_crop:"https://cards.scryfall.io/border_crop/front/c/7/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42.jpg?1721426861"},mana_cost:"{G}",cmc:1,type_line:"Sorcery",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Choose target creature you control and target creature you don't control. Put a +1/+1 counter on the creature you control if the gift was promised. Then those creatures fight each other.`,colors:["G"],color_identity:["G"],keywords:["Gift","Fight"],all_parts:[{object:"related_card",id:"c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42",component:"combo_piece",name:"Longstalk Brawl",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/c7ef748c-b5e5-4e7d-bf2e-d3e6c08edb42/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aadc8976a-0871-4fd6-9c4c-822ba9549b4b&unique=prints",collector_number:"182",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Serena Malyon",artist_ids:["d9fee7a6-7c5e-48a5-8639-bba25abc8a06"],illustration_id:"27a90e5f-0b6f-4400-84b9-7d2fdf013032",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:10320,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-11"},prices:{usd:"0.04",usd_foil:"0.05",usd_etched:null,eur:"0.05",eur_foil:"0.21",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669096&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLongstalk%2BBrawl",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLongstalk%2BBrawl",edhrec:"https://edhrec.com/route/?cc=Longstalk+Brawl"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558697%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Longstalk-Brawl?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129609?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"a9ee50d4-c878-457b-964d-29c039ce9852",oracle_id:"cb68d1e4-36aa-4a00-b671-8959e7d526d4",multiverse_ids:[669137],mtgo_id:129691,arena_id:91759,tcgplayer_id:559480,cardmarket_id:778438,name:"Lunar Convocation",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/a9ee50d4-c878-457b-964d-29c039ce9852",scryfall_uri:"https://scryfall.com/card/blb/223/lunar-convocation?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",normal:"https://cards.scryfall.io/normal/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",large:"https://cards.scryfall.io/large/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",png:"https://cards.scryfall.io/png/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.png?1721427132",art_crop:"https://cards.scryfall.io/art_crop/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132",border_crop:"https://cards.scryfall.io/border_crop/front/a/9/a9ee50d4-c878-457b-964d-29c039ce9852.jpg?1721427132"},mana_cost:"{W}{B}",cmc:2,type_line:"Enchantment",oracle_text:`At the beginning of your end step, if you gained life this turn, each opponent loses 1 life.
At the beginning of your end step, if you gained and lost life this turn, create a 1/1 black Bat creature token with flying.
{1}{B}, Pay 2 life: Draw a card.`,colors:["B","W"],color_identity:["B","W"],keywords:[],all_parts:[{object:"related_card",id:"4396e4c7-660d-4055-bc94-4ccea95223b7",component:"combo_piece",name:"Lunar Convocation",type_line:"Enchantment",uri:"https://api.scryfall.com/cards/4396e4c7-660d-4055-bc94-4ccea95223b7"},{object:"related_card",id:"100c0127-49dd-4a78-9c88-1881e7923674",component:"token",name:"Bat",type_line:"Token Creature — Bat",uri:"https://api.scryfall.com/cards/100c0127-49dd-4a78-9c88-1881e7923674"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/a9ee50d4-c878-457b-964d-29c039ce9852/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Acb68d1e4-36aa-4a00-b671-8959e7d526d4&unique=prints",collector_number:"223",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Pavel Kolomeyets",artist_ids:["13435e52-d47a-4143-adfa-2ae0a6858292"],illustration_id:"69f1fba6-978e-4c9c-9a86-77f3e0e5f8b4",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:4100,penny_rank:3794,preview:{source:"CoolStuffInc",source_uri:"https://www.coolstuffinc.com/a/stephenjohnson-07152024-bloomburrow-preview-card-lunar-convocation",previewed_at:"2024-07-15"},prices:{usd:"0.78",usd_foil:"1.15",usd_etched:null,eur:"0.62",eur_foil:"1.00",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669137&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLunar%2BConvocation",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLunar%2BConvocation",edhrec:"https://edhrec.com/route/?cc=Lunar+Convocation"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559480%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lunar-Convocation?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129691?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d",oracle_id:"b6c7c708-5212-4100-b954-b77855b27915",multiverse_ids:[669170],mtgo_id:129757,arena_id:91792,tcgplayer_id:558607,cardmarket_id:776461,name:"Lupinflower Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d",scryfall_uri:"https://scryfall.com/card/blb/256/lupinflower-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",normal:"https://cards.scryfall.io/normal/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",large:"https://cards.scryfall.io/large/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",png:"https://cards.scryfall.io/png/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.png?1721639625",art_crop:"https://cards.scryfall.io/art_crop/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625",border_crop:"https://cards.scryfall.io/border_crop/front/8/a/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d.jpg?1721639625"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {W}. Spend this mana only to cast a creature spell.
{1}{W}, {T}, Sacrifice this land: Look at the top six cards of your library. You may reveal a Bat, Bird, Mouse, or Rabbit card from among them and put it into your hand. Put the rest on the bottom of your library in a random order.`,colors:[],color_identity:["W"],keywords:[],produced_mana:["C","W"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8ab9d56f-9178-4ec9-a5f6-b934f50d8d9d/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab6c7c708-5212-4100-b954-b77855b27915&unique=prints",collector_number:"256",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Alayna Danner",artist_ids:["bb677b1a-ce51-4888-83d6-5a94de461ff9"],illustration_id:"04cc1071-4cf4-4e04-ba43-3d35604dce80",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:5965,penny_rank:5711,prices:{usd:"0.14",usd_foil:"0.15",usd_etched:null,eur:"0.11",eur_foil:"0.23",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669170&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DLupinflower%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DLupinflower%2BVillage",edhrec:"https://edhrec.com/route/?cc=Lupinflower+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558607%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Lupinflower-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129757?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"db3832b5-e83f-4569-bd49-fb7b86fa2d47",oracle_id:"b254ca74-2a96-4590-91bc-650f407daf5d",multiverse_ids:[669057],mtgo_id:129531,arena_id:91679,tcgplayer_id:558706,cardmarket_id:777775,name:"Manifold Mouse",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/db3832b5-e83f-4569-bd49-fb7b86fa2d47",scryfall_uri:"https://scryfall.com/card/blb/143/manifold-mouse?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",normal:"https://cards.scryfall.io/normal/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",large:"https://cards.scryfall.io/large/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",png:"https://cards.scryfall.io/png/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.png?1721426663",art_crop:"https://cards.scryfall.io/art_crop/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663",border_crop:"https://cards.scryfall.io/border_crop/front/d/b/db3832b5-e83f-4569-bd49-fb7b86fa2d47.jpg?1721426663"},mana_cost:"{1}{R}",cmc:2,type_line:"Creature — Mouse Soldier",oracle_text:`Offspring {2} (You may pay an additional {2} as you cast this spell. If you do, when this creature enters, create a 1/1 token copy of it.)
At the beginning of combat on your turn, target Mouse you control gains your choice of double strike or trample until end of turn.`,power:"1",toughness:"2",colors:["R"],color_identity:["R"],keywords:["Offspring"],all_parts:[{object:"related_card",id:"907a990c-6ee9-44e1-85f9-83b261507308",component:"combo_piece",name:"Manifold Mouse",type_line:"Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/907a990c-6ee9-44e1-85f9-83b261507308"},{object:"related_card",id:"f5067c54-0f31-40e6-9ead-5d0183c9f00a",component:"token",name:"Manifold Mouse",type_line:"Token Creature — Mouse Soldier",uri:"https://api.scryfall.com/cards/f5067c54-0f31-40e6-9ead-5d0183c9f00a"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/db3832b5-e83f-4569-bd49-fb7b86fa2d47/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab254ca74-2a96-4590-91bc-650f407daf5d&unique=prints",collector_number:"143",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Randy Vargas",artist_ids:["d20672ca-0555-4238-a984-fd171d36b247"],illustration_id:"1e7f9dbc-2fa8-4dbb-820a-dd2a954ef3ca",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:11297,preview:{source:"Sean Plott (Day9TV)",source_uri:"https://twitter.com/day9tv/status/1811060311342075922",previewed_at:"2024-07-10"},prices:{usd:"2.17",usd_foil:"3.03",usd_etched:null,eur:"2.50",eur_foil:"2.83",tix:"0.96"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669057&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DManifold%2BMouse",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DManifold%2BMouse",edhrec:"https://edhrec.com/route/?cc=Manifold+Mouse"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558706%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Manifold-Mouse?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129531?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"7e24fe6a-607b-49b8-9fca-cecb1e40de7f",oracle_id:"03e356ae-f1e8-4730-8d2b-b9e2f32db915",multiverse_ids:[668973],mtgo_id:129363,arena_id:91595,tcgplayer_id:559140,cardmarket_id:778334,name:"Mind Spiral",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/7e24fe6a-607b-49b8-9fca-cecb1e40de7f",scryfall_uri:"https://scryfall.com/card/blb/59/mind-spiral?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",normal:"https://cards.scryfall.io/normal/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",large:"https://cards.scryfall.io/large/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",png:"https://cards.scryfall.io/png/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.png?1721426147",art_crop:"https://cards.scryfall.io/art_crop/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147",border_crop:"https://cards.scryfall.io/border_crop/front/7/e/7e24fe6a-607b-49b8-9fca-cecb1e40de7f.jpg?1721426147"},mana_cost:"{4}{U}",cmc:5,type_line:"Sorcery",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Target player draws three cards. If the gift was promised, tap target creature an opponent controls and put a stun counter on it. (If a permanent with a stun counter would become untapped, remove one from it instead.)`,colors:["U"],color_identity:["U"],keywords:["Gift"],all_parts:[{object:"related_card",id:"7e24fe6a-607b-49b8-9fca-cecb1e40de7f",component:"combo_piece",name:"Mind Spiral",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/7e24fe6a-607b-49b8-9fca-cecb1e40de7f"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/7e24fe6a-607b-49b8-9fca-cecb1e40de7f/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A03e356ae-f1e8-4730-8d2b-b9e2f32db915&unique=prints",collector_number:"59",digital:!1,rarity:"common",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Filip Burburan",artist_ids:["66082c3b-a623-4d34-be51-2475214b85d3"],illustration_id:"f708ba68-54b1-4218-ad09-7c042170033d",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:13523,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-15"},prices:{usd:"0.02",usd_foil:"0.06",usd_etched:null,eur:"0.04",eur_foil:"0.13",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668973&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMind%2BSpiral",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMind%2BSpiral",edhrec:"https://edhrec.com/route/?cc=Mind+Spiral"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559140%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mind-Spiral?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129363?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"ade32396-8841-4ba4-8852-d11146607f21",oracle_id:"b9df2cdf-397c-458d-89cf-911568737ffa",multiverse_ids:[668975],mtgo_id:129367,arena_id:91597,tcgplayer_id:559141,cardmarket_id:778346,name:"Mockingbird",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/ade32396-8841-4ba4-8852-d11146607f21",scryfall_uri:"https://scryfall.com/card/blb/61/mockingbird?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",normal:"https://cards.scryfall.io/normal/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",large:"https://cards.scryfall.io/large/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",png:"https://cards.scryfall.io/png/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.png?1722388218",art_crop:"https://cards.scryfall.io/art_crop/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218",border_crop:"https://cards.scryfall.io/border_crop/front/a/d/ade32396-8841-4ba4-8852-d11146607f21.jpg?1722388218"},mana_cost:"{X}{U}",cmc:1,type_line:"Creature — Bird Bard",oracle_text:`Flying
You may have this creature enter as a copy of any creature on the battlefield with mana value less than or equal to the amount of mana spent to cast this creature, except it's a Bird in addition to its other types and it has flying.`,power:"1",toughness:"1",colors:["U"],color_identity:["U"],keywords:["Flying"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/ade32396-8841-4ba4-8852-d11146607f21/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ab9df2cdf-397c-458d-89cf-911568737ffa&unique=prints",collector_number:"61",digital:!1,rarity:"rare",flavor_text:`"Laughing at you? No, no, I'm laughing *as* you!"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Aurore Folny",artist_ids:["02f6cdda-7a80-4184-853d-20b28d580868"],illustration_id:"e16b596c-b6df-40dd-a4aa-9ed2f98350e8",border_color:"black",frame:"2015",security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:1482,preview:{source:"CulturaPop",source_uri:"https://cpop.it/articoli/bozzamagic-the-gathering-vi-sveliamo-in-esclusiva-3-nuove-carte-di-bloomburrow",previewed_at:"2024-07-12"},prices:{usd:"1.61",usd_foil:"2.94",usd_etched:null,eur:"3.29",eur_foil:"5.55",tix:"0.53"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668975&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMockingbird",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMockingbird",edhrec:"https://edhrec.com/route/?cc=Mockingbird"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559141%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mockingbird?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129367?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"53ec4ad3-9cf0-4f1b-a9db-d63feee594ab",oracle_id:"aeeab1df-0b8b-4bc4-a5f9-aac413449bec",multiverse_ids:[669171],mtgo_id:129759,arena_id:91793,tcgplayer_id:558609,cardmarket_id:776462,name:"Mudflat Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab",scryfall_uri:"https://scryfall.com/card/blb/257/mudflat-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",normal:"https://cards.scryfall.io/normal/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",large:"https://cards.scryfall.io/large/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",png:"https://cards.scryfall.io/png/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.png?1721639657",art_crop:"https://cards.scryfall.io/art_crop/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657",border_crop:"https://cards.scryfall.io/border_crop/front/5/3/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab.jpg?1721639657"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {B}. Spend this mana only to cast a creature spell.
{1}{B}, {T}, Sacrifice this land: Return target Bat, Lizard, Rat, or Squirrel card from your graveyard to your hand.`,colors:[],color_identity:["B"],keywords:[],produced_mana:["B","C"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/53ec4ad3-9cf0-4f1b-a9db-d63feee594ab/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aaeeab1df-0b8b-4bc4-a5f9-aac413449bec&unique=prints",collector_number:"257",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Samuele Bandini",artist_ids:["f16f5903-990f-4ffe-88fb-fd54d0d8752b"],illustration_id:"55b394e9-4067-4652-94df-0681c5ed6a81",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3583,penny_rank:3452,prices:{usd:"0.24",usd_foil:"0.30",usd_etched:null,eur:"0.11",eur_foil:"0.33",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669171&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMudflat%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMudflat%2BVillage",edhrec:"https://edhrec.com/route/?cc=Mudflat+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558609%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Mudflat-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129759?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"b40e4658-fd68-46d0-9a89-25570a023d19",oracle_id:"c115159c-6991-4812-b3b6-6ed80221cab4",multiverse_ids:[669141],mtgo_id:129699,arena_id:91763,tcgplayer_id:558344,cardmarket_id:777696,name:"Muerra, Trash Tactician",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/b40e4658-fd68-46d0-9a89-25570a023d19",scryfall_uri:"https://scryfall.com/card/blb/227/muerra-trash-tactician?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",normal:"https://cards.scryfall.io/normal/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",large:"https://cards.scryfall.io/large/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",png:"https://cards.scryfall.io/png/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.png?1721427159",art_crop:"https://cards.scryfall.io/art_crop/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159",border_crop:"https://cards.scryfall.io/border_crop/front/b/4/b40e4658-fd68-46d0-9a89-25570a023d19.jpg?1721427159"},mana_cost:"{1}{R}{G}",cmc:3,type_line:"Legendary Creature — Raccoon Warrior",oracle_text:`At the beginning of your first main phase, add {R} or {G} for each Raccoon you control.
Whenever you expend 4, you gain 3 life. (You expend 4 as you spend your fourth total mana to cast spells during a turn.)
Whenever you expend 8, exile the top two cards of your library. Until the end of your next turn, you may play those cards.`,power:"2",toughness:"4",colors:["G","R"],color_identity:["G","R"],keywords:[],produced_mana:["G","R"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/b40e4658-fd68-46d0-9a89-25570a023d19/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Ac115159c-6991-4812-b3b6-6ed80221cab4&unique=prints",collector_number:"227",digital:!1,rarity:"rare",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Volkan Baǵa",artist_ids:["93bec3c0-0260-4d31-8064-5d01efb4153f"],illustration_id:"db3c96ee-2354-488a-8b8b-391549fee6f0",border_color:"black",frame:"2015",frame_effects:["legendary"],security_stamp:"oval",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9891,penny_rank:9223,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.17",usd_foil:"0.32",usd_etched:null,eur:"0.22",eur_foil:"0.32",tix:"0.02"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669141&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DMuerra%252C%2BTrash%2BTactician",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DMuerra%252C%2BTrash%2BTactician",edhrec:"https://edhrec.com/route/?cc=Muerra%2C+Trash+Tactician"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558344%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Muerra-Trash-Tactician?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129699?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"0d49b016-b02b-459f-85e9-c04f6bdcb94e",oracle_id:"177b7fe4-8565-4631-b4d9-8b2b4282f3ac",multiverse_ids:[669172],mtgo_id:129761,arena_id:91794,tcgplayer_id:558611,cardmarket_id:776463,name:"Oakhollow Village",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/0d49b016-b02b-459f-85e9-c04f6bdcb94e",scryfall_uri:"https://scryfall.com/card/blb/258/oakhollow-village?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",normal:"https://cards.scryfall.io/normal/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",large:"https://cards.scryfall.io/large/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",png:"https://cards.scryfall.io/png/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.png?1721639587",art_crop:"https://cards.scryfall.io/art_crop/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587",border_crop:"https://cards.scryfall.io/border_crop/front/0/d/0d49b016-b02b-459f-85e9-c04f6bdcb94e.jpg?1721639587"},mana_cost:"",cmc:0,type_line:"Land",oracle_text:`{T}: Add {C}.
{T}: Add {G}. Spend this mana only to cast a creature spell.
{G}, {T}: Put a +1/+1 counter on each Frog, Rabbit, Raccoon, or Squirrel you control that entered the battlefield this turn.`,colors:[],color_identity:["G"],keywords:[],produced_mana:["C","G"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/0d49b016-b02b-459f-85e9-c04f6bdcb94e/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A177b7fe4-8565-4631-b4d9-8b2b4282f3ac&unique=prints",collector_number:"258",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Julian Kok Joon Wen",artist_ids:["7f1868e3-325f-4df9-8f27-a381fed4f0fc"],illustration_id:"999d8162-2505-4203-b279-29c7b6ac9d19",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:3854,penny_rank:5265,prices:{usd:"0.24",usd_foil:"0.37",usd_etched:null,eur:"0.46",eur_foil:"0.61",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669172&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DOakhollow%2BVillage",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DOakhollow%2BVillage",edhrec:"https://edhrec.com/route/?cc=Oakhollow+Village"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558611%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Oakhollow-Village?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129761?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"3ff83ff7-e428-4ccc-8341-f223dab76bd1",oracle_id:"43a6de3e-152e-4af1-acec-53405742425c",multiverse_ids:[668977],mtgo_id:129371,arena_id:91599,tcgplayer_id:559143,cardmarket_id:778354,name:"Otterball Antics",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/3ff83ff7-e428-4ccc-8341-f223dab76bd1",scryfall_uri:"https://scryfall.com/card/blb/63/otterball-antics?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",normal:"https://cards.scryfall.io/normal/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",large:"https://cards.scryfall.io/large/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",png:"https://cards.scryfall.io/png/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.png?1721426185",art_crop:"https://cards.scryfall.io/art_crop/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185",border_crop:"https://cards.scryfall.io/border_crop/front/3/f/3ff83ff7-e428-4ccc-8341-f223dab76bd1.jpg?1721426185"},mana_cost:"{1}{U}",cmc:2,type_line:"Sorcery",oracle_text:`Create a 1/1 blue and red Otter creature token with prowess. If this spell was cast from anywhere other than your hand, put a +1/+1 counter on that creature. (Whenever you cast a noncreature spell, a creature with prowess gets +1/+1 until end of turn.)
Flashback {3}{U} (You may cast this card from your graveyard for its flashback cost. Then exile it.)`,colors:["U"],color_identity:["U"],keywords:["Flashback"],all_parts:[{object:"related_card",id:"3ff83ff7-e428-4ccc-8341-f223dab76bd1",component:"combo_piece",name:"Otterball Antics",type_line:"Sorcery",uri:"https://api.scryfall.com/cards/3ff83ff7-e428-4ccc-8341-f223dab76bd1"},{object:"related_card",id:"e6b2c465-c446-4dee-9101-763105dcf813",component:"token",name:"Otter",type_line:"Token Creature — Otter",uri:"https://api.scryfall.com/cards/e6b2c465-c446-4dee-9101-763105dcf813"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/3ff83ff7-e428-4ccc-8341-f223dab76bd1/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A43a6de3e-152e-4af1-acec-53405742425c&unique=prints",collector_number:"63",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Rhonda Libbey",artist_ids:["9b3fac11-04d4-4896-8005-ad255df63704"],illustration_id:"feedc4f1-639d-4917-b51a-d11279de6c71",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9727,penny_rank:7973,preview:{source:"CulturaPop",source_uri:"https://cpop.it/articoli/bozzamagic-the-gathering-vi-sveliamo-in-esclusiva-3-nuove-carte-di-bloomburrow",previewed_at:"2024-07-12"},prices:{usd:"0.11",usd_foil:"0.12",usd_etched:null,eur:"0.16",eur_foil:"0.38",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668977&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DOtterball%2BAntics",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DOtterball%2BAntics",edhrec:"https://edhrec.com/route/?cc=Otterball+Antics"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559143%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Otterball-Antics?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129371?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"1086e826-94b8-4398-8a38-d8eacca56a43",oracle_id:"367bb252-41e1-4f98-9d22-442dd332cccf",multiverse_ids:[668938],mtgo_id:129293,arena_id:91560,tcgplayer_id:558346,cardmarket_id:777550,name:"Parting Gust",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/1086e826-94b8-4398-8a38-d8eacca56a43",scryfall_uri:"https://scryfall.com/card/blb/24/parting-gust?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",normal:"https://cards.scryfall.io/normal/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",large:"https://cards.scryfall.io/large/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",png:"https://cards.scryfall.io/png/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.png?1721425901",art_crop:"https://cards.scryfall.io/art_crop/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901",border_crop:"https://cards.scryfall.io/border_crop/front/1/0/1086e826-94b8-4398-8a38-d8eacca56a43.jpg?1721425901"},mana_cost:"{W}{W}",cmc:2,type_line:"Instant",oracle_text:`Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)
Exile target nontoken creature. If the gift wasn't promised, return that card to the battlefield under its owner's control with a +1/+1 counter on it at the beginning of the next end step.`,colors:["W"],color_identity:["W"],keywords:["Gift"],all_parts:[{object:"related_card",id:"1086e826-94b8-4398-8a38-d8eacca56a43",component:"combo_piece",name:"Parting Gust",type_line:"Instant",uri:"https://api.scryfall.com/cards/1086e826-94b8-4398-8a38-d8eacca56a43"},{object:"related_card",id:"de0d6700-49f0-4233-97ba-cef7821c30ed",component:"token",name:"Fish",type_line:"Token Creature — Fish",uri:"https://api.scryfall.com/cards/de0d6700-49f0-4233-97ba-cef7821c30ed"}],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/1086e826-94b8-4398-8a38-d8eacca56a43/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A367bb252-41e1-4f98-9d22-442dd332cccf&unique=prints",collector_number:"24",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Nils Hamm",artist_ids:["c540d1fc-1500-457f-93cf-d6069ee66546"],illustration_id:"39a45dad-eb19-4807-bcc1-05fb6ab34f14",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:2975,penny_rank:690,preview:{source:"Wizards of the Coast",source_uri:"https://magic.wizards.com/en/products/bloomburrow/card-image-gallery",previewed_at:"2024-07-09"},prices:{usd:"0.52",usd_foil:"0.77",usd_etched:null,eur:"0.67",eur_foil:"0.59",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=668938&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DParting%2BGust",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DParting%2BGust",edhrec:"https://edhrec.com/route/?cc=Parting+Gust"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F558346%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Parting-Gust?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129293?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"8b900c71-713b-4b7e-b4be-ad9f4aa0c139",oracle_id:"77eb76cf-a361-44e0-aeee-e8ef4b695799",multiverse_ids:[669018],mtgo_id:129453,arena_id:91640,tcgplayer_id:559152,cardmarket_id:778324,name:"Persistent Marshstalker",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/8b900c71-713b-4b7e-b4be-ad9f4aa0c139",scryfall_uri:"https://scryfall.com/card/blb/104/persistent-marshstalker?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",normal:"https://cards.scryfall.io/normal/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",large:"https://cards.scryfall.io/large/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",png:"https://cards.scryfall.io/png/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.png?1721426469",art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469",border_crop:"https://cards.scryfall.io/border_crop/front/8/b/8b900c71-713b-4b7e-b4be-ad9f4aa0c139.jpg?1721426469"},mana_cost:"{1}{B}",cmc:2,type_line:"Creature — Rat Berserker",oracle_text:`This creature gets +1/+0 for each other Rat you control.
Threshold — Whenever you attack with one or more Rats, if seven or more cards are in your graveyard, you may pay {2}{B}. If you do, return this card from your graveyard to the battlefield tapped and attacking.`,power:"3",toughness:"1",colors:["B"],color_identity:["B"],keywords:["Threshold"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"not_legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"not_legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/8b900c71-713b-4b7e-b4be-ad9f4aa0c139/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3A77eb76cf-a361-44e0-aeee-e8ef4b695799&unique=prints",collector_number:"104",digital:!1,rarity:"uncommon",card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Greg Staples",artist_ids:["93d65564-bf00-447b-8406-e2031f03b6b1"],illustration_id:"a237732d-f932-4b8e-b709-78daee2f4254",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:6617,penny_rank:2551,preview:{source:"Good Games",source_uri:"https://twitter.com/GoodGamesMorley/status/1811604835357073487",previewed_at:"2024-07-12"},prices:{usd:"0.19",usd_foil:"0.19",usd_etched:null,eur:"0.11",eur_foil:"0.20",tix:"0.04"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669018&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPersistent%2BMarshstalker",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPersistent%2BMarshstalker",edhrec:"https://edhrec.com/route/?cc=Persistent+Marshstalker"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559152%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Persistent-Marshstalker?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129453?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}},{object:"card",id:"6bc4963c-d90b-4588-bdb7-85956e42a623",oracle_id:"efd2a4ca-1bd0-4762-a997-f099326b1746",multiverse_ids:[669103],mtgo_id:129623,arena_id:91725,tcgplayer_id:559069,cardmarket_id:778103,name:"Polliwallop",lang:"en",released_at:"2024-08-02",uri:"https://api.scryfall.com/cards/6bc4963c-d90b-4588-bdb7-85956e42a623",scryfall_uri:"https://scryfall.com/card/blb/189/polliwallop?utm_source=api",layout:"normal",highres_image:!0,image_status:"highres_scan",image_uris:{small:"https://cards.scryfall.io/small/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",normal:"https://cards.scryfall.io/normal/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",large:"https://cards.scryfall.io/large/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",png:"https://cards.scryfall.io/png/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.png?1721426903",art_crop:"https://cards.scryfall.io/art_crop/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903",border_crop:"https://cards.scryfall.io/border_crop/front/6/b/6bc4963c-d90b-4588-bdb7-85956e42a623.jpg?1721426903"},mana_cost:"{3}{G}",cmc:4,type_line:"Instant",oracle_text:`Affinity for Frogs (This spell costs {1} less to cast for each Frog you control.)
Target creature you control deals damage equal to twice its power to target creature you don't control.`,colors:["G"],color_identity:["G"],keywords:["Affinity"],legalities:{standard:"legal",future:"legal",historic:"legal",timeless:"legal",gladiator:"legal",pioneer:"legal",explorer:"legal",modern:"legal",legacy:"legal",pauper:"legal",vintage:"legal",penny:"not_legal",commander:"legal",oathbreaker:"legal",standardbrawl:"legal",brawl:"legal",alchemy:"legal",paupercommander:"legal",duel:"legal",oldschool:"not_legal",premodern:"not_legal",predh:"not_legal"},games:["paper","mtgo","arena"],reserved:!1,game_changer:!1,foil:!0,nonfoil:!0,finishes:["nonfoil","foil"],oversized:!1,promo:!1,reprint:!1,variation:!1,set_id:"a2f58272-bba6-439d-871e-7a46686ac018",set:"blb",set_name:"Bloomburrow",set_type:"expansion",set_uri:"https://api.scryfall.com/sets/a2f58272-bba6-439d-871e-7a46686ac018",set_search_uri:"https://api.scryfall.com/cards/search?order=set&q=e%3Ablb&unique=prints",scryfall_set_uri:"https://scryfall.com/sets/blb?utm_source=api",rulings_uri:"https://api.scryfall.com/cards/6bc4963c-d90b-4588-bdb7-85956e42a623/rulings",prints_search_uri:"https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aefd2a4ca-1bd0-4762-a997-f099326b1746&unique=prints",collector_number:"189",digital:!1,rarity:"common",flavor_text:`"We'll see who croaks first!"`,card_back_id:"0aeebaf5-8c7d-4636-9e82-8c27447861f7",artist:"Martin Wittfooth",artist_ids:["9f549ccf-d237-47c5-ab39-1b2bbbb164fc"],illustration_id:"37900963-bb1b-4bce-ac34-40b7414e3771",border_color:"black",frame:"2015",full_art:!1,textless:!1,booster:!0,story_spotlight:!1,edhrec_rank:9093,preview:{source:"Wizards of the Coast",source_uri:"",previewed_at:"2024-07-12"},prices:{usd:"0.07",usd_foil:"0.05",usd_etched:null,eur:"0.08",eur_foil:"0.18",tix:"0.03"},related_uris:{gatherer:"https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=669103&printed=false",tcgplayer_infinite_articles:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Farticles&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Farticles%3FproductLineName%3Dmagic%26q%3DPolliwallop",tcgplayer_infinite_decks:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&trafcat=tcgplayer.com%2Fsearch%2Fdecks&u=https%3A%2F%2Fwww.tcgplayer.com%2Fsearch%2Fdecks%3FproductLineName%3Dmagic%26q%3DPolliwallop",edhrec:"https://edhrec.com/route/?cc=Polliwallop"},purchase_uris:{tcgplayer:"https://partner.tcgplayer.com/c/4931599/1830156/21018?subId1=api&u=https%3A%2F%2Fwww.tcgplayer.com%2Fproduct%2F559069%3Fpage%3D1",cardmarket:"https://www.cardmarket.com/en/Magic/Products/Singles/Bloomburrow/Polliwallop?referrer=scryfall&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",cardhoarder:"https://www.cardhoarder.com/cards/129623?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"}}]},id:"shape:zl1iYinaSTusxcTrnVy6h",type:"geo",props:{w:500.0953054426425,h:91.40625,geo:"rectangle",color:"blue",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"draw",text:"Creature types mentioning X type",align:"middle",verticalAlign:"middle",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aY",typeName:"shape"},"shape:jIQsEjJyLEh7BCBBCqivj":{x:1400.2492169383665,y:653.8307636222987,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:jIQsEjJyLEh7BCBBCqivj",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ahG",props:{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{x:-1113.8098038020057,y:289.0509108560717},end:{x:-410.7149343111414,y:-82.22389489709667},arrowheadStart:"none",arrowheadEnd:"arrow",text:'() {return (new Function("from","to",to.m.code))(from,to)}',labelPosition:.5616629374646744,font:"draw"},typeName:"shape"},"binding:CkPpLFiNjfOdcqLo6_1lO":{meta:{},id:"binding:CkPpLFiNjfOdcqLo6_1lO",type:"arrow",fromId:"shape:jIQsEjJyLEh7BCBBCqivj",toId:"shape:zl1iYinaSTusxcTrnVy6h",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.8299612685432569,y:.6879362677975568},terminal:"start"},typeName:"binding"},"binding:zxDIk8uuWmsPwbCoXAj0h":{meta:{},id:"binding:zxDIk8uuWmsPwbCoXAj0h",type:"arrow",fromId:"shape:jIQsEjJyLEh7BCBBCqivj",toId:"shape:h05HZKPjaEsfYqteVi99Q",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.2673507430576348,y:.3053574759506754},terminal:"end"},typeName:"binding"},"binding:6ZnLmEg9Cx_8bR4F_7kDu":{meta:{},id:"binding:6ZnLmEg9Cx_8bR4F_7kDu",type:"arrow",fromId:"shape:M6g_yYso5Ryxpcdzp6OV6",toId:"shape:h05HZKPjaEsfYqteVi99Q",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.8351204059267388,y:.7667354138713036},terminal:"start"},typeName:"binding"},"shape:2LtAcxmPUBpcWZc6ooUud":{x:2100,y:1270,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:2LtAcxmPUBpcWZc6ooUud",type:"geo",props:{w:440,h:537.0051990710251,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"mono",text:`[
  {
    "x": 1110,
    "y": 670,
    "rotation": 0,
    "isLocked": false,
    "opacity": 1,
    "meta": {},
    "id": "shape:m-xojMmMRLD_6IZsnYWXG",
    "type": "geo",
    "props": {
      "w": 130,
      "h": 123.64046489434668,
      "geo": "rectangle",
      "color": "black",
      "labelColor": "black",
      "fill": "solid",
      "dash": "draw",
      "size": "m",
      "font": "mono",
      "text": "",
      "align": "start",
      "verticalAlign": "start",
      "growY": 0,
      "url": ""
    },
    "parentId": "page:HnBI1MXzS7DUbU6-1cPhY",
    "index": "ak",
    "typeName": "shape"
  },
  {
    "x": 1610,
    "y": 590,
    "rotation": 5.916666164260777,
    "isLocked": false,
    "opacity": 1,
    "meta": {},
    "id": "shape:HIahp1TOHo8RkVgpNK0pY",
    "type": "geo",
    "props": {
      "w": 77.52051872352831,
      "h": 158.5896350553245,
      "geo": "rectangle",
      "color": "red",
      "labelColor": "black",
      "fill": "solid",
      "dash": "draw",
      "size": "m",
      "font": "mono",
      "text": "",
      "align": "start",
      "verticalAlign": "start",
      "growY": 0,
      "url": ""
    },
    "parentId": "page:HnBI1MXzS7DUbU6-1cPhY",
    "index": "al",
    "typeName": "shape"
  }
]`,align:"start",verticalAlign:"start",growY:1485.1041759289749,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ai",typeName:"shape"},"shape:WBr9rnHl9TLEycTfWasU0":{x:1532.5129158800805,y:996.9672764010661,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:WBr9rnHl9TLEycTfWasU0",type:"arrow",parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"aj",props:{dash:"draw",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{x:0,y:0},end:{x:113.99649063146717,y:222.09661105785835},arrowheadStart:"none",arrowheadEnd:"arrow",text:"geo {text: JSON.stringify(G.getContains(from),null,2)}",labelPosition:.5,font:"mono"},typeName:"shape"},"binding:bSdCZUCnId0IgX2a1xqkJ":{meta:{},id:"binding:bSdCZUCnId0IgX2a1xqkJ",type:"arrow",fromId:"shape:WBr9rnHl9TLEycTfWasU0",toId:"shape:h05HZKPjaEsfYqteVi99Q",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5297377329737838,y:.5759305805423952},terminal:"start"},typeName:"binding"},"binding:XEQbM0jFC0yRYyiTKmkZp":{meta:{},id:"binding:XEQbM0jFC0yRYyiTKmkZp",type:"arrow",fromId:"shape:WBr9rnHl9TLEycTfWasU0",toId:"shape:2LtAcxmPUBpcWZc6ooUud",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.25497122844678505,y:.2159419453798532},terminal:"end"},typeName:"binding"},"shape:m-xojMmMRLD_6IZsnYWXG":{x:1110,y:670,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:m-xojMmMRLD_6IZsnYWXG",type:"geo",props:{w:130,h:123.64046489434668,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"mono",text:"",align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"ak",typeName:"shape"},"shape:HIahp1TOHo8RkVgpNK0pY":{x:1610,y:590,rotation:5.916666164260777,isLocked:!1,opacity:1,meta:{},id:"shape:HIahp1TOHo8RkVgpNK0pY",type:"geo",props:{w:77.52051872352831,h:158.5896350553245,geo:"rectangle",color:"red",labelColor:"black",fill:"solid",dash:"draw",size:"m",font:"mono",text:"",align:"start",verticalAlign:"start",growY:0,url:""},parentId:"page:HnBI1MXzS7DUbU6-1cPhY",index:"al",typeName:"shape"},"binding:sc8b-2W5lXYc6EgxhH0iA":{meta:{},id:"binding:sc8b-2W5lXYc6EgxhH0iA",type:"arrow",fromId:"shape:XYg91jvuY8Ml2xX1QVNE0",toId:"shape:oLTZ-sF4S5JFbs--dreCI",props:{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5475541032598615,y:.3459293396578573},terminal:"start"},typeName:"binding"}},schema:{schemaVersion:2,sequences:{"com.tldraw.store":4,"com.tldraw.asset":1,"com.tldraw.camera":1,"com.tldraw.document":2,"com.tldraw.instance":25,"com.tldraw.instance_page_state":5,"com.tldraw.page":1,"com.tldraw.instance_presence":5,"com.tldraw.pointer":1,"com.tldraw.shape":4,"com.tldraw.asset.bookmark":2,"com.tldraw.asset.image":3,"com.tldraw.asset.video":3,"com.tldraw.shape.group":0,"com.tldraw.shape.text":2,"com.tldraw.shape.bookmark":2,"com.tldraw.shape.draw":1,"com.tldraw.shape.geo":8,"com.tldraw.shape.note":6,"com.tldraw.shape.line":4,"com.tldraw.shape.frame":0,"com.tldraw.shape.arrow":4,"com.tldraw.shape.highlight":0,"com.tldraw.shape.embed":4,"com.tldraw.shape.image":3,"com.tldraw.shape.video":2,"com.tldraw.binding.arrow":0}}},Joe={version:0,currentPageId:"page:page",exportBackground:!0,isFocusMode:!1,isDebugMode:!0,isToolLocked:!1,isGridMode:!0,pageStates:[{pageId:"page:page",camera:{x:410.9008897848912,y:67.54581149787926,z:.7002744912900001},selectedShapeIds:[],focusedGroupId:null},{pageId:"page:HnBI1MXzS7DUbU6-1cPhY",camera:{x:828.6505200048493,y:117.48990433537382,z:.6634970924619396},selectedShapeIds:[],focusedGroupId:null}]},Qoe={document:Zoe,session:Joe};function eie(){return u.jsx("div",{className:"tldraw__editor",children:u.jsx(Aoe,{components:{MainMenu:Toe},onMount:tie,snapshot:Qoe.document,persistenceKey:"async-async-scoped-propagators"})})}function tie(e){window.editor=e,e.getStateDescendant("select.idle").handleDoubleClickOnCanvas=()=>{},Goe(e,[Voe,Koe,Yoe,Xoe])}i1.createRoot(document.getElementById("root")).render(u.jsx(eie,{}));
